---
title: Учебник по DOCKER. часть 5. Использование подключений привязки
description: Описывает использование подключений привязки для управления точкой подключения на узле.
ms.date: 08/04/2020
author: nebuk89
ms.author: ghogen
manager: jillfra
ms.technology: vs-azure
ms.topic: conceptual
ms.workload:
- azure
ms.openlocfilehash: 6474179a0714f2407ac37e724b997139206a91fb
ms.sourcegitcommit: c4212f40df1a16baca1247cac2580ae699f97e4c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/31/2020
ms.locfileid: "89176833"
---
# <a name="use-bind-mounts"></a>Использовать подключения BIND

В предыдущей главе вы узнали об **именованном томе** и использовали его для сохранения данных в базе данных. Именованные тома отлично подходят для хранения данных, так как вам не нужно беспокоиться о том, *где* хранятся данные.

С помощью **привязок BIND**можно управлять точностью точки подключения на узле. Его можно использовать для сохранения данных, но часто используется для предоставления дополнительных данных контейнерам. При работе с приложением можно использовать привязку привязки, чтобы подключить исходный код к контейнеру, чтобы он мог видеть изменения кода, реагировать и видеть изменения сразу же.

Для приложений на основе узлов [nodemon](https://npmjs.com/package/nodemon) — это отличное средство для отслеживания изменений в файлах и перезапуска приложения. В большинстве языков и платформ есть эквивалентные средства.

## <a name="quick-volume-type-comparisons"></a>Быстрые сравнения типов томов

Привязки и именованные тома — это два основных типа томов, входящих в подсистему DOCKER. Однако доступны дополнительные драйверы томов для поддержки других вариантов использования ([SFTP](https://github.com/vieux/docker-volume-sshfs), [ЦЕФ](https://ceph.com/geen-categorie/getting-started-with-the-docker-rbd-volume-plugin/), [NetApp](https://netappdvp.readthedocs.io/en/stable/), [S3](https://github.com/elementar/docker-s3-volume)и др.).

| Свойство | Именованные тома | Привязки подключений |
| -------- | ------------- | ----------- |
| Расположение узла | Выбор DOCKER | Вы управляете |
| Пример подключения (с использованием `-v` ) | Мой раздел:/usr/local/Data | /Пас/то/Дата:/УСР/локал/Дата |
| Заполняет новый том содержимым контейнера | Да | Нет |
| Поддерживает драйверы томов | Да | Нет |

## <a name="start-a-dev-mode-container"></a>Запуск контейнера режима разработки

Чтобы запустить контейнер для поддержки рабочего процесса разработки, выполните следующие действия.

- Подключение исходного кода в контейнер
- Установить все зависимости, включая зависимости "Dev"
- Запуск nodemon для отслеживания изменений файловой системы

1. Убедитесь, что у вас нет предыдущих `getting-started` контейнеров.

1. Выполните следующую команду (замените ` \ ` символы `` ` `` в в Windows PowerShell). Вы узнаете, что происходит позже:

    ```bash
    docker run -dp 3000:3000 \
        -w /app -v ${PWD}:/app \
        node:12-alpine \
        sh -c "yarn install && yarn run dev"
    ```

    - `-dp 3000:3000` — то же, что и раньше. Запустить в отключенном (фоновом) режиме и создать сопоставление портов
    - `-w /app` — Задает рабочий каталог или текущий каталог, из которого будет выполняться команда;
    - `-v ${PWD}:/app` -BIND подключает текущий каталог от узла в контейнере к `/app` каталогу
    - `node:12-alpine` — используемый образ. Обратите внимание, что это базовый образ для приложения из Dockerfile.
    - `sh -c "yarn install && yarn run dev"` — команда. Мы запускаем оболочку с помощью `sh` (для Alpine нет `bash` ) и выполняем, `yarn install` чтобы установить *все* зависимости, а затем запустить `yarn run dev` . Если взглянуть на `package.json` , мы увидим, что `dev` сценарий запускается `nodemon` .

1. Просмотреть журналы можно с помощью `docker logs -f <container-id>` . Вы будете готовы к работе, когда увидите следующее:

    ```bash
    docker logs -f <container-id>
    $ nodemon src/index.js
    [nodemon] 1.19.2
    [nodemon] to restart at any time, enter `rs`
    [nodemon] watching dir(s): *.*
    [nodemon] starting `node src/index.js`
    Using sqlite database at /etc/todos/todo.db
    Listening on port 3000
    ```

    По завершении просмотра журналов выйдите с помощью команды `Ctrl` + `C` .

1. Теперь внесите изменения в приложение. В `src/static/js/app.js` файле измените кнопку **Добавить элемент** , просто скажите **добавить**. Это изменение будет включено в строку 109.

    ```diff
    -                         {submitting ? 'Adding...' : 'Add Item'}
    +                         {submitting ? 'Adding...' : 'Add'}
    ```

1. Просто обновите страницу (или откройте ее), и вы увидите, что изменения будут отражены в браузере почти мгновенно. Перезапуск сервера узла может занять несколько секунд, поэтому при возникновении ошибки просто попробуйте выполнить обновление через несколько секунд.

    ![Снимок экрана с обновленной меткой для кнопки "Добавить"](media/updated-add-button.png)

1. Вы можете вносить любые другие изменения, которые вы хотите внести. Когда все будет готово, завершите работу контейнера и создайте новый образ с помощью `docker build -t getting-started .` .

Использование подключений BIND *очень* распространено для локальных настроек разработки. Преимущество заключается в том, что на компьютере разработки не обязательно должны быть установлены все средства и среды сборки. При использовании одной `docker run` команды среда разработки извлекается и становится готовой к работе. Вы узнаете о Docker Compose на следующем шаге, так как это поможет упростить команды (вы уже получаете множество флагов).

## <a name="recap"></a>Резюме

На этом этапе можно сохранить базу данных и быстро реагировать на потребности и основателей. Радостных! Но стоит ли предположить что? Вы получили отличные новости!

**Проект выбран для будущего разработки.**

Чтобы подготовиться к рабочей среде, необходимо перенести базу данных из рабочей среды в SQLite на что-то, которое может немного увеличить масштаб. Для простоты можно использовать реляционную базу данных и переключить приложение на использование MySQL. Но как запустить MySQL? Как разрешить контейнерам взаимодействовать друг с другом? Вы узнаете о следующем.

## <a name="next-steps"></a>Дальнейшие действия

Продолжайте работу с руководством.

> [!div class="nextstepaction"]
> [Создание многоконтейнерного приложения](multi-container-apps.md)