---
title: Листы стиля Debug XSLT
ms.date: 03/05/2019
ms.topic: conceptual
ms.assetid: 3db9fa5a-f619-4cb6-86e7-64b364e58e5d
author: TerryGLee
ms.author: tglee
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: cd5882cc606bf241a281940464ba028e77986807
ms.sourcegitcommit: 95f26af1da51d4c83ae78adcb7372b32364d8a2b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "79300945"
---
# <a name="walkthrough-debug-an-xslt-style-sheet"></a>Прохождение: Отладить лист стиля XSLT

Шаги в данном пошаговом руководстве демонстрируют, как использовать XSLT-отладчик. Шаги включают просмотр переменных, задание точек останова и пошаговое прохождение кода. Отладчик позволяет выполнять код по одной строке за раз.

Чтобы подготовиться к этому пошаговому шагу, сначала скопируйте два [примера файлов](#sample-files) на местный компьютер. Одним из них является лист стиля, а один — файл XML, который мы будем использовать в качестве ввода в лист стиля. В этом пошаговом руководстве, стиль листа мы используем находит все книги, стоимость которых ниже средней цены книги.

> [!NOTE]
> Отладчик XSLT доступен только в корпоративном издании Visual Studio.

## <a name="start-debugging"></a>Начать отладку

1. Из меню **файла** выберите **Открытый** > **файл**.

2. Найдите файл *ниже среднего.xsl* и выберите **Open.**

   Лист стиля открывается в редакторе XML.

3. Нажмите кнопку просмотра **(...)** на поле **ввода** окна свойств документа. (Если окно **Свойства** не видно, нажмите в любом месте на открытом файле в редакторе, а затем выберите **Свойства**.)

4. Найдите файл *books.xml,* а затем выберите **Open**.

   Это устанавливает исходный файл документа, который используется для преобразования XSLT.

5. Установите [точку разрыва](../debugger/using-breakpoints.md) на линии 12 *ниже среднего.xsl*. Вы можете сделать это одним из нескольких способов:

   - Нажмите на полях редактора на линии 12.

   - Нажмите в любом месте на линии 12, а затем нажмите **F9**.

   - Нажмите правой `xsl:if` кнопкой кнопку "Начало" и выберите**Breakpoint Breakpoint Breakpoint.** **Breakpoint** > 

      ![Вставьте точку разрыва в файле XSL в Visual Studio](media/insert-breakpoint.PNG)

6. В панели меню выберите **XML** > **Start XSLT Debugging** (или, нажмите **Alt**+**F5).**

   Начинается процесс отладки.

   В редакторе отладчик расположен на `xsl:if` элементе листа стиля. В редакторе открывается другой *файл, названный ниже среднего.xml;* это файл вывода, который будет заселен при обработке каждого узла в файле *ввода.xml.*

   **Автомобили**, **Местные жители**, и **Смотреть 1** окна появляются в нижней части окна Visual Studio. Окно **Locals** отображает все локальные переменные и их текущие значения. Сюда относятся переменные, определенные в таблице стиля, а также переменные, используемые отладчиком для отслеживания узлов, которые в настоящий момент находятся в контексте.

## <a name="watch-window"></a>Контрольные значения - окно

Мы добавим две переменные в окно **Watch 1,** чтобы мы могли изучить их значения по мере обработки файла ввода. (Вы также можете использовать окно **Locals** для изучения значений, если переменные, которые вы хотите посмотреть, уже есть.)

1. Из меню **Debug** выберите **часы Windows** > **Watch** > **1**.

   Окно **Watch 1** становится видимым.

2. Введите `$bookAverage` поле **имени,** а затем нажмите **Enter**.

   Значение `$bookAverage` переменных отображается в поле **значения.**

3. На следующей строке введите `self::node()` поле **Name,** а затем нажмите **Enter**.

   `self::node()`— это выражение XPath, которое оценивает текущий узлы контекста. Значение `self::node()` выражения XPath является первым узлом книги. Оно меняется по мере прохождения преобразования.

4. Расширьте `self::node()` узла, а затем расширьте значение `price`узла.

   ![Смотреть окно во время отладки XSLT в Visual Studio](media/xslt-debugging-watch-window.png)

   Вы можете увидеть значение книжной цены для текущего книжного узла и сравнить его со значением. `$bookAverage` Поскольку цена книги ниже `xsl:if` средней, условие должно быть успешным при продолжении процесса отладки.

## <a name="step-through-the-code"></a>Шаг через код

1. Нажмите клавишу **F5**, чтобы продолжить.

   Поскольку первый книжный `xsl:if` узла удовлетворяет условие, книжный узла добавляется в файл *ниже среднего.xml.* Отладчик продолжает выполнение, пока не будет вновь достигнут элемент `xsl:if` в таблице стилей. Отладчик теперь расположен на втором книжном узло в файле *books.xml.*

   В окне **Watch** `self::node()` 1 значение изменяется ко второму книжному узло. Проверив значение элемента цены, можно определить, что цена выше средней; таким образом, условие `xsl:if` не выполняется.

2. Нажмите клавишу **F5**, чтобы продолжить.

   Поскольку второй узел книги `xsl:if` не соответствует состоянию, узел книги не добавляется в выходной файл *ниже среднего.xml.* Отладчик продолжает выполнятьдок до тех пор, `xsl:if` пока он снова не будет расположен на элементе листа стилей. Теперь отладчик расположен на `book` третьем узло в файле *books.xml.*

   В окне **Watch** `self::node()` 1 значение изменяется к третьему книжному узло. Изучая значение элемента, `price` можно определить, что цена ниже средней. Условие `xsl:if` должно быть успешным.

3. Нажмите клавишу **F5**, чтобы продолжить.

   Поскольку `xsl:if` условие было удовлетворено, третья книга добавляется в файл *ниже среднего.xml* выходного файла. Все книги в XML-документе обработаны, отладчик прекращает выполнение.

## <a name="sample-files"></a>Файлы с примерами

В этом пошаговом руководстве используются следующие два файла.

### <a name="below-averagexsl"></a>ниже среднего.xsl

```xml
<?xml version='1.0'?>
<xsl:stylesheet version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" encoding="utf-8"/>
  <xsl:template match="/">
    <xsl:variable name="bookCount" select="count(/bookstore/book)"/>
    <xsl:variable name="bookTotal" select="sum(/bookstore/book/price)"/>
    <xsl:variable name="bookAverage" select="$bookTotal div $bookCount"/>
    <books>
      <!--Books That Cost Below Average-->
      <xsl:for-each select="/bookstore/book">
        <xsl:if test="price &lt; $bookAverage">
          <xsl:copy-of select="."/>
        </xsl:if>
      </xsl:for-each>
    </books>
  </xsl:template>
</xsl:stylesheet>
```

### <a name="booksxml"></a>books.xml

```xml
<?xml version='1.0'?>
<!-- This file represents a fragment of a book store inventory database -->
<bookstore>
  <book genre="autobiography" publicationdate="1981" ISBN="1-861003-11-0">
    <title>The Autobiography of Benjamin Franklin</title>
    <author>
      <first-name>Benjamin</first-name>
      <last-name>Franklin</last-name>
    </author>
    <price>8.99</price>
  </book>
  <book genre="novel" publicationdate="1967" ISBN="0-201-63361-2">
    <title>The Confidence Man</title>
    <author>
      <first-name>Herman</first-name>
      <last-name>Melville</last-name>
    </author>
    <price>11.99</price>
  </book>
  <book genre="philosophy" publicationdate="1991" ISBN="1-861001-57-6">
    <title>The Gorgias</title>
    <author>
      <name>Plato</name>
    </author>
    <price>9.99</price>
  </book>
</bookstore>
```

## <a name="see-also"></a>См. также раздел

- [Отладка XSLT](../xml-tools/debugging-xslt.md)
