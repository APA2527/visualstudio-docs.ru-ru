---
title: Управление npm-пакетами
description: Visual Studio позволяет управлять пакетами с помощью диспетчера пакетов Node.js (npm)
ms.custom: seodec18
ms.date: 03/12/2020
ms.topic: conceptual
ms.devlang: javascript
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- JavaScript
ms.workload:
- nodejs
ms.openlocfilehash: dba657d30eedef26337c708e7ede6c5ab85ed4cc
ms.sourcegitcommit: 2975d722a6d6e45f7887b05e9b526e91cffb0bcf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2020
ms.locfileid: "79549956"
---
# <a name="manage-npm-packages-in-visual-studio"></a>Управление пакетами npm в Visual Studio

npm позволяет устанавливать пакеты для приложений Node.js и управлять ими. Visual Studio позволяет легко взаимодействовать с npm и использовать команды npm через пользовательский интерфейс или напрямую. Если вы не знакомы с npm и хотите узнать больше, перейдите на страницу [документации npm](https://docs.npmjs.com/).

Интеграция Visual Studio с npm зависит от типа проекта.
* [Node.js](#nodejs-projects)
* [ASP.NET Core](#aspnet-core-projects)
* [Открытие папки (Node.js)](../javascript/develop-javascript-code-without-solutions-projects.md)

> [!Important]
> npm ожидает найти папку *node_modules* и файл *package.json* в корневом каталоге проекта. Если структура папок вашего приложения отличается, ее можно изменить, чтобы управлять пакетами npm с помощью Visual Studio.

> [!NOTE]
> Чтобы включить npm в существующем проекте Node.js, используйте шаблон решения **Из существующего кода Node.js**.

## <a name="nodejs-projects"></a>Проекты Node.js

Для проектов Node.js используйте один из следующих методов.
* [Установка пакетов из обозревателя решений](#npmInstallWindow)
* [Управление установленными пакетами из обозревателя решений](#solutionExplorer)
* [Использование команды `.npm` в интерактивном окне Node.js](#interactive)

Эти функции работают вместе и синхронизируются с системой проекта и файлом *package.json* в проекте.

### <a name="install-packages-from-solution-explorer-nodejs"></a><a name="npmInstallWindow"></a> Установка пакетов из обозревателя решений (Node.js)

Самый простой способ установить пакеты npm в проекты Node.js — через окно установки пакетов npm. Чтобы открыть это окно, щелкните правой кнопкой мыши узел **npm** в проекте и выберите пункт **Установить новые пакеты npm**.

![Установка нового пакета npm из обозревателя решений](../javascript/media/solution-explorer-install-package.png)

В этом окне можно найти пакет, указать параметры и установить пакет.

![Поиск пакета npm](../javascript/media/search-package.png)

* **Тип зависимости** — выберите **Стандартный**, **Разработка** или **Необязательный**. Вариант "Стандартный" означает, что пакет является зависимостью среды выполнения, а вариант "Разработка" указывает, что пакет необходим только во время разработки.
* **Добавить в package.json** — этот параметр устарел
* **Выбранная версия** — выберите версию пакета, который вы хотите установить.
* **Другие аргументы npm** — укажите другие стандартные аргументы npm. Вы можете указать значение версии, например `@~0.8`, чтобы установить определенную версию, которая недоступна в списке версий.

Ход выполнения установки отображается в выходных данных **npm** в окне **вывода**. Это может занять некоторое время.

![Выходные данные npm](../javascript/media/npm-output.png)

> [!TIP]
> Если вы хотите найти пакеты с заданной областью, добавьте в начало поискового запроса нужную область, например, введите `@types/mocha`, чтобы искать файлы определений TypeScript для mocha. Кроме того, при установке определений типов для TypeScript можно указать целевую версию TypeScript, добавив `@ts2.6` в поле аргумента npm.

### <a name="manage-installed-packages-in-solution-explorer-nodejs"></a><a name="solutionExplorer"></a>Управление установленными пакетами из обозревателя решений (Node.js)

Пакеты npm отображаются в обозревателе решений. Записи в узле **npm** повторяют зависимости в файле *package.json*.

![Поиск пакета npm](../javascript/media/solution-explorer-status.png)

### <a name="package-status"></a>Состояние пакета

* ![Установленный пакет](../javascript/media/installed-npm.png) — установлен и указан в package.json
* ![Лишний пакет](../javascript/media/extraneous-npm.png) — установлен, но явно не указан в файле package.json
* ![Отсутствующий пакет](../javascript/media/missing-npm.png) — не установлен, но указан в package.json

Щелкните правой кнопкой мыши узел пакета или узел **npm** и выполните одно из следующих действий:
* **Установите отсутствующие пакеты**, указанные в *package.json*
* **Обновите пакеты** до последней версии
* **Удалите пакет** и исключите его из *package.json*

### <a name="use-the-npm-command-in-the-nodejs-interactive-window-nodejs"></a><a name="interactive"></a>Использование команды .npm в интерактивном окне Node.js (Node.js)

Вы также можете использовать команду `.npm` в интерактивном окне Node.js для выполнения команды npm. Чтобы открыть окно, в обозревателе решений щелкните проект правой кнопкой мыши и выберите пункт **Открыть интерактивное окно Node.js**.

В этом окне вы можете использовать следующие команды для установки пакета:

`.npm install azure@4.2.3`

 > [!Tip]
 > По умолчанию npm будет выполняться в домашнем каталоге проекта. Если у вас несколько проектов в решении, укажите имя или путь к проекту в квадратных скобках.
 > `.npm [MyProjectNameOrPath] install azure@4.2.3`

 > [!Tip]
 > Если проект не содержит файл package.json, используйте `.npm init -y`, чтобы создать файл package.json со значениями по умолчанию.

 ## <a name="aspnet-core-projects"></a>Проекты ASP.NET Core

Поддержку npm можно интегрировать, например, в проекты ASP.NET Core, и использовать npm для установки пакетов.
* [Добавление поддержки npm в проект](#npmAdd)
* [Установка пакетов с помощью файла package.json](#npmInstallPackage)

>[!NOTE]
> Для установки клиентских файлов JavaScript и CSS в проектах ASP.NET Core вместо npm можно также использовать [диспетчер библиотек](https://docs.microsoft.com/aspnet/core/client-side/libman/?view=aspnetcore-3.1) или yarn.

### <a name="add-npm-support-to-a-project-aspnet-core"></a><a name="npmAdd">Добавление поддержки npm в проект (ASP.NET Core)</a>

Если в проекте еще нет файла *package.json*, добавьте его, чтобы включить поддержку npm.

1. Чтобы добавить файл, щелкните правой кнопкой мыши проект в обозревателе решений и последовательно выберите **Добавить** > **Новый элемент**. Выберите **Файл конфигурации NPM**, оставьте имя по умолчанию и нажмите кнопку **Добавить**.

   ![Добавление файла package.json в проект](../javascript/media/npm-add-package-json.png)

1. Включите один или несколько пакетов npm в раздел `dependencies` или `devDependencies` файла *package.json*. Например, в файл можно добавить следующие пакеты:

   ```json
   "devDependencies": {
      "gulp": "4.0.2",
      "@types/jquery": "3.3.33"
   }
   ```

При сохранении файла Visual Studio добавляет пакет в узел **Зависимости / npm** в обозревателе решений. Если узел не отображается, щелкните правой кнопкой мыши файл **package.json** и выберите пункт **Восстановить пакеты**.

>[!NOTE]
> В некоторых сценариях в обозревателе решений может быть указано, что пакет npm не синхронизирован с файлом *package.json* из-за известной проблемы, описанной [здесь](https://github.com/aspnet/Tooling/issues/479). Например, при установке пакет может отображаться как неустановленный. В большинстве случаев обозреватель решений можно обновить, удалив файл *package.json*, перезапустив Visual Studio и повторно добавив файл *package.json*, как описано выше в этой статье.

### <a name="install-packages-using-packagejson-aspnet-core"></a><a name="npmInstallPackage"></a>Установка пакетов с помощью файла package.json (ASP.NET Core)

В проектах, уже содержащих npm, можно настроить пакеты npm с помощью `package.json`. Щелкните правой кнопкой мыши узел npm в обозревателе решений и выберите **Открыть файл package.json**.

![Поиск пакета npm](../javascript/media/npm-add-package.png)

IntelliSense в *package.json* помогает выбрать конкретную версию пакета npm.

![Поиск пакета npm](../javascript/media/npm-add-package-intellisense.png)

При сохранении файла Visual Studio добавляет пакет в узел **Зависимости / npm** в обозревателе решений. Если узел не отображается, щелкните правой кнопкой мыши файл **package.json** и выберите пункт **Восстановить пакеты**.

Установка пакета может занять несколько минут. Проверьте ход установки пакета, перейдя к выходным данным **npm** в окне **вывода**.

![Выходные данные npm](../javascript/media/npm-output.png)

