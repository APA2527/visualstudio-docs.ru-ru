---
title: Рекомендации по реализации подключаемого модуля системы управления версиями | Документация Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- source control plug-ins, best practices
- best practices, source control plug-ins
- source control [Visual Studio SDK], plug-ins
ms.assetid: 85e73b73-29dc-464f-8734-ed308742c435
author: madskristensen
ms.author: madsk
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 89bc4065a450f82b3cdec33e94f4e17ea700d3c7
ms.sourcegitcommit: 40d612240dc5bea418cd27fdacdf85ea177e2df3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "66352210"
---
# <a name="best-practices-for-implementing-a-source-control-plug-in"></a>Рекомендации по реализации подключаемого модуля системы управления версиями
Следующие технические подробности позволяют надежно обеспечить подключаемый модуль системы управления версиями [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)].

## <a name="memory-management-issues"></a>По вопросам управления памяти
 В большинстве случаев интегрированную среду разработки (IDE), которая является вызывающим объектом, освобождает и выделяет память. Подключаемый модуль системы управления версиями возвращает строки и другие элементы в буферы, выделенные вызывающим объектом. Исключения указаны в описания конкретных функций, где они возникают.

## <a name="arrays-of-file-names"></a>Массив имен файлов
 Если передается массив файлов, не будет передано как непрерывный массив имен файлов. Будет передано как массив указателей на имена файлов. Например, в [SccGet](../extensibility/sccget-function.md), имена файлов, передаются по `lpFileNames` параметр, где `lpFileNames` является указателем на `char **`. `lpFileNames`[0] представляет собой указатель на имя, `lpFileNames`[1] — это указатель на имя второго и т. д.

## <a name="large-model"></a>Большая модель
 Все указатели являются 32 бита, даже в 16-разрядных операционных системах.

## <a name="fully-qualified-paths"></a>Полные пути
 Где имена файлов или каталогов указываются в виде аргументов, они должны быть полные пути или UNC-пути, без окончания обратных косых черт. Он отвечает системы управления версиями, подключаемый модуль для преобразования их относительные пути, если это требование для базовой системы управления версиями.

## <a name="specify-a-fully-qualified-path-for-the-registered-dll"></a>Укажите полный URL-адрес для зарегистрированной библиотеки DLL
 Интегрированная среда разработки больше не загружает библиотеки DLL из относительных путей (к примеру, *.\NewProvider.dll*). Должен быть указан полный путь к DLL (например, *C:\Providers\NewProvider.dll*). Это требование повышает безопасность интегрированной среды разработки, предотвращая загрузку элемента управления источником несанкционированного или олицетворяемые библиотеки DLL.

## <a name="check-for-an-existing-vssci-plug-in-when-you-install-your-source-control-plug-in"></a>Проверяет наличие существующих VSSCI подключаемый модуль при установке подключаемого модуля системы управления версиями
 Пользователь, который планируется установить подключаемый модуль системы управления версиями возможно уже существующей системы управления версиями подключаемого модуля на компьютере. Программа установки (программа установки) для подключаемого модуля, создаваемые должен определить наличие существующих значений для ключей реестра. Если эти ключи уже заданы, программы установки должен запрашивать пользователя для регистрации подключаемого модуля в качестве подключаемого модуля управления версиями по умолчанию и заменить уже установлен.

## <a name="error-result-codes-and-reporting"></a>Результат коды ошибок и создания отчетов
 `SCC_OK` Возвращаемое код функции элемента управления источника указывает, что операция завершилась успешно для всех файлов. Если операция завершается ошибкой, ожидается возвращать последний код ошибки.

 Правило для создания отчетов — это, что при возникновении ошибки в интегрированной среде разработки, интегрированной среды разработки отвечает за отчеты о ней. Если произошла ошибка в системе управления версиями, подключаемый модуль системы управления версиями несет ответственность за отчеты о ней. Например **нет файлов, выбранных в данный момент** должны выводиться в интегрированной среде разработки, тогда как **этот файл уже извлечен** должны выводиться подключаемым модулем.

## <a name="the-context-structure"></a>Структура контекста
 При вызове [SccInitialize](../extensibility/sccinitialize-function.md), вызывающий объект передает `ppvContext` параметр, который является дескриптором неинициализированным на void. Подключаемый модуль системы управления версиями можно пропустить этот параметр или его можно выделить структуру любого типа, а указатель к этой структуре в переданный указатель. Интегрированная среда разработки не поддерживает эту структуру, но он передает указатель на структуру в каждый вызов в подключаемом модуле. Это предоставляет сведения о кэше ценный контекст для подключаемого модуля, что можно использовать для отслеживания сведений о глобальное состояние, сохраняющиеся вызовы функций без использования глобальных переменных. Подключаемый модуль отвечает за освобождение структуры во время вызова [SccUninitialize](../extensibility/sccuninitialize-function.md).

 Если подключаемый модуль наборы `SCC_CAP_REENTRANT` бит в [SccInitialize](../extensibility/sccinitialize-function.md) (в частности, в `lpSccCaps` параметр), несколько структур контекста используются для отслеживания всех проектов, которые открыты.

## <a name="bitflags-and-other-command-options"></a>Битовые флаги и другие параметры команды
 Для каждой команды такие как [SccGet](../extensibility/sccget-function.md), интегрированной среды разработки можно задать множество параметров, которые изменяют поведение команды.

 API-Интерфейс поддерживает установку определенных параметров с интегрированной средой разработки через `fOptions` параметра. Эти параметры описаны в [битовые флаги, используемые конкретными командами](../extensibility/bitflags-used-by-specific-commands.md) вместе с командами, которые они влияют на. Как правило это параметры, для которых бы не запрашивать пользователя.

 Наиболее пользовательских настроек параметра не определены таким образом, так как они весьма разными подключаемых модулей системы управления версиями. Таким образом, является рекомендуемым механизмом **Дополнительно** кнопки. Например, в **получить** диалоговом окне интегрированной среды разработки отображаются только сведения, которые она понимает, но он также отображает **Дополнительно** кнопку, если подключаемый модуль содержит параметры для этой команды. Когда пользователь щелкает **Дополнительно** вызовы интегрированной среды разработки, кнопку [SccGetCommandOptions](../extensibility/sccgetcommandoptions-function.md) включить систему управления версиями, подключаемый модуль для запроса у пользователя сведения, такие как битовые флаги или даты и времени. Подключаемый модуль возвращает эту информацию в структуре, которая передается обратно во время `SccGet` команды.

## <a name="see-also"></a>См. также
- [Подключаемых модулей системы управления версиями](../extensibility/source-control-plug-ins.md)
- [Создание подключаемого модуля системы управления версиями](../extensibility/internals/creating-a-source-control-plug-in.md)