---
title: Функция SccaddFromScc Документы Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
f1_keywords:
- SccAddFromScc
helpviewer_keywords:
- SccAddFromScc function
ms.assetid: 902e764d-200e-46e1-8c42-4da7b037f9a0
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 1dd32e31330cdce958e463a40a4d92f88b09afb2
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80701249"
---
# <a name="sccaddfromscc-function"></a>Функция SccaddFromScc
Эта функция позволяет пользователю просматривать файлы, которые уже находятся в системе управления исходным источником, и впоследствии сделать эти файлы частью текущего проекта. Например, эта функция может получить общий файл заголовка в текущий проект без копирования файла. Набор возвратов файлов `lplpFileNames`содержит список файлов, которые пользователь хочет добавить в проект IDE.

## <a name="syntax"></a>Синтаксис

```cpp
SCCRTN SccAddFromScc (
   LPVOID   pvContext,
   HWND     hWnd,
   LPLONG   lpnFiles,
   LPCSTR** lplpFileNames
);
```

### <a name="parameters"></a>Параметры
 pvКонтекст

(в) Структура контекста управления исходным элементом.

 Hwnd

(в) Ручка к окну IDE, которую плагин управления исходным элементом может использоваться в качестве родительского элемента для любых диалоговых коробок, которые она предоставляет.

 lpnFiles

(в, вне) Буфер для числа файлов, которые добавляются. (Это `NULL` если память, на `lplpFileNames` которую указывается, должна быть выпущена. Подробнее смотрите замечания.)

 lplpFileNames

(в, вне) Массив указателей на все имена файлов без путей каталога. Этот массив выделяется и освобождается плагином управления исходным ключом. Если `lpnFiles` No `lplpFileNames` 1 `NULL`и не является, то имя `lplpFileNames` в массиве, на который указывается, содержит папку назначения.

## <a name="return-value"></a>Возвращаемое значение
 Ожидается, что внедрение этой функции элемента управления исходным элементом вернет одно из следующих значений:

|Значение|Описание|
|-----------|-----------------|
|SCC_OK|Файлы были успешно обнаружены и добавлены в проект.|
|SCC_I_OPERATIONCANCELED|Операция была отменена без каких-либо последствий.|
|SCC_I_RELOADFILE|Файл или проект необходимо перезагрузить.|

## <a name="remarks"></a>Примечания
 IDE вызывает эту функцию. Если подключаемый плагин управления исходным кодом указывает `lpnFiles` папку локального назначения, `lplpFileNames`IDE проходит 1 и передает имя локальной папки в.

 Когда `SccAddFromScc` вызов функции возвращается, плагин присвоил `lpnFiles` значения `lplpFileNames`и, выделяя память для массива имя файла по `lplpFileNames`мере необходимости (обратите внимание, что это распределение заменяет указатель в). Плагин управления исходным элементом отвечает за размещение всех файлов в каталоге пользователя или в указанной папке обозначения. Затем IDE добавляет файлы в проект IDE.

 Наконец, IDE вызывает эту функцию `NULL` во `lpnFiles`второй раз, проходя в для . Это интерпретируется как специальный сигнал плагином управления исходным элементом для выпуска памяти, выделенной для массива файлового имени в`lplpFileNames``.`

 `lplpFileNames`указатель. `char ***` Элемент управления исходным элементом помещает указатель на массив указателей для файла имен, таким образом, передавая список стандартным способом для этого API.

> [!NOTE]
> Первоначальные версии API VSSCI не предусматривали способ указания целевого проекта для добавленных файлов. Для этого семантика `lplpFIleNames` параметра была улучшена, чтобы сделать его параметром в/выйти, а не параметр вывода. Если указан только один файл, то есть значение, на которое `lpnFiles` указывает `lplpFileNames` сяртов1, то первый элемент содержит папку-мишень. Чтобы использовать эти новые семантики, `nOption`IDE `SCC_OPT_SHARESUBPROJ`вызывает функцию `SccSetOption` с набором параметра. Если плагин управления исходным источником не поддерживает семантику, он возвращается. `SCC_E_OPTNOTSUPPORTED` Это отскакивает от использования функции **Добавить из функции управления исходным управлением.** Если плагин поддерживает функцию **Добавить от управления исходным** элементом`SCC_CAP_ADDFROMSCC`(), `SCC_I_SHARESUBPROJOK`то он должен поддерживать новую семантику и возвращаться.

## <a name="see-also"></a>См. также
- [Функции API управления исходным элементом](../extensibility/source-control-plug-in-api-functions.md)
- [SccSetOption](../extensibility/sccsetoption-function.md)
