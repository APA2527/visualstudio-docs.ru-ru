---
title: Создание пользовательских шаблонов проектов и элементов | Документация Майкрософт
ms.date: 3/16/2019
ms.topic: overview
ms.assetid: 586da5dc-f678-402b-afd0-0332959fd7a6
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 5c702aaaa51d86e2b8aac18a6b55201be03a635f
ms.sourcegitcommit: 05487d286ed891a04196aacd965870e2ceaadb68
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85903321"
---
# <a name="create-custom-project-and-item-templates"></a>Создание пользовательских шаблонов проектов и элементов

Пакет SDK для Visual Studio включает шаблоны проектов, которые создают пользовательский шаблон проекта и пользовательский шаблон элемента. Эти шаблоны включают в себя некоторые общие подстановки параметров и создаются в виде ZIP-файлов. Они не развертываются автоматически и недоступны в экспериментальном экземпляре. Необходимо скопировать созданный ZIP-файл в каталог пользовательских шаблонов.

Шаблоны создания шаблонов позволяют включать шаблоны в более крупные расширения. Это позволяет реализовать управление версиями в исходных файлах и создать группу проектов шаблонов в одном пакете VSIX.

Кроме того, можно настроить шаблон для установки пакетов NuGet. Дополнительные сведения см. [в разделе пакеты NuGet в шаблонах Visual Studio](/nuget/visual-studio-extensibility/visual-studio-templates).

Для основных сценариев создания шаблонов следует использовать мастер **экспорта шаблонов** , который выводит данные в сжатый файл. Дополнительные сведения о создании базового шаблона см. в разделе [Создание шаблонов проектов и элементов](../ide/creating-project-and-item-templates.md).

> [!NOTE]
> Начиная с Visual Studio 2017, поиск пользовательских шаблонов проектов и элементов больше не будет выполняться. Вместо этого расширение должно предоставлять файлы манифеста шаблона, описывающие расположение установки этих шаблонов. Для обновления расширений VSIX можно использовать Visual Studio 2017. При развертывании расширения с помощью MSI необходимо создать файлы манифеста шаблона вручную. Дополнительные сведения см. в статье [Обновление пользовательских шаблонов проектов и элементов для Visual Studio 2017](../extensibility/upgrading-custom-project-and-item-templates-for-visual-studio-2017.md). Схема манифеста шаблона описана в [справочнике по схеме манифеста шаблона Visual Studio](../extensibility/visual-studio-template-manifest-schema-reference.md).

## <a name="create-a-project-template"></a>Создание шаблона проекта

1. Создайте проект шаблона проекта. Шаблон проекта можно найти в диалоговом окне **Новый проект** , выполнив поиск по слову "шаблон проекта" и выбрав версию C# или Visual Basic.

     Шаблон создает файл класса, значок, *VSTEMPLATE* -файл, редактируемый файл проекта с именем *ProjectTemplate. vbproj* или *ProjectTemplate. csproj*, а также некоторые файлы, которые обычно создаются другими типами проектов, такими как файл *ресурсов. resx* , файл *AssemblyInfo* и файл *. Settings* . Каждый файл кода содержит общие подстановки параметров, если это уместно.

![Выбор проекта шаблона проекта](media/project-template-selection.png)

2. Добавление и удаление элементов проекта в соответствии с требованиями проекта. Не удаляйте файл редактируемого проекта, файл *AssemblyInfo* или *VSTEMPLATE* .

3. Обновите файл *VSTEMPLATE* , чтобы отразить все добавления и удаления. Элемент [проекта](../extensibility/project-element-visual-studio-templates.md) должен содержать элемент [ProjectItem](../extensibility/projectitem-element-visual-studio-item-templates.md) для каждого файла, включаемого в шаблон.

4. Измените файлы кода и другое содержимое, доступное для пользователя, и добавьте соответствующие подстановки параметров.

5. При необходимости измените созданное содержимое.

6. Выполните построение проекта.

     Visual Studio создает *ZIP* -файл, содержащий шаблон. Он не развернут и недоступен в экспериментальном экземпляре.

## <a name="create-an-item-template"></a>Создание шаблона элемента

1. Создайте проект шаблона элемента.

     Шаблон создает файл класса, значок, *VSTEMPLATE* -файл и файл *AssemblyInfo* . Файл класса содержит некоторые общие подстановки параметров.

2. Добавление и удаление элементов проекта в соответствии с требованиями проекта.

3. Обновите файл *VSTEMPLATE* , чтобы отразить все добавления и удаления. Элемент [проекта](../extensibility/project-element-visual-studio-templates.md) должен содержать элемент [ProjectItem](../extensibility/projectitem-element-visual-studio-item-templates.md) для каждого файла, включаемого в шаблон.

4. Измените файлы кода и другое содержимое, доступное для пользователя, и добавьте соответствующие подстановки параметров.

5. При необходимости измените созданное содержимое.

6. Выполните построение проекта.

     Visual Studio создает сжатый файл, содержащий шаблон. Он не развернут и недоступен в экспериментальном экземпляре.

## <a name="deployment"></a>Развертывание

### <a name="to-deploy-the-project-or-item-template"></a>Развертывание шаблона проекта или элемента

1. Создайте проект VSIX. Дополнительные сведения см. в разделе [шаблон проекта VSIX](../extensibility/vsix-project-template.md).

2. Задайте проект VSIX в качестве запускаемого проекта. В **Обозреватель решений**выберите узел проекта VSIX, щелкните его правой кнопкой мыши и выберите пункт **Назначить запускаемым проектом**.

3. Задайте проект шаблона проекта в качестве ресурса для проекта VSIX. Откройте файл *. vsixmanifest* . Перейдите на вкладку **активы** и нажмите кнопку **создать**.

    1. Задайте для поля **тип** значение **Microsoft. VisualStudio. ProjectTemplate** или **Microsoft. VisualStudio. ItemTemplate**.

    2. В поле Источник выберите вариант **проект в текущем решении** , а затем выберите проект, содержащий шаблон.

4. Постройте решение и нажмите клавишу **F5**. Откроется экспериментальный экземпляр.

5. Для проекта шаблона проекта шаблон проекта должен быть указан в диалоговом окне **Новый проект** (**файл**  >  **создать**  >  **проект**) в узле Visual C# или Visual Basic. Для проекта шаблона элемента в диалоговом окне **Добавление нового элемента** должен отображаться шаблон элемента. Чтобы открыть диалоговое окно **Добавление нового элемента** , в **Обозреватель решений**выберите узел проекта и щелкните **добавить**  >  **новый элемент**).

## <a name="see-also"></a>Дополнительно

- [Справочник по шаблонам Visual Studio](../ide/creating-project-and-item-templates.md)
- [Пакеты NuGet в шаблонах Visual Studio](/nuget/visual-studio-extensibility/visual-studio-templates)
