---
title: Проектирование командного стола XML (. Vsct) Файлы Документы Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- VSCT files, designing
ms.assetid: bb87a322-bac4-4258-92bc-9a876f05d653
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: fcd29aee98139bb151c87590b256df6b8370abff
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80708742"
---
# <a name="design-xml-command-table-vsct-files"></a>Дизайн таблицы команд XML (.vsct) файлов
Файл командной таблицы XML *(.vsct)* описывает расположение и внешний вид элементов команд для VSPackage. Элементы командования включают кнопки, комбо-боксы, меню, панели инструментов и группы командных элементов. В этой статье описаны файлы командной таблицы XML, как они влияют на элементы команд и меню, и как их создавать.

## <a name="commands-menus-groups-and-the-vsct-file"></a>Команды, меню, группы и файл .vsct
 Файлы *vsct* организованы вокруг команд, меню и групп команд. Теги XML в файле *.vsct* представляют каждый из этих элементов, наряду с другими связанными элементами, такими как кнопки команд, размещение команд и bitmaps.

 При создании нового VSPackage, [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] запуская шаблон пакета, шаблон генерирует файл *.vsct* с необходимыми элементами для команды меню, окна инструментов или пользовательского редактора, в зависимости от вашего выбора. Этот файл *.vsct* может быть изменен в соответствии с требованиями конкретного VSPackage. Например, как изменить файл *.vsct,* [см.](../../extensibility/extending-menus-and-commands.md)

 Чтобы создать новый, пустой *файл .vsct,* см. [Как: Создать файл *.vsct.* ](../../extensibility/internals/how-to-create-a-dot-vsct-file.md) После создания элементы XML, атрибуты и значения добавляются в файл для описания макета элемента команды. Подробную схему XML можно узнать [из ссылки на схему VSCT XML.](../../extensibility/vsct-xml-schema-reference.md)

## <a name="differences-between-ctc-and-vsct-files"></a>Различия между файлами .ctc и .vsct
 В то время как значение, лежащее в основе меток XML в файле *.vsct,* такое же, как и те теги в ныне устаревшетном формате *файла .ctc,* их реализация немного отличается:

- Новый ** \<тег extern>** — это место, где вы ссылаетесь [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] на другие файлы *.h,* которые будут компилированы, например, файлы для панели инструментов.

- В то время как *файлы .vsct* поддерживают заявление **/включить,** как это делают *файлы .ctc,* он также имеет новый ** \<элемент>импорта.** Разница в том, **/включить** приносит *всю* информацию, в то время как ** \<импорт>** приносит только имена.

- В то время как *файлы .ctc* требуют файла заголовка, в котором вы определяете ваши предобработчикные директивы, один не требуется для *файлов .vsct.* Вместо этого поместите директивы в таблицу символов, расположенную в ** \<символе>** элементов, расположенных в нижней части файла *.vsct.*

- *файлы .vsct* имеют>тег ** \<аннотации,** который позволяет вставлять любую информацию, которая вам нравится, например, заметки или даже фотографии.

- Значения сохраняются как атрибуты элемента.

- Флаги командования могут храниться индивидуально или укладываться.  IntelliSense, однако, не работает на сложенных флагах команд. Для получения дополнительной информации [CommandFlag element](../../extensibility/command-flag-element.md)о флагах команд см.

- Можно указать несколько типов, таких как раздельные выпадающие, комбо и т.д.

- GUIDs не проверяются.

- Каждый элемент uI имеет строку, представляющую текст, отображаемый с ним.

- Родитель не является обязательным. Если опущено, используется группа значения *Unknown.*

- Аргумент *icon* не является обязательным.

- Раздел Bitmap: Этот раздел такой же, как и в файле *.ctc,* за исключением того, что теперь вы можете указать имя файла через Href, которое будет втягиваться компилятором *vsct.exe* во время компиляции.

- ResID: Старый идентификатор ресурсов bitmap может быть использован и по-прежнему работает так же, как в *файлах .ctc.*

- HRef: Новый метод, позволяющий указать имя файла для ресурса bitmap. Он предполагает, что все они используются, так что вы можете пропустить используемый раздел. Компилятор будет сначала искать локальные ресурсы для файла, затем на любых чистых акциях, и любые ресурсы, определенные **/I** переключатель.

- Keybinding: Вам больше не нужно указывать эмулятор. Если вы укажете один, компилятор будет считать, что редактор и эмулятор одинаковы.

- Keychord: Keychord был удален. Новый формат *Key1,Mod1,Key2,Mod2*.  Вы можете указать либо символ, гексадецимальный или VK констант.

Новый компилятор, *vsct.exe,* компилирует файлы *.ctc* и *.vsct.* Однако старый компилятор *ctc.exe* не распознает и не компилирует файлы *.vsct.*

Вы можете использовать компилятор *vsct.exe* для преобразования существующего файла *.cto* в файл *.vsct.* Для получения дополнительной информации [см. Как: Создайте файл .vsct из существующего файла .cto](../../extensibility/internals/how-to-create-a-dot-vsct-file.md#how-to-create-a-dot-vsct-file-from-an-existing-dot-cto-file).

## <a name="the-vsct-file-elements"></a>Элементы файла .vsct
 Таблица команд имеет следующую иерархию и элементы:

- [Элемент CommandTable](../../extensibility/commandtable-element.md): Представляет все команды, группы меню и меню, связанные с VSPackage.

- [Элемент Extern:](../../extensibility/extern-element.md)Ссылки на любые внешние файлы .h, которые вы хотите объединить с файлом *.vsct.*

- [Включите элемент](../../extensibility/include-element.md): Ссылки любые дополнительные заголовки (.h) файлы, которые вы хотите собрать вместе с вашим файлом *.vsct.* Файл *.vsct* может включать файлы *.h,* содержащие константы, определяющие команды, группы меню и меню, которые предоставляет IDE или другой VSPackage.

- [Элемент команд](../../extensibility/commands-element.md): представляет все отдельные команды, которые могут быть выполнены. Каждая команда имеет следующие четыре элемента ребенка:

- [Элемент меню](../../extensibility/menus-element.md): Представляет все меню и панели инструментов в VSPackage. Меню представляют контейнеры для групп команд.

- [Элемент групп](../../extensibility/groups-element.md): Представляет все группы в VSPackage. Группы представляют коллекции отдельных команд.

- [Элемент кнопки](../../extensibility/buttons-element.md): Представляет все кнопки команды и элементы меню в VSPackage. Кнопки являются визуальными элементами управления, которые могут быть связаны с командами.

- [Элемент Bitmaps](../../extensibility/bitmaps-element.md): Представляет все бит-карты для всех кнопок в VSPackage. Bitmaps — это изображения, которые отображаются рядом с кнопками команды или на них, в зависимости от контекста.

- [Элемент CommandPlacements](../../extensibility/commandplacements-element.md): Указывает дополнительные места, где отдельные команды должны быть размещены в меню вашего VSPackage.

- [Элемент VisibilityConstraints](../../extensibility/visibilityconstraints-element.md): Определяет, отображается ли команда в любое время или только в определенных контекстах, например, при отображении конкретного окна или окна диалога. Меню и команды, которые имеют значение для этого элемента, будут отображаться только при активном указании указанного контекста. Поведение по умолчанию заключается в отображении команды в любое время.

- [Элемент KeyBindings](../../extensibility/keybindings-element.md): Определяет любые ключевые привязки для команд. То есть, одна или несколько ключевых комбинаций, которые должны быть нажаты для выполнения команды, такие как **Ctrl**+**S**.

- [Элемент UsedCommands](../../extensibility/usedcommands-element.md): [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] Сообщает среду, что, хотя указанная команда реализуется другим кодом, когда текущий VSPackage активен, он обеспечивает реализацию команды.

- [Элемент символов](../../extensibility/symbols-element.md): Содержит имена символов и идентиматары GUID для всех ваших команд в пакете.

## <a name="vsct-file-design-guidelines"></a>.vsct руководящие принципы проектирования файлов
 Чтобы успешно спроектировать файл *.vsct,* следуйте этим рекомендациям.

- Команды могут размещаться только в группах, группы могут размещаться только в меню, а меню - только в группы. Только меню фактически отображаются в IDE, группы и команды не являются.

- Submenus не может быть непосредственно назначен меню, но должны быть назначены группе, которая, в свою очередь, присваивается меню.

- Команды, подменю и группы могут быть назначены одной родительской группе или меню, используя родительское поле их определяющей директивы.

- Организация командной таблицы исключительно через родительские поля в директивах имеет значительное ограничение. Директивы, определяющие объекты, могут принимать только один родительский аргумент.

- Повторное использование команд, групп или подменю требует использования новой директивы для создания нового `GUID:ID` экземпляра объекта с собственной парой.

- Каждая `GUID:ID` пара должна быть уникальной. Повторное использование команды, которая, например, была размещена в меню, панели инструментов или <xref:Microsoft.VisualStudio.OLE.Interop.IOleCommandTarget> в контекстном меню, обрабатывается интерфейсом.

- Команды и подменю также могут быть назначены нескольким группам, а группы могут быть назначены нескольким меню с помощью [элемента Команд.](../../extensibility/commands-element.md)

## <a name="vsct-file-notes"></a>.vsct примечания к файлам
 Если вы вносите какие-либо изменения в файл *.vsct* после того, как вы оба компилируете его и поместите в родной спутник DLL, вы должны запустить **devenv.exe /setup /nosetupvstemplates**. Это заставляет ресурсы VSPackage, указанные в экспериментальном реестре, [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] перечитываться, и внутреннюю базу данных, описываемую, перестраиваться.

 Во время разработки, это возможно для нескольких проектов VSPackage, которые будут созданы и зарегистрированы в экспериментальном реестре улья, что может привести к путанице беспорядок в IDE. Чтобы исправить это, можно сбросить экспериментальный улей в настройки по умолчанию, чтобы удалить все зарегистрированные VSPackages и любые изменения, которые они могут внести в IDE. Чтобы сбросить экспериментальный улей, используйте инструмент CreateExpInstance.exe, который поставляется с Visual Studio SDK. Вы можете найти его по адресу:

 *%PROGRAMFILES (x86)%-Визуальная версия студии\\\<> SDK-VisualStudioIntegration-Инструменты-Бин-CreateExpInstance.exee*

 Выполнить инструмент с помощью команды **CreateExpInstance / Перезагрузка**. Помните, что этот инструмент удаляет из экспериментального улья все [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]зарегистрированные VSPackages обычно не установлены с .

## <a name="see-also"></a>См. также
- [Расширить меню и команды](../../extensibility/extending-menus-and-commands.md)
