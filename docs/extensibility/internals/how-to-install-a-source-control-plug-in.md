---
title: Практическое руководство. Установка подключаемого модуля системы управления версиями | Документация Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- installation [Visual Studio SDK], source control plug-ins
- source control plug-ins, installing
ms.assetid: 9e2e01d9-7beb-42b2-99b2-86995578afda
author: madskristensen
ms.author: madsk
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 9de10f1aebd47093a3cc3f41343e73cefdde473a
ms.sourcegitcommit: 40d612240dc5bea418cd27fdacdf85ea177e2df3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "66334913"
---
# <a name="how-to-install-a-source-control-plug-in"></a>Практическое руководство. Установка подключаемого модуля системы управления версиями
Создание подключаемого модуля системы управления версиями состоит из трех этапов:

1. Создайте библиотеку DLL с помощью функции, определенные в разделе Справочник по API подключаемых модулей управления источника этой документации.

2. Реализуйте функции, определяемые API подключаемых модулей управления источника. Когда [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] вызовов, убедитесь, интерфейсы и диалоговые окна доступны из подключаемого модуля.

3. Зарегистрируйте библиотеку DLL, сделав соответствующие записи в реестр.

## <a name="integration-with-visual-studio"></a>Интеграция с Visual Studio
 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] поддерживает элемент управления подключаемые версиями, которые соответствуют API подключаемых модулей управления источника.

### <a name="register-the-source-control-plug-in"></a>Зарегистрировать подключаемый модуль системы управления версиями
 Прежде чем выполняемую среду разработки (IDE) можно вызвать в системе управления версиями, его необходимо найти источник библиотеку DLL подключаемого модуля, который экспортирует API управления.

#### <a name="to-register-the-source-control-plug-in-dll"></a>Чтобы зарегистрировать библиотеку DLL подключаемого модуля управления версиями

1. Добавьте две записи в разделе **HKEY_LOCAL_MACHINE** в **программного обеспечения** подраздел, указывающее имя вашей компании подраздел следуют ваш раздел реестра, имя продукта. Шаблон **HKEY_LOCAL_MACHINE\SOFTWARE\\\<название_компании >\\\<название продукта >\\\<запись >**  =  *значение*. Две записи всегда вызываются **SCCServerName** и **данный параметр**. Каждый представляет обычная строка.

    Например, если ваша компания называется Microsoft и именем SourceSafe вашей системы управления версиями, то этот путь в реестре будет **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe**. В этом подразделе, первая запись, **SCCServerName**, — это понятное пользователю строка именования продукта. Вторая запись **данный параметр**, это полный путь к источнику элемент управления в библиотеку DLL подключаемого модуля, потребуется соединиться с интегрированной среды разработки. Ниже представлен пример записи реестра.

   |Пример записи реестра|Образец значения|
   |---------------------------|------------------|
   |HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\SCCServerName|Microsoft Visual SourceSafe|
   |HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\SCCServerPath|*c:\vss\win32\ssscc.dll*|

   > [!NOTE]
   > Данный параметр является полный путь к подключаемом модуле SourceSafe. Подключаемый модуль системы управления версиями будет использовать различные имена компании и продукте, но одинаковые пути записи реестра.

2. Следующие необязательные параметры реестра можно использовать для изменения поведения подключаемый модуль системы управления версиями. Эти записи перейдите в аналогичный подраздел как **SccServerName** и **данный параметр**.

   - **HideInVisualStudioregistry** запись можно использовать, если вы не хотите источника управления plug вход в **Выбор подключаемых модулей** список [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]. Эта запись также повлияет на автоматическое переключение на подключаемый модуль системы управления версиями. Один из возможных способов использования для данной записи — Если вы предоставляете пакет системы управления версиями, который заменяет подключаемый модуль системы управления версиями, но вы хотите упростить для пользователя для переноса с помощью системы управления версиями, подключаемый модуль для пакета системы управления версиями. При установке пакета системы управления версиями, он устанавливает этот параметр реестра, который скрывает подключаемого модуля.

      **HideInVisualStudio** является значением типа DWORD и задайте *1* чтобы подключаемый модуль или *0* Показать подключаемого модуля. Если параметр не отображается, поведение по умолчанию — Показать, подключаемый модуль.

   - **DisableSccManager** запись реестра можно использовать для отключения или скрытия **запуска \<сервера системы управления версиями >** пункт меню, который обычно отображается в узле **файл**  >  **Системы управления версиями** подменю. Это меню параметр вызовы [SccRunScc](../../extensibility/sccrunscc-function.md) функции. Подключаемый модуль системы управления версиями могут не поддерживать внешнюю программу и поэтому может потребоваться отключить или скрыть даже **запуска** пункт меню.

      **DisableSccManager** является значением типа DWORD и задайте *0* для включения **запуска \<сервера системы управления версиями >** пункт меню, значение *1* для отключить команду меню, а значение *2* скрытие пункта меню. Если этот параметр реестра отсутствует, поведение по умолчанию — Показать пункт меню.

   | Пример записи реестра | Образец значения |
   | - |--------------|
   | HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\HideInVisualStudio | 1 |
   | HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\DisableSccManager | 1 |

3. Добавьте подраздел, **SourceCodeControlProvider**в разделе **HKEY_LOCAL_MACHINE** в **программного обеспечения** подраздел.

    В этом подразделе реестра **ProviderRegKey** присваивается строка, представляющая подраздела, помещенную в реестре на шаге 1. Шаблон **HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\ProviderRegKey** = *программного обеспечения\\< название_организации\>\\< название продукта \>* .

    Ниже приведен пример содержимого для такого подраздела.

   |Запись реестра|Образец значения|
   |--------------------|------------------|
   |HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\ProviderRegKey|SOFTWARE\Microsoft\SourceSafe|

   > [!NOTE]
   > Подключаемый модуль системы управления версиями будет использовать те же подраздел и имен записей, но значение будет другим.

4. Создайте подраздел с именем **InstalledSCCProviders** под **SourceCodeControlProvider** подраздел, а затем поместите одну запись в этом подразделе.

    Имя этой записи понятное пользователю имя поставщика (то же как значение, указанное для операции SCCServerName), и значение, опять же, подраздел, созданное на шаге 1. Шаблон **HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\InstalledSCCProviders\\< отображаемое имя\>**  = *программного обеспечения\\< компании имя\>\\< название продукта\>* .

    Пример:

   |Пример записи реестра|Образец значения|
   |---------------------------|------------------|
   |HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\InstalledSCCProviders\Microsoft Visual SourceSafe|SOFTWARE\Microsoft\SourceSafe|

   > [!NOTE]
   > Может существовать несколько модулей системы управления версиями plug-зарегистрированные этим способом. Это как [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] находит все модулей на базе API подключаемых модулей управления источника.

## <a name="how-an-ide-locates-the-dll"></a>Как интегрированная среда разработки определяет библиотеку DLL
 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] Среде IDE существует два способа поиска источника контролировать библиотеку DLL подключаемого модуля:

- Найдите подключаемый модуль системы управления версиями по умолчанию и автоматически подключиться к нему.

- Найти все зарегистрированные источник подключаемые модули управления, из которого пользователь выбирает один.

  Для поиска библиотеки DLL в первый способ, IDE ищет в разделе **HKEY_LOCAL_MACHINE\Software\SourceCodeControlProvider** подразделов для записи **ProviderRegKey**. Значение этого элемента указывает на другой раздел. Интегрированная среда разработки, а затем ищет запись с именем **данный параметр** в этой второй подраздел в разделе **HKEY_LOCAL_MACHINE**. Значение этого элемента указывает на библиотеку DLL интегрированной среды разработки.

> [!NOTE]
> IDE не загружает библиотеки DLL из относительных путей (к примеру, *.\NewProvider.DLL*). Должен быть указан полный путь к DLL (например, *c:\Providers\NewProvider.DLL*). Это повышает безопасность интегрированной среды разработки, предотвращая загрузку несанкционированного или олицетворяемые DLL подключаемого модуля.

 Для поиска библиотеки DLL в второй способ, IDE ищет в разделе **HKEY_LOCAL_MACHINE\Software\SourceCodeControlProvider\InstalledSCCProviders** подразделов для всех записей. Каждая запись содержит имя и значение. Интегрированная среда разработки отображает список этих имен для пользователя. Когда пользователь выбирает имя, интегрированной среды разработки находит значение для выбранного имени, который указывает на раздел. IDE ищет запись с именем **данный параметр** в этом разделе, в разделе **HKEY_LOCAL_MACHINE**. Значение этого элемента указывает интегрированной среды разработки на правильный библиотеку DLL.

 Подключаемый модуль системы управления версиями должен поддерживать оба способа поиска библиотеки DLL и, следовательно, задает **ProviderRegKey**, перезаписав любую предыдущую установку. Более того, он должен добавить себя в список **InstalledSccProviders** так что пользователь может выбрать какой подключаемый модуль системы управления версиями для использования.

> [!NOTE]
> Так как **HKEY_LOCAL_MACHINE** ключ используется, подключаемый модуль системы управления только один источник может быть зарегистрирован как по умолчанию модуль управления версиями на данном компьютере (Однако [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] позволяет определить, какой подключаемый модуль системы управления версиями они хотят использовать для конкретного решения). В процессе установки установите флажок, чтобы увидеть, если подключаемый модуль системы управления версиями уже; Если Да, попросите пользователя или не должна использоваться новой системы управления версиями подключаемого модуля, устанавливаемого по умолчанию. Во время удаления, не удаляйте другие подразделы реестра, которые являются общими для всех модулей системы управления версиями plug-в **HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider**; удаления только определенной SCC подраздела.

## <a name="how-the-ide-detects-version-1213-support"></a>Как IDE обнаруживает поддерживаемые версии 1.2 или 1.3
 Как does [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] подтверждающих функциональные возможности версии 1.2 и 1.3 подключаемый модуль поддерживает API подключаемых модулей управления источника? Чтобы объявить расширенные возможности, подключаемый модуль системы управления версиями необходимо реализовать соответствующую функцию:

 Во-первых, [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] проверяет значение, возвращаемое вызовом [SccGetVersion](../../extensibility/sccgetversion-function.md). Его должен быть больше или равно 1.2.

 Далее, [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] определяет, поддерживаются ли определенные новые возможности с помощью проверки `lpSccCaps` аргумент в [SccInitialize](../../extensibility/sccinitialize-function.md).

 Если оба эти условия выполняются, может вызываться новые функции, поддерживаемые в версии 1.2 и 1.3.

## <a name="see-also"></a>См. также
- [Начало работы с подключаемых модулей системы управления версиями](../../extensibility/internals/getting-started-with-source-control-plug-ins.md)