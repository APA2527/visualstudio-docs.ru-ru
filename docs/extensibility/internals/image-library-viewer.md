---
title: Изображение Библиотека Зритель (ru) Документы Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: 9d9c7fbb-ebae-4b20-9dd8-3c9070c0d0d1
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: a7c5eda24c235cddec99cb5177c6ed315978bc6f
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80707749"
---
# <a name="image-library-viewer"></a>Средство просмотра библиотеки образов
Инструмент Visual Studio Image Library Viewer может загружать и искать манифесты изображения, позволяя пользователю манипулировать ими так же, как Visual Studio. Пользователь может изменять фон, размеры, DPI, высокий контраст и другие настройки. Инструмент также отображает информацию о загрузке для каждого манифеста изображения и отображает исходную информацию для каждого изображения в манифесте изображения. Этот инструмент полезен для:

1. Диагностика ошибок

2. Обеспечение правильного набора атрибутов в пользовательских манифестах изображений

3. Поиск изображений в каталоге изображений Visual Studio, чтобы расширение Visual Studio можно было использовать изображения, которые соответствуют стилю Visual Studio

   ![Средство просмотра библиотеки изображений — главный имиджевый баннер](../../extensibility/internals/media/image-library-viewer-hero.png "Средство просмотра библиотеки изображений — главный имиджевый баннер")

   **Изображение моникер**

   Кличка изображения (или прозвище для краткости) — это пара GUID:ID, которая однозначно идентифицирует актив изображения или список изображений в Библиотеке изображений.

   **Файлы манифеста изображения**

   Файлы, представляющие образ (.imagemanifest), представляют собой файлы XML, которые определяют набор активов изображений, моникеры, представляющие эти ресурсы, а также реальные изображения или изображения, представляющие каждый актив. Манифесты изображений могут определять автономные изображения или списки изображений для устаревшей поддержки uI. Кроме того, есть атрибуты, которые могут быть установлены либо на активе, либо на отдельных изображениях, лежащих в основе каждого актива, чтобы изменить, когда и как эти активы отображаются.

   **Схема манифеста изображения**

   Полный манифест изображения выглядит следующим образом:

```xml
<ImageManifest>
      <!-- zero or one Symbols elements -->
      <Symbols>
        <!-- zero or more Guid, ID, or String elements -->
      </Symbols>
      <!-- zero or one Images elements -->
      <Images>
        <!-- zero or more Image elements -->
      </Images>
      <!-- zero or one ImageLists elements -->
      <ImageLists>
        <!-- zero or more ImageList elements -->
      </ImageLists>
</ImageManifest>
```

 **Символы**

 В качестве помощи для читаемости и обслуживания манифест изображения может использовать символы для значений атрибутов. Символы определяются следующим образом:

```xml
<Symbols>
      <Import Manifest="manifest" />
      <Guid Name="ShellCommandGuid" Value="8ee4f65d-bab4-4cde-b8e7-ac412abbda8a" />
      <ID Name="cmdidSaveAll" Value="1000" />
      <String Name="AssemblyName" Value="Microsoft.VisualStudio.Shell.UI.Internal" />
</Symbols>
```

|||
|-|-|
|**Вложенный элемент**|**Определение**|
|Импорт|Импортирует символы данного файла манифеста для использования в текущем манифесте.|
|Guid|Символ представляет GUID и должен соответствовать форматированию GUID.|
|ID|Символ представляет идентификатор и должен быть неотрицательным бесхотворным.|
|Строка|Символ представляет собой произвольное значение строки.|

 Символы чувствительны к случаям и ссылаются с помощью синтаксиса $(символ-имя):

```xml
<Image Guid="$(ShellCommandGuid)" ID="$(cmdidSaveAll)" >
      <Source Uri="/$(AssemblyName);Component/Resources/image.xaml" />
</Image>
```

 Некоторые символы предопределены для всех манифестов. Они могут быть использованы в \<атрибуте \<Uri> или элементе импорта> для ссылки на локальной машине.

|||
|-|-|
|**Символ**|**Описание**|
|CommonProgramFiles|Значение переменной среды %CommonProgramFiles%|
|ЛокальныеAppData|Значение переменной среды %LocalAppData%|
|МанифестФолдер|Папка, содержащая файл манифеста|
|MyDocuments|Полный путь папки "Мои документы" текущего пользователя|
|ProgramFiles|Значение переменной среды %ProgramFiles%|
|Система|Папка Windows-System32|
|Windir|Значение переменной среды %WinDir%|

 **ОС контейнера**

 Элемент \<> изображения определяет изображение, на которое можно ссылаться по прозвищу. GUID и ID, вместе взятые, образуют псевдоним изображения. Прозвище для изображения должно быть уникальным во всей библиотеке изображений. Если более одного изображения имеет заданное прозвище, то при создании библиотеки сохраняется первое изображение.

 Он должен содержать по крайней мере один источник. Хотя нейтральные по размеру источники дадут наилучшие результаты в широком диапазоне размеров, они не требуются. Если службе предлагается изображение размера, не \<определенного в элементе> изображения и нет нейтрального для размера источника, служба выберет наилучший источник для конкретного размера и масштабирует его до запрашиваемого размера.

```xml
<Image Guid="guid" ID="int" AllowColorInversion="true/false">
      <Source ... />
      <!-- optional additional Source elements -->
</Image>
```

|||
|-|-|
|**Атрибут**|**Определение**|
|Guid|(Обязательно) GUID часть моникера изображения|
|ID|(Обязательно) Идентификационная часть моникера изображения|
|РазрешитьColorInversion|(Необязательно, по умолчанию верно) Указывает, может ли изображение иметь свои цвета программно перевернуты при использовании на темном фоне.|

 **Источник**

 Элемент \<«Источник> определяет один ресурс источника изображения» (XAML и PNG).

```xml
<Source Uri="uri" Background="background">
      <!-- optional NativeResource element -->
 </Source>
```

|||
|-|-|
|**Атрибут**|**Определение**|
|URI|(Обязательно) URI, который определяет, где изображение может быть загружено. Может принимать одно из следующих значений:<br /><br /> - [Пакет URI](/dotnet/framework/wpf/app-development/pack-uris-in-wpf) с использованием application:/// органа<br /><br /> - Абсолютная ссылка на ресурс компоненты<br /><br /> - Путь к файлу, содержащему родной ресурс|
|Историческая справка|(Необязательно) Указывает, что на виде фона источник предназначен для использования.<br /><br /> Может принимать одно из следующих значений:<br /><br /> - *Свет*: Источник может быть использован на светлом фоне.<br /><br /> - *Темный*: Источник может быть использован на темном фоне.<br /><br /> - *HighContrast*: Источник может быть использован на любом фоне в режиме high Contrast.<br /><br /> - *HighContrastLight*: Источник может быть использован на светлом фоне в режиме высокой контрастности.<br /><br /> -*HighContrastDark*: Источник может быть использован на темном фоне в режиме высокой контрастности.<br /><br /> Если атрибут **фона** опущен, источник может быть использован на любом фоне.<br /><br /> Если **фон** *Светлый,* *Темный,* *HighContrastLight*, или *HighContrastDark*, цвета источника никогда не инвертируются. Если **фон** опущен или установлен на *HighContrast,* инверсия цветов источника контролируется атрибутом **AllowColorInversion** изображения.|

 Элемент \<> источник может иметь точно один из следующих дополнительных подэлементов:

||||
|-|-|-|
|**Элемент**|**Атрибуты (все требуется)**|**Определение**|
|\<Размер>|Значение|Источник будет использоваться для изображений данного размера (в блоках устройств). Изображение будет квадратным.|
|\<> SizeRange|MinSize, MaxSize|Источник будет использоваться для изображений от MinSize до MaxSize (в устройствах) включительно. Изображение будет квадратным.|
|\<Размеры>|Width, Height|Источник будет использоваться для изображений заданной ширины и высоты (в блоках устройств).|
|\<Размернаядальность>|Минвайн, МинВейт,<br /><br /> MaxWidth, MaxHeight|Источник будет использоваться для изображений от минимальной ширины/высоты до максимальной ширины/высоты (в единицах устройства) включительно.|

 Элемент \<«Источник>» также \<может иметь дополнительный подэлемент \<NativeResource>, который определяет> источника, загруженную из родной сборки, а не из управляемой сборки.

```xml
<NativeResource Type="type" ID="int" />
```

|||
|-|-|
|**Атрибут**|**Определение**|
|Type|(Обязательно) Тип родного ресурса, xAML или PNG|
|ID|(Обязательно) Различная часть родного ресурса|

 **Imagelist**

 Элемент \<ImageList> определяет набор изображений, которые могут быть возвращены в одной полосе. Полоса построена по требованию, по мере необходимости.

```xml
<ImageList>
      <ContainedImage Guid="guid" ID="int" External="true/false" />
      <!-- optional additional ContainedImage elements -->
 </ImageList>
```

|||
|-|-|
|**Атрибут**|**Определение**|
|Guid|(Обязательно) GUID часть моникера изображения|
|ID|(Обязательно) Идентификационная часть моникера изображения|
|External|(Необязательно, по умолчанию ложный) Указывает, ссылается ли кличка изображения на изображение в текущем манифесте.|

 Кличка для содержащегося изображения не должна ссылаться на изображение, определенное в текущем манифесте. Если содержащееся изображение не может быть найдено в библиотеке изображений, на его месте будет использовано пустое изображение заполнителя.

## <a name="how-to-use-the-tool"></a>Как использовать инструмент
 **Проверка пользовательского манифеста изображения**

 Для создания пользовательского манифеста мы рекомендуем использовать инструмент ManifestFromResources для автоматического получения манифеста. Чтобы проверить пользовательский манифест, запустите Image Library Viewer и выберите файл > Установить Пути... для открытия диалога поисковых систем. Инструмент будет использовать каталоги поиска для загрузки манифестов изображений, но он также будет использовать их, чтобы найти файлы .dll, которые содержат изображения в манифесте, поэтому не забудьте включить как манифест, так и DLL каталоги в этом диалоге.

 ![Средство просмотра библиотеки изображений — поиск](../../extensibility/internals/media/image-library-viewer-search.png "Средство просмотра библиотеки изображений — поиск")

 Нажмите **Добавить...,** чтобы выбрать новые каталоги поиска для поиска манифестов и их соответствующих DLLs. Инструмент запомнит эти поисковые каталоги, и они могут быть включены или выключены путем проверки или проверки каталога.

 По умолчанию инструмент будет пытаться найти каталог Visual Studio установить и добавить эти каталоги в список поисковых каталогов. Вы можете вручную добавлять каталоги, которые инструмент не находит.

 После загрузки всех манифестов инструмент может использоваться для переключения **фоновых** цветов, **DPI,** **высокой контрастности**или **серого масштабирования** для изображений, чтобы пользователь мог визуально проверить ресурсы изображения, чтобы проверить, что они визуализироваться для различных настроек.

 ![Средство просмотра библиотеки изображений — фон](../../extensibility/internals/media/image-library-viewer-background.png "Средство просмотра библиотеки изображений — фон")

 Цвет фона может быть установлен на светлое, темное или пользовательское значение. Выбор "Custom Color" откроет диалог выбора цвета и добавить, что пользовательский цвет в нижней части фонового комбо-окна для легкого отзыва позже.

 ![Средство просмотра библиотеки изображений — настраиваемый цвет](../../extensibility/internals/media/image-library-viewer-custom-color.png "Средство просмотра библиотеки изображений — настраиваемый цвет")

 Выбор кличка изображения отображает информацию для каждого реального изображения, что прозвище в панели детали изображения справа. Панель также позволяет пользователям копировать прозвище по имени или по сырью GUID:ID значение.

 ![Средство просмотра библиотеки изображений — подробности об изображении](../../extensibility/internals/media/image-library-viewer-image-details.png "Средство просмотра библиотеки изображений — подробности об изображении")

 Информация, отображаемый для каждого источника изображения, включает в себя, на каком фоне можно отображать его, может ли он быть тематическим или поддерживает High Contrast, для каких размеров он действителен или является ли он нейтральным по размеру, и исходит ли изображение от родной сборки.

 ![Средство просмотра библиотеки изображений — тема Can](../../extensibility/internals/media/image-library-viewer-can-theme.png "Средство просмотра библиотеки изображений — тема Can")

 При проверке манифеста изображения мы рекомендуем развернуть манифест и dLL изображения в реальных местах. Это позволит убедиться в правильности правильной работы любых относительных путей и на том, что библиотека изображений может находить и загружать манифест и dLL изображения.

 **Поиск каталога изображений Известные Monikers**

 Чтобы лучше соответствовать укладке Visual Studio, расширение Visual Studio может использовать изображения в каталоге изображений Visual Studio, а не создавать и использовать его собственный. Это имеет преимущество, не сохраняя эти изображения, и гарантирует, что изображение будет иметь высокое DPI резервное изображение, поэтому он должен выглядеть правильно во всех настройках DPI, что Visual Studio поддерживает.

 Зритель библиотеки изображений позволяет искать манифест, чтобы пользователь мог найти кличка, представляющее актив изображения, и использовать это прозвище в коде. Для поиска изображений введите нужный поисковый термин в поле поиска и нажмите Enter. В строке состояния внизу будет отображаться количество совпадений, найденных из общего количества изображений во всех манифестах.

 ![Средство просмотра библиотеки изображений — фильтр](../../extensibility/internals/media/image-library-viewer-filter.png "Средство просмотра библиотеки изображений — фильтр")

 При поиске кликеров изображений в существующих манифестах мы рекомендуем искать и использовать только кликеры каталога изображений Visual Studio, другие намеренно общедоступные моникаторы или собственные пользовательские моники. Если вы используете непубличные прозвища, пользовательский пользовательский пользовательский доступ может быть нарушен или его изображения изменены неожиданным образом, если или когда эти непубличные прозвища и изображения будут изменены или обновлены.

 Кроме того, возможен поиск по GUID. Этот тип поиска полезен для фильтрации вниз список в один манифест, или одного подраздела манифеста, если этот манифест содержит несколько GUIDs.

 ![Средство просмотра библиотеки изображений — GUID фильтра](../../extensibility/internals/media/image-library-viewer-filter-guid.png "Средство просмотра библиотеки изображений — GUID фильтра")

 Наконец, возможен поиск по ID.

 ![Средство просмотра библиотеки изображений — идентификатор фильтра](../../extensibility/internals/media/image-library-viewer-filter-id.png "Средство просмотра библиотеки изображений — идентификатор фильтра")

## <a name="notes"></a>Примечания

- По умолчанию инструмент будет тянуть в нескольких манифестах изображения, присутствующих в каталоге установки Visual Studio. Единственным, который имеет публично расходных кликеров является **Microsoft.VisualStudio.ImageCatalog** манифест. GUID: ae27a6b0-e345-4288-96df-5eaf394ee369 **(не** переопределить этот GUID в пользовательском манифесте) Тип: ИзвестныеMonikers

- Инструмент пытается на запуск, чтобы загрузить все изображения отображает он находит, так что это может занять несколько секунд для приложения на самом деле появляются. Он также может быть медленным или неотвечает при загрузке манифестов.

## <a name="sample-output"></a>Пример выходных данных
 Этот инструмент не генерирует выход.
