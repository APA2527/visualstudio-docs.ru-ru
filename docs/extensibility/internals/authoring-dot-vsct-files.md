---
title: Разработки. Vsct Файлы Документы Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- VSCT files, manual authoring
ms.assetid: e9f715dc-12b7-439b-bdf3-f3dc75e62f1c
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: dfa276d04e2d312d7ff00b1e9bc0015beb1e254e
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80709998"
---
# <a name="author-vsct-files"></a>Авторские файлы .vsct
В этом документе показано, как автор *файла .vsct* добавить элементы меню, панели инструментов и другие элементы пользовательского интерфейса (UI) в интегрированную среду разработки Visual Studio (IDE). Используйте эти действия при добавлении элементов uI в пакет Visual Studio (VSPackage), в который еще нет файла *.vsct.*

 Для новых проектов мы рекомендуем использовать шаблон пакета Visual Studio, поскольку он генерирует файл *.vsct,* который, в зависимости от выбора, уже имеет необходимые элементы для команды меню, окна инструментов или пользовательского редактора. Вы можете изменить этот файл *.vsct* в соответствии с требованиями вашего VSPackage. Для получения дополнительной информации о том, как изменить файл *.vsct,* смотрите примеры в [меню и командах Extend.](../../extensibility/extending-menus-and-commands.md)

## <a name="author-the-file"></a>Автор файла
 Автор *файла .vsct* на этих этапах: Создайте структуру для файлов и ресурсов, объявите элементы uI, поместите элементы uI в IDE и добавьте любые специализированные поведения.

### <a name="file-structure"></a>Структура файла
 Основная структура файла *.vsct* — это корневой элемент [CommandTable,](../../extensibility/commandtable-element.md) содержащий элемент [команд](../../extensibility/commands-element.md) и элемент [символов.](../../extensibility/symbols-element.md)

#### <a name="to-create-the-file-structure"></a>Создание структуры файлов

1. Добавьте файл *.vsct* в свой проект, выполнив следующие действия в [«Как: Создайте файл .vsct».](../../extensibility/internals/how-to-create-a-dot-vsct-file.md)

2. Добавьте необходимые пространства `CommandTable` имен в элемент, как показано в следующем примере:

    ```xml
    <CommandTable xmlns="http://schemas.microsoft.com/VisualStudio/2005-10-18/CommandTable"
        xmlns:xs="http://www.w3.org/2001/XMLSchema">

    ```

3. В `CommandTable` элементе добавьте `Commands` элемент, вмещающий все пользовательские меню, панели инструментов, командные группы и команды. Так что пользовательские элементы пользовательского набора могут загружаться, `Commands` элемент должен иметь свой `Package` атрибут, установленный на имя пакета.

     После `Commands` элемента добавьте `Symbols` элемент для определения GUID для пакета, а также имена и идентионные данные команд для элементов uI.

### <a name="include-visual-studio-resources"></a>Включить ресурсы Visual Studio
 Используйте элемент [Extern](../../extensibility/extern-element.md) для доступа к файлам, определяющим команды Visual Studio и меню, необходимые для ввода элементов uI в IDE. Если вы будете использовать команды, определенные за пределами пакета, используйте элемент [UsedCommands](../../extensibility/usedcommands-element.md) для информирования Visual Studio.

#### <a name="to-include-visual-studio-resources"></a>Включение ресурсов Visual Studio

1. В верхней `CommandTable` части элемента `Extern` добавьте один элемент для каждого внешнего `href` файла, на который следует ссылаться, и установите атрибут к имени файла. Вы можете ссылаться на следующие файлы заголовка для доступа к ресурсам Visual Studio:

   - *Stdidcmd.h*: Определяет иди для всех команд, выставленных Visual Studio.

   - *Vsshlids.h*: Содержит иные идки команд для меню Visual Studio.

2. Если ваш пакет вызывает какие-либо команды, которые определяются Visual `UsedCommands` Studio `Commands` или другими пакетами, добавьте элемент после элемента. Заполнить этот элемент элементом [UsedCommand](../../extensibility/usedcommand-element.md) для каждой вызываемых команд, который не является частью вашего пакета. Установите `guid` `id` и атрибуты `UsedCommand` элементов к значениям GUID и id команд для вызова.

   Для получения дополнительной информации о том, как найти GUIDs [GUIDs and IDs of Visual Studio commands](../../extensibility/internals/guids-and-ids-of-visual-studio-commands.md)и идентиматологов визуальных студийных команд, см. Чтобы вызвать команды из других пакетов, используйте GUID и идентификатор команды, как это определено в файле *.vsct* для этих пакетов.

### <a name="declare-ui-elements"></a>Объявить элементы uI
 Объявить все новые `Symbols` элементы uI в разделе *файла .vsct.*

#### <a name="to-declare-ui-elements"></a>Объявление элементов uI

1. В `Symbols` элемент добавьте три [элемента GuidSymbol.](../../extensibility/guidsymbol-element.md) Каждый `GuidSymbol` элемент `name` имеет `value` атрибут и атрибут. Установите `name` атрибут так, чтобы он отражал назначение элемента. Атрибут `value` принимает GUID. (Для создания GUID, в меню **Инструменты,** выберите **Создать GUID**, а затем выберите **формат реестра**.)

     Первый `GuidSymbol` элемент представляет ваш пакет и, как правило, не имеет детей. Второй `GuidSymbol` элемент представляет набор команд и будет содержать все символы, определяющие меню, группы и команды. Третий `GuidSymbol` элемент представляет ваш магазин изображений и содержит символы для всех иконок для ваших команд. Если у вас нет команд, которые используют значки, вы можете пропустить третий `GuidSymbol` элемент.

2. В `GuidSymbol` элементе, представляющем набор команд, добавьте один или несколько элементов [IDSymbol.](../../extensibility/idsymbol-element.md) Каждый из них представляет меню, панель инструментов, группу или команду, которую вы добавляете в uI.

     Для `IDSymbol` каждого элемента `name` установите атрибут к имени, которое вы будете использовать для обозначения соответствующего меню, группы или команды, а затем установите `value` элемент на гексадецмальный номер, который будет представлять его идентификатор команды. Нет `IDSymbol` двух элементов, которые имеют один и тот же родитель может иметь одинаковое значение.

3. Если какой-либо из элементов uI требует иконок, добавьте `IDSymbol` элемент для каждого значка к элементу, `GuidSymbol` представляющему ваш магазин изображений.

### <a name="put-ui-elements-in-the-ide"></a>Поместите элементы uI в IDE
 Элементы [меню,](../../extensibility/menus-element.md) [групп](../../extensibility/groups-element.md)и [кнопок](../../extensibility/buttons-element.md) содержат определения для всех меню, групп и команд, определенных в вашем пакете. Поместите эти меню, группы и команды в IDE либо с помощью [элемента «Родитель»,](../../extensibility/parent-element.md) который является частью определения элемента uI, либо с помощью элемента [CommandPlacement,](../../extensibility/commandplacement-element.md) который определяется в другом месте.

 Каждый, `Menu` `Group` `Button` и элемент `guid` имеет `id` атрибут и атрибут. Всегда устанавливайте `guid` атрибут в соответствии с именем `GuidSymbol` элемента, `id` представляющего набор `IDSymbol` команд, и устанавливайте атрибут к `Symbols` имени элемента, представляющего меню, группу или команду в разделе.

#### <a name="to-define-ui-elements"></a>Определение элементов uI

1. Если вы определяете какие-либо новые меню, подменю, меню ярлыков или панели инструментов, добавьте `Menus` элемент в `Commands` элемент. Затем, для каждого меню, которые будут созданы, добавьте элемент [меню](../../extensibility/menu-element.md) к элементу. `Menus`

    Установите `guid` `id` атрибуты `Menu` элемента, а затем `type` установите атрибут в виде меню, в каком вы хотите. Можно также установить `priority` атрибут для определения относительного положения меню в родительской группе.

   > [!NOTE]
   > Атрибут `priority` не применяется к панели инструментов и контекст-меню.

2. Все команды в Visual Studio IDE должны разрешаться командными группами, которые являются прямыми детьми меню и панели инструментов. Если вы добавляете новые меню или панели инструментов в IDE, они должны содержать новые командные группы. Вы также можете добавить группы команд в существующие меню и панели инструментов, чтобы визуально сгруппировать команды.

    При добавлении новых групп команд `Groups` необходимо сначала создать элемент, а затем добавить к нему элемент [группы](../../extensibility/group-element.md) для каждой группы команд.

    Установите `guid` `id` и атрибуты `Group` каждого элемента, `priority` а затем установите атрибут для определения относительного положения группы в родительском меню. Для получения дополнительной [информации см.](../../extensibility/creating-reusable-groups-of-buttons.md)

3. Если вы добавляете новые команды в `Buttons` IDE, `Commands` добавьте элемент в элемент. Затем, для каждой команды, добавьте элемент [кнопки](../../extensibility/button-element.md) к элементу. `Buttons`

   1. Установите `guid` `id` и атрибуты `Button` каждого элемента, `type` а затем установите атрибут на вид кнопки, который вы хотите. Вы также можете `priority` установить атрибут для определения относительного положения команды в родительской группе.

       > [!NOTE]
       > Используйте `type="button"` для стандартных команд меню и кнопок на панели инструментов.

   2. В `Button` элемент добавьте элемент [строки,](../../extensibility/strings-element.md) содержащий элемент [ButtonText](../../extensibility/buttontext-element.md) и элемент [CommandName.](../../extensibility/commandname-element.md) Элемент `ButtonText` предоставляет текстовую метку для элемента меню или набор инструментов для кнопки панели инструментов. Элемент `CommandName` предоставляет название команды для использования в команде хорошо.

   3. Если ваша команда будет иметь значок, `Button` создайте элемент `guid` [значка](../../extensibility/icon-element.md) в `Bitmap` элементе и установите его и `id` атрибуты элемента для значка.

       > [!NOTE]
       > Кнопки панели инструментов должны иметь значки.

   Для получения дополнительной информации [см. MenuCommands vs. OleMenuCommands](/visualstudio/extensibility/menucommands-vs-olemenucommands?view=vs-2015).

4. Если какая-либо из ваших команд требует значков, добавьте элемент [Bitmaps](../../extensibility/bitmaps-element.md) в `Commands` элемент. Затем, для каждого значка, добавьте `Bitmaps` элемент [Bitmap](../../extensibility/bitmap-element.md) к элементу. Здесь вы указываете местоположение ресурса bitmap. Для получения дополнительной информации смотрите [значки «Добавить значки» в команды меню.](../../extensibility/adding-icons-to-menu-commands.md)

   Вы можете полагаться на структуру воспитания, чтобы правильно разместить большинство меню, групп и команд. Для очень больших наборов команд или когда меню, группа или команда должны отображаться в нескольких местах, мы рекомендуем указать размещение команд.

#### <a name="to-rely-on-parenting-to-place-ui-elements-in-the-ide"></a>Полагаться на воспитание для размещения элементов uI в IDE

1. Для типичного родительского `Parent` воспитания `Menu` `Group`создайте `Command` элемент в каждом элементе и элемент, который определен в вашем пакете.

    Целью `Parent` элемента является меню или группа, которая будет содержать меню, группу или команду.

   1. Установите `guid` атрибут к названию `GuidSymbol` элемента, определяющего набор команд. Если целевой элемент не является частью пакета, используйте интерфейс для этого набора команд, как это определено в соответствующем файле *.vsct.*

   2. Установите `id` атрибут в `id` соответствии с атрибутом целевого меню или группы. Для перечисления меню и групп, которые подвергаются Visual Studio, см [GUIDs и идентиматологов меню Visual Studio](../../extensibility/internals/guids-and-ids-of-visual-studio-menus.md) или [GUIDs и идентиматологов Visual Studio инструментарии](../../extensibility/internals/guids-and-ids-of-visual-studio-toolbars.md).

   Если у вас есть большое количество элементов uI для размещения в IDE, или если у вас есть элементы, которые должны отображаться в нескольких местах, определите их размещение в элементе [CommandPlacements,](../../extensibility/commandplacements-element.md) как показано в следующих шагах.

#### <a name="to-use-command-placement-to-place-ui-elements-in-the-ide"></a>Использование размещения команд для размещения элементов uI в IDE

1. После элемента `Commands` добавьте элемент `CommandPlacements`.

2. В `CommandPlacements` элементе добавьте `CommandPlacement` элемент для каждого меню, группы или команды для размещения.

    Каждый `CommandPlacement` `Parent` элемент или элемент размещает одно меню, группу или команду в одном месте IDE. Элемент uI может иметь только одного родительского элемента, но он может иметь несколько размещений команд. Чтобы разместить элемент uI в нескольких `CommandPlacement` местах, добавьте элемент для каждого местоположения.

3. Установите `guid` `id` и атрибуты `CommandPlacement` каждого элемента в меню хостинга или `Parent` группу, так же, как вы бы для элемента. Можно также установить `priority` атрибут для определения относительного положения элемента uI.

   Вы можете смешивать размещение путем родительского и командного размещения. Однако для очень больших наборов команд мы рекомендуем использовать только размещение команд.

### <a name="add-specialized-behaviors"></a>Добавление специализированных моделей поведения
 Элемент [CommandFlag](../../extensibility/command-flag-element.md) можно использовать для изменения поведения меню и команд, например, для изменения их внешнего вида и видимости. Вы также можете повлиять, когда команда видна с помощью элемента [VisibilityConstraints,](../../extensibility/visibilityconstraints-element.md) или добавить ярлыки клавиатуры с помощью элемента [KeyBindings.](../../extensibility/keybindings-element.md) Некоторые виды меню и команд уже имеют специализированные поведения, встроенные в.

#### <a name="to-add-specialized-behaviors"></a>Добавление специализированного поведения

1. Чтобы элемент uI был виден только в определенных контекстах uI, например, при загрузке решения, используйте ограничения видимости.

   1. После элемента `Commands` добавьте элемент `VisibilityConstraints`.

   2. Чтобы каждый элемент uI был ограничен, добавьте элемент [VisibilityItem.](../../extensibility/visibilityitem-element.md)

   3. Для `VisibilityItem` каждого элемента `guid` `id` установите и атрибуты в меню, группу `context` или команду, а затем установите <xref:Microsoft.VisualStudio.Shell.Interop.UIContextGuids80> атрибут в контексте uI, который вы хотите, как это определено в классе.

2. Чтобы установить видимость или доступность элемента uI в коде, используйте один или несколько следующих флагов команд:

   - `DefaultDisabled`

   - `DefaultInvisible`

   - `DynamicItemStart`

   - `DynamicVisibility`

   - `NoShowOnMenuController`

   - `NotInTBList`

   Для получения дополнительной [информации](../../extensibility/command-flag-element.md) см.

3. Чтобы изменить способ отослания элемента или динамически изменить его внешний вид, используйте один или несколько следующих флагов команд:

   - `AlwaysCreate`

   - `CommandWellOnly`

   - `DefaultDocked`

   - `DontCache`

   - `DynamicItemStart`

   - `FixMenuController`

   - `IconAndText`

   - `Pict`

   - `StretchHorizontally`

   - `TextMenuUseButton`

   - `TextChanges`

   - `TextOnly`

   Для получения дополнительной [информации](../../extensibility/command-flag-element.md) см.

4. Чтобы изменить реакцию элемента при выполнении команд, используйте один или несколько следующих флагов команд:

   - `AllowParams`

   - `CaseSensitive`

   - `CommandWellOnly`

   - `FilterKeys`

   - `NoAutoComplete`

   - `NoButtonCustomize`

   - `NoKeyCustomize`

   - `NoToolbarClose`

   - `PostExec`

   - `RouteToDocs`

   - `TextIsAnchorCommand`

   Для получения дополнительной [информации](../../extensibility/command-flag-element.md) см.

5. Чтобы прикрепить к меню зависимый от меню ярлык клавиатуры или пункт в меню, добавьте символ амперсанда (&) в `ButtonText` элемент для меню или элемента меню. Персонаж, который следует за амперсандом, — это активный ярлык клавиатуры, когда родительское меню открыто.

6. Чтобы прикрепить к команде кратчайший ярлык для клавиатуры, не зависящий от меню, используйте элемент [KeyBindings.](../../extensibility/keybindings-element.md) Для получения дополнительной [информации](../../extensibility/keybinding-element.md) см.

7. Для локализации текста `LocCanonicalName` меню используйте элемент. Для получения дополнительной [информации](../../extensibility/strings-element.md) см.

   Некоторые типы меню и кнопок включают специализированное поведение. В следующем списке описаны некоторые специализированные меню и типы кнопок. Для других типов `types` смотрите описания атрибутов в [меню,](../../extensibility/menu-element.md) [кнопках](../../extensibility/button-element.md)и элементах [Combo.](../../extensibility/combo-element.md)

   - Комбо-коробка: комбо-коробка представляет собой выпадающий список, который может быть использован на панели инструментов. Чтобы добавить комбо-коробки в uI, создайте элемент [Combos](../../extensibility/combos-element.md) в элементе. `Commands` Затем добавьте `Combos` к `Combo` элементу элемент для каждого комбо-бокса, чтобы добавить. `Combo`элементы имеют те же `Button` атрибуты и `DefaultWidth` `idCommandList` детей, как элементы, а также имеют и атрибуты. Атрибут `DefaultWidth` устанавливает ширину в пикселях, а `idCommandList` атрибут указывает на идентификатор команды, который используется для заполнения комбо-коробки.

   - Контроллер меню: контроллер меню — это кнопка, рядом с ней стрелка. Нажав на стрелку открывает список. Чтобы добавить контроллер меню в uI, создайте `Menu` элемент и установите его `type` атрибут `MenuController` или, `MenuControllerLatched`в зависимости от поведения, в зависимости от поведения, вы хотите. Чтобы заполнить контроллер меню, установите его `Group` в качестве родительского элемента. Контроллер меню будет отображать все дети этой группы в списке выпадающих.

## <a name="see-also"></a>См. также
- [Расширить меню и команды](../../extensibility/extending-menus-and-commands.md)
- [Таблица команд Visual Studio (.vsct) файлов](../../extensibility/internals/visual-studio-command-table-dot-vsct-files.md)
- [Ссылка на схему VSCT XML](../../extensibility/vsct-xml-schema-reference.md)
