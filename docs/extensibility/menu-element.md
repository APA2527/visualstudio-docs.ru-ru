---
title: Элемент меню Документы Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- VSCT XML schema elements, Menus
- Menus element (VSCT XML schema)
ms.assetid: ce0560f3-b4c9-4ab2-a99c-d4e10f37b9e0
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 8dc4731f95e31781f6b10704d7cb14dc83e96d7a
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80702603"
---
# <a name="menu-element"></a>Элемент меню
Определяет один пункт меню. Это шесть видов меню: Контекст, Меню, MenuController, MenuControllerLatched, Панели инструментов и ToolWindowToolbar.

## <a name="syntax"></a>Синтаксис

```xml
<Menu guid="guidMyCommandSet" id="MyCommand" priority="0x100" type="button">
  <Parent>... </Parent>
  <CommandFlag>... </CommandFlag>
  <Strings>... </Strings>
</Menu>
```

## <a name="attributes-and-elements"></a>Элементы и атрибуты
 В следующих разделах описаны атрибуты, дочерние и родительские элементы.

### <a name="attributes"></a>Атрибуты

|Атрибут|Описание|
|---------------|-----------------|
|guid|Обязательный элемент. GUID идентификатора команды GUID/ID.|
|идентификатор|Обязательный элемент. Идентификатор идентификатора идентификатора команды GUID/ID.|
|priority|Необязательный параметр. Числовое значение, оцениваемые относительное положение меню в группе меню.|
|Панель инструментовПриоритетInBand|Необязательный параметр. Числовое значение, оговариваеще относительное положение панели инструментов в полосе при стыковке окна.|
|type|Необязательный параметр. Перечисленное значение, которое определяет вид элемента.<br /><br /> Если нет, тип по умолчанию меню.<br /><br /> Контекст<br /> Меню ярлыка, отображаемый при нажатии на окно пользователем правой кнопкой мыши. Меню ярлыка имеет следующие характеристики:<br /><br /> - Не использует поля **«Родитель»** и **«Приоритет»,** когда меню должно отображаться в качестве меню ярлыка.<br />- Может быть использован в качестве подменю, а также в качестве меню ярлыка. В этом случае соблюдаются как **идентификатор группы,** так и **приоритетные** поля.<br />- Не всегда доступен.<br /><br /> Меню ярлыка отображается только тогда, когда верны следующие условия:<br /><br /> - Окно, в котором он размещается, отображается.<br />- Обработчик мыши в VSPackage обнаруживает правый щелчок по окну, а затем вызывает метод, который обрабатывает команду.<br />- Меню ярлыка отображается путем вызова метода <xref:Microsoft.VisualStudio.Shell.Interop.IOleComponentUIManager.ShowContextMenu%2A> (рекомендуемый подход) или метода. <xref:Microsoft.VisualStudio.Shell.Interop.IVsUIShell.ShowContextMenu%2A><br /><br /> Меню<br /> Обеспечивает выпадающее меню. Выпадающее меню имеет следующие характеристики:<br /><br /> - Уважает родителей в его определении.<br />- Должна иметь родительскую группу или командное место для группы.<br />- Может быть submenu в любом другом виде меню.<br />- Отображается автоматически всякий раз, когда отображается родительское меню.<br />- Не требует реализации какого-либо кода VSPackage, чтобы сделать его отображением.<br /><br /> МенюКонтроллер<br /> Обеспечивает сплит-кнопку выпадения вниз меню, которое обычно используется в панели инструментов. Меню MenuController имеет следующие характеристики:<br /><br /> - Должны содержаться в другом меню через родителей или CommandPlacement.<br />- Уважает родителей в его определении.<br />- Может иметь любой вид меню в качестве своего родителя.<br />- Автоматически становится доступным всякий раз, когда отображается родительское меню.<br />- Не требует сятной поддержки, чтобы сделать меню отображено.<br /><br /> Команда из меню сплит-кнопки отображается на кнопке меню. Отображаемый командой имеет одну из следующих характеристик:<br /><br /> - Это последняя команда, которая была использована, если команда по-прежнему отображается и включена.<br />- Это первая отображаемые команды.<br /><br /> MenuControllerLatched<br /> Обеспечивает сплит-кнопку выпадения вниз меню, для которого команда может быть указана как выбор по умолчанию, пометив команду как защелки.<br /><br /> Запоздающаяся команда — это команда, отмеченная в меню как выбранная, обычно отображающая контрольный знак. Команда может быть помечена как заперла, если на ней `QueryStatus` установлен <xref:Microsoft.VisualStudio.OLE.Interop.IOleCommandTarget> OLECMDF_LATCHED флаг в реализации метода интерфейса. Меню MenuControllerLatched имеет следующие характеристики:<br /><br /> - Должно содержаться в другом меню через родительскую группу или CommandPlacement.<br />- Уважает родителей в его определении.<br />- Может иметь любой вид меню в качестве своего родителя.<br />- Становится доступным всякий раз, когда отображается родительское меню.<br />- Не требует сятной поддержки, чтобы сделать меню отображено.<br /><br /> Команда из меню сплит-кнопки отображается на кнопке меню. Отображаемый командой имеет одну из следующих характеристик:<br /><br /> - Это первая отображаемые команды, которая завязалась.<br />- Это первая отображаемые команды.<br /><br /> Панель инструментов<br /> Обеспечивает панель инструментов. Панель инструментов имеет следующие характеристики:<br /><br /> - Игнорирует родителей в своем определении.<br />- не может быть submenu любой группы, даже с помощью CommandPlacement.<br />- Всегда можно отобразить, нажав **на панели инструментов** в меню **View.**<br />- Может отображаться с помощью [VisibilityItem](../extensibility/visibilityitem-element.md).<br />- Не требует сятного кода для его создания. Например, как создать панель инструментов, [см.](../extensibility/adding-a-toolbar.md)<br /><br /> ToolWindowToolbar<br /> Обеспечивает панель инструментов, которая крепится к определенному окну инструмента, так же, как панель инструментов прикрепляется к среде разработки.<br /><br /> - Игнорирует родителей в своем определении.<br />- не может быть submenu любой группы, даже с помощью CommandPlacement.<br />- Отображается только тогда, когда отображается окно инструмента, в котором размещается панель инструментов, и VSPackage явно добавляет панель инструментов в окно инструмента. Обычно это делается, когда окно инструмента создается путем получения свойства <xref:Microsoft.VisualStudio.Shell.Interop.IVsToolWindowToolbarHost> узла панели инструментов (представленного <xref:Microsoft.VisualStudio.Shell.Interop.IVsToolWindowToolbarHost.AddToolbar%2A> интерфейсом) из оконной панели инструмента, а затем вызова метода.|
|Условие|Необязательный параметр. Посмотреть [условные атрибуты.](../extensibility/vsct-xml-schema-conditional-attributes.md)|

### <a name="child-elements"></a>Дочерние элементы

|Элемент|Описание|
|-------------|-----------------|
|Parent|Необязательный параметр. Родительский элемент элемента меню.|
|CommandFlag|Обязательный элемент. Посмотреть [элемент флага команды](../extensibility/command-flag-element.md). Действительные значения CommandFlag для меню следующие:<br /><br /> -   **ВсегдаСоздать**<br />-   **По умолчаниюдок**<br />-   **DefaultInvisible** - Этот флаг не влияет на отображение панели инструментов.<br />-   **DontCache**<br />-   **DynamicVisibility** - Этот флаг не влияет на отображение панели инструментов.<br />-   **Иконандтекст**<br />-   **Нет Настройка**<br />-   **НотинТБлист**<br />-   **NoToolbarClose**<br />-   **Текстовыеизменения**<br />-   **TextIsAnchorCommand**|
|Строки|Обязательный элемент. Посмотреть [элемент строки](../extensibility/strings-element.md). Элемент `ButtonText` ребенка должен быть определен.|
|Заметка|Дополнительный комментарий.|

### <a name="parent-elements"></a>Родительские элементы

|Элемент|Описание|
|-------------|-----------------|
|[Элемент меню](../extensibility/menus-element.md)|Определяет все меню, которые реализует VSPackage.|

## <a name="example"></a>Пример

```
<Menu guid="cmdGuidWidgetCommands" id="menuIDEditWidget"
  priority="0x0002" type="Menu">
  <Parent guid="cmdSetGuidWidgetCommands" id="groupIDFileEdit">
    <CommandFlag>AlwaysCreate</CommandFlag>
    <Strings>
      <ButtonText>Edit Widget</ButtonText>
    </Strings>
    </Parent>
</Menu>
```

## <a name="see-also"></a>См. также
- [Таблица команд Visual Studio (.vsct) Файлы](../extensibility/internals/visual-studio-command-table-dot-vsct-files.md)
