---
title: Создание категории настроек (ru) Документы Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- profile settings, creating categories
ms.assetid: 97c88693-05ff-499e-8c43-352ee073dcb7
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 5f4b2fa9d82181d0eb899bf9680e8a9debd6c50b
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80739605"
---
# <a name="create-a-settings-category"></a>Создание категории настроек

В этом пошаговом шаге вы создаете категорию параметров Visual Studio и используете ее для сохранения значений и восстановления значений из файла настроек. Категория настроек — это группа связанных свойств, которые отображаются как «точка пользовательских настроек»; то есть, как флажок в мастере **настроек импорта и экспорта.** (Вы можете найти его в меню **Инструменты.)** Настройки сохраняются или восстанавливаются как категории, а отдельные параметры не отображаются в мастере. Дополнительные сведения см. в статье [Параметры среды](../ide/environment-settings.md).

Вы создаете категорию настроек, <xref:Microsoft.VisualStudio.Shell.DialogPage> выгонив ее из класса.

Чтобы начать это пошаговое решение, необходимо сначала выполнить первый раздел [страницы «Создать параметры».](../extensibility/creating-an-options-page.md) Полученная сетка свойств Options позволяет изучить и изменить свойства в категории. После сохранения категории свойств в файле параметров вы изучите файл, чтобы увидеть, как сохраняются значения свойств.

## <a name="prerequisites"></a>Предварительные требования
 Начиная с Visual Studio 2015, вы не устанавливаете Visual Studio SDK из центра загрузки. Он включен в качестве дополнительной функции в Visual Studio установки. Вы также можете установить VS SDK позже. Для получения дополнительной информации, [см.](../extensibility/installing-the-visual-studio-sdk.md)

## <a name="create-a-settings-category"></a>Создание категории настроек
 В этом разделе используется пользовательская точка настройки для сохранения и восстановления значений категории параметров.

### <a name="to-create-a-settings-category"></a>Создание категории настроек

1. Заполните [страницу «Создание опций».](../extensibility/creating-an-options-page.md)

2. Откройте файл *VSPackage.resx* и добавьте эти три строки ресурсов:

    |name|Значение|
    |----------|-----------|
    |106|Моя категория|
    |107|Мои параметры|
    |108|OptionInteger и OptionFloat|

     Это создает ресурсы, которые называют категорию "Моя категория", объект "Мои настройки", а также описание категории "OptionInteger и OptionFloat".

    > [!NOTE]
    > Из этих трех только название категории не отображается в мастере **параметров импорта и экспорта.**

3. В *MyToolsOptionsPackage.cs* `float` добавления `OptionFloat` свойства, названного в `OptionPageGrid` класс, как показано в следующем примере.

    ```csharp
    public class OptionPageGrid : DialogPage
    {
        private int optionInt = 256;
        private float optionFloat = 3.14F;

        [Category("My Options")]
        [DisplayName("My Integer option")]
        [Description("My integer option")]
        public int OptionInteger
        {
            get { return optionInt; }
            set { optionInt = value; }
        }
        [Category("My Options")]
        [DisplayName("My Float option")]
        [Description("My float option")]
        public float OptionFloat
        {
            get { return optionFloat; }
            set { optionFloat = value; }
        }
    }
    ```

    > [!NOTE]
    > Категория `OptionPageGrid` под названием "Моя категория" теперь состоит из двух свойств, `OptionInteger` и `OptionFloat`.

4. Добавьте <xref:Microsoft.VisualStudio.Shell.ProvideProfileAttribute> в `MyToolsOptionsPackage` класс и дайте ему категориюName "Моя категория", дать ему ObjectName "Мои настройки", и набор isToolsOptionPage к истине. Установите категориюResourceID, objectNameResourceID и DescriptionResourceID на соответствующие идентификаторы строки ресурса, созданные ранее.

    ```csharp
    [ProvideProfileAttribute(typeof(OptionPageGrid),
        "My Category", "My Settings", 106, 107, isToolsOptionPage:true, DescriptionResourceID = 108)]
    ```

5. Выполните сборку решения и запустите отладку. В экспериментальном примере вы должны увидеть, что **My Grid Page** теперь имеет как множество, так и значения поплавка.

## <a name="examine-the-settings-file"></a>Изучить файл настроек
 В этом разделе вы экспортируете значения категории свойств в файл настроек. Вы изучаете файл, а затем импортируете значения обратно в категорию свойств.

1. Запустите проект в режиме отладки, нажав **F5.** Это начинается экспериментальный экземпляр.

2. Откройте диалог > **опций** **«Инструменты».**

3. В представлении дерева в левом стеле расширьте **мою категорию,** а затем нажмите **"Моя страница**сетки".

4. Измените значение **OptionFloat** до 3.1416 и **OptionInteger** до 12. Нажмите кнопку **ОК**.

5. В меню **Сервис** выберите команду **Импорт и экспорт параметров**.

     Появляется мастер **параметров импорта и экспорта.**

6. Убедитесь, что **выбранные для экспорта параметры среды выбраны,** а затем нажмите **далее.**

     Отображается страница **«Выберите настройки для экспорта».**

7. Нажмите **кнопку "Настройки"**.

     **Описание** изменяется в **OptionInteger и OptionFloat**.

8. Убедитесь, что мои настройки является единственной **категорией,** которая выбрана, а затем нажмите **Далее.**

     Отображается страница **«Имя файла настроек».**

9. Назовите новый файл настроек *MySettings.vssettings* и сохраните его в соответствующем каталоге. Нажмите кнопку **Готово**.

     На странице **Export Complete** сообщается, что ваши настройки были успешно экспортированы.

10. В меню **Файл** наведите указатель мыши на пункт **Открыть**и выберите **Файл**. Найдите *MySettings.vssettings* и откройте его.

     Категорию свойств, экспортируемую в следующем разделе файла, можно найти (ваши GUID будут отличаться).

    ```
    <Category name="My Category_My Settings"
          Category="{4802bc3e-3d9d-4591-8201-23d1a05216a6}"
          Package="{6bb6942e-014c-489e-a612-a935680f703d}"
          RegisteredName="My Category_My Settings">
          PackageName="MyToolsOptionsPackage">
       <PropertyValue name="OptionFloat">3.1416</PropertyValue>
       <PropertyValue name="OptionInteger">12</PropertyValue>
    </Category>
    ```

     Обратите внимание, что полное имя категории формируется путем добавления подчеркивания к названию категории с последующим именем объекта. OptionFloat и OptionInteger отображаются в категории вместе с экспортируемой стоимостью.

11. Закройте файл настроек, не изменяя его.

12. В меню **Инструменты,** нажмите **Параметры**, расширить **мою категорию**, нажмите **Моя страница сетки,** а затем изменить значение **OptionFloat** до 1,0 и **OptionInteger** до 1. Нажмите кнопку **ОК**.

13. В меню **«Инструменты»** щелкните **параметры импорта и экспорта,** выберите **параметры среды, выбранные импортом,** а затем нажмите **далее.**

     Отображается страница **«Сохранение текущих параметров».**

14. Выберите **Нет, просто импортируйте новые настройки,** а затем нажмите **Далее.**

     **Отображается страница «Выбрать собрание настроек для импорта».**

15. Выберите файл *MySettings.vssettings* в узло **моих настроек** представления дерева. Если файл не отображается в представлении дерева, нажмите **«Просмотреть»** и найдите его. Щелкните **Далее**.

     Отображается поле **«Выберите настройки для диалога импорта».**

16. Убедитесь, что **мои настройки выбраны,** а затем нажмите **Finish.** При попастании на страницу **«Импорт Полная»** нажмите **«Закрыть».**

17. В меню **«Инструменты»** щелкните **Параметры,** расширьте **мою категорию,** щелкните **страницу «Моя сетка»** и убедитесь, что значения категории свойств были восстановлены.
