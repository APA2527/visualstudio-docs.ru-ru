---
title: Оптимизация параметров Профилировщика | Документация Майкрософт
ms.date: 4/29/2020
ms.topic: conceptual
helpviewer_keywords:
- Profiler, improve performance
author: Sagar-S-S
ms.author: sashe
manager: AndSter
ms.workload:
- multiple
ms.openlocfilehash: 9ff76364026230d08d03c91d14bddba3c325e7be
ms.sourcegitcommit: 1d4f6cc80ea343a667d16beec03220cfe1f43b8e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2020
ms.locfileid: "85290990"
---
# <a name="optimizing-profiler-settings"></a>Оптимизация параметров Профилировщика

Профилировщик производительности и окно "Средства диагностики" в Visual Studio имеют множество различных параметров, которые влияют на общую производительность средств. Изменение некоторых параметров может привести к быстрому выполнению анализа или появлению дополнительного времени ожидания при обработке результатов в средствах. Ниже приведена сводка по определенным параметрам и их влиянию на производительность.

## <a name="symbol-settings"></a>Параметры символов

Параметры символов, доступные в настройках отладчика (**Отладка > Параметры > Символы**), значительно влияют на время, затрачиваемое на формирование результатов в средствах. Включение серверов символов или использование переменной **_NT_SYMBOL_PATH** предписывает профилировщику запрашивать символы для каждого загруженного модуля в отчете. В настоящее время профилировщик всегда автоматически загружает все символы, независимо от предпочтения автоматической загрузки символов.

![Страница загрузки символов](../profiling/media/symbolloading.png "Загрузка символов")

Ход выполнения загрузки символов можно увидеть в окне **Вывод** под заголовком **Средства диагностики**.

![Ход выполнения загрузки символов](../profiling/media/symbolloadingprogress.png "Ход выполнения загрузки символов")

После загрузки символы кэшируются, что позволяет ускорить последующий анализ, но при этом потребуется загрузка и анализ файлов. Если загрузка символов замедляет анализ, попробуйте отключить серверы символов и очистить кэш символов. Вместо этого полагайтесь на символы, созданные локально для вашего проекта.

## <a name="show-external-code"></a>Показать внешний код

Во многих из средств **Профилировщика производительности** и окна **Средства диагностики** используется концепция пользовательского кода (в противопоставлении внешнему коду). Пользовательский код — это любой код, созданный с помощью открытого решения или открытой рабочей области. Внешним кодом является любой другой код. Отключив параметр **Показать внешний код** или включив параметр **Показать только мой код**, вы дадите возможность средствам объединять внешний код в один кадр первого уровня, что значительно сокращает объем обрабатываемой информации, необходимой для отображения результатов. Это позволит пользователям увидеть, что во внешнем коде привело к замедлению, и сведет к минимуму обработку данных. По возможности отключите параметр **Показать внешний код** и убедитесь, что для анализа файла DIAGSESSION открыто решение или рабочая область.

## <a name="trace-duration"></a>Длительность трассировки

Профилирование меньшей длительности приводит к меньшему объему данных, что ускоряет анализ. Как правило, рекомендуется ограничить трассировку не более чем пятью минутами данных о производительности. Некоторые средства, такие как [Загрузка ЦП](../profiling/cpu-usage.md), позволяют приостанавливать сбор данных во время работы средства, что дает возможность ограничить объем собираемых данных сценарием, который нужно проанализировать.

## <a name="sampling-frequency"></a>Частота выборки

Некоторые средства, такие как [Загрузка ЦП](../profiling/cpu-usage.md) и [NET Object Allocation](../profiling/dotnet-alloc-tool.md) (Распределение объектов .NET), позволяют настроить частоту выборки. Увеличение частоты выборки позволяет выполнять более точные измерения, но увеличивает объем создаваемых данных. Если не изучается конкретная проблема, для этого параметра рекомендуется оставить значение по умолчанию.

![Страница свойств Центра диагностики](../profiling/media/diaghubpropertiespage.png "Страница свойств Центра диагностики")

## <a name="see-also"></a>См. также

- [Запуск средств профилирования с отладчиком или без него](../profiling/running-profiling-tools-with-or-without-the-debugger.md)
- [Одновременное использование нескольких профилировщиков](../profiling/use-multiple-profiler-tools-simultaneously.md)
- [Общие сведения о методах сбора данных о производительности](../profiling/understanding-performance-collection-methods-perf-profiler.md)
