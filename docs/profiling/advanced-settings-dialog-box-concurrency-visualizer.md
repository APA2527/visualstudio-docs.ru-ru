---
title: Диалоговое окно "Дополнительные параметры" (визуализатор параллелизма) | Документация Майкрософт
description: Используйте дополнительные параметры в визуализаторе параллелизма для управления содержимым трассировки. Имеются вкладки для символов, "Только мой код", для буферизации и многого другого.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
f1_keywords:
- vs.cv.settings
ms.assetid: bb3d90aa-5f08-4953-9be0-be6cea11633d
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: fc7d3464fd05b1fe99fcbfa8773e64bca4cb95e7
ms.sourcegitcommit: a436ba564717b992eb1984b28ea0aec801eacaec
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/14/2021
ms.locfileid: "98205506"
---
# <a name="advanced-settings-dialog-box-concurrency-visualizer"></a>Диалоговое окно "Дополнительные параметры" (визуализатор параллелизма)
Диалоговое окно **Дополнительные параметры** в визуализаторе параллелизма позволяет управлять сбором трассировки.  В нем содержатся следующие вкладки: "Символы", "Только мой код", "Буферизация", Filtering (Фильтрация), "События CLR", "Маркеры", "Поставщики" и "Файлы".

## <a name="symbols"></a>Символы
 Визуализатор параллелизма использует те же параметры символов, что и отладчик Visual Studio. Эти параметры позволяют разрешить стеки вызовов, связанные с данными производительности.  При обработке трассировки визуализатор параллелизма подключается к серверам символов, указанным на странице параметров.  Если доступ к этим данным осуществляется по сети, обработка трассировки замедляется.  Чтобы ускорить разрешение символов, их можно кэшировать локально. Если символы были скачаны, Visual Studio экспортирует их из локального кэша.

## <a name="just-my-code"></a>Только мой код
 По умолчанию на вкладке "Только мой код" содержится набор *EXE*- и *DLL*-файлов, связанных с текущим решением в Visual Studio. Если вы используете функцию "Только мой код" для фильтрации стека вызовов, визуализатор параллелизма оценивает этот набор файлов. На этой вкладке вы можете добавить каталоги с *EXE*- и *DLL*-файлами в расположения, используемые визуализатором параллелизма при применении функции "Только мой код".

 При сборе трассировки пути к *EXE*- и *DLL*-файлам сохраняются в файле трассировки.  Изменение этого параметра не влияет на все собранные ранее трассировки.

## <a name="buffering"></a>ответов
 Во время сбора трассировки визуализатор параллелизма использует приложение для трассировки событий Windows (ETW).  При сохранении событий это приложение использует различные буферы.  Мы не советуем использовать буфер трассировки событий Windows по умолчанию, так как в некоторых случаях он может вызывать определенные проблемы, например потерю событий.  Чтобы настроить параметры буфера трассировки событий Windows, используйте вкладку "Буферизация". Дополнительные сведения см. в статье [Event Tracing](/windows/win32/etw/event-tracing-portal) (Трассировка событий) и [EVENT_TRACE_PROPERTIES structure](/windows/win32/api/evntrace/ns-evntrace-event_trace_properties) (Структура EVENT_TRACE_PROPERTIES).

## <a name="filter"></a>Filter
 На вкладке "Фильтр" вы можете выбрать набор событий, собираемых визуализатором параллелизма. При выборе подмножества событий снизится количество типов данных, отображаемых в отчете, уменьшится размер каждой трассировки и ускорится обработка трассировок.

### <a name="clr-events"></a>CLR-события
 События, созданные в среде CLR, позволяют визуализатору событий разрешать управляемые стеки вызовов.  Если отключить сбор событий среды CLR, размер трассировки уменьшится, но некоторые стеки вызовов будут запрещены.  В результате этого некоторые действия потока ЦП могут быть неправильно классифицированы.

### <a name="collect-for-native-processes"></a>Сбор для встроенных процессов
 По умолчанию события среды CLR собираются только при наличии профилированного управляемого процесса, так как обычно они не нужны для встроенных процессов.  В некоторых случаях, например, если встроенный процесс размещен в среде CLR, может потребоваться собрать события среды CLR для встроенных процессов.  В этом случае установите флажок **Сбор для встроенных процессов**.

### <a name="disable-rundown-events"></a>Отключение событий завершения
 Среда CLR создает события от двух поставщиков: среды выполнения и очистки.  Если вы хотите собрать события CLR, полученные только из среды выполнения, установите флажок **Отключить события завершения**.  В результате этого размер файла трассировки, созданного во время сбора, уменьшится, но некоторые стеки могут быть запрещены. Дополнительные сведения см. в статье о [поставщиках ETW среды CLR](/dotnet/framework/performance/clr-etw-providers).

### <a name="sample-events"></a>Примеры событий
 Чтобы собрать стеки вызовов, связанные с выполнением потока, вы можете использовать примеры событий. Эти события потоков, выполняющихся в текущем процессе, собираются примерно раз в миллисекунду. Если отключить сбор примеров событий, размер собранной трассировки уменьшится, но вы не сможете просматривать стеки вызовов, связанные с выполнением потока.

### <a name="gpu-events"></a>События GPU
 События GPU создаются средой DirectX. Если отключить сбор событий GPU, размер собранной трассировки уменьшится, но вы не сможете просматривать эти события в представлении "Использование ЦП" или события ядра DirectX в представлении "Потоки".

### <a name="file-io-events"></a>События ввода-вывода в файле
 События ввода-вывода файла представляют обращения к диску от имени текущего процесса.  Если отключить события ввода-вывода файла, размер собранной трассировки уменьшится, но в представлении "Потоки" не будут отображаться сведения о каналах или операциях диска.

## <a name="markers"></a>Метки
 На вкладке **Маркеры** вы можете настроить набор поставщиков ETW, которые отображаются как маркеры в визуализаторе параллелизма.  Кроме того, здесь также можно отсортировать коллекцию маркеров в зависимости от уровня их важности или категории ETW.  При использовании [пакета SDK визуализатора параллелизма](../profiling/concurrency-visualizer-sdk.md) и собственного поставщика маркеров вы можете зарегистрировать его на этой вкладке, чтобы он отображался в представлении "Потоки".

### <a name="add-a-new-provider"></a>Добавление нового поставщика
 Если код использует [пакет SDK визуализатора параллелизма](../profiling/concurrency-visualizer-sdk.md) или создает события ETW, соответствующие соглашению <xref:System.Diagnostics.Tracing.EventSource>, эти события можно просмотреть в визуализаторе параллелизма, предварительно зарегистрировав их в этом окне.

 В поле **Имя** введите имя, которое описывает типы событий, созданных поставщиком.  В поле **Идентификатор GUID** введите GUID, связанный с этим поставщиком. (GUID связан с каждым поставщиком ETW.)

 При необходимости вы можете указать, следует ли отфильтровывать события от этого поставщика на основе категории или уровня важности.  Чтобы настроить фильтрацию на основе категорий пакета SDK визуализатора параллелизма, используйте поле категории.  Для этого введите строку или диапазоны категорий, разделенные запятой.  Это позволит указать, какие категории событий, полученных от текущего поставщика, следует показывать.  При добавлении поставщика <xref:System.Diagnostics.Tracing.EventSource> поле категории можно использовать, чтобы отфильтровать события по ключевому слову ETW.  Ключевое слово представляет собой битовую маску. Поэтому, чтобы указать заданные в маске биты, вы можете ввести строку целых чисел, разделенных запятой. Например, значение 1,2 задает первый и второй бит и преобразует его в 6 в десятичном формате.

 Чтобы отфильтровать события, имеющие важность или уровень ETW меньше, чем указанное значение, используйте список уровня важности.

### <a name="configure-an-existing-provider"></a>Настройка имеющегося поставщика
 Чтобы изменить параметры, связанные с имеющимся поставщиком, выберите его в списке, а затем нажмите кнопку **Редактировать поставщик**.  Вы можете изменить имя, GUID и параметры фильтрации.

### <a name="filter-marker-data-out-of-concurrency-visualizer-reports"></a>Фильтрация данных маркера в отчете визуализатора параллелизма
 Если вы хотите, чтобы в будущих трассировках не отображались данные конкретного поставщика, снимите флажок рядом с поставщиком, которого необходимо удалить.

## <a name="files"></a>Файлы
 На вкладке **Файлы** можно указать каталог, в который должны сохраняться файлы трассировки после сбора.  Для каждой собранной трассировки визуализатор параллелизма создает 4 файла:

- файл журнала трассировки событий режима ядра (<em>.</em>kernel.etl*);

- файл журнала трассировки событий пользовательского режима (<em>.</em>user.etl*);

- файл данных визуализатора параллелизма (<em>.</em>CVData*);

- файл трассировки визуализатора параллелизма (<em>.</em>CVTrace*).

  В двух ETL-файлах хранятся исходные данные трассировки, а в двух файлах визуализатора параллелизма — обработанные данные.  Как правило, после обработки трассировки исходные ETL-файлы не используются.  Если установить флажок **Удалить файлы журнала трассировки событий (ETL) после анализа**, сокращается объем данных трассировки, хранящихся на диске.

## <a name="see-also"></a>См. также раздел
- [Только мой код](../profiling/just-my-code-threads-view.md)
- [Маркеры визуализатора параллелизма](../profiling/concurrency-visualizer-markers.md)