---
title: Анализ использования базы данных для проектов .NET Core | Документация Майкрософт
ms.date: 5/5/2020
ms.topic: conceptual
helpviewer_keywords:
- database, profiling
author: esteban-herrera
ms.author: esherrer
manager: AndSter
ms.workload:
- multiple
ms.openlocfilehash: 4ea74fd587119105577062f571b4ec8e3de76a4f
ms.sourcegitcommit: 4ae5e9817ad13edd05425febb322b5be6d3c3425
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/11/2020
ms.locfileid: "90037534"
---
# <a name="analyze-database-performance-using-the-database-tool"></a>Анализ производительности базы данных с помощью инструмента "База данных"

С помощью инструмента "База данных" можно вести запись запросов к базе данных, которые отправляет приложение в ходе диагностического сеанса. Сведения об отдельных запросах затем можно анализировать, чтобы определить области для улучшения производительности приложения.

> [!NOTE]
> Для работы инструмента "База данных" требуется Visual Studio 2019 версии 16.3 или более поздней и проект .NET Core в Windows, использующий [ADO.NET]( https://docs.microsoft.com/dotnet/framework/data/adonet/ado-net-overview) или [Entity Framework Core](/ef/core/).

## <a name="setup"></a>Установка

1. Откройте профилировщик производительности (**ALT+F2**) в Visual Studio.

1. Установите флажок **База данных**.

   ![Выбор инструмента "База данных"](./media/db-launch.png "Выбор инструмента База данных")

   > [!NOTE]
   > Если инструмент недоступен для выбора, снимите флажки для всех остальных инструментов, так как некоторые из них должны работать в одиночку. Дополнительные сведения о совместной работе инструментов см. в статье [Использование средств профилирования из командной строки](../profiling/using-the-profiling-tools-from-the-command-line.md).
   >
   > Если инструмент все равно недоступен, проверьте соответствие проекта предварительным требованиям. Убедитесь, что проект находится в режиме выпуска для записи данных с максимальной точностью.

1. Нажмите кнопку **Пуск**, чтобы запустить средство.

1. После его запуска просмотрите сценарий, который вы хотите профилировать в приложении. Затем выберите **Остановить сбор** или закройте приложение, чтобы просмотреть данные.

1. После остановки сбора данных появится таблица запросов, которые выполнялись во время сеанса профилирования.

   ![Остановка инструмента "База данных"](./media/db-after.png "Остановка инструмента База данных")

Запросы организованы в хронологическом порядке, но их можно отсортировать по любому из столбцов. Дополнительные столбцы можно отобразить, щелкнув правой кнопкой мыши заголовок столбца. При выборе столбца **Длительность** запросы ранжируются от самого длительного времени выполнения до самого короткого.

Отыскав запрос, который необходимо исследовать, щелкните его правой кнопкой мыши. Выберите **Перейти к исходному файлу**, чтобы посмотреть код, отвечающий за этот запрос.

![Выбор пункта "Перейти к исходному файлу"](./media/db-gotosource.png "Выбор пункта Перейти к исходному файлу")

Если вы укажете диапазон на временной шкале, в таблице будут показаны только те запросы, которые выполнялись в это время. Это особенно полезно при использовании инструмента "База данных" в паре с [инструментом "Загрузка ЦП"](./cpu-usage.md?view=vs-2019).

## <a name="see-also"></a>См. также

- [Оптимизация параметров профилировщика](../profiling/optimize-profiler-settings.md)