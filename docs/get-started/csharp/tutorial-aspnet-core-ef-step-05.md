---
title: Шаг 5. Развертывание приложения ASP.NET Core в Azure
description: Разверните веб-приложение ASP.NET в Azure с помощью этого видео-учебника и пошаговых инструкций.
ms.custom: get-started
ms.date: 08/14/2020
ms.technology: vs-ide-general
ms.prod: visual-studio-windows
monikerRange: vs-2019
ms.topic: tutorial
ms.devlang: CSharp
author: ardalis
ms.author: ornella
manager: jillfra
dev_langs:
- CSharp
ms.workload:
- aspnet
- dotnetcore
ms.openlocfilehash: 55dd48ed2c319984fcc96e806c97a7ae24ce7170
ms.sourcegitcommit: 577c905de52057a741e68c2ed168ea527813fda5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2020
ms.locfileid: "88248623"
---
# <a name="step-5-deploy-your-aspnet-core-app-to-azure"></a>Шаг 5. Развертывание приложения ASP.NET в Azure

Выполните следующие действия, чтобы развернуть приложение ASP.NET и его базу данных в Azure.

_Выполните инструкции из этого видео, чтобы развернуть свое первое приложение ASP.NET в Azure._

> [!VIDEO https://www.youtube.com/embed/n8wz_f5_4wI]

## <a name="open-your-project"></a>Открытие проекта

Откройте приложение ASP.NET Core в Visual Studio 2019. Приложение уже должно использовать настройку с EF Core и работающим веб-API, как было настроено на [шаге 4 этого руководства](tutorial-aspnet-core-ef-step-04.md).

## <a name="publish-to-azure-app-service"></a>Публикация в службу приложений Azure

1. В обозревателе решений щелкните правой кнопкой мыши проект и выберите **Опубликовать**. В мастере **публикации** выберите **Azure** в качестве целевого объекта.

   ![Снимок экрана Службы приложений Azure 1](media/vs-2019/app-service-screen-1.png)

1. В качестве конкретного целевого объекта выберите **Службу приложений Azure (Windows)** .

   ![Снимок экрана Службы приложений Azure 2](media/vs-2019/app-service-screen-2.png)

1. Выберите **Создать новую Службу приложений Azure**. Если у вас нет учетной записи Azure, щелкните **Создать бесплатную учетную запись Azure** и пройдите быстрый процесс регистрации.

   ![Снимок экрана Службы приложений Azure 3](media/vs-2019/app-service-screen-3.png)

1. Укажите имя и группу ресурсов или примите значения по умолчанию и нажмите **Создать**. Группа ресурсов — это просто способ упорядочивания связанных ресурсов в Azure, таких как службы, работающие вместе с учетными записями хранения, хранилищами ключей и базами данных.

   ![Снимок экрана Службы приложений Azure 4](media/vs-2019/app-service-screen-4.png)

1. Нажмите кнопку **Готово**. В результате в Azure создаются ресурсы, приложение развертывается, а на вкладке **Публикация** появляются сведения о том, что вы только что создали. На вкладке **Публикация** имеется кнопка, позволяющая опубликовать такую конфигурацию одним нажатием, отображаются сведения о конфигурации, а также можно добавлять службы, например базу данных.

Теперь добавьте базу данных SQL Server Azure.

1. На вкладке **Публикация** в разделе **Зависимости служб** рядом с пунктом **База данных SQL Server** выберите **Настроить**.

1. На следующем экране выберите пункт **База данных SQL Azure**.

   ![Снимок экрана: выбор базы данных SQL Azure](media/vs-2019/app-service-azure-sql-db.png)

1. На экране **Настройка базы данных SQL Azure** нажмите **Создать базу данных SQL**.

   ![Снимок экрана "Настройка базы данных SQL"](media/vs-2019/app-service-azure-sql-db-2.png)

1. На экране **База данных SQL Azure: создание** создайте новый сервер базы данных.

   ![Снимок экрана "База данных SQL Azure: Создать](media/vs-2019/app-service-azure-sql-db-3.png)

1. На экране **SQL Server: создание** выберите имя, расположение, а также укажите имя пользователя и пароль администратора.

   ![Создание Azure SQL Server в Visual Studio 2019](media/vs-2019/app-service-azure-sql-db-overlayed.png)

## <a name="exploring-the-azure-portal-and-your-hosted-app"></a>Обзор портала Azure и размещенного приложения

После создания Службы приложений сайт будет запущен в браузере. Во время его загрузки Службу приложений можно также найти на портале Azure. Изучая доступные параметры для Службы приложений, вы найдете раздел **Обзор**, в котором вы можете запускать и останавливать приложение.

![Параметры Службы приложений Azure](media/vs-2019/vs2019-azure-app-service-menu-options.png)

### <a name="scalability"></a>Масштабируемость

Вы можете изучить параметры, чтобы масштабировать приложение. Увеличение масштаба означает увеличение числа ресурсов для каждого экземпляра вашего приложения. Уменьшение масштаба означает увеличение числа экземпляров вашего приложения. Вы можете настроить автомасштабирование для приложения, которое будет автоматически увеличивать число экземпляров, используемых для размещения приложения, в ответ на загрузку, а затем сокращать его, когда нагрузка снизится.

### <a name="security-and-compliance"></a>Безопасность и соответствие требованиям

Еще одно преимущество размещения приложения с помощью Azure — это безопасность и соответствие требованиям. Служба приложений Azure соответствует стандартам ISO, SOC и PCI. Мы можем выбрать способ проверки подлинности пользователей: с помощью Azure Active Directory или входа через социальные сети, такие как Twitter, Facebook, Google и Майкрософт. Мы можем создавать ограничения IP-адресов, управлять удостоверениями службы, добавлять пользовательские домены и поддержку SSL для приложения, а также настраивать резервные копии с восстанавливаемых архивных копий содержимого, конфигурации и базы данных приложения. Эти функции доступны в проверке подлинности/авторизации, идентификаторе, резервных копиях и пунктах меню параметров SSL.

### <a name="deployment-slots"></a>Слоты развертывания

Часто при развертывании приложения имеется небольшой период простоя, пока происходит перезапуск приложения. Слоты развертывания помогают избежать этой проблемы, позволяя проводить развертывание в отдельный промежуточный экземпляр или набор экземпляров и подготавливать их перед тем, как запускать в производство. Переключение — это мгновенное и эффективное перенаправление трафика. Если после переключения возникают какие-либо проблемы с производством, вы всегда можете вернуться к своему последнему известному исправному состоянию.

## <a name="update-connection-string"></a>Обновление строки подключения

Azure по умолчанию ожидает подключения нового приложения к своей новой базе данных SQL Server, чтобы использовать строку подключения с именем `DefaultConnection`. Сейчас приложение, которое мы создали ранее в этой серии руководств, использует строку подключения с именем `AppDbContext`. Нам нужно изменить ее в *appsettings.json* и *Startup.cs*, а затем повторно развернуть приложение.

## <a name="test-the-app-running-in-azure"></a>Проверка приложения, работающего в Azure

Перейдите к пути */Игры*. У вас должна быть возможность добавить новую игру, а также увидеть ее в списке. Затем перейдите к пути */swagger*. Здесь у вас должна быть возможность использовать конечные точки веб-API, чтобы подтвердить, что API приложения также работает.

Поздравляем! Вы завершили просмотр этой серии видеоучебников!

## <a name="next-steps"></a>Дальнейшие действия

Узнайте больше о том, как разработать приложения ASP.NET Core с помощью следующих бесплатных ресурсов.

[ASP.NET Core Application Architecture (Архитектура приложений ASP.NET Core)](https://dotnet.microsoft.com/learn/web/aspnet-architecture)

## <a name="see-also"></a>См. также раздел

- [Публикация приложения ASP.NET Core в Azure с помощью Visual Studio](/aspnet/core/tutorials/publish-to-azure-webapp-using-vs?view=aspnetcore-2.2)