---
title: Добавление пользовательских элементов управления в окно "Источники данных"
ms.date: 11/04/2016
ms.topic: how-to
f1_keywords:
- vs.datasource.howtoaddcustomcontrol
helpviewer_keywords:
- Data Sources Window, adding controls
- controls [Visual Studio], adding to Data Sources Window
- DefaultBindingPropertyAttribute class, using
- LookupBindingPropertiesAttribute class, using
- ComplexBindingPropertiesAttribute class, using
- Data Sources Window, selecting controls
ms.assetid: 8c43e7d2-ba94-4d9b-96de-3aa971955afd
author: ghogen
ms.author: ghogen
manager: jillfra
ms.openlocfilehash: 39ff272581793be9b456bbc404119a488850b3c4
ms.sourcegitcommit: 1d4f6cc80ea343a667d16beec03220cfe1f43b8e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2020
ms.locfileid: "85283077"
---
# <a name="add-custom-controls-to-the-data-sources-window"></a>Добавление пользовательских элементов управления в окно "Источники данных"

При перетаскивании элемента из окна Источники данных в область конструктора для создания элемента управления с привязкой к данным можно выбрать тип создаваемого элемента управления. Каждый элемент в окне имеет раскрывающийся список, в котором отображаются элементы управления, которые можно выбрать. Набор элементов управления, связанных с каждым элементом, определяется типом данных элемента. Если элемент управления, который требуется создать, не отображается в списке, можно выполнить инструкции, приведенные в этом разделе, чтобы добавить элемент управления в список.

Дополнительные сведения о выборе элементов управления с привязкой к данным, создаваемых для элементов в окне Источники данных, см. в разделе [Задание элемента управления, создаваемого при перетаскивании из окна Источники данных](../data-tools/set-the-control-to-be-created-when-dragging-from-the-data-sources-window.md).

## <a name="customize-the-bindable-controls-list"></a>Настройка списка связываемых элементов управления

Чтобы добавить или удалить элементы управления из списка доступных элементов управления для элементов в окне Источники данных с конкретным типом данных, выполните следующие действия.

### <a name="to-select-the-controls-to-be-listed-for-a-data-type"></a>Выбор элементов управления для перечисления для типа данных

1. Убедитесь, что конструктор WPF или конструктор Windows Forms открыт.

2. В окне **Источники данных** щелкните элемент, который является частью источника данных, добавленного в окно, а затем щелкните раскрывающееся меню для этого элемента.

   > [!TIP]
   > Если окно Источники данных не открыто, откройте его, выбрав **Просмотреть**  >  **другие**  >  **Источники данных**Windows.

3. В раскрывающемся меню выберите команду **настроить**. Откроется одно из следующих диалоговых окон:

    - Если **конструктор Windows Forms** открыт, откроется страница « **Настройка пользовательского интерфейса данных** » диалогового окна « **Параметры** ». Дополнительные сведения см. в разделе [диалоговое окно "Параметры настройки пользовательского интерфейса данных"](../ide/reference/options-windows-forms-designer-data-ui-customization.md).

    - Если **конструктор WPF** открыт, откроется диалоговое окно **Настройка привязки элементов управления** .

4. В диалоговом окне выберите тип данных из раскрывающегося списка **тип данных** .

    - Чтобы настроить список элементов управления для таблицы или объекта, выберите **[список]**.

    - Чтобы настроить список элементов управления для столбца таблицы или свойства объекта, выберите тип данных столбца или свойства в базовом хранилище данных.

    - Чтобы настроить список элементов управления для вывода объектов данных с пользовательскими фигурами, выберите **[другие]**. Например, выберите **[другие]** , если приложение имеет пользовательский элемент управления, отображающий данные из нескольких свойств определенного объекта.

5. В поле **связанные элементы управления** выберите каждый элемент управления, который должен быть доступен для выбранного типа данных, или снимите флажки для элементов управления, которые требуется удалить из списка.

    > [!NOTE]
    > Если элемент управления, который требуется выбрать, не отображается в поле **связанные элементы управления** , необходимо добавить элемент управления в список. Дополнительные сведения см. в разделе [Добавление связанных элементов управления](#add-associated-controls).

6. Нажмите кнопку **ОК**.

7. В окне **Источники данных** щелкните элемент типа данных, который был связан с одним или несколькими элементами управления, а затем щелкните раскрывающееся меню для элемента.

     Элементы управления, выбранные в поле **связанные элементы управления** , теперь отображаются в раскрывающемся меню элемента.

## <a name="add-associated-controls"></a>Добавить связанные элементы управления

Если необходимо связать элемент управления с типом данных, но элемент управления не отображается в поле **связанные элементы управления** , необходимо добавить элемент управления в список. Элемент управления должен находиться в текущем решении или в сборке, на которую указывает ссылка. Он также должен быть доступен на **панели элементов** и иметь атрибут, задающий поведение привязки данных элемента управления.

Чтобы добавить элементы управления в список связанных элементов управления, выполните следующие действия.

1. Добавьте нужный элемент управления на **панель элементов** , щелкнув правой кнопкой мыши **область элементов** и выбрав **пункт Выбрать элементы**.

     Элемент управления должен иметь один из следующих атрибутов:

    |attribute|Описание|
    |---------------|-----------------|
    |<xref:System.ComponentModel.DefaultBindingPropertyAttribute>|Реализуйте этот атрибут на простых элементах управления, отображающих один столбец (или свойство) данных, например <xref:System.Windows.Forms.TextBox> .|
    |<xref:System.ComponentModel.ComplexBindingPropertiesAttribute>|Реализуйте этот атрибут в элементах управления, отображающих списки (или таблицы) данных, например <xref:System.Windows.Forms.DataGridView> .|
    |<xref:System.ComponentModel.LookupBindingPropertiesAttribute>|Реализуйте этот атрибут в элементах управления, которые отображают списки (или таблицы) данных, но также должны представлять один столбец или свойство, например <xref:System.Windows.Forms.ComboBox> .|

2. Для Windows Forms в диалоговом окне **Параметры** откройте страницу **Настройка пользовательского интерфейса данных** . Или для WPF откройте диалоговое окно **Настройка привязки элементов управления** . Дополнительные сведения см. [в разделе Настройка списка связываемых элементов управления для типа данных](#customize-the-bindable-controls-list).

3. В поле **связанные элементы** управления должен отобразиться элемент управления, который был только что добавлен на **панель элементов** .

    > [!NOTE]
    > В список связанных элементов управления можно добавить только те элементы управления, которые находятся в текущем решении или в сборке, на которую указывает ссылка. (Элементы управления должны также реализовать один из атрибутов привязки данных в предыдущей таблице.) Чтобы привязать данные к пользовательскому элементу управления, недоступному в окне Источники данных, перетащите элемент управления из **панели элементов** в область конструктора, а затем перетащите элемент для привязки из окна **Источники данных** на элемент управления.

## <a name="see-also"></a>См. также

- [Привязка элементов управления к данным в Visual Studio](../data-tools/bind-controls-to-data-in-visual-studio.md)
- [Диалоговое окно «Параметры настройки пользовательского интерфейса данных»](../ide/reference/options-windows-forms-designer-data-ui-customization.md)
