---
title: Общие сведения о реляционном конструкторе объектов LINQ to SQL
ms.date: 11/04/2016
ms.topic: overview
ms.assetid: 45e477c0-5c6b-41f9-b2d0-2808fb4f6537
author: ghogen
ms.author: ghogen
manager: jillfra
ms.workload:
- data-storage
ms.openlocfilehash: 55f6fa2ad9eda2d701563d1fa99c76f5cd5c7c1d
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "85282011"
---
# <a name="linq-to-sql-tools-in-visual-studio"></a>Инструменты LINQ to SQL в Visual Studio

LINQ to SQL — это первая технология объектно-реляционного сопоставления, выпущенная корпорацией Майкрософт. Она хорошо работает в основных сценариях и по мере возможности будет и дальше поддерживаться в Visual Studio, но активная разработка этой технологии больше не ведется. Используйте LINQ to SQL при обслуживании приложения более ранних версий, в котором она уже применяется, или в простых приложениях, которые используют SQL Server и не требуют сопоставления нескольких таблиц. Как правило, новые приложения, если им нужен уровень объектно-реляционного сопоставления, должны использовать Entity Framework.

## <a name="install-the-linq-to-sql-tools"></a>Установка средств LINQ to SQL

В Visual Studio классы LINQ to SQL, представляющие таблицы SQL, создаются с помощью **реляционного конструктора объектов**. Реляционный конструктор объектов — это пользовательский интерфейс для редактирования DBML-файлов. Для редактирования DBML-файлов в рабочей области конструктора требуются средства LINQ to SQL, которые по умолчанию ни с одной из рабочих нагрузок Visual Studio не устанавливаются.

Чтобы установить средства LINQ to SQL, запустите установщик Visual Studio, выберите **Изменить**, затем перейдите на вкладку **Отдельные компоненты** и выберите **Инструменты LINQ to SQL** в категории **Средства для работы с кодом**.

## <a name="what-is-the-or-designer"></a>Что такое реляционный конструктор объектов

Область **реляционного конструктора объектов** делится на две части: область сущностей (слева) и область методов (справа). Область сущностей является основной областью конструктора, отображающей классы сущностей, ассоциации и иерархии наследования. Область методов — это область конструктора, отображающая методы <xref:System.Data.Linq.DataContext>, которые сопоставлены хранимым процедурам и функциям.

**Реляционный конструктор объектов** предоставляет визуальную область конструктора для создания классов сущностей и ассоциаций (отношений) [LINQ to SQL](/dotnet/framework/data/adonet/sql/linq/index), которые базируются на объектах в базе данных. Другими словами, **реляционный конструктор объектов** создает модель объекта в приложении, которая сопоставляется с объектами в базе данных. Кроме того, он генерирует <xref:System.Data.Linq.DataContext> со строгим контролем ввода, который используется для отправки и получения данных между классами сущностей и базой данных. **Реляционный конструктор объектов** обеспечивает также функциональные возможности сопоставления сохраненных процедур и функций методам <xref:System.Data.Linq.DataContext> для возврата данных и заполнения классов сущностей. Наконец, **реляционный конструктор объектов** обеспечивает способность проектировать отношения наследования между классами сущностей.

## <a name="open-the-or-designer"></a>Открытие реляционного конструктора объектов

Чтобы добавить в проект модель сущности LINQ to SQL, выберите **Проект** > **Добавить новый элемент** и найдите **Классы LINQ to SQL** в списке элементов проекта:

![Классы LINQ-SQL](../data-tools/media/raddata-linq-to-sql-classes.png)

Visual Studio создает *DBML*-файл и добавляет его в решение. Он представляет собой XML-файл сопоставления и связанные с ним файлы кода.

![Классы LINQ to SQL в обозреватель решений](../data-tools/media/raddata-linq-to-sql-classes-in-solution-explorer.png)

При выборе *DBML*-файла в Visual Studio отображается область **реляционного конструктора объектов**, позволяющего создать модель визуально. На следующем рисунке показан конструктор после перетаскивания таблиц Northwind `Customers` и `Orders` из **обозреватель сервера**. Обратите внимание на связь между этими таблицами.

![Конструктор LINQ to SQL](../data-tools/media/raddata-linq-to-sql-designer.png)

> [!IMPORTANT]
> **Реляционный конструктор объектов** представляет собой простой объектно-реляционный модуль сопоставления, поскольку он поддерживает только сопоставляющие отношения 1:1. Другими словами, класс объекта может иметь сопоставляющее отношение только 1:1 с таблицей базы данных или представлением. Сложные сопоставления, например сопоставление класса сущностей с соединяемой таблицей, не поддерживаются. Для сложных сопоставлений используйте Entity Framework. Кроме того, конструктор является односторонним генератором объектного кода. Это означает, что только изменения, которые вы осуществляете на области конструктора, отражаются в файле кода. Изменения, вносимые в файл кода вручную, не отражаются в **реляционном конструкторе объектов**. Любые изменения, которые вы вручную осуществляете в файле кода принимаются, когда конструктор сохраняется и генерируется код. Сведения о том, как добавить пользовательский код и распространить классы, создаваемые **реляционный конструктор объектов**, см. в разделе [как: Расширение кода, созданного реляционным конструктором объектов](../data-tools/how-to-extend-code-generated-by-the-o-r-designer.md).

## <a name="create-and-configure-the-datacontext"></a>Создание и настройка DataContext

После добавления элемента **Классы LINQ to SQL** в проект и открытия **реляционного конструктора объектов** в пустой области конструктора отобразится пустой <xref:System.Data.Linq.DataContext>, готовый к настройке. <xref:System.Data.Linq.DataContext> настраивается на основе сведений о соединении из первого перемещенного в область конструктора элемента. Поэтому <xref:System.Data.Linq.DataContext> конфигурируется с использованием информации о подключении из первого сброшенного в область конструктора элемента. Дополнительные сведения о классе <xref:System.Data.Linq.DataContext> см. в разделе [Методы DataContext (реляционный конструктор объектов)](../data-tools/datacontext-methods-o-r-designer.md).

## <a name="create-entity-classes-that-map-to-database-tables-and-views"></a>Создание классов сущностей, сопоставленных с таблицами или представлениями базы данных

Классы сущностей, которые сопоставляются с таблицами и представлениями базы данных, можно создавать путем перетаскивания таблиц или представлений из **Обозревателя серверов** или **Обозревателя базы данных** в **реляционном конструкторе объектов**. Как указывалось в предыдущем разделе, <xref:System.Data.Linq.DataContext> конфигурируется с информацией о подключении, предоставленной первым элементом, который перемещен в область конструктора. Если в **реляционный конструктор объектов** добавляется элемент, который использует другое подключение, то можно изменить подключение для <xref:System.Data.Linq.DataContext>. Дополнительные сведения см. в разделе [Практическое руководство. создать классы LINQ to SQL, сопоставленные с таблицами и представлениями (реляционный конструктор объектов)](../data-tools/how-to-create-linq-to-sql-classes-mapped-to-tables-and-views-o-r-designer.md).

## <a name="create-datacontext-methods-that-call-stored-procedures-and-functions"></a>Создание методов DataContext, вызывающих сохраненные процедуры и функции

Методы <xref:System.Data.Linq.DataContext>, которые вызывают сохраненные процедуры и функции (сопоставляются с ними), можно создавать путем перетаскивания их из **Обозревателя серверов** или **Обозревателя базы данных** в **реляционном конструкторе объектов**. Сохраненные процедуры и функции добавляются в **реляционный конструктор объектов** как методы <xref:System.Data.Linq.DataContext>.

> [!NOTE]
> Когда хранимые процедуры и функции перетаскиваются из **обозревателя серверов** или **обозревателя баз данных** в **реляционный конструктор объектов**, тип возвращаемого значения для создаваемого метода <xref:System.Data.Linq.DataContext> будет зависеть от места, в котором завершилось перетаскивание элемента. Дополнительные сведения см. в разделе [Методы DataContext (реляционный конструктор объектов)](../data-tools/datacontext-methods-o-r-designer.md).

## <a name="configure-a-datacontext-to-use-stored-procedures-to-save-data-between-entity-classes-and-a-database"></a>Настройка DataContext для использования сохраненных процедур сохранения данных между классами сущностей и базой данных

Как утверждалось ранее, можно создавать методы <xref:System.Data.Linq.DataContext>, которые вызывают сохраненные процедуры и функции. Кроме того, можно назначать сохраненные процедуры, которые могут использоваться для поведения среды выполнения LINQ to SQL по умолчанию, включая вставки, обновления и удаления. Дополнительные сведения см. в разделе [Практическое руководство. назначить хранимые процедуры для выполнения обновлений, вставок и удалений (реляционный конструктор объектов)](../data-tools/how-to-assign-stored-procedures-to-perform-updates-inserts-and-deletes-o-r-designer.md).

## <a name="inheritance-and-the-or-designer"></a>Наследование и реляционный конструктор объектов

Классы LINQ to SQL, как и другие объекты, могут использовать наследование и выводиться из других классов. В базе данных, отношения наследования создаются несколькими способами. **Реляционный конструктор объектов** поддерживает концепцию наследования одиночных таблиц, так как именно она обычно осуществляется в реляционных системах. Дополнительные сведения см. в разделе [Практическое руководство. настроить наследование с использованием реляционного конструктора объектов](../data-tools/how-to-configure-inheritance-by-using-the-o-r-designer.md).

## <a name="linq-to-sql-queries"></a>Запросы LINQ to SQL

Классы сущностей, создаваемые **реляционным конструктором объектов**, предназначены для использования с [LINQ](/dotnet/csharp/linq/). Дополнительные сведения см. в разделе [Практическое руководство. обращаться с запросами о сведениях](/dotnet/framework/data/adonet/sql/linq/how-to-query-for-information).

## <a name="separate-the-generated-datacontext-and-entity-class-code-into-different-namespaces"></a>Выделение сгенерированного DataContext и кода класса сущностей в отдельный пространства имен Namespaces

**Реляционный конструктор объектов** предоставляет свойства **Контекстное пространство имен** и **Пространство имен сущностей** в <xref:System.Data.Linq.DataContext>. Эти свойства определяют, какое пространство имен <xref:System.Data.Linq.DataContext> и кода классов сущностей генерируется в нем. По умолчанию эти свойства пустые и <xref:System.Data.Linq.DataContext> классы сущностей генерируются в пространстве имен приложения. Чтобы сгенерировать код в пространство имен, отличное от пространства имен приложения, введите значение в свойства **Контекстное пространство имен** и (или) **Пространство имен сущностей**.

## <a name="reference-content"></a>Справочное содержимое

- <xref:System.Linq>
- <xref:System.Data.Linq>

## <a name="see-also"></a>См. также раздел

- [LINQ to SQL (.NET Framework)](/dotnet/framework/data/adonet/sql/linq/index)
- [Часто задаваемые вопросы (.NET Framework)](/dotnet/framework/data/adonet/sql/linq/frequently-asked-questions)
