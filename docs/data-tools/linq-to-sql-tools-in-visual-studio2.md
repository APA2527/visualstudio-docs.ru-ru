---
title: Общие сведения о реляционном конструкторе объектов
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: 45e477c0-5c6b-41f9-b2d0-2808fb4f6537
author: ghogen
ms.author: ghogen
manager: jillfra
ms.workload:
- data-storage
ms.openlocfilehash: c1d60f2fd2fdaa239ea9528caa6d39424ad2b85c
ms.sourcegitcommit: d233ca00ad45e50cf62cca0d0b95dc69f0a87ad6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/01/2020
ms.locfileid: "75586397"
---
# <a name="linq-to-sql-tools-in-visual-studio"></a>Инструменты LINQ to SQL в Visual Studio

LINQ to SQL была первой технологией объектно-реляционного сопоставления, выпущенной корпорацией Майкрософт. Он хорошо работает в основных сценариях и по мере возможности будет поддерживаться в Visual Studio, но он больше не находится под активной разработкой. Используйте LINQ to SQL при обслуживании уже используемого ранее приложения или в простых приложениях, использующих SQL Server и не требующих многотабличного сопоставления. Как правило, новые приложения должны использовать Entity Framework, если требуется уровень объектно-реляционного сопоставления.

В Visual Studio LINQ to SQL классы, представляющие таблицы SQL, создаются с помощью **Реляционный конструктор объектов** (**Реляционный конструктор R**).

**Конструктор объектов O/R** имеет две различные области в области конструктора: область сущностей слева и область методы справа. Область сущностей является основной областью конструктора, отображающей классы сущностей, ассоциации и иерархии наследования. Область методов — это область конструктора, отображающая методы <xref:System.Data.Linq.DataContext>, которые сопоставлены хранимым процедурам и функциям.

**Конструктор O/R** предоставляет визуальную область конструктора для создания [LINQ to SQL](/dotnet/framework/data/adonet/sql/linq/index) классов сущностей и ассоциаций (связей), основанных на объектах в базе данных. Иными словами, **конструктор O/R** создает объектную модель в приложении, которое сопоставляется с объектами в базе данных. Он также создает строго типизированную <xref:System.Data.Linq.DataContext>, которая отправляет и получает данные между классами сущностей и базой данных. **Реляционный конструктор** объектов также предоставляет функции для преобразования хранимых процедур и функций в <xref:System.Data.Linq.DataContext> методы для возврата данных и заполнения классов сущностей. Наконец, **Реляционный конструктор** объектов предоставляет возможность проектировать отношения наследования между классами сущностей.

## <a name="open-the-or-designer"></a>Открытие реляционного конструктора O/R

Чтобы добавить LINQ to SQL сущностную модель в проект, выберите **проект** > **Добавить новый элемент**, а затем в списке элементов проекта выберите **LINQ to SQL классы** :

![Классы LINQ-SQL](../data-tools/media/raddata-linq-to-sql-classes.png)

Visual Studio создает *DBML* -файл и добавляет его в решение. Это XML-файл сопоставления и связанные с ним файлы кода.

![LINQ to SQL классы в обозреватель решений](../data-tools/media/raddata-linq-to-sql-classes-in-solution-explorer.png)

При выборе *DBML* -файла Visual Studio отображает область **конструктора O/R** , которая позволяет визуально создавать модель. На следующем рисунке показан конструктор после перетаскивания таблиц «Northwind `Customers`» и «`Orders`» из **Обозреватель сервера**. Обратите внимание на связь между таблицами.

![Конструктор LINQ to SQL](../data-tools/media/raddata-linq-to-sql-designer.png)

> [!IMPORTANT]
> Реляционный **конструктор объектов (R** ) — это простой объектно-реляционный сопоставитель, так как он поддерживает только 1:1 связей сопоставления. Другими словами, класс объекта может иметь сопоставляющее отношение только 1:1 с таблицей базы данных или представлением. Сложное сопоставление, например сопоставление класса сущности с соединяемой таблицей, не поддерживается; Используйте Entity Framework для сложного сопоставления. Кроме того, конструктор является односторонним генератором объектного кода. Это означает, что только изменения, которые вы осуществляете на области конструктора, отражаются в файле кода. Изменения, вносимые в файл кода вручную, не отражаются в **конструкторе O/R**. Любые изменения, которые вы вручную осуществляете в файле кода принимаются, когда конструктор сохраняется и генерируется код. Сведения о том, как добавить пользовательский код и распространить классы, создаваемые **реляционный конструктор объектов**, см. в разделе [как: Расширение кода, созданного реляционным конструктором объектов](../data-tools/how-to-extend-code-generated-by-the-o-r-designer.md).

## <a name="create-and-configure-the-datacontext"></a>Создание и настройка DataContext

После добавления в проект элемента **LINQ to SQL Classes** и открытия **конструктора O/R**пустая область конструктора представляет собой пустую <xref:System.Data.Linq.DataContext>, готовую для настройки. <xref:System.Data.Linq.DataContext> настраивается на основе сведений о соединении из первого перемещенного в область конструктора элемента. Поэтому <xref:System.Data.Linq.DataContext> конфигурируется с использованием информации о подключении из первого сброшенного в область конструктора элемента. Дополнительные сведения о классе <xref:System.Data.Linq.DataContext> см. в разделе [методы DataContext (реляционный конструктор R)](../data-tools/datacontext-methods-o-r-designer.md).

## <a name="create-entity-classes-that-map-to-database-tables-and-views"></a>Создание классов сущностей, сопоставляемых с таблицами и представлениями базы данных

Классы сущностей, сопоставленные с таблицами и представлениями, можно создавать путем перетаскивания таблиц и представлений базы данных из **Обозреватель сервера** или **Обозреватель базы данных** в **Реляционный конструктор**объектов. Как указывалось в предыдущем разделе, <xref:System.Data.Linq.DataContext> конфигурируется с информацией о подключении, предоставленной первым элементом, который перемещен в область конструктора. Если последующий элемент, использующий другое соединение, добавляется в **Реляционный конструктор R**, можно изменить соединение для <xref:System.Data.Linq.DataContext>. Дополнительные сведения см. [в разделе как создать LINQ to SQL классы, сопоставленные с таблицами и представлениями (реляционный конструктор R)](../data-tools/how-to-create-linq-to-sql-classes-mapped-to-tables-and-views-o-r-designer.md).

## <a name="create-datacontext-methods-that-call-stored-procedures-and-functions"></a>Создание методов DataContext, вызывающих хранимые процедуры и функции

Вы можете создать <xref:System.Data.Linq.DataContext> методы, которые вызывают (сопоставлены с) хранимыми процедурами и функциями, перетащив их из **Обозреватель сервера** или **Обозреватель базы данных** в **конструктор O/R**. Хранимые процедуры и функции добавляются в **конструктор O/R** как методы <xref:System.Data.Linq.DataContext>.

> [!NOTE]
> При перетаскивании хранимых процедур и функций из **Обозреватель сервера** или **Обозреватель базы данных** в **конструктор O/R**тип возвращаемого значения созданного метода <xref:System.Data.Linq.DataContext> различается в зависимости от места удаления элемента. Дополнительные сведения см. в разделе [методы DataContext (реляционный конструктор R)](../data-tools/datacontext-methods-o-r-designer.md).

## <a name="configure-a-datacontext-to-use-stored-procedures-to-save-data-between-entity-classes-and-a-database"></a>Настройка DataContext для использования хранимых процедур для сохранения данных между классами сущностей и базой данных

Как утверждалось ранее, можно создавать методы <xref:System.Data.Linq.DataContext>, которые вызывают сохраненные процедуры и функции. Кроме того, можно также назначить хранимые процедуры, используемые по умолчанию LINQ to SQL поведением во время выполнения, которое выполняет операции вставки, обновления и удаления. Дополнительные сведения см. [в разделе инструкции. назначение хранимых процедур для выполнения операций обновления, вставки и удаления (реляционный конструктор R)](../data-tools/how-to-assign-stored-procedures-to-perform-updates-inserts-and-deletes-o-r-designer.md).

## <a name="inheritance-and-the-or-designer"></a>Наследование и реляционный конструктор объектов

Как и другие объекты, LINQ to SQL классы могут использовать наследование и быть производными от других классов. В базе данных, отношения наследования создаются несколькими способами. Реляционный **конструктор** объектов поддерживает концепцию наследования одной таблицы, так как часто реализуется в реляционных системах. Дополнительные сведения см. в разделе [инструкции. Настройка наследования с помощью реляционного конструктора O/R](../data-tools/how-to-configure-inheritance-by-using-the-o-r-designer.md).

## <a name="linq-to-sql-queries"></a>Запросы LINQ to SQL

Классы сущностей, созданные **реляционным конструктором** объектов, предназначены для использования с [запросом языка LINQ](/dotnet/csharp/linq/). Дополнительные сведения см. [в разделе инструкции. запрос сведений](/dotnet/framework/data/adonet/sql/linq/how-to-query-for-information).

## <a name="separate-the-generated-datacontext-and-entity-class-code-into-different-namespaces"></a>Разделение созданного объекта DataContext и кода класса сущности на разные пространства имен

**Реляционный конструктор** объектов предоставляет свойства **контекста пространства имен** и **пространства имен сущностей** в <xref:System.Data.Linq.DataContext>. Эти свойства определяют, какое пространство имен <xref:System.Data.Linq.DataContext> и кода классов сущностей генерируется в нем. По умолчанию эти свойства пустые и <xref:System.Data.Linq.DataContext> классы сущностей генерируются в пространстве имен приложения. Чтобы сгенерировать код в пространство имен, отличное от пространства имен приложения, введите значение в свойства **Контекстное пространство имен** и (или) **Пространство имен сущностей**.

## <a name="reference-content"></a>Справочные материалы

- <xref:System.Linq>
- <xref:System.Data.Linq>

## <a name="see-also"></a>См. также:

- [LINQ to SQL (.NET Framework)](/dotnet/framework/data/adonet/sql/linq/index)
- [Часто задаваемые вопросы (.NET Framework)](/dotnet/framework/data/adonet/sql/linq/frequently-asked-questions)
