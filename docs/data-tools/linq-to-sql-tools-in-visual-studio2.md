---
title: Общие сведения о реляционном конструкторе объектов
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: 45e477c0-5c6b-41f9-b2d0-2808fb4f6537
author: gewarren
ms.author: gewarren
manager: jillfra
ms.workload:
- data-storage
ms.openlocfilehash: 4105a93d4ad459c8bc1cb3a7a20b37c69f311c12
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62566420"
---
# <a name="linq-to-sql-tools-in-visual-studio"></a>Инструменты LINQ to SQL в Visual Studio

LINQ to SQL была первой технологии объектно реляционного сопоставления, выпускаемых корпорацией Майкрософт. Он хорошо работает в основных сценариях и по-прежнему будет поддерживаться в Visual Studio, но больше не находится в активной разработке. Используйте LINQ to SQL, при обслуживании с устаревшим приложением, оно уже используется, или в простых приложений, использующих SQL Server и не требуют сопоставление нескольких таблиц. Как правило новые приложения должны использовать Entity Framework, когда требуется уровень объектно реляционным модулем сопоставления.

В Visual Studio вы создание классов LINQ to SQL, которые представляют таблицы SQL с помощью **реляционный конструктор объектов** (**реляционный конструктор объектов**).

**Реляционный конструктор объектов** имеется две области в области конструктора: область сущностей слева и область методов справа. Область сущностей является основной областью конструктора, отображающей классы сущностей, ассоциации и иерархии наследования. Область методов — это область конструктора, отображающая методы <xref:System.Data.Linq.DataContext>, которые сопоставлены хранимым процедурам и функциям.

**Реляционный конструктор объектов** предоставляет визуальную область конструктора для создания [LINQ to SQL](/dotnet/framework/data/adonet/sql/linq/index) классов сущностей и ассоциаций (связей), которые базируются на объектах в базе данных. Другими словами **реляционный конструктор объектов** создает модель объектов в приложении, которое сопоставляется с объектами в базе данных. Она также создает строго типизированный <xref:System.Data.Linq.DataContext> , отправляемых и получаемых данных между классами сущностей и базой данных. **Реляционный конструктор объектов** также предоставляет функциональные возможности сопоставления сохраненных процедур и функций <xref:System.Data.Linq.DataContext> методы для возврата данных и заполнения классов сущностей. Наконец **реляционный конструктор объектов** предоставляет возможность проектировать отношения наследования между классами сущностей.

## <a name="open-the-or-designer"></a>Откройте конструктор O/R

Для добавления LINQ to SQL сущностной модели в проект, выберите **проекта** > **Добавление нового элемента**, а затем выберите **LINQ to SQL Classes** из списка элементов проекта:

![Классы LINQ-SQL](../data-tools/media/raddata-linq-to-sql-classes.png)

Visual Studio создает *.dbml* файл и добавляет его в решение. Это XML-файл сопоставления и его файлы связанный код.

![Классы LINQ to SQL в обозревателе решений](../data-tools/media/raddata-linq-to-sql-classes-in-solution-explorer.png)

При выборе *.dbml* файла, Visual Studio отображает **реляционный конструктор объектов** поверхность, которая позволяет визуально создавать модели. На следующем рисунке показан конструктор после Northwind `Customers` и `Orders` перетащили таблиц из **обозревателя серверов**. Обратите внимание на связь между таблицами.

![Конструктор LINQ to SQL](../data-tools/media/raddata-linq-to-sql-designer.png)

> [!IMPORTANT]
> **Реляционный конструктор объектов** представляет собой простой объект реляционный модуль сопоставления в том случае, поскольку он поддерживает только отношения сопоставления 1:1. Другими словами, класс объекта может иметь сопоставляющее отношение только 1:1 с таблицей базы данных или представлением. Сложные сопоставления, например сопоставление класса сущностей с соединяемой таблицей, не поддерживается; Используйте Entity Framework для сложные сопоставления. Кроме того, конструктор является односторонним генератором объектного кода. Это означает, что только изменения, которые вы осуществляете на области конструктора, отражаются в файле кода. Ручные изменения в файл кода, не отражаются в **реляционный конструктор объектов**. Любые изменения, которые вы вручную осуществляете в файле кода принимаются, когда конструктор сохраняется и генерируется код. Сведения о том, как добавить пользовательский код и распространить классы, создаваемые **реляционный конструктор объектов**, см. в разделе [как: Расширение кода, созданного конструктором O/R](../data-tools/how-to-extend-code-generated-by-the-o-r-designer.md).

## <a name="create-and-configure-the-datacontext"></a>Создание и настройка DataContext

После добавления **LINQ to SQL Classes** проект и открытия **реляционный конструктор объектов**, пустая область конструктора представляет пустой <xref:System.Data.Linq.DataContext> готовую к конфигурированию. <xref:System.Data.Linq.DataContext> настраивается на основе сведений о соединении из первого перемещенного в область конструктора элемента. Поэтому <xref:System.Data.Linq.DataContext> конфигурируется с использованием информации о подключении из первого сброшенного в область конструктора элемента. Дополнительные сведения о <xref:System.Data.Linq.DataContext> см. класс, [методы DataContext (реляционный конструктор объектов)](../data-tools/datacontext-methods-o-r-designer.md).

## <a name="create-entity-classes-that-map-to-database-tables-and-views"></a>Создайте классы сущностей, которые сопоставляются таблицам БД или представлениям

Можно создать классы сущностей, сопоставляемые с таблицами и представлениями, путем перетаскивания таблиц базы данных и представления из **обозревателя серверов** или **обозреватель баз данных** на **реляционный конструктор объектов**. Как указывалось в предыдущем разделе, <xref:System.Data.Linq.DataContext> конфигурируется с информацией о подключении, предоставленной первым элементом, который перемещен в область конструктора. Если добавляется элемент, который использует другое подключение **реляционный конструктор объектов**, можно изменить подключение для <xref:System.Data.Linq.DataContext>. Дополнительные сведения см. в разделе [Как создать классы LINQ to SQL, сопоставленные с таблицами и представлениями (реляционный конструктор объектов)](../data-tools/how-to-create-linq-to-sql-classes-mapped-to-tables-and-views-o-r-designer.md).

## <a name="create-datacontext-methods-that-call-stored-procedures-and-functions"></a>Создание методов DataContext, которые вызывают сохраненные процедуры и функции

Можно создать <xref:System.Data.Linq.DataContext> методы, которые вызывают (сопоставляются) сохраненные процедуры и функции путем перетаскивания их из **обозревателя серверов** или **обозреватель баз данных** на **реляционный конструктор объектов** . Хранимые процедуры и функции, добавляемые **реляционный конструктор объектов** как методы класса <xref:System.Data.Linq.DataContext>.

> [!NOTE]
> При перетаскивании хранимые процедуры и функции из **обозревателя серверов** или **обозреватель баз данных** на **реляционный конструктор объектов**, тип возвращаемого значения создаваемого <xref:System.Data.Linq.DataContext> метод отличается в зависимости от того, где вы сбросили элемент. Дополнительные сведения см. в разделе [методы DataContext (реляционный конструктор объектов)](../data-tools/datacontext-methods-o-r-designer.md).

## <a name="configure-a-datacontext-to-use-stored-procedures-to-save-data-between-entity-classes-and-a-database"></a>Настройка DataContext, использовать хранимые процедуры для сохранения данных между классами сущностей и базой данных

Как утверждалось ранее, можно создавать методы <xref:System.Data.Linq.DataContext>, которые вызывают сохраненные процедуры и функции. Кроме того можно также назначить хранимые процедуры, используемые по умолчанию LINQ to SQL среды выполнения поведение, которое выполняет операций вставки, обновления и удаления. Дополнительные сведения см. в разделе [Как назначить хранимые процедуры для выполнения обновлений, вставок и удалений (реляционный конструктор объектов)](../data-tools/how-to-assign-stored-procedures-to-perform-updates-inserts-and-deletes-o-r-designer.md).

## <a name="inheritance-and-the-or-designer"></a>Наследование и реляционный конструктор объектов

Как и другие объекты LINQ to SQL classes могут использовать наследование и выводиться из других классов. В базе данных, отношения наследования создаются несколькими способами. **Реляционный конструктор объектов** поддерживает концепцию наследования одиночных таблиц, так как она обычно осуществляется в реляционных системах. Дополнительные сведения см. в разделе [Как настроить наследование с использованием реляционного конструктора объектов](../data-tools/how-to-configure-inheritance-by-using-the-o-r-designer.md).

## <a name="linq-to-sql-queries"></a>Запросы LINQ to SQL

Классы сущностей, созданных **реляционный конструктор объектов** предназначены для использования с [Language-Integrated query (LINQ)](/dotnet/csharp/linq/). Дополнительные сведения см. в разделе [Как обращаться с запросами о сведениях](/dotnet/framework/data/adonet/sql/linq/how-to-query-for-information).

## <a name="separate-the-generated-datacontext-and-entity-class-code-into-different-namespaces"></a>Разделения автоматически созданного кода класса DataContext и сущности в разных пространствах имен

**Реляционный конструктор объектов** предоставляет **пространство имен контекста** и **пространство имен сущностей** свойства <xref:System.Data.Linq.DataContext>. Эти свойства определяют, какое пространство имен <xref:System.Data.Linq.DataContext> и кода классов сущностей генерируется в нем. По умолчанию эти свойства пустые и <xref:System.Data.Linq.DataContext> классы сущностей генерируются в пространстве имен приложения. Чтобы сгенерировать код в пространство имен, отличное от пространства имен приложения, введите значение в свойства **Контекстное пространство имен** и (или) **Пространство имен сущностей**.

## <a name="reference-content"></a>Справочные материалы

- <xref:System.Linq>
- <xref:System.Data.Linq>

## <a name="see-also"></a>См. также

- [LINQ to SQL (.NET Framework)](/dotnet/framework/data/adonet/sql/linq/index)
- [Часто задаваемые вопросы (.NET Framework)](/dotnet/framework/data/adonet/sql/linq/frequently-asked-questions)