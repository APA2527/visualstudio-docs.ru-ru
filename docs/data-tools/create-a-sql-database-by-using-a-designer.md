---
title: Создание файла базы данных и с помощью конструктора таблиц
description: Учебник, в котором описывается добавление таблиц и внешние ключи в базе данных с помощью конструктора таблиц в Visual Studio. Также показано, как добавить данные через графический интерфейс.
ms.date: 11/03/2017
ms.topic: conceptual
helpviewer_keywords:
- database tables, creating
- database files, creating
- table designer
ms.assetid: 99c2b06f-47aa-414e-8057-a3453712fd23
author: gewarren
ms.author: gewarren
manager: jillfra
ms.workload:
- data-storage
ms.openlocfilehash: afb73b316dd54284073c3d878fb35b4bb6090e08
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62569996"
---
# <a name="create-a-database-and-add-tables-in-visual-studio"></a>Создание базы данных и добавления таблицы в Visual Studio

Visual Studio можно использовать для создания и обновления файла локальной базы данных в SQL Server Express LocalDB. Также можно создать базу данных, выполнив инструкции Transact-SQL в **обозреватель объектов SQL Server** окно инструментов в Visual Studio. В этом разделе мы создадим *.mdf* файл и добавьте таблицы и ключи с помощью конструктора таблиц.

## <a name="prerequisites"></a>Предварительные требования

Для выполнения этого пошагового руководства, необходимо иметь необязательный **хранение и обработка данных** рабочей нагрузки, установленная в Visual Studio. Чтобы установить его, откройте **установщик Visual Studio** и выберите **дополнительные** > **изменить** рядом с версией Visual Studio, необходимо изменить (при наличии более чем одной установленной версии). На **рабочих нагрузок** в списке **Интернет и облако**, выберите **хранение и обработка данных**, а затем нажмите кнопку **изменить** добавить рабочую нагрузку для Visual Studio.

## <a name="create-a-project-and-a-local-database-file"></a>Создание проекта и файла локальной базы данных

1. Создайте новый **приложения Windows Forms** проект и назовите его **SampleDatabaseWalkthrough**.

2. В строке меню выберите **проекта** > **Добавление нового элемента**.

3. В списке шаблонов элементов прокрутите вниз и выберите **базы данных на основе службы**.

     ![Диалоговое окно ''Шаблоны элементов''](../data-tools/media/raddata-vsitemtemplates.png)

4. Имя базы данных **назовите**, а затем нажмите кнопку **добавить**.

### <a name="add-a-data-source"></a>Добавление источника данных

1. Если **источников данных** окно не открыто, откройте его, нажав клавишу **Shift**+**Alt**+**D** или выбрав **Представление** > **Other Windows** > **источников данных** в строке меню.

1. В **источников данных** выберите **добавить новый источник данных** ссылку.

   Открывается **мастер настройки источника данных**.

1. На **Выбор типа источника данных** выберите **базы данных** и выберите **Далее**.

1. На **Выбор модели базы данных** выберите **Далее** для примите имя по умолчанию (набор данных).

1. На **Выбор подключения к данным** выберите **SampleDatabase.mdf** файл в раскрывающемся списке, а затем выберите **Далее**.

1. На **сохранение подключения в файле конфигурации приложения** выберите **Далее**.

1. Один **Выбор объектов базы данных** страницы, вы увидите сообщение о базе данных не содержит все объекты. Нажмите кнопку **Готово**.

### <a name="view-properties-of-the-data-connection"></a>Просмотр свойств подключения к данным

Можно просмотреть строку подключения для *SampleDatabase.mdf* файл, открыв окно свойств подключения к данным:

- Выберите **представление** > **обозреватель объектов SQL Server** открыть **обозреватель объектов SQL Server** окна. Разверните **(localdb) \MSSQLLocalDB** > **баз данных**, щелкните правой кнопкой мыши *SampleDatabase.mdf* и выберите **свойства**.

- Кроме того, можно выбрать **представление** > **обозревателя серверов**, если это окно еще не открыто. Откройте окно свойств, развернув **подключения к данным** узла, открыв контекстное меню для *SampleDatabase.mdf*, а затем выбрав **свойства**.

## <a name="create-tables-and-keys-by-using-table-designer"></a>Создавать таблицы и ключи с помощью конструктора таблиц

В этом разделе вы создадите две таблицы, первичный ключ в каждой таблице и несколько строк образца данных. Вы также создадите внешний ключ, чтобы указать, как записи в одной таблице соотноситься с записями в другой таблице.

### <a name="create-the-customers-table"></a>Создать таблицу Customers

1. В **обозревателя серверов**, разверните **подключения к данным** узел, а затем разверните **SampleDatabase.mdf** узла.

2. Откройте контекстное меню для **таблиц**, а затем выберите **добавить новую таблицу**.

     Будет открыт **Конструктор таблиц**, отобразится сетка с одной строкой по умолчанию, которая представляет один столбец в создаваемой таблице. Путем добавления строк в сетку будут добавлены столбцы в таблицу.

3. В сетке добавьте строку для каждой из следующих записей.

    |Имя столбца|Тип данных|Разрешить значения null|
    |-----------------|---------------|-----------------|
    |`CustomerID`|`nchar(5)`|False (не установлен)|
    |`CompanyName`|`nvarchar(50)`|False (не установлен)|
    |`ContactName`|`nvarchar (50)`|True (установлен)|
    |`Phone`|`nvarchar (24)`|True (установлен)|

4. Откройте контекстное меню для `CustomerID` строк, а затем выберите **задать первичный ключ**.

5. Откройте контекстное меню для строки по умолчанию, а затем выберите **удалить**.

6. Назовите таблицу "Клиенты" путем обновления первой строки в области скриптов, как показано в следующем примере:

    ```sql
    CREATE TABLE [dbo].[Customers]
    ```

    Результат должен быть примерно таким:

    ![конструктор таблиц](../data-tools/media/raddata-table-designer.png)

7. В левом верхнем углу **конструктор таблиц**выберите **обновления**.

8. В **Просмотр обновлений базы данных** выберите **обновления базы данных**.

    Ваши изменения сохраняются в файл локальной базы данных.

### <a name="create-the-orders-table"></a>Создать таблицу Orders

1. Создайте еще одну таблицу, а затем добавьте строку для каждой записи следующей таблицы.

    |Имя столбца|Тип данных|Разрешить значения null|
    |-----------------|---------------|-----------------|
    |`OrderID`|`int`|False (не установлен)|
    |`CustomerID`|`nchar(5)`|False (не установлен)|
    |`OrderDate`|`datetime`|True (установлен)|
    |`OrderQuantity`|`int`|True (установлен)|

2. Задайте **OrderID** качестве первичного ключа, а затем удалите строку по умолчанию.

3. Назовите таблицу "Заказы" путем обновления первой строки в области скриптов, как показано в следующем примере:

    ```sql
    CREATE TABLE [dbo].[Orders]
    ```

4. В левом верхнем углу **конструктор таблиц**выберите **обновления** кнопки.

5. В **Просмотр обновлений базы данных** выберите **обновления базы данных** кнопки.

    Ваши изменения сохраняются в файл локальной базы данных.

### <a name="create-a-foreign-key"></a>Создание внешнего ключа

1. В области контекста в правой части сетки откройте контекстное меню для **внешние ключи**, а затем выберите **добавить новый внешний ключ**, как показано на следующем рисунке.

     ![Добавление внешнего ключа в конструкторе таблиц](../data-tools/media/foreignkey.png)

2. В появившемся текстовом поле замените **ToTable** на **Клиенты**.

3. В области T-SQL обновите последнюю строку в соответствии со следующим примером:

    ```sql
    CONSTRAINT [FK_Orders_Customers] FOREIGN KEY ([CustomerID]) REFERENCES [Customers]([CustomerID])
    ```

4. В левом верхнем углу **конструктор таблиц**выберите **обновления** кнопки.

5. В **Просмотр обновлений базы данных** выберите **обновления базы данных** кнопки.

    Ваши изменения сохраняются в файл локальной базы данных.

## <a name="populate-the-tables-with-data"></a>Заполнение таблиц данными

1. В **обозревателя серверов** или **обозреватель объектов SQL Server**, разверните узел примера базы данных.

2. Откройте контекстное меню для **таблиц** выберите **обновить**и затем разверните **таблиц** узла.

3. Откройте контекстное меню для таблицы Customers, а затем выберите **Показать таблицу данных**.

4. Добавьте любые данные, для некоторых клиентов.

    Можно указать любые пять символов как ИД клиентов, но хотя бы один нужно выбрать и запомнить для дальнейшего использования в этой процедуре.

5. Откройте контекстное меню для таблицы Orders, а затем выберите **Показать таблицу данных**.

6. Добавьте данные для некоторых заказов.

    > [!IMPORTANT]
    > Убедитесь, что все идентификаторы заказов и количества заказов — целые числа, и каждый идентификатор клиента соответствует значению, указанному в столбце **CustomerID** таблицы клиентов.

7. В строке меню выберите **файл** > **сохранить все**.

## <a name="see-also"></a>См. также

- [Доступ к данным в Visual Studio](accessing-data-in-visual-studio.md)