---
title: Создание и настройка наборов данных
description: Создание и Настройка наборов данных в Visual Studio. Набор данных — это набор объектов, которые хранят данные из базы данных в памяти и поддерживают операции CRUD с этими данными.
ms.custom: SEO-VS-2020
ms.date: 11/21/2018
ms.topic: how-to
helpviewer_keywords:
- typed datasets, creating
- datasets, creating
- datasets, configuring
author: ghogen
ms.author: ghogen
manager: jmartens
ms.workload:
- data-storage
ms.openlocfilehash: f625b17841fe63b0c42dcfb82c2e859d6406e776
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99859129"
---
# <a name="how-to-create-and-configure-datasets-in-visual-studio"></a>Как создавать и настраивать наборы данных в Visual Studio

Набор данных — это набор объектов, которые хранят данные из базы данных в памяти и поддерживают отслеживание изменений, чтобы обеспечить выполнение операций создания, чтения, обновления и удаления (CRUD) с этими данными без необходимости постоянного подключения к базе данных. Наборы данных предназначены для простых *форм* бизнес-приложений. Для новых приложений рекомендуется использовать Entity Framework для хранения и моделирования данных в памяти. Для работы с наборами данных у вас должны быть базовые знания об основных понятиях.

Можно создать типизированный <xref:System.Data.DataSet> класс в Visual Studio во время разработки с помощью **мастера настройки источника данных**. Дополнительные сведения о создании наборов данных программным способом см. в разделе [Создание DataSet (ADO.NET)](/dotnet/framework/data/adonet/dataset-datatable-dataview/creating-a-dataset).

## <a name="create-a-new-dataset-by-using-the-data-source-configuration-wizard"></a>Создание нового набора данных с помощью мастера настройки источника данных

1. Откройте проект в Visual Studio, а затем выберите **проект**  >  **Добавить новый источник данных** , чтобы запустить **Мастер настройки источника данных**.

2. Выберите тип источника данных, к которому будет осуществляться подключение.

     ![мастер настройки источника данных](../data-tools/media/data-source-configuration-wizard.png)

3. Выберите базу данных или базы данных, которые будут источником данных для набора данных.

     ![Выбор подключения в источнике данных](../data-tools/media/data-source-choose-a-connection.png)

4. Выберите таблицы (или отдельные столбцы), хранимые процедуры, функции и представления из базы данных, которые необходимо представить в наборе данных.

     ![Выбор объектов базы данных](../data-tools/media/raddata-chose-objects.png)

5. Нажмите кнопку **Готово**.

   Набор данных отображается как узел в **Обозреватель решений**.

   ![Набор данных в обозреватель решений](../data-tools/media/dataset-in-solution-explorer.png)

6. Щелкните узел набора данных в **Обозреватель решений** , чтобы открыть набор данных в **конструкторе наборов данных**. Каждая таблица в наборе данных имеет связанный `TableAdapter` объект, который представлен внизу. Адаптер таблицы используется для заполнения набора данных и, при необходимости, для отправки команд в базу данных.

   ![Конструктор наборов данных](../data-tools/media/dataset-designer.png)

7. Линии связи, соединяющие таблицы, представляют связи между таблицами, как определено в базе данных. По умолчанию ограничения внешнего ключа в базе данных представлены только как отношение, а правила обновления и удаления имеют значение None. Обычно это именно то, что вам нужно. Однако можно щелкнуть строки, чтобы открыть диалоговое окно **связи** , в котором можно изменить поведение иерархических обновлений. Дополнительные сведения см. [в разделе связи в наборах данных](../data-tools/relationships-in-datasets.md) и [иерархическом обновлении](../data-tools/hierarchical-update.md).

     ![Диалоговое окно связи набора данных](../data-tools/media/raddata-relation-dialog.png)

8. Щелкните таблицу, адаптер таблицы или имя столбца в таблице, чтобы просмотреть ее свойства в окне " **Свойства** ". Некоторые значения можно изменить. Просто помните, что вы изменяете набор данных, а не исходную базу данных.

     ![Свойства столбца набора данных](../data-tools/media/dataset-column-properties.png)

9. В набор данных можно добавлять новые таблицы или адаптеры таблиц, добавлять новые запросы для существующих адаптеров таблиц или указывать новые связи между таблицами, перетаскивая эти элементы с вкладки **область элементов** . Эта вкладка появляется, когда **Конструктор наборов данных** находится в фокусе.

     ![Панель элементов набора данных](../data-tools/media/raddata-dataset-toolbox.png)

Далее может потребоваться указать, как заполнить набор данных данными. Для этого используется **Мастер настройки TableAdapter**. Дополнительные сведения см. в разделе [Заполнение наборов данных с помощью адаптеров таблиц](../data-tools/fill-datasets-by-using-tableadapters.md).

## <a name="add-a-database-table-or-other-object-to-an-existing-dataset"></a>Добавление таблицы или другого объекта базы данных в существующий набор данных

В этой процедуре показано, как добавить таблицу из той же базы данных, которая использовалась для первоначального создания набора данных.

1. Щелкните узел набора данных в **Обозреватель решений** , чтобы открыть **конструктор набора данных** .

2. Щелкните вкладку **Источники данных** в левом поле Visual Studio или введите **Источники данных** в поле поиска.

3. Щелкните правой кнопкой мыши узел набор данных и выберите команду **настроить источник данных с помощью мастера**.

     ![Контекстное меню источника данных](../data-tools/media/data-source-context-menu.png)

4. Используйте мастер, чтобы указать, какие дополнительные таблицы, хранимые процедуры или другие объекты базы данных необходимо добавить в набор данных.

## <a name="add-a-stand-alone-data-table-to-a-dataset"></a>Добавление автономной таблицы данных в набор данных

1. Откройте свой набор данных в **Конструкторе наборов данных**.

2. Перетащите <xref:System.Data.DataTable> класс из вкладки **набор данных** на **панели элементов** в **Конструктор наборов данных**.

3. Добавьте столбцы, чтобы определить таблицу данных. Щелкните таблицу правой кнопкой мыши и выберите команду **Добавить**  >  **столбец**. Используйте окно **Свойства** , чтобы задать тип данных столбца и ключ при необходимости.

Изолированные таблицы должны реализовывать `Fill` логику в автономных таблицах, чтобы их можно было заполнить данными. Сведения о заполнении автономных таблиц данных см. в разделе [Заполнение набора данных из DataAdapter](/dotnet/framework/data/adonet/populating-a-dataset-from-a-dataadapter).

## <a name="see-also"></a>См. также раздел

- [Инструменты для работы с наборами данных в Visual Studio](../data-tools/dataset-tools-in-visual-studio.md)
- [Отношения в наборах данных](../data-tools/relationships-in-datasets.md)
- [Иерархическое обновление](../data-tools/hierarchical-update.md)
- [Заполнение наборов данных с помощью адаптеров таблицы](../data-tools/fill-datasets-by-using-tableadapters.md)
