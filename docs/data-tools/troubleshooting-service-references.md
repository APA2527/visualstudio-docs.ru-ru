---
title: Диагностика ссылок на службы
ms.date: 11/04/2016
ms.topic: troubleshooting
f1_keywords:
- msvse_wcf.Err.ReferenceGroup_NamespaceConflictsOther
- msvse_wcf.Err.AddSvcRefDlg_NothingSelectedOnGo
- msvse_wcf.Err.ErrorOnOK
- msvse_wcf.cfg.ConfigurationErrorsException
helpviewer_keywords:
- service references [Visual Studio], troubleshooting
- WCF services, troubleshooting
ms.assetid: 3b531120-1325-4734-90c6-6e6113bd12ac
author: ghogen
ms.author: ghogen
manager: jillfra
ms.workload:
- data-storage
ms.openlocfilehash: d52562382f10615c7da1dfab22d4c18323b725b3
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "75586124"
---
# <a name="troubleshoot-service-references"></a>Диагностика ссылок на службы

В этом разделе перечислены распространенные проблемы, которые могут возникнуть при работе с Windows Communication Foundation (WCF) или ссылками WCF Data Services в Visual Studio.

## <a name="error-returning-data-from-a-service"></a>Ошибка при возврате данных из службы

При возврате `DataSet` или `DataTable` из службы может появиться исключение "превышена квота на максимальный размер входящих сообщений". По умолчанию `MaxReceivedMessageSize` свойству для некоторых привязок присвоено относительно небольшое значение для ограничения уязвимости атак типа "отказ в обслуживании". Это значение можно увеличить, чтобы предотвратить исключение. Для получения дополнительной информации см. <xref:System.ServiceModel.HttpBindingBase.MaxReceivedMessageSize%2A>.

Чтобы исправить эту ошибку, сделайте следующее:

1. В **Обозреватель решений**дважды щелкните файл *app.config* , чтобы открыть его.

2. Нахождение `MaxReceivedMessageSize` Свойства и его изменение на большее значение.

## <a name="cannot-find-a-service-in-my-solution"></a>Не удается найти службу в моем решении

При нажатии кнопки " **обнаружить** " в диалоговом окне " **Добавление ссылок на службы** " один или несколько проектов библиотеки служб WCF в решении не отображаются в списке "службы". Это может произойти, если в решение была добавлена библиотека служб, но еще не была скомпилирована.

Чтобы исправить эту ошибку, сделайте следующее:

- В **Обозреватель решений**щелкните правой кнопкой мыши проект библиотеки служб WCF и выберите пункт **Сборка**.

## <a name="error-accessing-a-service-over-a-remote-desktop"></a>Ошибка доступа к службе через удаленный рабочий стол

Когда пользователь обращается к размещенной в Интернете службе WCF через подключение к удаленному рабочему столу, а пользователь не имеет прав администратора, используется проверка подлинности NTLM. Если пользователь не имеет разрешений администратора, он может получить следующее сообщение об ошибке: "запрос HTTP не авторизован с использованием анонимной схемы проверки подлинности клиента". С сервера получен заголовок проверки подлинности "NTLM". "

Чтобы исправить эту ошибку, сделайте следующее:

1. В проекте веб-сайта откройте страницу **свойств** .

2. На вкладке **Параметры запуска** снимите флажок **Проверка подлинности NTLM** .

    > [!NOTE]
    > Следует отключить проверку подлинности NTLM только для веб-сайтов, содержащих только службы WCF. Управление безопасностью служб WCF осуществляется с помощью конфигурации в файле *web.config* . Это делает проверку подлинности NTLM ненужной.

## <a name="access-level-for-generated-classes-setting-has-no-effect"></a>Параметр "уровень доступа для созданных классов" не действует

Установка параметра **уровень доступа для созданных классов** в диалоговом окне **Настройка ссылок на службы** на **internal** или **Friend** может не всегда работать. Несмотря на то, что параметр задан в диалоговом окне, результирующие классы поддержки создаются с уровнем доступа `Public` .

Это известное ограничение некоторых типов, например сериализованных с помощью <xref:System.Xml.Serialization.XmlSerializer> .

## <a name="error-debugging-service-code"></a>Ошибка при отладке кода службы

При пошаговом выполнении кода для службы WCF из клиентского кода может появиться сообщение об ошибке, связанное с отсутствием символов. Это может произойти, когда служба, которая была частью решения, была перемещена или удалена из решения.

При первом добавлении ссылки на службу WCF, которая является частью текущего решения, между проектом службы и проектом клиента службы добавляется явная зависимость сборки. Это гарантирует, что клиент всегда обращается к актуальным двоичным файлам службы, что особенно важно для сценариев отладки, таких как пошаговое выполнение кода клиента в коде службы.

Если проект службы удаляется из решения, эта явная зависимость сборки становится недействительной. Visual Studio больше не может гарантировать, что проект службы будет перестроен по мере необходимости.

Чтобы устранить эту ошибку, необходимо вручную перестроить проект службы:

1. В меню **Сервис** выберите команду **Параметры**.

2. В диалоговом окне **Параметры** разверните узел **проекты и решения**, а затем выберите пункт **Общие**.

3. Убедитесь, что установлен флажок **Показывать дополнительные конфигурации сборки** , и нажмите кнопку **ОК**.

4. Загрузите проект службы WCF.

5. В диалоговом окне **Configuration Manager** задайте для параметра **Активная конфигурация решения** значение **Отладка**. Дополнительные сведения см. в разделе [Практическое руководство. создавать и изменять конфигурации](../ide/how-to-create-and-edit-configurations.md).

6. В **Обозреватель решений**выберите проект службы WCF.

7. В меню **Сборка** выберите команду **перестроить** , чтобы перестроить проект службы WCF.

## <a name="wcf-data-services-do-not-display-in-the-browser"></a>WCF Data Services не отображаются в браузере

При попытке просмотра XML-представления данных в [!INCLUDE[ss_data_service](../data-tools/includes/ss_data_service_md.md)] обозреватель Internet Explorer может ошибочно интерпретировать данные как RSS-канал. Убедитесь, что параметр отображение RSS-каналов отключен.

Чтобы устранить эту ошибку, отключите RSS-каналы.

1. В Internet Explorer в меню **Сервис** выберите **Свойства обозревателя**.

2. На вкладке **содержимое** в разделе веб- **каналы** щелкните **Параметры**.

3. В диалоговом окне **Параметры веб-канала** снимите флажок **включить режим чтения веб-канала** и нажмите кнопку **ОК**.

4. Нажмите кнопку **ОК** , чтобы закрыть диалоговое окно **Свойства обозревателя** .

## <a name="see-also"></a>См. также раздел

- [Windows Communication Foundation служб и WCF Data Services в Visual Studio](../data-tools/windows-communication-foundation-services-and-wcf-data-services-in-visual-studio.md)
