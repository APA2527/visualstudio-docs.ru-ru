---
title: Форматирование кода Python
description: Visual Studio может автоматически переформатировать код Python, в том числе интервалы, операторы, переносы и комментарии.
ms.date: 03/13/2019
ms.topic: conceptual
author: JoshuaPartlow
ms.author: joshuapa
manager: jillfra
ms.custom: seodec18
ms.workload:
- python
- data-science
ms.openlocfilehash: 6e95d05c3fbc0dd46d235c7480bd4a9caa48947e
ms.sourcegitcommit: cc841df335d1d22d281871fe41e74238d2fc52a6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2020
ms.locfileid: "62957543"
---
# <a name="format-python-code"></a>Форматирование кода Python

Visual Studio позволяет быстро переформатировать код в соответствии с предварительно настроенными параметрами форматирования.

- Чтобы форматировать выделенный фрагмент, выберите **Правка** > **Дополнительно** > **Форматирование выделения** или нажмите клавиши **CTRL**+**E** > **F**.
- Чтобы форматировать весь файл, выберите **Правка** > **Дополнительно** > **Форматирование документа** или нажмите клавиши **CTRL**+**E** > **D**.

Параметры задаются в разделе **Сервис** > **Параметры** > **Текстовый редактор** > **Python** > **Форматирование** и на вложенных вкладках. Для отображения параметров установите флажок **Show all settings** (Показать все параметры):

![Параметры форматирования в Visual Studio](media/options-editor-formatting.png)

Параметры форматирования по умолчанию задаются в соответствии с расширенным набором указаний [руководства по стилю PEP 8](https://www.python.org/dev/peps/pep-0008/). Вкладка **Общие** позволяет определить, когда применяется форматирование. Остальные три вкладки описаны в этой статье.

Кроме того, благодаря [поддержке Python в Visual Studio](installing-python-support-in-visual-studio.md) в меню **Правка** > **Дополнительно** добавлена полезная команда [**Заполнить абзац комментариев**](#fill-comment-paragraph-command).

## <a name="spacing"></a>Интервал

Элементы управления в разделе **Интервал** определяют, нужно ли вставлять и (или) удалять пробелы в различных языковых конструкциях. Каждый параметр имеет три возможных значения.

- Флажок установлен: пробелы всегда применяются.
- Флажок снят: пробелы всегда удаляются.
- Неопределенное состояние: сохраняется установленное форматирование.

В следующих таблицах приведены примеры для различных параметров:

| Параметр определения класса | Помечено | Флажок снят |
| --- | --- | --- |
| **Вставлять пробелы между именем и списком базовых классов в объявлении класса** | `class X (object): pass` | `class X(object): pass` |
| **Вставлять пробелы внутри скобок списка баз** | `class X( object ): pass` | `class X(object): pass` |
| **Вставлять пробелы внутри скобок пустого списка баз** | `class X( ): pass` | `class X(): pass` |

<br/>

| Параметр определения функций | Помечено | Флажок снят |
| --- | --- | --- |
| **Вставлять пробелы между именем и списком параметров в объявлении функции** | `def X (): pass` | `def X(): pass` |
| **Вставлять пробелы внутри скобок списка параметров** | `def X( a, b ): pass` | `def X(a, b): pass` |
| **Вставлять пробелы внутри скобок пустого списка параметров** | `def X( ): pass` | `def X(): pass` |
| **Вставлять пробелы вокруг "=" в значениях параметров по умолчанию** | `includes X(a = 42): pass` | `includes X(a=42): pass` |
| **Вставлять пробелы до и после операторов возвращения заметок** | `includes X() -> 42: pass` | `includes X()->42: pass` |

<br/>

| Параметр операторов | Помечено | Флажок снят |
| --- | --- | --- |
| **Вставлять пробелы вокруг двоичных операторов** | `a + b` | `a+b` |
| **Вставлять пробелы вокруг назначений** | `a = b` | `a=b` |

<br/>

| Параметр интервалов для выражений | Помечено | Флажок снят |
| --- | --- | --- |
| **Вставлять пробелы между именем и списком аргументов вызова функции** | `X ()` | `X()` |
| **Вставлять пробел между скобками в пустом списке аргументов** | `X( )` | `X()` |
| **Вставлять пробелы в списке аргументов** | `X( a, b )` | `X(a, b)` |
| **Вставлять пробелы внутри скобок выражения** | `( a )` | `(a)` |
| **Вставлять пробелы внутри скобок пустого кортежа** | `( )` | `()` |
| **Вставлять пробелы внутри скобок кортежа** | `( a, b )` | `(a, b)` |
| **Вставлять пробел между пустыми квадратными скобками** | `[ ]` | `[]` |
| **Вставлять пробелы между квадратными скобками списков** | `[ a, b ]` | `[a, b]` |
| **Вставлять пробел перед открывающей квадратной скобкой** | `x [i]` | `x[i]` |
| **Вставлять пробел между квадратными скобками** | `x[ i ]` | `x[i]` |

<br/>

## <a name="statements"></a>Операторы

Параметры в разделе **Операторы** управляют автоматическим изменением некоторых операторов в более привычные для Python форматы.

| Параметр | До форматирования | После форматирования |
| --- | --- | --- |
| **Размещать импортированные модули в новой строке** | `import sys, pickle` | `import sys`<br/>`import pickle` |
| **Удалять лишние точки с запятой** | `x = 42;` | `x = 42` |
| **Размещать множество операторов на новых строках** | `x = 42; y = 100` | `x = 42`<br/>`y = 100` |

## <a name="wrapping"></a>Перенос по словам

**Перенос по словам** позволяет задать параметр **Максимальная ширина комментария** (по умолчанию — 80). При заданном параметре **Переносить слишком широкие комментарии** Visual Studio переформатирует комментарии так, чтобы выходить за пределы максимальной ширины.

```python
# Wrapped to 40 columns
# There should be one-- and preferably
# only one --obvious way to do it.
```

```python
# Not-wrapped:
# There should be one-- and preferably only one --obvious way to do it.
```

## <a name="fill-comment-paragraph-command"></a>Команда "Заполнение параграфа комментария"

Команда **Правка** > **Дополнительно** > **Заполнить абзац комментариев** (вызывается клавишами **CTRL**+**E** > **P**) изменяет форматирование текста заметки, объединяя короткие строки и разбивая слишком длинные.

Пример:

```python
# foo
# bar
# baz
```

изменяется на:

```python
# foo bar baz
```

```python
# This is a very long long long long long long long long long long long long long long long long long long long comment
```

изменяется на:

```python
# This is a very long long long long long long long long long long long long
# long long long long long long long comment
```
