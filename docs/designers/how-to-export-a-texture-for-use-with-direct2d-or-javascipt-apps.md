---
title: Экспорт текстуры для приложений Direct2D и JavaScript
description: Конвейер содержимого изображения создает текстуры, которые совместимы с внутренним преобразованием Direct2D для просмотра с целью использования в приложениях Direct2D и UWP, созданных на JavaScript.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: how-to
ms.assetid: 241c25fe-764e-4e1b-ad32-b1377dcbb605
author: TerryGLee
ms.author: tglee
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 502dcaec9aeb8fdb2f4b7a72b801f19d2d08dbc4
ms.sourcegitcommit: a731a9454f1fa6bd9a18746d8d62fe2e85e5ddb1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2020
ms.locfileid: "93134398"
---
# <a name="how-to-export-a-texture-for-use-with-direct2d-or-javascript-apps"></a>Практическое руководство. Экспорт текстуры для использования с приложениями Direct2D и JavaScript

Конвейер содержимого изображения может создавать текстуры, которые совместимы с внутренними соглашениями Direct2D по преобразованию для просмотра. Текстуры такого рода можно применять в приложениях, использующих Direct2D, а также в приложениях UWP, созданных с помощью JavaScript.

В этом документе описаны следующие действия.

- Настройка исходного изображения для обработки в конвейере содержимого изображения.

- Настройка конвейера содержимого изображения для создания текстуры, которую можно использовать в приложении Direct2D или JavaScript.

  - Создание *DDS* -файла с блочным сжатием.

  - Создание предварительно умноженного альфа-канала.

  - Отключение создания MIP-карты.

## <a name="rendering-conventions-in-direct2d"></a>Соглашения Direct2D о преобразовании для просмотра

Текстуры, которые используются в контексте Direct2D, должны соответствовать следующим конвенциям о преобразовании для просмотра.

- Direct2D реализует прозрачность и полупрозрачность с предварительным умножением альфа-канала. Текстуры, используемые с Direct2D, должны содержать предварительно умноженные альфа-каналы, даже если в них не используется прозрачность и полупрозрачность. Дополнительные сведения о предварительно умноженных альфа-каналах см. в статье [Практическое руководство. Экспорт текстуры с предварительным умножением альфа-канала](../designers/how-to-export-a-texture-that-has-premultiplied-alpha.md).

- Текстуры должны предоставляться в формате *DDS* с использованием одного из следующих форматов блочного сжатия.

  - Сжатие BC1_UNORM

  - Сжатие BC2_UNORM

  - Сжатие BC3_UNORM

- MIP-карты не поддерживаются.

### <a name="to-create-a-texture-thats-compatible-with-direct2d-rendering-conventions"></a>Создание текстуры, совместимой с соглашениями Direct2D о преобразовании для просмотра

1. Сначала создайте простейшую текстуру. Загрузите существующее изображение или создайте новое, как описано в статье [Практическое руководство. Создание простейшей текстуры](../designers/how-to-create-a-basic-texture.md). Для поддержки блочного сжатия в формате *DDS* создайте текстуру, значения ширины и высоты которой кратны четырем, например 100 x 100, 128 x 128 или 256 x 192. Так как MIP-карты не поддерживаются, не обязательно использовать квадратные текстуры и размеры сторон, равные степеням двойки.

2. Настройте файл текстуры так, чтобы он обрабатывался конвейером содержимого изображения. В **обозревателе решений** откройте контекстное меню только что созданного файла текстуры и выберите **Свойства**. На странице **Свойства конфигурации** > **Общие** задайте для свойства **Тип элемента** значение **Конвейер содержимого изображения**. Убедитесь, что свойство **Содержимое** имеет значение **Да** , а свойство **Исключить из сборки**  — значение **Нет** , а затем нажмите кнопку **Применить**. Откроется страница свойств конфигурации **конвейера содержимого изображения**.

3. В качестве формата выходных данных задайте один из форматов блочного сжатия. На странице **Свойства конфигурации** > **Конвейер содержимого изображения** > **Общие** установите для свойства **Сжатие** значение **Сжатие BC3_UNORM (/compress: BC3_UNORM)** . В зависимости от конкретных требований можно выбрать один из форматов: BC1, BC2 или BC3. В настоящее время Direct2D не поддерживает текстуры в форматах BC4, BC5, BC6 или BC7. Дополнительные сведения о различных форматах BC см. в статье [о блочном сжатии в Direct3D 10](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-block-compression).

   > [!NOTE]
   > Указанный формат сжатия определяет формат файла, который создается конвейером содержимого изображения. Этот формат отличается от свойства **Формат** для исходного изображения в редакторе изображений, которое определяет формат, в котором исходного файл изображения сохраняется на диске (то есть *рабочий формат* ). В качестве рабочего формата не рекомендуется использовать формат со сжатием.

4. Настройте конвейер содержимого изображения так, чтобы он создавал выходные данные с предварительно умноженным альфа-каналом. На странице **Свойства конфигурации** > **Конвейер содержимого изображения** > **Общие** установите для свойства **Преобразование в формат с предварительным умножением альфа-канала** значение **Да (/generatepremultipliedalpha)** .

5. Настройте конвейер содержимого изображения так, чтобы он не создавал MIP-карты. На странице **Свойства конфигурации** > **Конвейер содержимого изображения** > **Общие** задайте для свойства **Создать MIP-объекты** значение **Нет**.

6. Нажмите кнопку **ОК** .

   Когда выполняется сборка проекта, конвейер содержимого изображения преобразует исходное изображение из рабочего формата в указанный вами выходной формат (в том числе создает предварительно умноженный альфа-канал) и сохраняет результат в выходной каталог проекта.
