---
title: Параметры EditorConfig
ms.date: 08/01/2018
ms.topic: conceptual
helpviewer_keywords:
- editorconfig [Visual Studio]
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: 9426b2b7cd9467353f129e9376b0f83cf2f620a3
ms.sourcegitcommit: 2ee11676af4f3fc5729934d52541e9871fb43ee9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/17/2019
ms.locfileid: "65845995"
---
# <a name="create-portable-custom-editor-settings-with-editorconfig"></a>Создание переносимых настраиваемых параметров редактора с EditorConfig

В проект или базу кода можно добавить файл [EditorConfig](http://editorconfig.org/), чтобы обеспечить использование единообразного стиля написания кода всеми разработчиками, работающими с базой кода. Параметры EditorConfig имеют приоритет над глобальными параметрами текстового редактора Visual Studio. Это означает, что каждую базу кода можно настроить для использования параметров текстового редактора, относящихся к конкретному проекту. Вы по-прежнему можете задать личные настройки редактора в диалоговом окне **Параметры** среды Visual Studio. Эти параметры применяются при работе с базой кода, в которой нет файла *EDITORCONFIG*, или если файл *EDITORCONFIG* не переопределяет тот или иной параметр. Примером такой настройки может служить стиль отступов: символы табуляции или пробелы.

Параметры EditorConfig поддерживаются различными редакторами кода и интегрированными средами разработки, включая Visual Studio. Этот файл является переносимым компонентом, который передается вместе с кодом и позволяет применять стили написания кода даже вне среды Visual Studio.

При добавлении файла EditorConfig в проект в Visual Studio форматирование имеющегося кода не изменяется, если не отформатировать документ (**Правка** > **Дополнительно** > **Форматировать документ** или клавиши **CTRL**+**K**, **CTRL**+**D** в профиле по умолчанию). Тем не менее все новые строки кода форматируются в соответствии с параметрами, заданными в файле EditorConfig.

::: moniker range="vs-2017"

Вы можете выбрать, какие параметры EditorConfig команда **Форматировать документ** будет применять к [странице параметров **форматирования**](reference/options-text-editor-csharp-formatting.md#format-document-settings).

::: moniker-end

> [!NOTE]
> Этот раздел относится к Visual Studio в Windows. Информацию о Visual Studio для Mac см. в статье [EditorConfig в Visual Studio для Mac](/visualstudio/mac/editorconfig).

## <a name="code-consistency"></a>Согласованность кода

Параметры в файлах EditorConfig позволяют поддерживать согласованность стилей и параметров написания кода для базы кода, например стиль отступа, интервал табуляции, символ конца строки, кодирование и т. д., независимо от используемого редактора или интегрированной среды разработки. Например, при программировании на языке C#, если в базе кода существует соглашение о том, что отступы всегда состоят из пяти символов пробела, для документов используется кодировка UTF-8 и каждая строка всегда заканчивается CR/LF, а файл *EDITORCONFIG* можно настроить для выполнения этих условий.

Соглашения для кодирования, используемые вами в личных проектах, могут отличаться от тех, которые действуют в командных проектах. Например, вы предпочитаете, чтобы при вставке отступа во время написания кода добавлялся символ табуляции. Однако в команде может быть принято, чтобы при отступе вместо символа табуляции добавлялись четыре символа пробела. Файлы EditorConfig устраняют эту проблему, позволяя создавать конфигурацию для каждого сценария.

Поскольку параметры содержатся в файле в базе кода, они передаются вместе с этой базой кода. Параметры текстового редактора применяются при открытии файла кода в редакторе, совместимом с EditorConfig. Дополнительные сведения о файлах EditorConfig см. на веб-сайте [EditorConfig.org](http://editorconfig.org/).

> [!NOTE]
> Соглашения, заданные в файле EditorConfig, в настоящее время не могут быть реализованы в конвейере CI/CD с созданием ошибки или предупреждения. Все отклонения от стиля видны только в редакторе Visual Studio и **списке ошибок**.

## <a name="supported-settings"></a>Поддерживаемые параметры

Редактор в Visual Studio поддерживает основной набор [свойств EditorConfig](http://editorconfig.org/#supported-properties):

- indent_style
- indent_size
- tab_width
- end\_of_line
- charset
- trim\_trailing_whitespace
- insert\_final_newline
- корневой

Параметры редактора EditorConfig поддерживаются во всех языках, поддерживаемых Visual Studio, за исключением XML. Кроме того, EditorConfig поддерживает соглашения о [стиле кода](../ide/editorconfig-code-style-settings-reference.md) и [именовании](../ide/editorconfig-naming-conventions.md) для C# и Visual Basic.

## <a name="add-and-remove-editorconfig-files"></a>Добавление и удаление файлов EditorConfig

Добавление файла EditorConfig в проект или базу кода не приводит к преобразованию существующих стилей в новые. Например, если в качестве отступов в файле используются символы табуляции, при добавлении файла EditorConfig, в котором отступы задаются пробелами, символы отступа не преобразовываются в пробелы автоматически. Тем не менее все новые строки кода форматируются в соответствии с файлом EditorConfig. Кроме того, при форматировании документа (**Правка** > **Дополнительно** > **Форматировать документ** или клавиши **Ctrl**+**K**, **Ctrl**+**D**) параметры, заданные в файле EditorConfig, применяются к имеющимся строкам кода.

Если удалить файл EditorConfig из проекта или базы кода, вам необходимо закрыть и снова открыть все файлы кода, чтобы восстановить глобальные параметры редактора для новых строк кода.

### <a name="to-add-an-editorconfig-file-to-a-project-or-solution"></a>Добавление файла EditorConfig в проект или решение

1. Откройте проект или решение в Visual Studio. Выберите узел проекта или решения в зависимости от того, следует ли применять настройки файла *EDITORCONFIG* ко всем проектам в решении или только к одному. В проекте или решении также можно выбрать папку, в которую будет добавлен файл *EDITORCONFIG*.

1. В строке меню выберите **Проект** > **Добавить новый элемент** либо нажмите сочетание клавиш **CTRL**+**SHIFT**+**A**.

   Откроется диалоговое окно **Добавление нового элемента**.

1. В категориях слева выберите **Общие**, а затем шаблон **Текстовый файл**. В текстовом поле **Имя** введите `.editorconfig`, а затем нажмите кнопку **ОК**.

   В обозревателе решений появится файл *EDITORCONFIG*, который откроется в редакторе.

   ![EDITORCONFIG-файл в обозревателе решений](media/editorconfig-in-solution-explorer.png)

1. Измените файл по своему усмотрению, например:

   ```ini
   root = true

   [*.{cs,vb}]
   indent_size = 4
   trim_trailing_whitespace = true

   [*.cs]
   csharp_new_line_before_open_brace = methods
   ```

### <a name="other-ways-to-add-an-editorconfig-file"></a>Другие способы добавления файла EditorConfig

Существует несколько способов добавления в проект файла EditorConfig:

- Установите [расширение языковой службы EditorConfig](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.EditorConfig), чтобы упростить добавление пустого файла *.editorconfig* в проект. После установки этого расширения просто выберите пункты **Добавить** > **.editorconfig File** в контекстном меню узла решения, узла проекта или любой папки в **обозревателе решений**. Это расширение также упрощает редактирование файла *.editorconfig*.

   ![Добавление EDITORCONFIG-файла с расширением](media/editorconfig-extension-add.png)

- Попробуйте [расширение IntelliCode](/visualstudio/intellicode/intellicode-visual-studio). Это экспериментальное расширение определяет стили существующего кода, а затем создает непустой файл *.editorconfig* с помощью параметров определенного стиля.

## <a name="file-hierarchy-and-precedence"></a>Иерархия и приоритет файлов

При добавлении файла *EDITORCONFIG* в папку в иерархии файлов его параметры применяются ко всем соответствующим файлам на этом уровне и ниже. Можно также переопределить параметры EditorConfig для конкретного проекта, базы кода или части кода так, чтобы использовать другие соглашения, чем в остальных частях базы кода. Это может быть полезно при включении кода из-каких либо еще мест без изменения его соглашений.

Чтобы переопределить некоторые или все параметры EditorConfig, добавьте файл *EDITORCONFIG* на уровне иерархии файлов, к которой следует применить эти переопределенные параметры. Новые параметры в файле EditorConfig будут применяться к файлам того же уровня и к файлам во всех подкаталогах.

![Иерархия EditorConfig](../ide/media/vside_editorconfig_hierarchy.png)

Если необходимо переопределить только некоторые параметры, просто укажите их в файле *EDITORCONFIG*. Переопределяются только те свойства, которые явно перечислены в файле более низкого уровня. Другие параметры из файлов *EDITORCONFIG* более высокого уровня будут применяться по-прежнему. Чтобы к этой части базы кода _не_ применялись параметры из _любых_ файлов *EDITORCONFIG* более высокого уровня, добавьте свойство ```root=true``` в файл *EDITORCONFIG* более низкого уровня:

```ini
# top-most EditorConfig file
root = true
```

Файлы EditorConfig считываются сверху вниз. При наличии множества свойств с одним именем приоритет будет иметь последнее обнаруженное свойство с таким именем.

## <a name="edit-editorconfig-files"></a>Изменение файлов EditorConfig

Visual Studio позволяет редактировать файлы *EDITORCONFIG*, предоставляя списки завершения IntelliSense.

![IntelliSense в EDITORCONFIG-файле](media/editorconfig-intellisense-no-extension.png)

После того как вы закончили редактировать файл EditorConfig, необходимо повторно загрузить файлы кода, чтобы новые параметры вступили в силу.

При редактировании большого количества файлов *EDITORCONFIG* может быть полезным расширение [языковой службы EditorConfig](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.EditorConfig). В число возможностей этого расширения входят выделение синтаксиса, улучшенная технология IntelliSense, функции проверки и форматирования кода.

![IntelliSense с расширением языковой службы EditorConfig](media/editorconfig-intellisense.png)

## <a name="example"></a>Пример

В приведенном ниже примере показано состояние отступа во фрагменте кода на C# до и после добавления в проект файла *EDITORCONFIG*. Параметр **Табуляции** в диалоговом окне **Параметры** текстового редактора Visual Studio настроен для вывода символов пробела при нажатии клавиши **TAB**.

![Параметр "Табуляция" в текстовом редакторе](../ide/media/vside_editorconfig_tabsetting.png)

Как и ожидалось, при нажатии клавиши **TAB** в следующей строке создается отступ путем добавления еще четырех символов пробела.

![Код до использования EditorConfig](../ide/media/vside_editorconfig_before.png)

Добавьте в проект новый файл *EDITORCONFIG* с приведенным ниже содержимым. Параметр `[*.cs]` означает, что это изменение применяется только к файлам кода на C# в проекте.

```ini
# Top-most EditorConfig file
root = true

# Tab indentation
[*.cs]
indent_style = tab
```

Теперь при нажатии клавиши **TAB** вместо пробелов будут применяться символы табуляции.

![Клавиша TAB добавляет символ табуляции](../ide/media/vside_editorconfig_tab.png)

## <a name="troubleshoot-editorconfig-settings"></a>Устранение неполадок параметров EditorConfig

Если в структуре каталогов в папке проекта или выше есть файл EditorConfig, среда Visual Studio применяет параметры редактора из этого файла. В этом случае в строке состояния может появиться следующее сообщение:

   **"Пользовательские предпочтения для этого типа файлов переопределены рекомендациями по написанию кода этого проекта".**

Это означает, что, если какие-либо параметры редактора из раздела **Инструменты** > **Параметры** > **Текстовый редактор** (например, размер и стиль отступа, размер интервала табуляции или соглашения о кодировании) заданы в файле EditorConfig, находящемся в структуре каталогов в папке проекта или выше, соглашения в этом файле переопределяют значения в окне **Параметры**. Управлять этим поведением можно с помощью параметра **Следовать рекомендациям по написанию кода проекта** в разделе **Инструменты** > **Параметры** > **Текстовый редактор**. Если снять этот флажок, поддержка EditorConfig в Visual Studio будет отключена.

!["Сервис" > "Параметры" > "Следовать рекомендациям по написанию кода проекта"](media/coding_conventions_option.png)

Чтобы найти файлы с расширением *.editorconfig* в родительских каталогах, откройте командную строку и выполните следующую команду из корня диска, на котором находится проект:

```Shell
dir .editorconfig /s
```

Управлять областью действия соглашений EditorConfig можно с помощью свойства ```root=true``` в файле *EDITORCONFIG*, который находится в корне репозитория или в каталоге, где размещается проект. В Visual Studio поиск файла *EDITORCONFIG* выполняется в каталоге, где находится открытый файл, и во всех его родительских каталогах. Поиск завершается по достижении корня пути к файлу или при нахождении файла *EDITORCONFIG* с ```root=true```.

## <a name="see-also"></a>См. также

- [Соглашения о стиле кода .NET](../ide/editorconfig-code-style-settings-reference.md)
- [Соглашения об именовании .NET](../ide/editorconfig-naming-conventions.md)
- [Поддержка EditorConfig для языковой службы](../extensibility/supporting-editorconfig.md)
- [EditorConfig.org](http://editorconfig.org/)
- [Возможности редактора кода](writing-code-in-the-code-and-text-editor.md)
- [EditorConfig (Visual Studio для Mac)](/visualstudio/mac/editorconfig)