---
title: Создание шаблонов элементов
ms.date: 01/02/2018
ms.topic: conceptual
helpviewer_keywords:
- item templates [Visual Studio], creating
author: TerryGLee
ms.author: tglee
manager: jillfra
ms.openlocfilehash: 62004c5c96fa708f98ab49f4810ec2fc1c38eadc
ms.sourcegitcommit: cc841df335d1d22d281871fe41e74238d2fc52a6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2020
ms.locfileid: "75594725"
---
# <a name="how-to-create-item-templates"></a>Практическое руководство. Создание шаблонов элементов

В этой статье показано, как создать шаблон элемента с помощью **мастера экспорта шаблонов**. Если шаблон будет состоять из нескольких файлов, см. статью [Практическое руководство. Создание многофайловых шаблонов элементов](../ide/how-to-create-multi-file-item-templates.md).

## <a name="add-an-item-template-to-the-add-new-item-dialog-box"></a>Добавление шаблона элемента в диалоговое окно "Добавление нового элемента"

1. Создайте или откройте проект в Visual Studio.

1. Добавьте элемент в проект и измените его по своему усмотрению.

1. Отредактируйте файл кода, чтобы указать, где должна быть выполнена замена параметра. Дополнительные сведения см. в разделе [Практическое руководство. Замена параметров в шаблоне](../ide/how-to-substitute-parameters-in-a-template.md).

1. В меню **Проект** выберите команду **Экспорт шаблона**.

1. На странице **Выбор типа шаблона** выберите **Шаблон элемента**, затем проект, который содержит элемент, и нажмите кнопку **Далее**.

1. На странице **Выбор элемента для экспорта** выберите элемент, для которого нужно создать шаблон, а затем нажмите кнопку **Далее**.

1. На странице **Выбор ссылок для элементов** выберите ссылки на сборки, включаемые в шаблон, а затем нажмите кнопку **Далее**.

1. На странице **Выбор параметров шаблона** введите имя шаблона и необязательное описание, значок и рисунок предварительного просмотра, а затем нажмите кнопку **Готово**.

    Файлы для шаблона добавляются в *ZIP*-файл и копируются в каталог, который вы указали в мастере. Расположением по умолчанию является папка *%USERPROFILE%\Documents\Visual Studio \<версия\>\My Exported Templates*.

1. Если вы не выбрали параметр **Автоматически импортировать шаблон в Visual Studio** в **мастере экспорта шаблонов**, найдите экспортированный шаблон. Затем скопируйте его в каталог пользовательских шаблонов элементов. Расположением по умолчанию является папка *%USERPROFILE%\Documents\Visual Studio \<версия\>\Templates\ItemTemplates*.

1. Закройте Visual Studio, а затем откройте среду повторно.

1. Создайте новый проект или откройте существующий, а затем выберите **Проект** > **Добавить новый элемент** или нажмите клавиши **CTRL**+**SHIFT**+**A**.

   Шаблон элемента появится в диалоговом окне **Добавление нового элемента**. Если вы добавили описание в **мастере экспорта шаблонов**, оно будет отображаться в правой части диалогового окна.

## <a name="enable-the-item-template-to-be-used-in-a-universal-windows-app-project"></a>Включение шаблона элемента для использования в проекте универсального приложения для Windows

Мастер выполняет за вас основную часть работы по созданию базового шаблона, но во многих случаях необходимо вручную изменить *VSTEMPLATE*-файл после экспорта шаблона. Например, если элемент должен отображаться в диалоговом окне **Добавление нового элемента** для проекта универсального приложения Windows, необходимо выполнить ряд дополнительных действий.

1. Выполните шаги из предыдущего раздела по экспорту шаблона элемента.

1. Извлеките созданный *ZIP*-файл и откройте *VSTEMPLATE*-файл в Visual Studio.

1. Для проекта универсальной платформы Windows на C# добавьте следующий XML-код внутри `<TemplateData>` элемента:

   ```xml
   <TemplateID>Microsoft.CSharp.Class</TemplateID>
   ```

1. Сохраните *VSTEMPLATE*-файл в Visual Studio и закройте его.

1. Скопируйте и вставьте *VSTEMPLATE*-файл обратно в *ZIP*-файл.

     Если откроется диалоговое окно **Копирование файла**, выберите параметр **Копировать с заменой**.

Теперь можно добавить основанный на этом шаблоне элемент в проект универсальной платформы Windows из диалогового окна **Добавление нового элемента**.

## <a name="enable-templates-for-specific-project-subtypes"></a>Включение шаблонов для конкретных подтипов проектов

Можно указать, что шаблон должен отображаться только для определенных подтипов проекта, например Windows, Office, базы данных или веб-сайта.

1. Найдите в `ProjectType`VSTEMPLATE *-файле элемент*  для шаблона элемента.

1. Добавьте элемент [ProjectSubType](../extensibility/projectsubtype-element-visual-studio-templates.md) сразу после элемента `ProjectType`.

1. Задайте для элемента одно из следующих текстовых значений:

    - Windows
    - Office
    - База данных
    - Интернет

Например: `<ProjectSubType>Database</ProjectSubType>`.

В следующем примере показан шаблон элемента, доступный для проектов **Office**.

```xml
<VSTemplate Version="2.0.0" Type="Item" Version="2.0.0">
   <TemplateData>
      <Name>Class</Name>
      <Description>An empty class file</Description>
      <Icon>Class.ico</Icon>
      <ProjectType>CSharp</ProjectType>
      <ProjectSubType>Office</ProjectSubType>
      <DefaultName>Class.cs</DefaultName>
   </TemplateData>
   <TemplateContent>
      <ProjectItem>Class1.cs</ProjectItem>
   </TemplateContent>
</VSTemplate>
```

## <a name="manually-create-an-item-template"></a>Создание шаблона элемента вручную

В некоторых случаях может потребоваться вручную создать шаблон элемента с нуля.

1. Создайте проект и его элемент.

2. Измените элемент проекта, пока он не будет готов к сохранению в качестве шаблона.

3. Отредактируйте файл кода, чтобы указать, где должна быть выполнена замена параметра. Дополнительные сведения о замене параметров см. в статье [Практическое руководство. Замена параметров в шаблоне](../ide/how-to-substitute-parameters-in-a-template.md).

4. Создайте XML-файл и сохраните его, используя расширение *VSTEMPLATE*, в одном каталоге с файлом элемента проекта.

5. Измените *VSTEMPLATE*-файл с кодом XML для предоставления метаданных шаблона элемента. Дополнительные сведения см. в статье [Справочник по схемам шаблонов (расширяемость)](../extensibility/visual-studio-template-schema-reference.md) и в примере из предыдущего раздела.

6. Сохраните *VSTEMPLATE*-файл и закройте его.

7. В **проводнике** выберите файлы, которые нужно включить в шаблон. Щелкните выбранные файлы правой кнопкой мыши и выберите пункты **Отправить** > **Сжатая ZIP-папка**. Выбранные файлы будут сжаты в *ZIP*-файл.

::: moniker range="vs-2017"

8. Скопируйте *ZIP*-файл и вставьте его в расположение, где находится пользовательский шаблон элемента. Каталогом по умолчанию является *%USERPROFILE%\Documents\Visual Studio 2017\Templates\ItemTemplates*. Дополнительные сведения см. в статье [Практическое руководство. Размещение и упорядочение шаблонов проектов и элементов](../ide/how-to-locate-and-organize-project-and-item-templates.md).

::: moniker-end

::: moniker range=">=vs-2019"

8. Скопируйте *ZIP*-файл и вставьте его в расположение, где находится пользовательский шаблон элемента. Каталогом по умолчанию является *%USERPROFILE%\Documents\Visual Studio 2019\Templates\ItemTemplates*. Дополнительные сведения см. в статье [Практическое руководство. Размещение и упорядочение шаблонов проектов и элементов](../ide/how-to-locate-and-organize-project-and-item-templates.md).

::: moniker-end

## <a name="see-also"></a>См. также раздел

- [Создание шаблонов проектов и элементов](../ide/creating-project-and-item-templates.md)
- [Практическое руководство. Создание многофайловых шаблонов элементов](../ide/how-to-create-multi-file-item-templates.md)
- [Справочник по схемам шаблонов Visual Studio (расширяемость)](../extensibility/visual-studio-template-schema-reference.md)
