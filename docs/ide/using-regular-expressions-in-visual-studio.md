---
title: Использовать регулярные выражения
ms.date: 06/12/2019
ms.topic: conceptual
f1_keywords:
- vsregularexpressionhelp
- vs.regularexpressionhelp
- vs.wildcardsbuilder
- vs.netregularexpressionhelp
- vs.wildcards
helpviewer_keywords:
- regular expressions [Visual Studio]
- regular expressions
author: gewarren
ms.author: gewarren
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: aaea2e8a2c4fbbead563bd9565cf84466e00c75c
ms.sourcegitcommit: 9c07ae6fb18204ea080c8248994a683fa12e5c82
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/04/2019
ms.locfileid: "70293440"
---
# <a name="use-regular-expressions-in-visual-studio"></a>Использование регулярных выражений в Visual Studio

В Visual Studio [регулярные выражения .NET](/dotnet/standard/base-types/regular-expressions) используются для поиска и замены текста.

## <a name="regular-expression-examples"></a>Примеры регулярных выражений

В таблице ниже собраны некоторые символы, операторы, конструкции и примеры для регулярных выражений. Более подробный справочник по регулярным выражениям вы найдете [здесь](/dotnet/standard/base-types/regular-expression-language-quick-reference).

|Цель|Выражение|Пример|
|-------------|----------------|-------------|
|Соответствует любому одиночному символу, кроме разрыва строки Дополнительные сведения см. в разделе [Любой символ](/dotnet/standard/base-types/character-classes-in-regular-expressions#any-character-).|.|`a.o` совпадает с "ато" в слове "каток" и "aзo" в слове "азот", но не с "арто" в слове "картон"|
|Соответствует нулю или большему числу вхождений предыдущего выражения (совпадение с максимальным числом символов). Дополнительные сведения см. в разделе [Совпадение ноль или несколько раз: *](/dotnet/standard/base-types/quantifiers-in-regular-expressions#match-zero-or-more-times-).|*|`a*r` совпадает с "в" в слове "винт" и "ав" в слове "авто".|
|Соответствует любому символу ноль или более раз (подстановочный знак \*)|.*|`c.*e` совпадает со "сне" в слове "снег", "сове" в слове "совет" и "скате" в слове "скатерть"|
|Соответствует одному или большему числу вхождений предыдущего выражения (совпадение с максимальным числом символов) Дополнительные сведения см. в разделе [Совпадение один или несколько раз: +](/dotnet/standard/base-types/quantifiers-in-regular-expressions#match-one-or-more-times-).|+|`e.+d` совпадает с "ейерв" в "фейерверк", но не с "ей"|
|Соответствует любому символу один или более раз (подстановочный знак ?)|.+|`e.+e` совпадает с "ейерве" в "фейерверк", но не с "ейе"|
|Соответствует нулю или большему числу вхождений предыдущего выражения (совпадение с минимальным числом символов) Дополнительные сведения см. в разделе [Совпадение ноль или несколько раз (ленивое совпадение): *?](/dotnet/standard/base-types/quantifiers-in-regular-expressions#match-zero-or-more-times-lazy-match-).|*?|`e.*?e` совпадает с "ейе" в "фейерверк", но не с "ейерве"|
|Соответствует одному или большему числу вхождений предыдущего выражения (совпадение с минимальным числом символов) Дополнительные сведения см. в разделе [Совпадение один или несколько раз (ленивое совпадение): +?](/dotnet/standard/base-types/quantifiers-in-regular-expressions#match-one-or-more-times-lazy-match-).|+?|`e.+?e` совпадает с "ейе" и "ерве" в "фейерверк", но не с "ейерве"|
|Привязывает сопоставляемую строку к [началу строки](/dotnet/standard/base-types/anchors-in-regular-expressions#start-of-string-or-line-).|^|`^car` совпадает с такими словами, как "продажа" и "процесс", только если они находятся в начале строки|
|Привязывает сопоставляемую строку к [концу строки](/dotnet/standard/base-types/anchors-in-regular-expressions#end-of-string-or-line-).|\r?$|`end\r?$` совпадает с такими словами, как "процесс" и "класс", только если они находятся в конце строки|
|Соответствует вхождению, только если оно находится в конце файла|$|`end$` совпадает с такими словами, как "процесс" и "класс", только если они находятся в конце файла|
|Соответствует любому отдельному символу в наборе|[abc]|`b[abc]` совпадает с "ба", "бб" и "бв"|
|Соответствует любому символу в диапазоне символов|[а-е]|`be[n-t]` совпадает с "вен" в слове "вена", "вес" в слове "весна" и "вет" в слове "ветер", но не с "век" в слове "веко"|
|Запись и неявная нумерация выражения в скобках|()|`([a-z])X\1` совпадает с "аХа" и "бХб", но не с "аХб". "\1" относится к первой группе выражения "[а–я]". Дополнительные сведения см. в разделе [Группы записи и шаблоны замены](#capture-groups-and-replacement-patterns). |
|Признание соответствия недействительным|(?!абв)|`real(?!ity)` совпадает со словами "реальный" и "реальность", но не со словом "реальная". Кроме того, находит второй элемент "реальн" (но не первый "реальн") в "реальнаяреальность".|
|Соответствует любому символу, не входящему в указанный набор. Дополнительные сведения см. в разделе [Отрицательная группа символов](/dotnet/standard/base-types/character-classes-in-regular-expressions#negative-character-group-).|[^абв]|`be[^n-t]` совпадает с "век" в слове "веко", "вел" в слове "велосипед" и "веч" в слове "вечер", но не с "вен" в слове "вена"|
|Совпадает с выражением до или после символа.|&#124;|`(sponge|mud) bath` совпадает со строками "хвойный лес" и "лиственный лес"|
|[Экранирует символ](/dotnet/standard/base-types/character-escapes-in-regular-expressions), указанный за обратной косой чертой.| \\ |`\^` соответствует символу ^|
|Определяет количество вхождений предыдущего символа или группы. Дополнительные сведения см. в разделе [Совпадение ровно n раз: {n}](/dotnet/standard/base-types/quantifiers-in-regular-expressions#match-exactly-n-times-n).|{n}, где n обозначает число вхождений.|`x(ab){2}x` совпадает с "xababx"<br/>`x(ab){2,3}x` совпадает с "xababx" и "xabababx", но не "xababababx"|
|[Сопоставление текста в категории Юникода](/dotnet/standard/base-types/character-classes-in-regular-expressions#unicode-category-or-unicode-block-p). Дополнительные сведения о классах символов Юникода, см. в документе [о свойствах символов в стандарте Юникода 5.2](http://www.unicode.org/versions/Unicode5.2.0/ch04.pdf).|\p{X}, где "X" — число из Юникода.|`\p{Lu}` совпадает с "T" и "D" в "Thoma Doe"|
|[Соответствует границе слова](/dotnet/standard/base-types/anchors-in-regular-expressions#word-boundary-b)|\b (вне класса символов `\b` определяет границу слова, а внутри класса `\b` символов определяет стирание назад)|`\bin` совпадает с "in" в "inside", но не в "pinto"|
|Соответствует разрыву строки (то есть возврату каретки с последующим символом новой строки).|\\r?\\n|`End\r?\nBegin` совпадает со словами "Конец" и "Начало", только если "Конец" является последним словом в строке, а "Начало" — первым словом в следующей строке|
|Соответствует любому [алфавитно-цифровому знаку](/dotnet/standard/base-types/character-classes-in-regular-expressions#word-character-w).|\\w|`a\wd` совпадает с "акт" и "а1т", но не с "а т"|
|Соответствует любому [символу пробела](/dotnet/standard/base-types/character-classes-in-regular-expressions#whitespace-character-s).|\s|`Public\sInterface` совпадает с фразой "Открытый интерфейс"|
|Соответствует любому [символу десятичной цифры](/dotnet/standard/base-types/character-classes-in-regular-expressions#decimal-digit-character-d)|\\d|`\d` совпадает с "3" в "3456", "2" в "23" и "1" в "1"|
|Соответствует символу Юникода|\\uXXXX, где XXXX указывает значение символа Юникода.|`\u0065` совпадает с символом "e"|
|Соответствует идентификатору|\b[\_\w-[0-9]][\_\w]*\b|Совпадает с "type1", но не с "&type1" или "#define"|
|Соответствует строке внутри кавычек|((\\\".+?\\\")&#124;(\'.+?\'))|Соответствует любой строке внутри одинарных или двойных кавычек|
|Соответствует шестнадцатеричному числу.|\b0[xX]([0-9a-fA-F]+\)\b|Совпадает с "0xc67f", но не с "0xc67g"|
|Соответствует целым и десятичным числам|\\b\[0-9\]\*\\,\*\[0-9\]+\\b|Совпадает с "1,333"|

> [!TIP]
> В операционных системах Windows большинство строк заканчиваются символами "\r\n" (возврат каретки с новой строкой). Эти символы не отображаются, но имеются в редакторе и передаются в службу регулярных выражений .NET.

## <a name="capture-groups-and-replacement-patterns"></a>Группы записи и шаблоны замены

Группы записи отделяют части регулярных выражений и захватывают подстроки из входной строки. Вы можете использовать группы записи как в самом регулярном выражении (например, для поиска повторяющихся слов), так и в шаблоне замены. Подробную информацию см. в статье [Конструкции группировки в регулярных выражениях](/dotnet/standard/base-types/grouping-constructs-in-regular-expressions).

Чтобы создать нумерованную группу записи, заключите в скобки часть выражения в шаблоне регулярного выражения. Выделенные части автоматически нумеруются слева направо в порядке появления открывающих скобок в регулярном выражении. Для доступа к группе записи используйте:

- **Внутри регулярных выражений**: Используйте ключевое слово `\number`. Например, `\1` в регулярном выражении `(\w+)\s\1` обозначает первую именованную группу, то есть `(\w+)`.

- **Внутри шаблона замены**: Используйте ключевое слово `$number`. Например, группированное регулярное выражение `(\d)([a-z])` определяет две группы: первая группа содержит одну десятичную цифру, а вторая группа содержит один символ от **a** до **z**. Выражение обнаруживает четыре совпадения в следующей строке: **1a 2b 3c 4d**. Строка замены `z$1` ссылается только на первую группу (`$1`) и преобразует строку в **z1 z2 z3 z4**.

На следующем изображении показаны регулярное выражение `(\w+)\s\1` и строка замены `$1`. Само регулярное выражение и шаблон замены считаются первой группой записи с автоматически присвоенным номером 1. Если вы выполните команду **Заменить все** в диалоговом окне **Быстрая замена**, Visual Studio удалит из текста повторяющиеся слова.

![Панель быстрой замены в Visual Studio, где отображается нумерованная группа записи](media/numbered-capture-group.png)

> [!TIP]
> Убедитесь, что в диалоговом окне **Быстрая замена** нажата кнопка **Использовать регулярные выражения**.

### <a name="named-capture-groups"></a>Именованные группы записи

Вы можете не полагаться на автоматическую нумерацию групп записи, а присвоить им имена. Для именованной группы записи используется синтаксис `(?<name>subexpression)`.

Именованные группы записи, как и нумерованные, можно использовать в самом регулярном выражении или шаблоне замены. Для доступа к именованной группе захвата используйте:

- **Внутри регулярных выражений**: Используйте ключевое слово `\k<name>`. Например `\k<repeated>` в регулярном выражении `(?<repeated>\w+)\s\k<repeated>` ссылается на группу записи с именем `repeated`, которая содержит часть выражения `\w+`.

- **Внутри шаблона замены**: Используйте ключевое слово `${name}`. Например, `${repeated}`.

На следующем изображении представлен пример регулярного выражения `(?<repeated>\w+)\s\k<repeated>` и строки замены `${repeated}`. Само регулярное выражение и шаблон замены указывают на группу записи с именем `repeated`. Если вы выполните команду **Заменить все** в диалоговом окне **Быстрая замена**, Visual Studio удалит из текста повторяющиеся слова.

![Панель быстрой замены в Visual Studio, где отображается именованная группа записи](media/named-capture-group.png)

> [!TIP]
> Убедитесь, что в диалоговом окне **Быстрая замена** нажата кнопка **Использовать регулярные выражения**.

Дополнительные сведения об именованных группах захвата см. в разделе [Именованные сопоставляемые части выражения](/dotnet/standard/base-types/grouping-constructs-in-regular-expressions#named-matched-subexpressions). Дополнительную информацию о регулярных выражениях, которые используются в шаблонах замены, вы найдете. в разделе руководства [Подстановки в регулярных выражениях](/dotnet/standard/base-types/substitutions-in-regular-expressions).

## <a name="see-also"></a>См. также

- [Язык регулярных выражений](/dotnet/standard/base-types/regular-expression-language-quick-reference)
- [Поиск и замена текста](../ide/finding-and-replacing-text.md)
