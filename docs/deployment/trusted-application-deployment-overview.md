---
title: Общие сведения о развертывании доверенных приложений | Документация Майкрософт
description: Узнайте, как развертывать приложения ClickOnce с повышенными разрешениями с помощью технологии развертывания доверенных приложений.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- ClickOnce deployment, install without prompting
- ClickOnce deployment, security
- trusted application deployment
ms.assetid: b24a1702-8fbe-45b1-87a0-9618a0708f1d
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 96dfb98b468782f771d866b33b94b2c18de6276f
ms.sourcegitcommit: 75bfdaab9a8b23a097c1e8538ed1cde404305974
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/07/2020
ms.locfileid: "94350508"
---
# <a name="trusted-application-deployment-overview"></a>Общие сведения о развертывании доверенных приложений
Этот раздел содержит общие сведения о том, как развертывать приложения [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] с повышенными правами с помощью технологии развертывания доверенных приложений.

 Развертывание надежных приложений, часть технологии развертывания [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] , упрощает предоставление дополнительных разрешений управляемому приложению в организациях любого размера. Теперь это можно делать более надежно и безопасно, не отправляя запросов пользователю. Благодаря развертыванию надежных приложений организации достаточно только настроить клиентский компьютер, составив список доверенных издателей, которые идентифицируются с использованием сертификатов Authenticode. После этого любые приложения [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] , подписанные одним из этих надежных издателей, получают более высокий уровень доверия.

> [!NOTE]
> Развертывание надежных приложений требует однократной настройки компьютера пользователя. В управляемых настольных средах эту настройку можно выполнить с помощью глобальной политики. Если это для приложения не требуется, воспользуйтесь повышением уровня разрешений. Дополнительные сведения см. в разделе [Защита приложений ClickOnce](../deployment/securing-clickonce-applications.md).

## <a name="trusted-application-deployment-basics"></a>Основные принципы развертывания надежных приложений
 В следующей таблице показаны объекты и роли, используемые в развертывании надежных приложений.

|Объект или роль|Description|
|--------------------|-----------------|
|administrator|Лицо организации, отвечающее за обновление и обслуживание клиентских компьютеров.|
|Диспетчер доверия|Подсистема в среде CLR, ответственная за обеспечение безопасности клиентского приложения.|
|publisher|Лицо, которое записывает и обслуживает приложение.|
|Средство развертывания|Сущность, которая упаковывает и распространяет приложение пользователям.|
|сертификат|Криптографическая подпись, состоящая из открытого и закрытого ключей; как правило, выдается центром сертификации (ЦС), который подтверждает ее подлинность.|
|Сертификат Authenticode|Сертификат со встроенными метаданными, описывающими, среди прочего, варианты использования этого сертификата.|
|Цент сертификации|Организация, проверяющая подлинность издателей и выдающая им сертификаты, интегрированные в метаданные издателя.|
|корневой центр|Центр сертификации, который авторизует другие центры сертификации на выдачу сертификатов.|
|Контейнер ключей|Логическое хранилище в Microsoft Windows для сохранения сертификатов.|
|Надежный издатель|Издатель, сертификат Authenticode которого добавлен в список доверия сертификатов (CTL) на клиентском компьютере.|

 В более крупных организациях издатель и субъект развертывания часто являются двумя отдельными сущностями.

- Издатель группы, создающий приложение [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] .

- Средство развертывания группы, как правило, это ИТ-отдел, распространяющий приложение [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] на настольных компьютерах в корпоративной среде организации.

Для того чтобы воспользоваться развертыванием надежных приложений, выполните следующие действия.

1. Получите сертификат для издателя.

2. Добавьте издателя в хранилище надежных издателей на всех клиентах.

3. Создайте приложение [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] .

4. Подпишите манифест развертывания с использованием сертификата издателя.

5. Опубликуйте развертывание приложения на клиентских компьютерах.

### <a name="obtain-a-certificate-for-the-publisher"></a>Получение сертификата для издателя
 Цифровые сертификаты являются основными компонентами системы аутентификации Microsoft Authenticode и системы безопасности. Authenticode является стандартной частью ОС Windows. Все приложения [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] должны быть подписаны цифровым сертификатом независимо от того, участвуют они в развертывании надежных приложений или нет. Полное описание того, как работает Authenticode с [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] , см. в разделе [ClickOnce и Authenticode](../deployment/clickonce-and-authenticode.md).

### <a name="add-the-publisher-to-the-trusted-publishers-store"></a>Добавление издателя в хранилище надежных издателей
 Для того чтобы приложение [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] получило более высокий уровень доверия, необходимо добавить сертификат в качестве надежного издателя на каждый клиентский компьютер, где будет выполняться приложение. Для выполнения этой задачи достаточно выполнить настройку один раз. После этого можно развернуть нужное количество приложений [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] , подписанных сертификатом издателя, и все они будут выполняться с высоким уровнем доверия.

 При развертывании приложения в управляемой среде настольных компьютеров, например в корпоративной интрасети с ОС Windows, можно добавить надежных издателей в хранилище клиента, создав новый список доверия сертификатов (CTL) с использованием групповой политики. Дополнительные сведения см. в статье [Create a certificate trust list for a Group Policy object](/previous-versions/windows/it-pro/windows-server-2003/cc728449(v=ws.10))(Создание списка доверия сертификатов для объекта групповой политики).

 Если развертывание приложения выполняется не в управляемой среде настольных компьютеров, имеются следующие варианты добавления сертификата в хранилище надежных издателей.

- Пространство имен <xref:System.Security.Cryptography?displayProperty=fullName> .

- Компонент Internet Explorer *CertMgr.exe* , который существует во всех версиях Windows начиная с Windows 98. Дополнительные сведения см. в разделе [Certmgr.exe (средство диспетчера сертификатов)](/dotnet/framework/tools/certmgr-exe-certificate-manager-tool).

### <a name="create-a-clickonce-application"></a>Создание приложения ClickOnce
 [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)]Приложение — это .NET Framework клиентское приложение, объединенное с файлами манифестов, описывающее приложение и предоставляя параметры установки. Можно включить свою программу в приложение [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] , воспользовавшись командой **Опубликовать** в . [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]. Кроме того, можно создать все файлы, необходимые для развертывания [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] , с помощью средств в составе [!INCLUDE[winsdklong](../deployment/includes/winsdklong_md.md)]. Подробные инструкции по [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] развертывания, см. в разделе [Пошаговое руководство: Развертывание вручную приложения ClickOnce](../deployment/walkthrough-manually-deploying-a-clickonce-application.md).

 Развертывание надежных приложений относится к [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)]и может использоваться только с приложениями [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] .

### <a name="sign-the-deployment"></a>Подписывание развертывания
 После получения сертификата необходимо воспользоваться им, чтобы подписать развертывание. При развертывании приложения с помощью мастера публикации [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] мастер автоматически создает для вас сертификат теста, если вы не задали сертификат самостоятельно. Однако для того чтобы предоставить сертификат центра сертификации, можно также использовать окно «Конструктор проектов [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] ».  См. также [руководство. Публикация приложения ClickOnce с помощью мастера публикации](../deployment/how-to-publish-a-clickonce-application-using-the-publish-wizard.md).

> [!CAUTION]
> Не рекомендуется развертывать приложение с тестовым сертификатом.

 Также можно подписать приложение с помощью средства *Mage.exe* или *MageUI.exe* из набора SDK. Дополнительные сведения см. [в разделе Пошаговое руководство. Развертывание приложения ClickOnce вручную](../deployment/walkthrough-manually-deploying-a-clickonce-application.md). Полный список параметров командной строки, связанных с подписыванием развертывания, см. в разделе [Mage.exe (инструмент создания и изменения манифестов)](/dotnet/framework/tools/mage-exe-manifest-generation-and-editing-tool).

### <a name="publish-the-application"></a>Публикация приложения
 Сразу после подписывания манифестов [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложение готово быть опубликованным в месте установки. Местом установки может являться веб-сервер, общая папка или локальный диск. Когда клиент обращается к манифесту развертывания в первый раз, диспетчер доверия должен выбрать, предоставлены ли приложению [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] установленным надежным издателем права на выполнение с более высоким уровнем доверия. Диспетчер доверия определяет это, сравнивая сертификат, использованный для подписывания развертывания, с сертификатами, которые хранятся в хранилище надежных издателей клиента. Если диспетчер доверия находит соответствие, приложение выполняется с более высоким уровнем доверия.

## <a name="trusted-application-deployment-and-permission-elevation"></a>Развертывание доверенных приложений и повышение уровня разрешений
 Если текущий издатель не является доверенным, диспетчер доверия использует повышение уровня разрешений, чтобы выяснить у пользователя, нужно ли предоставить приложению разрешения повышенного уровня. Если повышение уровня разрешений отключено администратором, приложению не удастся получить разрешение для выполнения. Приложение не будет выполнено, пользователю не отобразится никакого уведомления. Дополнительные сведения о повышении уровня разрешений см. в разделе [Защита приложений ClickOnce](../deployment/securing-clickonce-applications.md).

## <a name="limitations-of-trusted-application-deployment"></a>Ограничения на развертывание надежных приложений
 Развертывание надежных приложений можно использовать для предоставления доверия более высокого уровня приложениям [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] , развернутым через Интернет или общую папку организации. Не нужно использовать развертывание надежных приложений для приложений [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] , распространяемых на компакт-диске, потому что по умолчанию этим приложениям предоставлено полное доверие.

## <a name="see-also"></a>См. также
- [Mage.exe (средство создания и редактирования манифеста)](/dotnet/framework/tools/mage-exe-manifest-generation-and-editing-tool)
- [Пошаговое руководство. Развертывание приложения ClickOnce вручную](../deployment/walkthrough-manually-deploying-a-clickonce-application.md)
