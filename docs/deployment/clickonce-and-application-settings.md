---
title: Параметры ClickOnce и приложения | Документация Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- ClickOnce deployment, application settings
ms.assetid: 891caba6-faef-4a3c-8f71-60e6fadb60eb
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: a72b5bc3f3645d9af1008f2c178ab285e8b45449
ms.sourcegitcommit: d20ce855461c240ac5eee0fcfe373f166b4a04a9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2020
ms.locfileid: "84184137"
---
# <a name="clickonce-and-application-settings"></a>ClickOnce и параметры приложения
Параметры приложения для Windows Forms упрощают создание, хранение и обслуживание пользовательских приложений и настроек пользователей на клиенте. В следующем документе описано, как работают файлы параметров приложения в приложении ClickOnce и как ClickOnce переносит параметры при обновлении пользователем до следующей версии.

 Приведенные ниже сведения относятся только к поставщику параметров приложения по умолчанию — <xref:System.Configuration.LocalFileSettingsProvider> классу. При указании настраиваемого поставщика этот поставщик определит, как он хранит свои данные и как он обновляет свои параметры между версиями. Дополнительные сведения о поставщиках параметров приложений см. в разделе [архитектура параметров приложения](/dotnet/framework/winforms/advanced/application-settings-architecture).

## <a name="application-settings-files"></a>Файлы параметров приложения
 Параметры приложения используют два файла: * \<app> exe. config* и *User. config*, где *приложение* — это имя приложения Windows Forms. *файл User. config* создается на клиенте в первый раз, когда приложение сохраняет параметры области пользователя. * \<app> . exe. config*, напротив, будет существовать до развертывания, если вы определите значения по умолчанию для параметров. Visual Studio автоматически включит этот файл при использовании его команды **Publish** . При создании приложения ClickOnce с помощью *Mage. exe* или *MageUI. exe*необходимо убедиться, что этот файл включен в другие файлы приложения при заполнении манифеста приложения.

 В Windows Formsном приложении, не развернутом с помощью ClickOnce, файл. * \<app> exe. config* приложения хранится в каталоге приложения, а файл *User. config* хранится в папке **Documents and Settings** пользователя. В приложении ClickOnce файл * \<app> . exe. config* находится в каталоге приложения в кэше приложения ClickOnce, а *файл User. config* находится в каталоге данных ClickOnce для этого приложения.

 Независимо от способа развертывания приложения параметры приложения обеспечивают защищенный доступ для чтения к * \<app> exe. config*, а также защищенный доступ на чтение и запись к файлу *User. config*.

 В приложении ClickOnce размер файлов конфигурации, используемых параметрами приложения, ограничен размером кэша ClickOnce. Дополнительные сведения см. в статье [Общие сведения о кэше ClickOnce](../deployment/clickonce-cache-overview.md).

## <a name="version-upgrades"></a>Обновления версий
 Так же как каждая версия приложения ClickOnce изолирована от всех других версий, параметры приложения для приложения ClickOnce также изолированы от параметров других версий. Когда пользователь обновляет приложение до более поздней версии, параметры приложения сравниваются с самыми последними (наиболее пронумерованными) параметрами с параметрами, передаваемыми с обновленной версией, и объединяет параметры в новый набор файлов параметров.

 В следующей таблице описано, как параметры приложения решает, какие параметры следует копировать.

|Тип изменения|Действие обновления|
|--------------------|--------------------|
|Параметр добавлен в файл * \<app> . exe. config*|Новый параметр объединяется с текущей версией * \<app> exe. config* .|
|Параметр удален из * \<app> файла. exe. config*|Старый параметр удаляется из файла * \<app> . exe* текущей версии.|
|Изменение параметра по умолчанию; локальный параметр по-прежнему по умолчанию имеет значение Original в *файле user. config*|Параметр объединяется в *файл User. config* текущей версии с новым значением по умолчанию.|
|Изменение параметра по умолчанию; для параметра задано значение, отличное от значения по умолчанию в *файле user. config*|Параметр объединяется в *файл User. config* текущей версии со значением, отличным от значения по умолчанию.|

Если вы создали собственный класс-оболочку параметров приложения и хотите настроить логику обновления, можно переопределить <xref:System.Configuration.ApplicationSettingsBase.Upgrade%2A> метод.

## <a name="clickonce-and-roaming-settings"></a>Параметры ClickOnce и роуминга
 Технология ClickOnce не работает с параметрами роуминга, что позволяет файлу параметров отслеживать работу компьютеров в сети. Если требуются параметры роуминга, необходимо либо реализовать поставщик параметров приложения, который хранит параметры по сети, либо разработать собственные классы пользовательских параметров для хранения параметров на удаленном компьютере. Дополнительные сведения о поставщиках параметров см. в разделе [архитектура параметров приложения](/dotnet/framework/winforms/advanced/application-settings-architecture).

## <a name="see-also"></a>См. также статью
- [Развертывание и безопасность технологии ClickOnce](../deployment/clickonce-security-and-deployment.md)
- [Общие сведения о параметрах приложения](/dotnet/framework/winforms/advanced/application-settings-overview)
- [Общие сведения о кэше ClickOnce](../deployment/clickonce-cache-overview.md)
- [Доступ к локальным и удаленным данным в приложениях ClickOnce](../deployment/accessing-local-and-remote-data-in-clickonce-applications.md)