---
title: Развертывание приложений ClickOnce без повторного подписывания
description: Сведения о развертывании приложений ClickOnce из нескольких сетевых расположений без повторного подписывания или изменения манифестов ClickOnce.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- ClickOnce applications, deploying without resigning
- ClickOnce deployment, without resigning
- application updates, ClickOnce
- update location [ClickOnce]
- deploymentProvider tag
- manifests [ClickOnce]
ms.assetid: 1218a98d-1ad5-4eef-95dd-0e0b3c44168c
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: b5644a890a8705c68852cb5f67e4d998e12338dc
ms.sourcegitcommit: 0893244403aae9187c9375ecf0e5c221c32c225b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/09/2020
ms.locfileid: "94382940"
---
# <a name="deploy-clickonce-applications-for-testing-and-production-servers-without-resigning"></a>Развертывание приложений ClickOnce для тестирования и рабочих серверов без повторного подписывания
В этой статье описывается функция ClickOnce, появившаяся в .NET Framework версии 3,5, которая позволяет развертывать приложения ClickOnce из нескольких сетевых расположений без повторной подписи или изменения манифестов ClickOnce.

> [!NOTE]
> Подписывание по-прежнему является предпочтительным способом развертывания новых версий приложений. Везде, где это возможно, используйте метод подписывания. Дополнительные сведения см. в разделе [ *Mage.exe* (инструмент создания и изменения манифестов)](/dotnet/framework/tools/mage-exe-manifest-generation-and-editing-tool).

 Сторонние разработчики и независимые поставщики программного обеспечения могут принять участие в этой функции, упрощая обновление своих приложений клиентами. Эта функция может использоваться в следующих ситуациях.

- При обновлении приложения, а не для первой установки приложения.

- Если на компьютере имеется только одна конфигурация приложения. Например, если приложение настроено для указания двух разных баз данных, использовать эту функцию нельзя.

## <a name="exclude-deploymentprovider-from-deployment-manifests"></a>Исключить deploymentProvider из манифестов развертывания
 В .NET Framework 2,0 и .NET Framework 3,0 любое приложение ClickOnce, устанавливаемое в системе для обеспечения доступности в автономном режиме, должно содержать список `deploymentProvider` в манифесте развертывания. `deploymentProvider`Часто называется расположением обновления. это расположение, в котором ClickOnce проверяет наличие обновлений приложения. Это требование наряду с тем, чтобы издатели приложений подписали свои развертывания, затрудняют компании обновление приложения ClickOnce от поставщика или другого стороннего производителя. Это также усложняет развертывание одного и того же приложения из нескольких расположений в одной сети.

 Благодаря изменениям, внесенным в ClickOnce в .NET Framework 3,5, сторонние лица могут предоставить приложение ClickOnce другой организации, которое затем может развернуть приложение в своей сети.

 Чтобы воспользоваться преимуществами этой функции, разработчики приложений ClickOnce должны исключить `deploymentProvider` из манифестов развертывания. Это требование означает, что при `-providerUrl` создании манифестов развертывания с Mage.exe необходимо исключить аргумент. Или, если манифесты развертывания создаются с MageUI.exe, необходимо убедиться, что текстовое поле **Расположение запуска** на вкладке **манифест приложения** не заполнено.

## <a name="deploymentprovider-and-application-updates"></a>Обновление deploymentProvider и приложения
 Начиная с .NET Framework 3,5 вам больше не нужно указывать `deploymentProvider` в манифесте развертывания, чтобы развернуть приложение ClickOnce как для оперативного, так и для автономного использования. Это изменение поддерживает сценарий, в котором необходимо упаковать и подписать развертывание самостоятельно, но разрешить другим компаниям развертывать приложение по своим сетям.

 Важно помнить, что приложения, которые исключают, `deploymentProvider` не могут изменить свое расположение установки во время обновления, пока они не поставляют обновление, включающее `deploymentProvider` тег.

 Вот два примера для пояснения этой точки. В первом примере публикуется приложение ClickOnce, не имеющее `deploymentProvider` тега, и пользователю предлагается установить его с помощью `http://www.adatum.com/MyApplication/` . Если вы решили опубликовать следующее обновление приложения из `http://subdomain.adatum.com/MyApplication/` , вы не можете указать это в манифесте развертывания, который находится в `http://www.adatum.com/MyApplication/` . Можно выполнить одно из двух действий:

- Попросите пользователей удалить предыдущую версию и установить новую версию из нового расположения.

- Включает в себя обновление `http://www.adatum.com/MyApplication/` , которое содержит `deploymentProvider` ссылку на `http://www.adatum.com/MyApplication/` . Затем отпустите еще одно обновление позже, `deploymentProvider` указав `http://subdomain.adatum.com/MyApplication/` .

  Во втором примере вы публикуете приложение ClickOnce, которое указывает `deploymentProvider` , а затем решает удалить его. После загрузки новой версии без `deploymentProvider` скачивания на клиенты вы не сможете перенаправить путь, используемый для обновлений, до выпуска версии приложения, которое было `deploymentProvider` восстановлено. Как и в первом примере, `deploymentProvider` должен изначально указывать на текущее расположение обновления, а не на новое расположение. В этом случае при попытке вставить объект, `deploymentProvider` который ссылается на `http://subdomain.adatum.com/MyApplication/` , следующее обновление завершается ошибкой.

## <a name="create-a-deployment"></a>Создание развертывания
 Пошаговые инструкции по созданию развертываний, которые могут быть развернуты из разных сетевых расположений, см. в разделе [Пошаговое руководство. Развертывание вручную приложения ClickOnce, которое не требует повторного подписания и сохраняет сведения о фирменной символике](../deployment/walkthrough-manually-deploying-a-clickonce-app-no-re-signing-required.md).

## <a name="see-also"></a>См. также
- [*Mage.exe* (инструмент создания и изменения манифестов)](/dotnet/framework/tools/mage-exe-manifest-generation-and-editing-tool)
- [*MageUI.exe* (инструмент создания и изменения манифестов, графический клиент)](/dotnet/framework/tools/mageui-exe-manifest-generation-and-editing-tool-graphical-client)
