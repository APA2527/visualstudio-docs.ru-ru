---
title: Управление обновлениями для приложения ClickOnce | Документация Майкрософт
ms.date: 11/04/2016
ms.topic: how-to
f1_keywords:
- Microsoft.VisualStudio.Publish.ClickOnceProvider.Dialog.Update
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- ClickOnce deployment, managing applications
- ClickOnce deployment, updates
- updating data, ClickOnce
- application updates
ms.assetid: a3f23f05-e7f1-4620-b23c-2d68f9643684
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 6f4ebe4d04aa585d9129587fe3c250c46516c824
ms.sourcegitcommit: 062615c058d2ff44751e8d0c704ccfa3c5543469
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "90851610"
---
# <a name="how-to-manage-updates-for-a-clickonce-application"></a>Практическое руководство. Управление обновлениями для ClickOnce-приложения
[!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения могут проверять наличие обновлений автоматически или программным образом. Как разработчик, у вас есть множество гибких возможностей для указания времени и того, как выполняются проверки обновлений, являются ли обновления обязательными и где приложение должно проверять наличие обновлений.

 Можно настроить приложение на автоматическую проверку обновлений перед запуском приложения или через заданные интервалы после запуска приложения. Кроме того, можно указать минимальную требуемую версию. Это значит, что обновление устанавливается, если версия пользователя ниже требуемой версии.

 Можно настроить приложение на проверку наличия обновлений программным способом в зависимости от события, такого как запрос пользователя. Процедура "Программная проверка обновлений" в этом разделе показывает, как написать код, использующий <xref:System.Deployment.Application.ApplicationDeployment> класс для проверки наличия обновлений на основе события.

 Можно также развернуть приложение из одного расположения и обновить его с другого. См. процедуру "Указание другого расположения обновления".

 Дополнительные сведения см. [в разделе Выбор стратегии обновления ClickOnce](../deployment/choosing-a-clickonce-update-strategy.md).

 Поведение обновления управляется в диалоговом окне **обновления приложения** , доступном на странице **Публикация** в **конструкторе проектов.**

### <a name="to-check-for-updates-before-the-application-starts"></a>Проверка наличия обновлений перед запуском приложения

1. Выберите проект в **обозревателе решений**, а затем в меню **Проект** щелкните **Свойства**.

2. Перейдите на вкладку **Публикация**.

3. Нажмите кнопку " **обновления** ", чтобы открыть диалоговое окно " **обновления приложения** ".

4. В диалоговом окне **обновления приложения** убедитесь, что установлен флажок **приложение должно проверять наличие обновлений** .

5. В разделе **выберите, когда приложение должно проверять наличие обновлений** выберите **перед запуском приложения**. Это гарантирует, что пользователи, подключенные к сети, всегда запускают приложение с последними обновлениями.

### <a name="to-check-for-updates-in-the-background-after-the-application-starts"></a>Проверка наличия обновлений в фоновом режиме, после запуска приложения

1. Выберите проект в **обозревателе решений**, а затем в меню **Проект** щелкните **Свойства**.

2. Перейдите на вкладку **Публикация**.

3. Нажмите кнопку " **обновления** ", чтобы открыть диалоговое окно " **обновления приложения** ".

4. В диалоговом окне **обновления приложения** убедитесь, что установлен флажок **приложение должно проверять наличие обновлений** .

5. В **разделе Выберите, когда приложение должно проверять наличие обновлений**выберите **после запуска приложения**. Приложение будет запускаться таким образом быстрее, а затем будет проверять наличие обновлений в фоновом режиме и уведомлять пользователя только о доступности обновления. После установки обновления вступят в силу только после перезапуска приложения.

6. В разделе **Укажите, как часто приложение должно проверять наличие обновлений** установите флажок Проверять при **каждом запуске приложения** (по умолчанию) или **проверить все** и введите число и интервал времени.

### <a name="to-specify-a-minimum-required-version-for-the-application"></a>Указание минимальной требуемой версии для приложения

1. Выберите проект в **обозревателе решений**, а затем в меню **Проект** щелкните **Свойства**.

2. Перейдите на вкладку **Публикация**.

3. Нажмите кнопку " **обновления** ", чтобы открыть диалоговое окно " **обновления приложения** ".

4. В диалоговом окне **обновления приложения** убедитесь, что установлен флажок **приложение должно проверять наличие обновлений** .

5. Установите флажок **Укажите минимальную требуемую версию для этого приложения** , а затем введите номера **основной**, **дополнительный, номер** **сборки**и номер **редакции** для приложения.

### <a name="to-specify-a-different-update-location"></a>Указание другого расположения обновления

1. Выберите проект в **обозревателе решений**, а затем в меню **Проект** щелкните **Свойства**.

2. Перейдите на вкладку **Публикация**.

3. Нажмите кнопку " **обновления** ", чтобы открыть диалоговое окно " **обновления приложения** ".

4. В диалоговом окне **обновления приложения** убедитесь, что установлен флажок **приложение должно проверять наличие обновлений** .

5. В поле **Расположение обновления** введите расположение обновления с полным URL-адресом, используя формат *http://Hostname/ApplicationName* , или UNC-путь в формате * \\ \сервер\аппликатионнаме*или нажмите кнопку **обзора** , чтобы выбрать расположение обновления.

### <a name="to-check-for-updates-programmatically"></a>Программная проверка обновлений

1. Выберите проект в **обозревателе решений**, а затем в меню **Проект** щелкните **Свойства**.

2. Перейдите на вкладку **Публикация**.

3. Нажмите кнопку " **обновления** ", чтобы открыть диалоговое окно " **обновления приложения** ".

4. В диалоговом окне **обновления приложения** убедитесь, что флажок **приложение должно проверять наличие обновлений** снят. (При необходимости можно установить этот флажок, чтобы проверять наличие обновлений программным образом, а также позволить среде выполнения ClickOnce автоматически проверять наличие обновлений.)

5. В поле **Расположение обновления** введите расположение обновления с полным URL-адресом, используя формат *http://Hostname/ApplicationName* , или UNC-путь в формате * \\ \сервер\аппликатионнаме*или нажмите кнопку **обзора** , чтобы выбрать расположение обновления. Расположение обновления — это место, где приложение будет искать обновленную версию самого себя.

6. Создание кнопки, пункта меню или другого элемента пользовательского интерфейса в форме Windows Forms, который пользователи будут выбирать для проверки наличия обновлений. В обработчике событий этого элемента вызовите метод для проверки и установки обновлений. Пример кода Visual Basic и код Visual C# для такого метода см. в [инструкции по программному проверке обновлений приложения с помощью API развертывания ClickOnce](../deployment/how-to-check-for-application-updates-programmatically-using-the-clickonce-deployment-api.md).

7. Создайте приложение.

## <a name="see-also"></a>См. также
- <xref:System.Deployment.Application.ApplicationDeployment>
- [Диалоговое окно "обновления приложения"](/previous-versions/visualstudio/visual-studio-2010/axw1fa38(v=vs.100))
- [Выбор стратегии обновления ClickOnce](../deployment/choosing-a-clickonce-update-strategy.md)
- [Публикация приложений ClickOnce](../deployment/publishing-clickonce-applications.md)
- [Инструкции. Публикация приложения ClickOnce с помощью мастера публикации](../deployment/how-to-publish-a-clickonce-application-using-the-publish-wizard.md)
- [Инструкции. Проверка обновлений приложения программным путем с помощью API развертывания ClickOnce](../deployment/how-to-check-for-application-updates-programmatically-using-the-clickonce-deployment-api.md)
