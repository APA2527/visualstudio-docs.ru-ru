---
title: Использование Boost.Test для C++
description: Используйте Boost.Test для создания модульных тестов в Visual Studio.
ms.date: 05/06/2019
ms.topic: conceptual
author: mikeblome
ms.author: mblome
manager: jillfra
ms.workload:
- cplusplus
ms.openlocfilehash: cf962ec4ecade1bb88d9e301d62eb6ab8a5131cf
ms.sourcegitcommit: 6196d0b7fdcb08ba6d28a8151ad36b8d1139f2cc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2019
ms.locfileid: "65226104"
---
# <a name="how-to-use-boosttest-for-c-in-visual-studio"></a>Использование Boost.Test для C++ в Visual Studio

В Visual Studio 2017 и более поздних версиях адаптер теста Boost.Test интегрирован в среду IDE Visual Studio как компонент рабочей нагрузки **Разработка классических приложений на C++**.

![Адаптер теста для Boost.Test](media/cpp-boost-component.png)

Если у вас не установлена рабочая нагрузка **Разработка классических приложений на C++**, откройте **Установщик Visual Studio**. Выберите рабочую нагрузку **Разработка классических приложений на C++**, а затем нажмите кнопку **Изменить**.

## <a name="install-boost"></a>Установка Boost

Для Boost.Test требуется [Boost](http://www.boost.org/). Если у вас не установлен Boost, рекомендуем воспользоваться диспетчером пакетов Vcpkg.

1. Следуйте инструкциям в статье [vcpkg: диспетчер пакетов C++ для Windows](/cpp/vcpkg), чтобы установить диспетчер vcpkg (если у вас его еще нет).

1. Установка динамической или статической библиотеки Boost.Test:

    - Выполните **vcpkg install boost-test**, чтобы установить динамическую библиотеку Boost.Test.

       -ИЛИ-

    - Выполните **vcpkg install boost-test:x86-windows-static**, чтобы установить статическую библиотеку Boost.Test.

1. Выполните **vcpkg integrate install**, чтобы настроить в Visual Studio библиотеку и пути включения для заголовков и двоичных файлов Boost.

## <a name="add-the-item-template-visual-studio-2017-version-156-and-later"></a>Добавление шаблона элемента (Visual Studio 2017 версии 15.6 или более поздней)

1. Чтобы создать *CPP*-файл для тестов, щелкните правой кнопкой мыши узел проекта в **обозревателе решений** и выберите пункт **Добавить новый элемент**.

   ![Шаблон элемента Boost.Test](media/boost_test_item_template.png)

1. Новый файл содержит пример метода теста. Создайте проект, чтобы **обозреватель тестов** смог обнаружить этот метод.

Шаблон элемента использует вариант Boost.Test с одним заголовком, но вы можете изменить путь в #include, чтобы указать автономный вариант библиотеки. Дополнительные сведения см. в разделе [Добавление директив include](#add-include-directives).

## <a name="create-a-test-project"></a>Создание тестового проекта

В Visual Studio 2017 версии 15.5 для Boost.Test нет предварительно настроенного тестового проекта или шаблонов элементов. Поэтому необходимо создать и настроить проект консольного приложения, в котором будут помещаться тесты.

1. В **обозревателе решений** щелкните узел решения правой кнопкой мыши и выберите пункты **Добавить** > **Новый проект**.

1. В левой области выберите **Visual C++** > **Рабочий стол Windows**, а затем выберите шаблон **Консольное приложение Windows**.

1. Присвойте проекту имя и нажмите кнопку **ОК**.

1. Удалите функцию `main` из *CPP*-файла.

1. Если вы используете версию Boost.Test с одним заголовком или динамическую версию библиотеки, перейдите к разделу [Добавление директив #include](#add-include-directives). Если вы используете статическую версию библиотеки, вам нужно выполнить некоторые дополнительные настройки.

   1. Чтобы изменить файл проекта, сначала выгрузите его. В **обозревателе решений** щелкните узел проекта правой кнопкой мыши и выберите пункт **Выгрузить проект**. Затем щелкните правой кнопкой мыши узел проекта и выберите **Изменить <имя\>.vcxproj**.

   2. Добавьте две строки в группу свойств **Глобальные**, как показано ниже:

    ```xml
    <PropertyGroup Label="Globals">
    ....
        <VcpkgTriplet>x86-windows-static</VcpkgTriplet>
        <VcpkgEnabled>true</VcpkgEnabled>
    </PropertyGroup>
    ```

   В. Сохраните и закройте *\*VCXPROJ*-файл и затем перезагрузите проект.

   Г. Чтобы открыть диалоговое окно **Страницы свойств**, щелкните узел проекта правой кнопкой мыши и выберите пункт **Свойства**.

   Г. Разверните узел **C/C++** > **Создание кода**, а затем выберите элемент **Библиотека времени выполнения**. Выберите **/MTd** в качестве статической библиотеки времени выполнения для отладки или **/MT** в качестве статической библиотеки времени выполнения для выпуска.

   f. Разверните узел **Компоновщик** > **Система**. Убедитесь, что параметру **SubSystem** задано значение **Консоль**.

   ж. Нажмите кнопку **ОК**, чтобы закрыть окно страниц свойств.

## <a name="add-include-directives"></a>Добавление директив include

1. В *CPP*-файле теста добавьте необходимые директивы `#include`, чтобы типы и функции программы были доступны коду теста. Как правило, программа находится в иерархии папок на один уровень выше. При вводе `#include "../"` открывается окно IntelliSense, в котором можно выбрать полный путь к файлу заголовка.

   ![Добавление директив #include](media/cpp-gtest-includes.png)

   Можно использовать автономную библиотеку с:

   ```cpp
   #include <boost/test/unit_test.hpp>
   ```

   Или использовать версию с одним заголовком с:

   ```cpp
   #include <boost/test/included/unit_test.hpp>
   ```

   Затем определите `BOOST_TEST_MODULE`.

Приведенного ниже примера достаточно для обнаружения теста в **обозревателе тестов**.

```cpp
#define BOOST_TEST_MODULE MyTest
#include <boost/test/included/unit_test.hpp\> //single-header
#include "../MyProgram/MyClass.h" // project being tested
#include <string>

BOOST_AUTO_TEST_CASE(my_boost_test)
{
    std::string expected_value = "Bill";

    // assume MyClass is defined in MyClass.h
    // and get_value() has public accessibility
    MyClass mc;
    BOOST_CHECK(expected_value == mc.get_value());
}
```

## <a name="write-and-run-tests"></a>Написание и запуск тестов

Все готово к написанию и выполнению тестов Boost. Сведения о макросах тестов см. в [документации по библиотеке Boost Test](http://www.boost.org/doc/libs/release/libs/test/doc/html/index.html). Сведения об обнаружении, выполнении и группировании тестов с помощью **обозревателя тестов** см. в статье [Выполнение модульных тестов с помощью обозревателя тестов](run-unit-tests-with-test-explorer.md).

## <a name="see-also"></a>См. также

- [Написание модульных тестов для C/C++](writing-unit-tests-for-c-cpp.md)
