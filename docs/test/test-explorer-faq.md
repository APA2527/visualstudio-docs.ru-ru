---
title: Вопросы и ответы по обозревателю тестов
ms.date: 11/07/2018
ms.topic: conceptual
helpviewer_keywords:
- Test Explorer
- Test window
- Visual Studio Test Explorer
- summary line
- unit tests
- Test Explorer FAQ
ms.author: kehavens
ms.workload:
- multiple
author: kendrahavens
manager: jillfra
ms.openlocfilehash: 0dda73a4bbea2813131cc0695655eed7ea3409ca
ms.sourcegitcommit: 044bb54cb4552c8f4651feb11d62e52726117e75
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/30/2019
ms.locfileid: "68662006"
---
# <a name="visual-studio-test-explorer-faq"></a>Вопросы и ответы об обозревателе тестов Visual Studio

::: moniker range=">=vs-2019"
## <a name="where-is-group-by-traits-in-visual-studio-2019"></a>Где находится группировка по признакам в Visual Studio 2019?
Группировка по признакам была перемещена в отдельный столбец. С многоуровневой и настраиваемой иерархией в Visual Studio 2019 версии 16.2 признаки в виде групп создавали бы лишнюю сложность при просмотре. Мы прислушались к отзывам об этом дизайне! https://developercommunity.visualstudio.com/content/problem/588029/no-longer-able-to-group-by-trait-in-test-explorer.html

Теперь можно щелкнуть правой кнопкой мыши столбец в обозревателе тестов и выбрать пункт "Столбцы". Отметьте столбец признаков, и он отобразится в обозревателе тестов. Теперь этот столбец можно отфильтровать по интересующим вас характеристикам.

![Отобразить столбец признаков](media/vs-2019/trait-column.png)
![Фильтровать столбец признаков](media/vs-2019/trait-column-filter.png)

::: moniker-end

## <a name="dynamic-test-discovery"></a>Обнаружение динамических тестов

**Обозреватель тестов не обнаруживает тесты, определенные динамически. (Например, теории, пользовательские адаптеры, пользовательские признаки, #ifdef и т. д.) Как сделать так, чтобы они обнаруживались?**

Скомпилируйте проект и убедитесь в том, что в разделе **Сервис** > **Параметры** > **Тест** включено обнаружение на основе сборок.

[Обнаружение тестов в реальном времени](https://go.microsoft.com/fwlink/?linkid=862824) основано на источнике. Оно не способно обнаружить тесты, которые используют теории, пользовательские адаптеры, пользовательские признаки, операторы `#ifdef` и т. п., так как они определяются во время выполнения. Чтобы правильно распознать такие тесты, нужно выполнить сборку. В Visual Studio 2017 15.6 и более поздних версий обнаружение на основе сборок (традиционный метод) выполняется только после сборки. Это означает, что обнаружение тестов в реальном времени определяет максимально возможное количество тестов в процессе редактирования, а после сборки к ним добавляются динамически определяемые тесты благодаря обнаружению на основе сборок. Обнаружение тестов в реальном времени повышает скорость реакции системы, но сохраняет возможность получить полные и точные результаты после сборки.

## <a name="test-explorer--plus-symbol"></a>Обозреватель тестов, символ плюса (+)

**Что означает символ "+" (плюс) в верхней строке обозревателя тестов?**

Символ "+" (плюс) означает, что после сборки могут быть обнаружены дополнительные тесты, если включено обнаружение на основе сборок. Этот символ отображается, если в проекте обнаружены динамически определяемые тесты.

![Символ "плюс" в строке сводной информации](media/testex-plussymbol.png)

## <a name="assembly-based-discovery"></a>Обнаружение на основе сборок

**Обнаружение на основе сборок перестало работать в моем проекте. Как включить его снова?**

Выберите пункты **Сервис** > **Параметры** > **Тест** и установите флажок **Также вести обнаружение тестов в сборках после их создания**.

![Вариант обнаружения на основе сборок](media/testex-toolsoptions.png)

## <a name="real-time-test-discovery"></a>Обнаружение тестов в режиме реального времени

**Теперь тесты появляются в обозревателе тестов сразу при вводе кода, не дожидаясь сборки. Что изменилось?**

Эта возможность называется [Обнаружение тестов в реальном времени](https://go.microsoft.com/fwlink/?linkid=862824). На основе анализатора Roslyn она обнаруживает тесты и переносит данные о них в обозреватель тестов прямо в режиме реального времени, еще до сборки проекта. Дополнительные сведения об алгоритме обнаружения для динамически определяемых тестов, например с использованием теорий или пользовательских признаков, см. в часто задаваемых вопросах 1.

## <a name="real-time-test-discovery-compatibility"></a>Совместимость с обнаружением тестов в реальном времени

**Какие языки и платформы тестирования поддерживают обнаружение тестов в реальном времени?**

[Обнаружение тестов в реальном времени](https://go.microsoft.com/fwlink/?linkid=862824) работает только для управляемых языков (C# и Visual Basic), так как оно создано на основе компилятора Roslyn. На данном этапе обнаружение тестов в реальном времени работает только для платформ MSTest, NUnit и xUnit.

## <a name="test-explorer-logs"></a>Журналы обозревателя тестов

**Как можно включить журналы для обозревателя тестов?**

Откройте **Сервис** > **Параметры** > **Тест** и найдите раздел "Ведение журнала".

## <a name="uwp-test-discovery"></a>Обнаружение тестов UWP

**Почему мои тесты в проектах UWP не обнаруживаются без развертывания приложения?**

Тесты UWP ориентируются на другую среду выполнения при развертывании приложения. Это означает, что для точного обнаружения тестов для проектов UWP нужно не только собрать, но и развернуть проект.

## <a name="test-explorer-sorting"></a>Сортировка в обозревателе тестов

**Как работает сортировка результатов тестирования в иерархическом представлении?**

Иерархическое представление сортирует тесты по алфавиту, а не по результату. Другие параметры группирования обычно сортируют результаты тестов по результату, а затем по алфавиту. Для сравнения ознакомьтесь с вариантами группирования на приведенном ниже изображении. Вы можете отправить отзыв о данной структуре [в этом вопросе GitHub](https://github.com/Microsoft/vstest/issues/1425).

![SortingExamples](media/testex-sortingex.png)

## <a name="test-explorer-hierarchy-view"></a>Иерархическое представление в обозревателе тестов

**В иерархическом представлении возле группирований проектов, пространств имен и классов есть значки пройденных, не пройденных, пропущенных и не выполненных тестов. Что означают эти значки?**

Значки возле группирований проектов, пространств имен и классов указывают на состояние тестов в определенном группировании. См. приведенную ниже таблицу.

![Значки иерархии в обозревателе тестов](media/testex-hierarchyicons.png)

## <a name="search-by-file-path"></a>Поиск по пути к файлу

**В поле поиска обозревателя тестов исчез фильтр "Путь к файлу".**

Фильтр "Путь к файлу" в поле поиска **обозревателя тестов** удален в Visual Studio 2017 версии 15.7. Эта функция используется мало. Чтобы обозреватель тестов получал методы теста быстрее, ее можно исключить. Если это изменение прерывает ваш поток разработки, сообщите нам, отправив отзыв в [сообщество разработчиков](https://developercommunity.visualstudio.com/).

## <a name="remove-undocumented-interfaces"></a>Удаление недокументированных интерфейсов

**Некоторые интерфейсы API, относящиеся к тесту, отсутствуют в Visual Studio 2019. Что изменилось?**

В Visual Studio 2019 будут удалены некоторые API окон тестов, которые были ранее помечены как общедоступные, но никогда не были официально задокументированы. Они были помечены как "нерекомендуемые" в Visual Studio 2017, чтобы заранее предупредить группы обслуживания расширений. Насколько нам известно, с этими API-интерфейсами работала и была связана лишь незначительная часть расширений. К ним относятся `IGroupByProvider`, `IGroupByProvider<T>`, `KeyComparer`, `ISearchFilter`, `ISearchFilterToken`, `ISearchToken` и `SearchFilterTokenType`. Если это изменение влияет на ваше расширение, сообщите нам, отправив сведения об ошибке в [сообщество разработчиков](https://developercommunity.visualstudio.com).

## <a name="test-adapter-nuget-reference"></a>Ссылка NuGet для адаптера теста

**В Visual Studio 2017 версии 15.8 тесты обнаруживаются, но не выполняются.**

Все тестовые проекты должны содержать ссылку NuGet на адаптер тестов .NET в файле с расширением .csproj. Если такая ссылка отсутствует, в проекте появляется следующая информация о тесте, если после сборки выполняется поиск через расширение адаптера тестов или если пользователь пытается запустить выбранные тесты:

**Тестовый проект {} не ссылается ни на один адаптер .NET NuGet. Обнаружение или выполнение тестов для этого проекта могут не работать. Мы рекомендуем включать ссылку на адаптеры тестов NuGet. в каждый проект теста .NET в решении.**

Вместо расширений адаптеров тестов проекты должны использовать пакеты NuGet для адаптеров тестов. Это требование значительно повышает производительность и снижает проблемы с непрерывной интеграцией. Дополнительные сведения о прекращении поддержки расширения адаптера теста .NET можно найти в [заметках о выпуске](/visualstudio/releasenotes/vs2017-relnotes-v15.8#testadapterextension).

> [!NOTE]
> Если вы используете адаптер теста NUnit 2 и не можете перейти на адаптер теста NUnit 3, можно отключить это новое поведение обнаружения в версии Visual Studio 15.8 в разделе **Сервис** > **Параметры** > **Тест**.

![Поведение адаптера теста в параметрах меню "Сервис"](media/testex-adapterbehavior.png)

## <a name="uwp-testcontainer-was-not-found"></a>UWP TestContainer не найден

**Мои тесты UWP больше не выполняются в Visual Studio 2017 версии 15.7 и более поздних версий.**

Последние тестовые проекты UWP указывают свойство сборки платформы тестирования, что позволяет повысить производительность при обнаружении тестовых приложений. Если у вас есть тестовый проект UWP, который был инициализирован в версии Visual Studio ниже 15.7, в разделе **Вывод** > **Тесты** вы можете увидеть следующую ошибку.

**System.AggregateException: произошла одна или несколько ошибок. ---> System.InvalidOperationException: не удалось найти следующий объект TestContainer {} в Microsoft.VisualStudio.TestWindow.Controller.TestContainerProvider \<GetTestContainerAsync>d__61.MoveNext()**

Чтобы исправить эту ошибку, сделайте следующее:

- Обновите свойство сборки тестового проекта, используя следующий код.

```XML
<UnitTestPlatformVersion Condition="'$(UnitTestPlatformVersion)' == ''">$(VisualStudioVersion)</UnitTestPlatformVersion>
```

- Обновите версию пакета SDK TestPlatform, используя следующий код.

```XML
<SDKReference Include="TestPlatform.Universal, Version=$(UnitTestPlatformVersion)" />
```

## <a name="using-feature-flags"></a>Использование флагов функций

**Как включить флаги функций, чтобы испытать новые возможности тестирования?**

Флаги функций позволяют предоставить экспериментальные или незавершенные части продукта энтузиастам, которые готовы опробовать новые функции до официального выпуска и прислать отзыв о них. Их применение может нарушить работу интегрированной среды разработки. Используйте их только в безопасных средах разработки, например на виртуальных машинах. Использование флагов функций всегда сопряжено с некоторым риском и для них не предоставляются гарантии. Экспериментальные функции вы можете включить с помощью [расширения флагов функций](https://marketplace.visualstudio.com/items?itemName=PaulHarrington.FeatureFlagsExtension) или в командной строке разработчика.

![Расширение флагов функций](media/testex-featureflag.png)

Чтобы включить флаг функции через командную строку разработчика Visual Studio, используйте следующую команду. Укажите в ней путь к локальной папке, где установлена среда Visual Studio, и раздел реестра для нужного флага функции.

```shell
vsregedit set “C:\Program Files (x86)\Microsoft Visual Studio\Preview\Enterprise" HKLM FeatureFlags\TestingTools\UnitTesting\HierarchyView Value dword 1
```

> [!NOTE]
> Этой же командой можно отключить флаг, изменив значение после dword c 1 на 0.

## <a name="see-also"></a>См. также

- <xref:Microsoft.VisualStudio.TestTools.UnitTesting?displayProperty=fullName>
- [Создание и запуск модульных тестов для существующего кода](https://msdn.microsoft.com/e8370b93-085b-41c9-8dec-655bd886f173)
- [Модульное тестирование кода](unit-test-your-code.md)
- [Функция Live Unit Testing: вопросы и ответы](live-unit-testing-faq.md)
