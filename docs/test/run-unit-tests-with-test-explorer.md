---
title: Выполнение и отладка модульных тестов с помощью обозревателя тестов
description: Узнайте, как выполнять тесты с помощью обозревателя тестов в Visual Studio. В этом разделе описывается, как включить автоматический запуск тестов после сборки, просматривать результаты тестов, группировать и фильтровать список тестов, создавать списки воспроизведения, отлаживать тесты и использовать ярлыки тестов.
ms.date: 11/04/2016
ms.topic: conceptual
f1_keywords:
- vs.unittesting.testexplorer.overview
author: gewarren
ms.author: gewarren
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: fa24dedd776a0866d5de23fbacd31b32c2d55145
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62946091"
---
# <a name="run-unit-tests-with-test-explorer"></a>Выполнение модульных тестов с помощью обозревателя тестов

С помощью **обозревателя тестов** вы можете запускать модульные тесты из Visual Studio или сторонних проектов модульного тестирования. Кроме того, **обозреватель тестов** позволяет группировать тесты по категориям, фильтровать список тестов, а также создавать, сохранять и запускать списки воспроизведения тестов. Также с его помощью можно выполнять отладку тестов и анализировать производительность тестов и покрытие кода.

Visual Studio включает платформу модульного тестирования Майкрософт для управляемого и машинного кода. Однако с помощью **обозревателя тестов** можно также запустить любую платформу модульного тестирования, в которой реализован адаптер обозревателя тестов. Дополнительные сведения об установке сторонних платформ модульного тестирования см. в разделе [Установка платформ модульного тестирования сторонних поставщиков](../test/install-third-party-unit-test-frameworks.md)

Тесты в **обозревателе тестов** можно выполнять из нескольких тестовых проектов в решении, а также из тестовых классов, которые входят в производственные проекты. Тестовые проекты могут использовать различные платформы модульного тестирования. При написании тестируемого кода для платформы .NET Framework тестовый проект можно написать на любом языке, который также ориентирован на платформу .NET Framework, независимо от языка целевого кода. Проекты машинного кода C/C++ необходимо тестировать с помощью платформы модульного тестирования C++. Дополнительные сведения см. в статье [Создание модульных тестов для C/C++](writing-unit-tests-for-c-cpp.md).

## <a name="run-tests-in-test-explorer"></a>Выполнение тестов в обозревателе тестов

При построении проекта тестирования тесты появляются в Обозревателе тестов. Если Обозреватель тестов не виден, выберите **Тест** в меню Visual Studio, выберите **Windows**, затем выберите **Обозреватель тестов**.

![Обозреватель модульных тестов](../test/media/ute_failedpassednotrunsummary.png)

При выполнении, написании и повторном запуске тестов обозреватель тестов отображает результаты в группах по умолчанию **Неудачные тесты**, **Пройденные тесты**, **Пропущенные тесты** и **Не запущенные тесты**. Можно изменить способ группировки тестов обозревателем тестов.

Большую часть работы по поиску, организации и выполнению тестов можно выполнять из панели инструментов **обозревателя тестов**.

![Запуск тестов из панели инструментов обозревателя тестов](../test/media/ute_toolbar.png)

### <a name="run-tests"></a>Выполнить тесты

Можно выполнить все тесты в решении, все тесты в группе или выбранный набор тестов. Выполните одно из следующих действий.

- Чтобы выполнить все тесты в решении, выберите **Запустить все**.

- Чтобы выполнить все тесты в группе по умолчанию, выберите **Запуск**, а затем группу в меню.

- Выберите отдельные тесты, которые требуется запустить, откройте контекстное меню для выбранного теста и щелкните **Запустить выбранные тесты**.

- Если отдельные тесты не имеют зависимостей, предотвращающих запуск этих тестов в любом порядке, включите параллельное тестирование с помощью переключателя ![UTE&#95;parallelicon&#45;small](../test/media/ute_parallelicon-small.png) на панели инструментов. Это может заметно сократить время, необходимое для выполнения всех тестов.

Анимированная строка **Пройдено/сбой** вверху окна **обозревателя тестов** изменяется по мере выполнения тестов. По завершении тестового запуска эта строка становится зеленой, если все тесты пройдены, или красной, если какой-либо из тестов не пройден **.**

### <a name="run-tests-after-every-build"></a>Запуск тестов после каждой сборки

|Кнопка|Описание|
|-|-|
|![Запуск после построения](../test/media/ute_runafterbuild_btn.png)|Чтобы запускать модульные тесты после каждой локальной сборки, в стандартном меню выберите **Тест**, а затем выберите **Выполнить тесты после сборки** в панели инструментов **обозревателя тестов**.|

> [!NOTE]
> Запуск модульных тестов после каждой сборки требует Visual Studio Enterprise.

## <a name="view-test-results"></a>Просматривать результаты тестов

При выполнении, написании и повторном запуске тестов обозреватель тестов отображает результаты в группах **Неудачные тесты**, **Пройденные тесты**, **Пропущенные тесты** и **Не запущенные тесты**. В области сведений в нижней части окна обозревателя тестов отображается сводка тестового запуска.

### <a name="view-test-details"></a>Просмотр сведений о тесте

Для просмотра подробных сведений для отдельного теста выберите тест.

![Сведения о выполнении теста](../test/media/ute_testdetails.png)

В области сведений о тесте отображаются следующие сведения.

- Имя исходного файла и номер строки метода теста.

- Состояние теста.

- Время, затраченное на выполнение метода теста.

Если тест не пройден, в области сведений также отображается следующее:

- сообщение, возвращенное платформой модульного тестирования для теста;

- трассировка стека во время сбоя теста.

### <a name="view-the-source-code-of-a-test-method"></a>Просмотр исходного кода метода теста

Чтобы вывести исходный код для метода теста в редакторе Visual Studio, выберите тест, а затем в контекстном меню щелкните **Открыть тест** (клавиша **F12**).

## <a name="group-and-filter-the-test-list"></a>Группировка и фильтрация списка тестов

Обозреватель тестов позволяет группировать тесты в стандартные категории. Большинство платформ модульного тестирования, которые работают в обозревателе тестов, позволяют определить собственные категории и пары "категория — значение" для группировки тестов. Кроме того, список тестов можно фильтровать, сопоставляя строки со свойствами теста.

### <a name="group-tests-in-the-test-list"></a>Группирование тестов в списке тестов

Чтобы изменить способ организации тестов, щелкните стрелку "вниз" рядом с кнопкой **Группировать** ![Кнопка "Группировать" в обозревателе тестов](../test/media/ute_groupby_btn.png) и выберите новые условия группировки.

![Группировка тестов по категориям в обозревателе тестов](../test/media/ute_groupbycategory.png)

### <a name="test-explorer-groups"></a>Группы обозревателя тестов

|Группа|Описание|
|-|-----------------|
|**Длительность**|Группировка тестов по времени выполнения: **Быстро**, **Средне** и **Медленно**.|
|**Результат**|Группировка тестов по результатами выполнения: **Неудачные тесты**, **Пропущенные тесты**, **Пройденные тесты**.|
|**Признаки**|Группировка тестов по паре "категория — значение", заданной пользователем. Синтаксис для указания категорий и значений признаков определяется платформой модульного тестирования.|
|**Проект**|Группировка тестов по именам проектов.|

### <a name="group-by-traits"></a>Группировка по признакам

Признак обычно представляет собой пару "имя — значение" категории, однако может быть и отдельной категорией. Признаки могут назначаться методам, которые идентифицируются платформой модульного тестирования как методы теста. Платформа модульного тестирования может определять категории признаков. Чтобы определить собственные пары "имя — значение" категории, можно добавлять значения в категории признаков. Синтаксис для указания категорий и значений признаков определяется платформой модульного тестирования.

**Признаки в платформе модульного тестирования Майкрософт для управляемого кода**

В платформе модульного тестирования Майкрософт для управляемых приложений можно определить пару "имя — значение" признака в атрибуте  <xref:Microsoft.VisualStudio.TestTools.UnitTesting.TestPropertyAttribute> . Платформа тестирования также содержит следующие стандартные признаки.

|Признак|Описание|
|-|-----------------|
|<xref:Microsoft.VisualStudio.TestTools.UnitTesting.OwnerAttribute>|Категория "Владелец" определяется платформой модульного тестирования. Вы должны указать строковое значение владельца.|
|<xref:Microsoft.VisualStudio.TestTools.UnitTesting.PriorityAttribute>|Категория "Приоритет" определяется платформой модульного тестирования. Вы должны указать целочисленное значение приоритета.|
|<xref:Microsoft.VisualStudio.TestTools.UnitTesting.TestCategoryAttribute>|Атрибут TestCategory позволяет предоставить категорию без значения. Категория, определенная атрибутом TestCategory, также может быть категорией атрибута TestProperty.|
|<xref:Microsoft.VisualStudio.TestTools.UnitTesting.TestPropertyAttribute>|Атрибут TestProperty позволяет определять пары "категория — значение" признака.|

**Признаки в платформе модульного тестирования Майкрософт для C++**

 См. раздел [Использование платформы модульного тестирования Майкрософт для C++](how-to-use-microsoft-test-framework-for-cpp.md).

### <a name="search-and-filter-the-test-list"></a>Поиск и фильтрация списка тестов

Фильтры обозревателя тестов можно использовать для ограничения методов теста в проектах, которые вы просматриваете и запускаете.

Когда вы вводите строку в поле поиска **обозревателя тестов** и нажимаете клавишу **ВВОД**, список тестов фильтруется для отображения только тех тестов, полные имена которых содержат эту строку.

Фильтрация по различным условиям

1. Откройте раскрывающийся список справа от поля поиска.

2. Выберите новое условие.

3. Введите значение фильтра в кавычках.

![Фильтрация тестов в обозревателе тестов](../test/media/ute_filtertestlist.png)

> [!NOTE]
> Поиск выполняется без учета регистра и сопоставляет указанную строку с любой частью значения условия.

|Квалификатор|Описание|
|-|-----------------|
|**Признак**|Поиск категории и значения признака, совпадающих с заданной строкой. Синтаксис для указания категорий и значений признаков определяется платформой модульного тестирования.|
|**Project**|Поиск имен тестовых проектов, совпадающих с заданной строкой.|
|**Сообщение об ошибке**|Поиск определяемых пользователем сообщений об ошибке, возвращаемых утверждениями со сбоями, совпадающих с заданной строкой.|
|**Путь к файлу**|Поиск полных имен для исходных файлов теста, совпадающих с заданной строкой.|
|**Полное имя**|Поиск полных имен файлов пространств имен, классов и методов тестов, совпадающих с заданной строкой.|
|**Вывод**|Поиск определяемых пользователем сообщений об ошибке, записанных в стандартный вывод (stdout) или стандартные ошибки (stderr). Синтаксис для указания выходных сообщений определяется платформой модульного тестирования.|
|**Результат**|Поиск совпадений в именах категорий обозревателя тестов: **Неудачные тесты**, **Пропущенные тесты**, **Пройденные тесты**.|

Чтобы исключить подмножество результатов фильтра, используйте следующий синтаксис.

```cpp
FilterName:"Criteria" -FilterName:"SubsetCriteria"
```

Например, `FullName:"MyClass" - FullName:"PerfTest"` возвращает все тесты, имена которых включают MyClass, за исключением тестов с именами, включающими PerfTest.

## <a name="create-custom-playlists"></a>Создание настраиваемых списков воспроизведения

Вы можете создавать и сохранять список тестов, которые необходимо выполнять или просматривать как группу. Если выбрать список воспроизведения, тесты в списке отображаются в обозревателе тестов. Вы можете добавить тест в несколько списков воспроизведения, а если выбрать список воспроизведения по умолчанию **Все тесты** , будут доступны все тесты в проекте.

![Выбор списка воспроизведения](../test/media/ute_playlist.png)

**Чтобы создать список воспроизведения**, выберите один или несколько тестов в обозревателе тестов. В контекстном меню выберите **Добавить в список воспроизведения** > **Новый список воспроизведения**. Сохраните файл с именем и в расположении, указанном в диалоговом окне **Создать новый список воспроизведения** .

**Чтобы добавить тест в список воспроизведения**, выберите один или несколько тестов в обозревателе тестов. В контекстном меню выберите **Добавить в список воспроизведения**, а затем выберите список воспроизведения, в который хотите добавить тесты.

**Чтобы открыть список воспроизведения**, выберите в меню Visual Studio пункт **Тест** > **Список воспроизведения**, а затем выберите список воспроизведения из списка "Недавно использовавшиеся" или нажмите кнопку **Открыть список воспроизведения**, чтобы указать имя и расположение нужного списка.

Если отдельные тесты не имеют зависимостей, предотвращающих запуск этих тестов в любом порядке, включите параллельное тестирование с помощью переключателя ![UTE&#95;parallelicon&#45;small](../test/media/ute_parallelicon-small.png) на панели инструментов. Это может заметно сократить время, необходимое для выполнения всех тестов.

## <a name="debug-and-analyze-unit-tests"></a>Отладка и анализ модульных тестов

Можно использовать Обозреватель тестов для запуска сессии исправления ошибок тестов. Пошагово выполняя код, отладчик Visual Studio плавно переключается назад и вперед между модульными тестами и проектом для тестирования. Начало отладки

1. В редакторе Visual Studio установите точку останова в одном или нескольких методах тестирования, которые вы хотите проверить.

    > [!NOTE]
    > Так как методы тестирования могут запускаться в любом порядке, необходимо устанавливать точки останова во всех методах тестирования, которые необходимо проверить.

2. В обозревателе тестов выберите методы теста, а затем выберите в контекстном меню пункт **Отладить выбранные тесты**.

   Дополнительные сведения об отладчике см. в статье [Отладка в Visual Studio](../debugger/debugger-feature-tour.md).

### <a name="diagnose-test-method-performance-issues"></a>Диагностика проблем производительности метода теста

Чтобы выяснить, почему выполнение метода теста занимает слишком много времени, выберите метод в обозревателе тестов, а затем в контекстном меню пункт **Профиль**. См. [Обозреватель производительности](../profiling/performance-explorer.md).

### <a name="analyze-unit-test-code-coverage"></a>Анализ покрытия кода модульного теста

Можно определить количество кода продукта, который действительно был проверен модульным тестированием, при помощи средства покрытия кода Visual Studio. Можно запустить покрытие кода на выбранных тестах или на всех тестах решения.

Для запуска покрытия кода для методов теста в решении

1. выберите **Тесты** в меню Visual Studio, затем выберите **Анализ покрытия кода**.

2. Выберите одну из следующих команд во вложенном меню.

    - **Выбранные тесты** — запускаются методы тестирования, которые были выбраны в обозревателе тестов.

    - **Все тесты** — запускаются все методы тестирования в решении.

Окно **результатов объема протестированного кода** отображает процент блоков кода продукта, которые были задействованы по строке, функции, классу, пространству имен и модулю.

Дополнительные сведения см. в статье [Использование параметра объема протестированного кода для определения объема протестированного кода](../test/using-code-coverage-to-determine-how-much-code-is-being-tested.md).

## <a name="test-shortcuts"></a>Сочетания клавиш для управления тестами

Чтобы запустить тест из **обозревателя тестов**, щелкните тест правой кнопкой мыши в редакторе кода и выберите **Запустить тест**. Также для этого можно использовать установленные по умолчанию [сочетания клавиш обозревателя тестов](../ide/default-keyboard-shortcuts-in-visual-studio.md#bkmk_testexplorerGLOBAL) в Visual Studio. Некоторые сочетания клавиш зависят от контекста. Это значит, что они запускают тесты или выполняют их отладку в зависимости от того, в каком месте редактора кода находится курсор. Если курсор находится внутри метода теста, этот метод запускается. Если курсор находится на уровне класса, запускаются все тесты в этом классе. Аналогичным образом реализуется поведение на уровне пространства имен.

|Часто используемые команды| Сочетания клавиш|
|-|------------------------|
|TestExplorer.DebugAllTestsInContext|**CTRL**+**R**, **CTRL**+**T**|
|TestExplorer.RunAllTestsInContext|**CTRL**+**R**, **T**|

> [!NOTE]
> Тест нельзя запускать в абстрактном классе, поскольку в абстрактных классах тесты только определяются и для них не создаются экземпляры. Чтобы запустить тест в абстрактном классе, создайте класс, который будет производным от нужного абстрактного класса.

## <a name="see-also"></a>См. также

- [Модульное тестирование кода](../test/unit-test-your-code.md)
- [Выполнение модульного теста как 64-разрядного процесса](../test/run-a-unit-test-as-a-64-bit-process.md)
