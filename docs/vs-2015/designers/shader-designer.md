---
title: Конструктор шейдеров | Документы Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-designers
ms.topic: conceptual
f1_keywords:
- vs.graphics.designer.effectdesigner
- vs.graphics.shaderdesigner
ms.assetid: 5db09a16-b82c-4ba3-8ec9-630cdc109397
caps.latest.revision: 34
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 36737b767757215010e9716663d5807091d3503b
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2019
ms.locfileid: "72664157"
---
# <a name="shader-designer"></a>Конструктор шейдеров
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Этот документ описывает, как работать с конструктором шейдеров [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] для создания, изменения и экспорта пользовательских визуальных эффектов, также называемых *шейдерами*.

 С помощью конструктора шейдеров можно создавать пользовательские визуальные эффекты для игры или приложения, даже если вы не знакомы с программированием HLSL. Чтобы создать шейдер в конструкторе шейдеров, просто опишите его в виде графа — добавьте в область конструктора *узлы* , представляющие данные и операции, а затем задайте связи между ними, чтобы определить способ обработки данных в рамках операций. На каждом узле операции осуществляется предварительный просмотр эффекта до этого момента, позволяя визуализировать его результат. Поток данных проходит через узлы, последний из которых представляет вывод шейдера.

## <a name="supported-formats"></a>Поддерживаемые форматы
 Конструктор шейдеров поддерживает следующие форматы:

|Название формата|Расширение файла|Поддерживаемые операции (просмотр, правка, экспорт)|
|-----------------|--------------------|-------------------------------------------------|
|Язык шейдеров ориентированных графов (Directed Graph Shader Language)|DGSL|Просмотр, правка|
|Шейдер HLSL (исходный код)|HLSL|Экспорт|
|Шейдер HLSL (байт-код)|CSO|Экспорт|
|Заголовок C++ (массив байт-кода HLSL)|H|Экспорт|

## <a name="getting-started"></a>Начало работы
 В этом разделе рассматривается, как добавить в проект [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] шейдер DGSL, а также приводятся основные сведения, которые помогут приступить к работе.

#### <a name="to-add-a-dgsl-shader-to-your-project"></a>Добавление шейдера DGSL в проект

1. В **Обозревателе решений** откройте контекстное меню проекта, в который требуется добавить шейдер, и выберите **Добавить**, **Создать элемент**.

2. В диалоговом окне **Добавление нового элемента** в разделе **Установленные** выберите **Графика**, а затем выберите **Визуальный граф шейдера (DGSL)** .

3. Укажите **Имя** файла шейдера и **Расположение**, где его необходимо создать.

4. Нажмите кнопку **Добавить** .

### <a name="the-default-shader"></a>Шейдер по умолчанию
 Всякий раз, когда вы создаете шейдер DGSL, сначала он представляет собой минимальный шейдер, имеющий только узел **Цвет точки**, подсоединенный к узлу **Окончательный цвет**. Хотя этот шейдер полностью функционален, функции его весьма ограничены. Поэтому первым шагом в создании рабочего шейдера часто является удаление узла **Цвет точки** или отсоединение его от узла **Окончательный цвет**, что дает возможность освободить место для других узлов.

## <a name="working-with-the-shader-designer"></a>Работа с конструктором шейдеров
 В следующих разделах рассматривается порядок использования конструктора шейдеров для работы с пользовательскими шейдерами.

### <a name="shader-designer-toolbars"></a>Панели инструментов конструктора шейдеров
 Панели инструментов конструктора шейдеров содержат команды, помогающие работать с графами шейдеров DGSL.

 Команды, влияющие на состояние конструктора шейдеров, находятся на панели инструментов **Режим конструктора шейдеров** в главном окне [!INCLUDE[vsprvs](../includes/vsprvs-md.md)]. Средства проектирования и команды расположены на панели инструментов **Конструктор шейдеров** в области конструктора шейдеров.

 Ниже приведена панель инструментов **Режим конструктора шейдеров**:

 ![Модальная панель инструментов конструктора шейдеров.](../designers/media/digit-dsd-modal-toolbar.png "Digit-DSD-Modal-панель инструментов")

 Эта таблица описывает элементы на панели инструментов **Режим конструктора шейдеров**, перечисленные в порядке отображения, слева направо:

|Элемент панели инструментов|Описание|
|------------------|-----------------|
|**Выбрать**|Активирует взаимодействие с узлами и краями на графе. В этом режиме можно выбирать, перемещать или удалять узлы, а также устанавливать края или прерывать их.|
|**Панорама**|Активирует перемещение графа шейдера по отношению к рамке окна. Чтобы выполнить панорамирование, выберите точку в области конструктора и переместите ее.<br /><br /> В режиме **Выбрать**, нажав и удерживая клавишу CONTROL, можно временно активировать режим **Панорама**.|
|**Масштаб**|Позволяет отображать граф шейдера более или менее детально по отношению к рамке окна. В режиме **Масштаб** выберите точку в области конструктора, а затем переместите ее вправо или вниз, чтобы увеличить масштаб, либо влево или вверх, чтобы уменьшить масштаб.<br /><br /> В режиме **Выбрать** можно увеличить или уменьшить масштаб, прокручивая колесо мыши с нажатой клавишей CONTROL.|
|**Масштабировать по данным**|Отображает полный граф шейдера в рамке окна.|
|**Режим отрисовки в реальном времени**|Если отрисовка в реальном времени включена, [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] перерисовывает поверхность разработки, даже если пользователь не выполняет никаких действий. Этот режим полезен при работе с шейдерами, которые изменяются со временем.|
|**Просмотр на сфере**|При включении функции для предварительного просмотра шейдера используется модель сферы. Одновременно может быть активна только одна фигура предварительного просмотра.|
|**Просмотр на кубе**|При включении функции для предварительного просмотра шейдера используется модель куба. Одновременно может быть активна только одна фигура предварительного просмотра.|
|**Просмотр на цилиндре**|При включении функции для предварительного просмотра шейдера используется модель цилиндра. Одновременно может быть активна только одна фигура предварительного просмотра.|
|**Просмотр на конусе**|При включении функции для предварительного просмотра шейдера используется модель конуса. Одновременно может быть активна только одна фигура предварительного просмотра.|
|**Просмотр на чайнике**|При включении функции для предварительного просмотра шейдера используется модель чайника. Одновременно может быть активна только одна фигура предварительного просмотра.|
|**Просмотр на плоскости**|При включении функции для предварительного просмотра шейдера используется модель плоскости. Одновременно может быть активна только одна фигура предварительного просмотра.|
|**Панель элементов**|Отображает или скрывает **Панель элементов**.|
|**Свойства**|Отображает или скрывает окно **Свойства**.|
|**Дополнительно**|Содержит расширенные команды и параметры.<br /><br /> **Экспорт**: позволяет экспортировать шейдер в нескольких форматах.<br /><br /> **Экспортировать как**: экспортирует шейдер в виде исходного кода HLSL или скомпилированного байт-кода шейдера. Дополнительные сведения об экспорте шейдеров см. в разделе [Практическое руководство. Экспорт шейдера](../designers/how-to-export-a-shader.md).<br /><br /> **Графические модули**: позволяет выбрать отрисовщик, используемый для отображения области конструктора.<br /><br /> **Отобразить с D3D11**: использует Direct3D 11, чтобы отрисовать область конструктора шейдеров.<br /><br /> **Отобразить с D3D11WARP**: использует платформу Windows Advanced Rasterization Platform (WARP) Direct3D 11, чтобы отрисовать область конструктора шейдеров.<br /><br /> **Вид**: позволяет выбрать дополнительные сведения о конструкторе шейдеров.<br /><br /> **Частота кадров**: при включении эта функция указывает текущую частоту кадров в правом верхнем углу области конструктора. Частота кадров — это количество кадров, рисуемых в секунду.  Этот параметр полезен при включении параметра **Режим отрисовки в реальном времени**.|

> [!TIP]
> Чтобы повторно запустить последнюю команду, нажмите кнопку **Дополнительно**.

### <a name="working-with-nodes-and-connections"></a>Работа с узлами и соединениями
 Используйте режим **Выбрать**, чтобы добавлять, удалять, перемещать, соединять и настраивать узлы. Ниже описано, как выполнять основные операции:

##### <a name="to-perform-basic-operations-in-select-mode"></a>Выполнение основных операций в режиме "Выбрать"

- Это делается так.

  - Чтобы добавить на граф, выберите его на **панели элементов** и переместите в область конструктора.

  - Чтобы удалить узел из графа, выберите его и нажмите клавишу DELETE.

  - Чтобы изменить положение узла, выберите его и переместите на новое место.

  - Для соединения двух узлов переместите выходной терминал одного из узлов на входной терминал другого узла. Соединять можно только терминалы совместимых типов. Линия между терминалами обозначает соединение.

  - Чтобы удалить соединение, в контекстном меню для одного из соединенных терминалов выберите пункт **Разорвать связи**.

  - Для настройки свойств узла выберите его, а затем в окне **Свойства** укажите новые значения.

### <a name="previewing-shaders"></a>Предварительный просмотр шейдеров
 Чтобы понять, как шейдер будет выглядеть в приложении, вы можете настроить предварительный просмотр эффектов. Чтобы оценить приложение, вы можете выбрать одну из нескольких фигур для отрисовки, настроить текстуры и другие параметры материала, включить анимацию эффектов, учитывающих время, и осуществить предварительный просмотр с разных углов.

#### <a name="shapes"></a>Фигуры
 Конструктор шейдеров включает в себя шесть фигур — сферу, куб, цилиндр, конус, чайник и плоскость, которые можно использовать для предварительного просмотра шейдера. В зависимости от конкретного шейдера некоторые фигуры могут лучше других подходить для предварительного просмотра.

###### <a name="to-choose-a-preview-shape"></a>Выбор фигуры для предварительного просмотра

- Выберите нужную фигуру на панели инструментов **Режим конструктора шейдеров**.

#### <a name="WWS_MaterialParameters"></a>Текстуры и параметры материалов
 Многие шейдеры используют текстуры и свойства материалов, чтобы создать уникальный внешний вид для каждого типа объектов в приложении. Чтобы увидеть, как шейдер будет выглядеть в приложении, можно задать те текстуры и свойства материалов, применяемые при отображении предварительного просмотра, которые могут использоваться в вашем приложении.

###### <a name="to-bind-a-different-texture-to-a-texture-register-or-to-modify-other-material-parameters"></a>Привязка другой текстуры к регистру текстуры или изменение других параметров материалов

1. В режиме **Выбрать** выберите пустое пространство в области конструктора. При этом в окне **Свойства** отображаются глобальные свойства шейдера.

2. В окне **Свойства** укажите новые значения для свойств параметров и текстур, которые требуется изменить.

   Ниже приведены параметры шейдера, которые можно изменить:

|Параметр|Свойства|
|---------------|----------------|
|**Текстура 1**–**текстура 8**|**Доступ**:                             значение **Открытый**, чтобы разрешить задание этого свойства в редакторе моделей; в противном случае — значение **Закрытый**.<br /><br /> **Имя файла**: полный путь к файлу текстуры, связанному с этим регистром текстуры.|
|**Материал — окружающий**|**Доступ**:                             значение **Открытый**, чтобы разрешить задание этого свойства в редакторе моделей; в противном случае — значение **Закрытый**.<br /><br /> **Значение**: диффузный цвет текущего пикселя, вызванный непрямым или окружающим освещением.|
|**Материал — диффузный**|**Доступ**: значение **Открытый**, чтобы разрешить задание этого свойства в редакторе моделей; в противном случае — значение **Закрытый**.<br /><br /> **Значение**: цвет, который описывает, как текущий пиксель рассеивает прямое освещение.|
|**Материал — эмиссионный**|**Доступ**:                              значение **Открытый**, чтобы разрешить задание этого свойства в редакторе моделей; в противном случае — значение **Закрытый**.<br /><br /> **Значение**: добавочный цвет текущего пикселя, который образуется вследствие освещения, предоставляемого пользователем.|
|**Материал — отражающий**|**Доступ**:                              значение **Открытый**, чтобы разрешить задание этого свойства в редакторе моделей; в противном случае — значение **Закрытый**.<br /><br /> **Значение**: цвет, который описывает, как текущий пиксель отражает прямое освещение.|
|**Отражающая способность материала**|**Доступ**:                             значение **Открытый**, чтобы разрешить задание этого свойства в редакторе моделей; в противном случае — значение **Закрытый**.<br /><br /> **Значение**: экспонента, которая определяет интенсивность зеркального отражения от текущего пикселя.|

#### <a name="time-based-effects"></a>Эффекты с учетом времени
 В некоторых шейдерах присутствует компонент учета времени, который анимирует эффект. Чтобы показать, как выглядит эффект в действии, предварительный просмотр должен обновляться несколько раз в секунду. По умолчанию предварительный просмотр обновляется только при изменении шейдера. Чтобы изменить такое поведение для просмотра эффектов с учетом времени, нужно включить отрисовку в реальном времени.

###### <a name="to-enable-real-time-rendering"></a>Включение отрисовки в реальном времени

- На панели инструментов "Конструктор шейдеров" выберите **Real time Rendering** (Отрисовка в реальном времени).

#### <a name="examining-the-effect"></a>Изучение эффекта
 Многие шейдеры зависят от переменных, таких как угол просмотра и направленное освещение. Чтобы наблюдать, как эффект реагирует на изменение этих переменных, можно свободно вращать фигуру для предварительного просмотра и отслеживать поведение шейдера.

###### <a name="to-rotate-the-shape"></a>Поворот фигуры

- Нажмите и удерживайте нажатой клавишу ALT, выберите точку в области конструктора и переместите ее.

### <a name="exporting-shaders"></a>Экспорт шейдеров
 Прежде чем использовать шейдер в приложении, нужно экспортировать его в формате, совместимом с DirectX.

 Шейдеры можно экспортировать в виде исходного кода HLSL или скомпилированного байт-кода шейдера. Исходный код HLSL экспортируется в текстовый файл с расширением HLSL. Байт-код шейдера можно экспортировать в необработанный двоичный файл, который имеет расширение CSO, или в файл заголовков C++ (с расширением H), который кодирует байт-код шейдера в массив.

 Дополнительные сведения об экспорте шейдеров см. в разделе [Практическое руководство. Экспорт шейдера](../designers/how-to-export-a-shader.md).

## <a name="keyboard-shortcuts"></a>Сочетания клавиш

|Команда|Сочетания клавиш|
|-------------|------------------------|
|Переход в режим **Выбрать**|CONTROL+G, Gtrl+Q<br /><br /> S|
|Переход в режим **Масштаб**|CONTROL+G, CONTROL+Z<br /><br /> Z|
|Переход в режим **Панорама**|CONTROL+G, CONTROL+P<br /><br /> K|
|Выбрать все|CTRL+A|
|Удалить текущее выделение|Удаление|
|Отменить текущее выделение|ESC|
|Увеличить|CONTROL+ прокручивание колесика мыши вперед<br /><br /> Знак плюса (+)|
|Мельче|CONTROL с прокручиванием колесика мыши назад<br /><br /> Знак минуса (-)|
|Панорамирование области конструктора вверх|Прокручивание колеса мыши назад<br /><br /> PAGE DOWN|
|Панорамирование области конструктора вниз|Прокручивание колеса мыши вперед<br /><br /> PAGE UP|
|Панорамирование области конструктора влево|SHIFT+ прокручивание колеса мыши назад<br /><br /> Прокручивание колеса мыши влево<br /><br /> Shift+PageDown|
|Панорамирование области конструктора вправо|SHIFT+прокручивание колеса мыши вперед<br /><br /> Прокручивание колеса мыши вправо<br /><br /> Shift+PageUp|
|Перемещение фокуса клавиатуры на другой узел|Клавиши со стрелками|
|Выбор узла, на который установлен фокус клавиатуры (узел добавляется к группе выбора)|SHIFT+ПРОБЕЛ|
|Переключение выделения узла, на который установлен фокус клавиатуры|Ctrl+ПРОБЕЛ|
|Переключение текущего выделения (если узлы не выбраны, выбирается узел, на который установлен фокус клавиатуры)|Пробел|
|Перемещение текущего выделения вверх|Shift+СТРЕЛКА ВВЕРХ|
|Перемещение текущего выделения вниз|Shift+СТРЕЛКА ВНИЗ|
|Перемещение текущего выделения влево|Shift+СТРЕЛКА ВЛЕВО|
|Перемещение текущего выделения вправо|SHIFT+СТРЕЛКА ВПРАВО|

## <a name="related-topics"></a>См. также

|Заголовок|Описание|
|-----------|-----------------|
|[Работа с трехмерными ресурсами для игр и приложений](../designers/working-with-3-d-assets-for-games-and-apps.md)|Обзор средств в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)], которые можно использовать для работы с текстурами и изображениями, трехмерными моделями и эффектами шейдеров.|
|[Image Editor](../designers/image-editor.md)|Описывает способ использования редактора изображений [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] для работы с текстурами и изображениями.|
|[Редактор моделей](../designers/model-editor.md)|Рассматривается порядок использования редактора моделей [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] для работы с трехмерными моделями.|
