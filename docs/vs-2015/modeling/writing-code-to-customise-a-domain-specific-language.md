---
title: Написание кода для конкретного доменного языка | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
helpviewer_keywords:
- Domain-Specific Language, programming
ms.assetid: a4a17f5b-9c97-4575-b2d1-3182c1896b72
caps.latest.revision: 31
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 4448e9a1c65ccba4a9ae48d0271f9fd91fc011b6
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2019
ms.locfileid: "72662977"
---
# <a name="writing-code-to-customise-a-domain-specific-language"></a>Написание кода для настройки доменного языка
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

В этом разделе показано, как использовать пользовательский код для доступа к модели, ее изменения или создания в предметно-ориентированном языке.

 Существует несколько контекстов, в которых можно написать код, работающий с DSL:

- **Пользовательские команды.** Можно создать команду, которую пользователи могут вызвать, щелкнув диаграмму правой кнопкой мыши и выбрав ее, чтобы изменить модель. Дополнительные сведения см. в разделе [инструкции. Добавление команды в контекстное меню](../modeling/how-to-add-a-command-to-the-shortcut-menu.md).

- **Проверка.** Можно написать код, проверяющий, что модель находится в правильном состоянии. Дополнительные сведения см. [в разделе Проверка на предметно-](../modeling/validation-in-a-domain-specific-language.md)ориентированном языке.

- **Переопределение поведения по умолчанию.** Вы можете изменить множество аспектов кода, созданного из DslDefinition. DSL. Дополнительные сведения см. [в разделе Переопределение и расширение созданных классов](../modeling/overriding-and-extending-the-generated-classes.md).

- **Преобразование текста.** Можно создавать текстовые шаблоны, содержащие код, обращающийся к модели и создающий текстовый файл, например для создания программного кода. Дополнительные сведения см. в разделе [Создание кода на основе предметно-](../modeling/generating-code-from-a-domain-specific-language.md)ориентированного языка.

- **Другие расширения Visual Studio.** Можно написать отдельные расширения VSIX, которые считывают и изменяют модели. Дополнительные сведения см. в разделе [как открыть модель из файла в программном коде.](../modeling/how-to-open-a-model-from-file-in-program-code.md)

  Экземпляры классов, определяемые в DslDefinition. DSL, хранятся в структуре данных, которая называется *хранилищем в памяти* (мгновенными сообщениями) или *хранилищем*. Классы, определяемые в DSL, всегда принимают хранилище в качестве аргумента конструктора. Например, если DSL определяет класс с именем example:

  `Example element = new Example (theStore);`

  хранение объектов в хранилище (вместо обычных объектов) предоставляет несколько преимуществ.

- **Транзакции**. В транзакцию можно сгруппировать ряд связанных изменений:

   `using (Transaction t = store.TransactionManager.BeginTransaction("updates"))`

   `{`

   `// make several changes to Store elements here`

   `t.Commit();`

   `}`

   Если во время изменений возникает исключение, чтобы окончательная фиксация () не была выполнена, хранилище будет сброшено до предыдущего состояния. Это позволяет убедиться, что ошибки не оставляют модель в нестабильном состоянии. Дополнительные сведения см. [в разделе Навигация и обновление модели в программном коде](../modeling/navigating-and-updating-a-model-in-program-code.md).

- **Двоичные связи**. Если определить связь между двумя классами, то экземпляры на обоих концах имеют свойство, которое осуществляет переход к другому элементу End. Эти две конечные точки всегда синхронизируются. Например, если определить связь паренсуд с ролями с именами родителей и дочерними элементами, можно написать:

   `John.Children.Add(Mary)`

   Оба следующих выражения теперь имеют значение true:

   `John.Children.Contains(Mary)`

   `Mary.Parents.Contains(John)`

   Вы также можете добиться того же результата, написав:

   `Mary.Parents.Add(John)`

   Дополнительные сведения см. [в разделе Навигация и обновление модели в программном коде](../modeling/navigating-and-updating-a-model-in-program-code.md).

- **Правила и события**. Можно определить правила, которые срабатывают при каждом внесении определенных изменений. Правила используются, например, для сохранения фигур на диаграмме в актуальном состоянии с элементами модели, которые они представляют. Дополнительные сведения см. [в разделе реагирование на изменения и их распространение](../modeling/responding-to-and-propagating-changes.md).

- **Сериализация**. Хранилище предоставляет стандартный способ сериализации объектов, содержащихся в нем, в файл. Можно настроить правила сериализации и десериализации. Дополнительные сведения см. в разделе [Настройка хранилища файлов и XML-сериализации](../modeling/customizing-file-storage-and-xml-serialization.md).

## <a name="see-also"></a>См. также раздел
 [Настройка и расширение доменного языка](../modeling/customizing-and-extending-a-domain-specific-language.md)
