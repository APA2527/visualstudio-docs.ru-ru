---
title: Моделирование архитектуры приложения&#39;s | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
helpviewer_keywords:
- UML, modeling architecture
ms.assetid: aedce746-9df5-49e1-9662-67eb1b83d313
caps.latest.revision: 21
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 41dbb7b996c32af10010694935cbd3660b462f73
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "72609639"
---
# <a name="model-your-app39s-architecture"></a>Моделирование архитектуры приложения&#39;s
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Чтобы обеспечить соответствие программной системы или приложения потребностям пользователей, в Visual Studio можно создавать модели в рамках описания общей структуры и поведения программной системы или приложения. С помощью моделей также можно описывать шаблоны, используемые при разработке. Такие модели помогают понять существующую архитектуру, обсуждать изменения и четко формулировать свои намерения.

 Чтобы узнать, какие версии Visual Studio поддерживают эту функцию, см. раздел [Version support for architecture and modeling tools](../modeling/what-s-new-for-design-in-visual-studio.md#VersionSupport).

 Модель предназначена для уменьшения числа неоднозначностей, возникающих в описаниях на естественном языке, а также для того, чтобы помочь вам и вашим коллегам визуализировать проект и обсудить другие возможные варианты. Модель следует использовать совместно с другими документами или обсуждениями. Сама по себе модель не представляет полную спецификацию архитектуры.

> [!NOTE]
> В этом разделе понятие "система" означает разрабатываемое вами программное обеспечение. Это может быть крупная коллекция компонентов программного и аппаратного обеспечения, одно приложение или часть приложения.

 Архитектуру системы можно разделить на две области:

- [Высокоуровневый проект](#Structure). Описывает основные компоненты и их взаимодействие друг с другом для выполнения каждого требования. Если система имеет большой размер, каждый компонент может иметь собственную высокоуровневую структуру, показывающую, что он состоит из более мелких компонентов.

- [Шаблоны разработки](#Patterns) и соглашения, используемые во всех структурах компонентов. Шаблон описывает конкретный подход к решению задачи при программировании. Используя одинаковые шаблоны в рамках всего процесса проектирования, команда может сократить затраты на внесение изменений и разработку нового программного обеспечения.

## <a name="high-level-design"></a><a name="Structure"></a> Высокоуровневая структура
 Высокоуровневая структура описывает основные компоненты системы и их взаимодействие друг с другом, направленное на достижение целей разработки. Действия в следующем списке связаны с разработкой высокоуровневой структуры, однако их последовательность может быть иной.

 При обновлении существующего кода можно начать с описания основных компонентов. Убедитесь, что понимаете все изменения требований пользователей, а затем добавьте или измените взаимодействия между компонентами. При разработке новой системы сначала разберитесь с основными функциями в потребностях пользователей. После этого можно изучить последовательности взаимодействий для основных вариантов использования и объединить эти последовательности в структуру компонентов.

 В любом случае полезно разрабатывать различные действия параллельно. а также разрабатывать код и тесты на раннем этапе. Не старайтесь закончить одну из этих задач, прежде чем приступить к другой. Как правило, требования и представление о наилучшем способе разработки системы изменяются по мере написания и тестирования кода. Таким образом, следует начать с понимания основных возможностей структуры и особенностей требований и написания кода под них. Заполните подробности в последующих итерациях проекта.

- [Основные сведения о требованиях](#Requirements). Начальной точкой любой разработки является четкое понимание потребностей пользователей.

- [Архитектурные шаблоны](#BigDecisions). Выбранные базовые технологии и архитектурные элементы системы.

- [Компоненты и их интерфейсы](#Components). Можно нарисовать схемы компонентов, чтобы показать основные части системы и интерфейсы, с помощью которых они взаимодействуют друг с другом. Интерфейсы каждого компонента включают в себя все сообщения, определенные в схемах последовательностей.

- [Взаимодействие между компонентами](#Interactions). Для каждого варианта использования, события или входящего сообщения можно нарисовать схему последовательностей, которая показывает, как основные компоненты системы взаимодействуют для достижения нужного результата.

- [Модель данных компонентов и интерфейсов](#Data). Можно рисовать схемы классов для описания сведений, передаваемых между компонентами и хранящихся внутри компонентов.

## <a name="understanding-the-requirements"></a><a name="Requirements"></a> Основные сведения о требованиях
 Высокоуровневую структуру всего приложения наиболее эффективно  разрабатывать вместе с моделью требований или другим описанием потребностей пользователей. Дополнительные сведения о моделях требований см. в разделе [Моделирование требований пользователей](../modeling/model-user-requirements.md).

 Если разрабатываемая система является компонентом более крупной системы, часть требований или все они могут быть заключены в программные интерфейсы.

 Модель требований предоставляет следующие важные сведения:

- Предоставленные интерфейсы. Предоставленный интерфейс перечисляет службы или операции, которые система или компонент должны предоставить своим пользователям, являются ли они людьми или другими программными компонентами.

- Необходимые интерфейсы. Необходимый интерфейс перечисляет службы или операции, которые может использовать система или компонент. В некоторых случаях можно разработать все эти службы в рамках собственной системы. В других случаях, особенно при разработке компонента, который можно объединить с другими компонентами в различных конфигурациях, требуемый интерфейс будет задан внешними ограничениями.

- Требование к качеству обслуживания. Производительность, безопасность, надежность и другие цели и ограничения, которым система должна соответствовать.

  Требования к модели записываются с точки зрения пользователей системы, являются ли они людьми или другими программными компонентами. Они ничего не знают о внутренних механизмах работы системы. Напротив, в модели архитектуры задача заключается в том, чтобы описать внутренние механизмы работы и показать, как они согласуются с требованиями пользователей.

  Сохранение требований и моделей архитектуры полезно, поскольку это упрощает обсуждение требований с пользователями. Это также помогает выполнить рефакторинг модели и учитывать альтернативные варианты архитектуры без изменения требований.

  Требования и модели архитектуры можно разделить двумя следующими способами:

- Храните их в одном решении, но в разных проектах. Они будут отображаются в обозревателе моделей UML как отдельные модели. Разные члены команды могут параллельно работать над моделями. Между моделями можно создавать ограниченные виды трассировки.

- Поместите их в одну модель UML, но в разных пакетах. Это упрощает отслеживание зависимостей между моделями, но не позволяет одновременно работать с моделью нескольким людям. Кроме того, очень большая модель будет дольше загружаться в Visual Studio. Поэтому такой подход хуже подходит для больших проектов.

  Объем сведений, которые следует помещать в требования или модель архитектуры, зависит от масштаба проекта, а также от размера и распределения команды. Небольшая группа с коротким проектом может ограничиться набросками схемы классов для бизнес-концепций и несколькими конструктивными шаблонами; крупный проект, распределенный по нескольким регионам, потребует значительно большего числа подробностей.

## <a name="architectural-patterns"></a><a name="BigDecisions"></a> Архитектурные шаблоны
 В начале разработки необходимо выбрать базовые технологии и элементы, от которых зависит структура. Ниже перечислены области, в которых необходимо сделать выбор:

- Выбор базовых технологий, например выбор между базой данных и файловой системой и выбор между сетевым приложением и веб-клиентом и т. д.

- Выбор платформы, например выбор между Windows Workflow Foundation и ADO.NET Entity Framework.

- Выбор метода интеграции, например выбор между служебной шиной предприятия или каналом "точка-точка".

  Эти варианты часто определяются требованиями к качеству обслуживания, такими как масштаб и гибкость, и соответствующий выбор может быть сделан до определения подробных требований. В большой системе конфигурации оборудования и программного обеспечения жестко взаимосвязаны.

  Сделанный выбор влияет на использование и интерпретацию модели архитектуры. Например, в системе, которая использует базу данных, ассоциации на схеме классов могут представлять отношения или внешние ключи в базе данных, тогда как в системе, основанный на XML-файлах, ассоциации могут означать перекрестные ссылки, использующие XPath. В распределенной системе сообщения на схеме последовательностей могут представлять передаваемые сообщения; в автономном приложении они могут представлять вызовы функций.

## <a name="components-and-their-interfaces"></a><a name="Components"></a> Компоненты и их интерфейсы
 Ниже приведены основные рекомендации по этому разделу.

- Создайте схемы компонентов, чтобы показать основные части системы.

- Нарисуйте зависимости между компонентами или их интерфейсами, чтобы показать структуру системы.

- Используйте интерфейсы для компонентов, чтобы показать те службы, которые предоставляет или требует каждый компонент.

- Для больших систем можно создавать отдельные схемы, разбивающие каждый компонент на более мелкие части.

  Эти моменты рассматриваются в оставшейся части раздела.

### <a name="components"></a>Компоненты
 Центральными представлениями модели архитектуры являются схемы компонентов, которые показывают основные части системы и их зависимости друг от друга. Дополнительные сведения о схемах компонентов см. в разделе [UML-схемы компонентов: Справочник](../modeling/uml-component-diagrams-reference.md).

 ![Схема компонентов UML с частями](../modeling/media/uml-barecomponent.png "UML_BareComponent")

 Обычная схема компонентов для большой системы может включать в себя следующие компоненты:

- Презентация. Компонент, который предоставляет доступ для пользователя, обычно работающего в веб-браузере.

- Компоненты веб-службы. Обеспечивает связь между клиентами и серверами.

- Контроллеры вариантов использования. Проводят пользователя через последовательность шагов для каждого из сценариев.

- Базовая часть бизнеса. Содержит классы, которые основаны на классах в модели требований, реализует ключевые операции и налагает бизнес-ограничения.

- база данных; Хранит бизнес-объекты.

- Компоненты ведения журнала и обработки ошибок.

### <a name="dependencies-between-components"></a>Зависимости между компонентами
 Помимо самих компонентов, можно показывать зависимости между ними. Стрелка зависимости между двумя компонентами показывает, что изменения одного компонента могут повлиять на другой. Обычно это происходит потому, что один компонент использует службы или функции, прямо или косвенно предоставляемые другим компонентом.

 Хорошо продуманная архитектура содержит четко упорядоченные зависимости, в которых выполняются следующие условия:

- Циклы на карте кода отсутствуют.

- Компоненты могут быть организованы в слои, где любая зависимость идет от компонента в одном слое к компоненту в следующем. Все зависимости между двумя любыми слоями идут в одном направлении.

  Можно показать непосредственно зависимости между компонентами или зависимости между необходимыми и предоставленными интерфейсами, присоединенными к компонентам. С помощью интерфейсов можно определить операции, которые используются в каждой зависимости. Как правило, зависимости между компонентами отображаются при первом рисовании схем, а затем — по мере добавления сведений — заменяются на зависимости между интерфейсами. Обе версии являются правильным описанием программного обеспечения, однако версия с интерфейсами предоставляет больше информации, чем предыдущая версия.

  Управление зависимостями является наиболее важным для создания  поддерживаемого программного обеспечения. Схемы компонентов должны отражать все зависимости в коде. Если код уже существует, убедитесь, что на схемах показаны все зависимости. Если код находится в стадии разработки, убедитесь, что он не включает в себя зависимости, не запланированные в схеме компонентов. Чтобы упростить выявление зависимостей в коде, можно создать схемы слоев. Чтобы убедиться, что выполнены ваши запланированные ограничения на зависимости, можно проверить код по схемам слоев. Дополнительные сведения см. в разделе [схемы слоев. Справочник](../modeling/layer-diagrams-reference.md).

### <a name="interfaces"></a>Интерфейсы
 Помещая интерфейсы на компоненты, можно разделить и назвать основные группы операций, предоставляемые каждым компонентом. Например, компоненты интернет-системы продаж могут иметь интерфейс, через который клиенты покупают товары, интерфейс, через который поставщики обновляют свои каталоги, и третий интерфейс, с помощью которого осуществляется управление системой.

 Компонент может иметь любое количество предоставленных и требуемых интерфейсов. Предоставленные интерфейсы показывают службы, предоставляемые данным компонентом для других компонентов. Требуемые интерфейсы показывают службы, которые данный компонент использует в других компонентах.

 Определение как предоставленных, так и требуемых интерфейсов помогает четко отделить компонент от остальной части структуры, чтобы можно было использовать эти методики.

- Поместите компонент в окружение теста, в котором окружающие компоненты моделируются этим окружением теста.

- Разработайте компонент независимо от других компонентов.

- Повторно используйте компонент в других контекстах, связывая его интерфейсы с другими компонентами.

  Если вы хотите определить список операций в интерфейсе, можно создать другое представление интерфейса на схеме классов UML. Для этого найдите интерфейс в обозревателе моделей UML и перетащите его на схему классов. Затем можно добавить операции в интерфейс.

  Операция в интерфейсе UML может представлять любой способ, с помощью которого можно вызывать поведение компонента. Она может представлять запрос веб-службы, сигнал или взаимодействие другого типа или обычный вызов функции в программе.

  Чтобы определить, какие операции следует добавить, создайте схемы последовательностей, показывающие, как компоненты взаимодействуют друг с другом. См. раздел [взаимодействие между компонентами](#Interactions). Каждая из этих схем последовательностей показывает взаимодействие, имеющее место в различных вариантах использования. Таким образом, вы можете постепенно добавлять операции в интерфейс каждого компонента по мере изучения вариантов использования.

### <a name="decomposing-a-component-into-parts"></a>Разделение компонента на части
 Процедуру, описанную в предыдущих разделах, можно применить к каждому компоненту.

 Внутри каждого компонента можно показать его вложенные компоненты как части. Часть представляет собой атрибут своего родительского компонента, являющегося разновидностью класса. Каждая часть имеет собственный тип, который может быть компонентом. Можно поместить этот компонент на схему и показать его части. Дополнительные сведения см. в разделе [UML-схемы компонентов: рекомендации](../modeling/uml-component-diagrams-guidelines.md).

 Полезно применять эту методику для всей системы. Нарисуйте систему как один компонент и покажите ее основные компоненты как части. Это помогает четко определить интерфейсы, связывающие систему с внешним миром.

 Если структура для компонента использует другой компонент, часто существует выбор, представить его как часть или как отдельный компонент, доступный через требуемый интерфейс.

 Используйте части в следующих ситуациях:

- Структура родительского компонента всегда должна использовать тип компонента части. Таким образом, структура части является неотъемлемой частью структуры родительского компонента.

- Родительский компонент не имеет конкретного существования. Например, можно иметь концептуальный компонент, называемый слоем представления данных, представляющий коллекцию реальных компонентов, которые обрабатывают представления и взаимодействия с пользователем.

  Используйте отдельные компоненты, доступ к которым осуществляется через требуемые интерфейсы, в следующих ситуациях.

- С помощью интерфейсов требуемый компонент можно связать с различными предоставляющими компонентами во время выполнения.

- Структура такова, чтобы одного поставщика можно было легко заменить другим.

  Использовать требуемые интерфейсы обычно предпочтительнее, чем части. Хотя разработка может занять больше времени, итоговая система будет более гибкой. Кроме того, в ней проще тестировать компоненты по отдельности. Это позволяет уменьшить число взаимозависимостей в планах разработки.

## <a name="interactions-between-components"></a><a name="Interactions"></a> Взаимодействие между компонентами
 Ниже приведены основные рекомендации по этому разделу.

- Определите варианты использования своей системы.

- Для каждого варианта использования нарисуйте одну или несколько схем, чтобы показать, как компоненты системы достигают нужного результата, работая друг с другом и с пользователями. Обычно используются схемы последовательностей или схемы деятельности.

- Используйте интерфейсы, чтобы указать сообщения, получаемые каждым компонентом.

- Опишите результаты операций в интерфейсах.

- Повторите эту процедуру для каждого компонента, показывая взаимодействие его частей.

  Например, в интернет-системе продаж модель требований может определить покупку клиента как вариант использования. Можно создать схему последовательностей, чтобы показать взаимодействия клиента с компонентами в слое представления данных, а также взаимодействия клиента с компонентами склада и учета.

### <a name="identifying-the-initiating-events"></a>Определение инициирующих событий
 Работу большинства программных систем можно разделить по ее реакции на различные варианты входных данных или событий. Инициирующим может быть одно из следующих событий:

- Первое действие в варианте использования. В модели требований оно может выглядеть как шаг в варианте использования или как действие на схеме деятельности. Дополнительные сведения см. в [UML-схемах вариантов использования: рекомендации](../modeling/uml-use-case-diagrams-guidelines.md) и [UML-схемы деятельности: рекомендации](../modeling/uml-activity-diagrams-guidelines.md).

- Сообщение в программном интерфейсе. Если разрабатываемая система является компонентом более крупной системы, ее следует описывать как операцию в одном из интерфейсов компонента. См. раздел [компоненты и их интерфейсы](#Components).

- Определенное условие, отслеживаемое системой, или обычное событие, например время дня.

### <a name="describe-the-computations"></a>Описание вычислений
 Нарисуйте схемы последовательностей, чтобы показать, как компоненты реагируют на исходное событие.

 Нарисуйте жизненный цикл для каждого экземпляра компонента, который присутствует в типичной последовательности. В некоторых случаях может присутствовать более одного экземпляра каждого типа. Если вы описали всю систему как один компонент, должен присутствовать один жизненный цикл для каждой части, которую он содержит.

 Дополнительные сведения см. в разделе [UML-схемы последовательностей: рекомендации](../modeling/uml-sequence-diagrams-guidelines.md).

 В некоторых случаях также полезны схемы деятельности. Например, если компоненты имеют непрерывный поток данных, это можно описать как поток объектов. Если компонент содержит сложный алгоритм, это можно описать как поток управления. Убедитесь, что вы четко указали, какой именно компонент выполняет каждое из действий, например с помощью комментариев. Дополнительные сведения см. в разделе [UML-схемы деятельности: рекомендации](../modeling/uml-activity-diagrams-guidelines.md).

### <a name="specify-the-operations"></a>Задание операций
 Схемы показывают операции, выполняемые каждым компонентом и представленные в виде сообщений на схеме последовательностей или действий на схеме деятельности.

 Объедините эти операции для каждого компонента. Создайте для компонента предоставленные интерфейсы и добавьте в них операции. Как правило, для каждого типа клиента используется отдельный интерфейс. Операции проще всего добавлять в интерфейсы в **обозревателе моделей UML**. Аналогичным образом соберите операции, используемые каждым компонентом из других компонентов, и поместите их в требуемые интерфейсы, присоединенные к компоненту.

 Полезно добавлять комментарии к схемам деятельности или последовательностей, чтобы отметить результаты выполнения каждой операции. Кроме того, можно записать результат каждой операции в своем локальном свойстве " **постусловие** ".

### <a name="data-model-of-the-components-and-interfaces"></a><a name="Data"></a> Модель данных компонентов и интерфейсов
 Определите параметры и возвращаемые значения каждой операции в интерфейсах компонентов. Если операции представляют собой вызовы, например запросы веб-службы, то параметры являются теми элементами информации, которые отправляются в составе такого запроса. Если операция возвращает несколько значений, можно использовать параметры со свойством **Direction** , имеющим значение **out**.

 Каждый параметр и возвращаемое значение имеют тип. Эти типы можно определить с помощью схемы классов UML. Вам не нужно представлять подробности реализации на этих схемах. Например, если вы описываете данные, передаваемые в виде XML-кода, можно использовать ассоциацию для представления любого типа перекрестных ссылок между узлами XML и использовать классы для представления узлов.

 Используйте комментарии для описания бизнес-ограничений для ассоциаций и атрибутов. Например, если все элементы в заказе клиента должны поступать от одного поставщика, можно описать это с помощью ссылки на ассоциации между элементами заказа и элементами в каталоге товаров и между элементом в каталоге и его поставщиком.

## <a name="design-patterns"></a><a name="Patterns"></a> Шаблоны разработки
 Конструктивный шаблон представляет собой структуру, описывающую проектирование определенных аспектов программного обеспечения, особенно такого, которое повторяется в различных частях системы. Придерживаясь единого подхода в рамках всего проекта, можно снизить стоимость разработки, обеспечить согласованность в пользовательском интерфейсе и сократить затраты на изучение и изменение кода.

 Некоторые общие конструктивные шаблоны, например Observer, хорошо известны и широко применяются. Кроме того, существуют шаблоны, которые применимы только к вашему проекту. Например, для интернет-системы продаж в коде будет несколько операций, где в заказ клиента вносятся изменения. Чтобы обеспечить точность отображения состояния заказа на каждом этапе, все эти операции должны следовать определенному протоколу по обновлению базы данных.

 Часть задач архитектуры программного обеспечения заключается в том, чтобы определить, какие именно шаблоны следует внедрить в рамках всей структуры. Обычно это задача выполняется постоянно, в ходе выполнения проекта будут предложены новые шаблоны и улучшения для существующих шаблонов. Полезно упорядочить план разработки таким образом, чтобы использовать каждый из основных конструктивных шаблонов на раннем этапе.

 Большинство конструктивных шаблонов может быть частично встроено в код платформы. Часть шаблона можно свести к тому, чтобы вынудить разработчика использовать определенные классы или компоненты, такие как слой доступа к базе данных, который гарантирует правильную обработку базы данных.

 Конструктивный шаблон описывается в документе и обычно состоит из следующих частей:

- Название

- Описание контекста, в котором он применяется. В каких условиях разработчику рассмотреть возможность применения этого шаблона?

- Краткое описание решаемой им проблемы.

- Модель основных частей и их отношений. Это могут быть классы или компоненты и интерфейсы, имеющие ассоциации и зависимости между ними. Элементы обычно делятся на две категории.

  - Элементы, которые разработчик должен реплицировать в каждой части кода, где используется шаблон. Для их описания можно использовать типы шаблонов. Дополнительные сведения см. в разделе [UML-схемы вариантов использования: Справочник](../modeling/uml-use-case-diagrams-reference.md).

  - Элементы, описывающие классы платформы, которые должен использовать разработчик.

- Модель взаимодействий между частями с использованием схем последовательностей или деятельности.

- Соглашения об именовании.

- Описание того, как шаблон решает проблему.

- Описание вариантов, которые разработчики могут быть в состоянии внедрить.

## <a name="see-also"></a>См. также:
 [Изменение моделей и схем UML](../modeling/edit-uml-models-and-diagrams.md) [визуализация](../modeling/visualize-code.md) [модели кода требования пользователей](../modeling/model-user-requirements.md) [Разработка тестов из модели](../modeling/develop-tests-from-a-model.md) [Использование моделей в процессе разработки](../modeling/use-models-in-your-development-process.md)
