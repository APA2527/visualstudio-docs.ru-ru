---
title: Управление моделями и схемами в системе управления версиями | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
helpviewer_keywords:
- models, version control
ms.assetid: ca6443e3-6d11-4da8-aae7-ca7dcc410076
caps.latest.revision: 32
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: 55142e000a22b6e45543c6fc14594a12c93f4f92
ms.sourcegitcommit: 08fc78516f1107b83f46e2401888df4868bb1e40
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2019
ms.locfileid: "65680293"
---
# <a name="manage-models-and-diagrams-under-version-control"></a>Работа с моделями и схемами в системе управления версиями
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Для управления различными версиями проектов моделирования и схем, включая карты кода (файлы DGML), используйте [систему управления версиями Team Foundation или Git](https://msdn.microsoft.com/library/33267cee-fe5f-4aa3-b2cd-6d22ceace314)на локальном сервере Team Foundation или в облаке через Visual Studio Team Services.  
  
 Чтобы узнать, какие версии Visual Studio поддерживают эту функцию, см. раздел [Поддержка версий для инструментов моделирования и архитектуры](../modeling/what-s-new-for-design-in-visual-studio.md#VersionSupport).  
  
> [!IMPORTANT]
> Будьте внимательны, если над одним и тем же проектом моделирования работают несколько пользователей. Узнайте, как [упорядочивать модели в средних или крупных проектах](../modeling/structure-your-modeling-solution.md).  
  
## <a name="ModelingProjects"></a> Файлы в проекте моделирования  
 С одним и тем же проектом моделирования могут работать сразу несколько пользователей при условии, что они работают с разными файлами.  
  
 Для предотвращения или устранения конфликтов между изменениями, внесенными разными пользователями, необходимо понимать, как модель сохраняется в файлах.  
  
- Каждый пакет хранится в отдельном файле **.uml** , который находится в папке проекта **ModelDefinition** . Для модели создается файл **.uml** . Удаление или повреждение одного из этих файлов приведет к потере соответствующего пакета или модели.  
  
- Каждая схема хранится в двух файлах. Например, для шаблона класса используются следующие файлы:  
  
    - **DiagramName.classdiagram** . В случае удаления или повреждения этого файла схема будет потеряна, однако классы и ассоциации, которые в ней отображались, сохранятся в модели и останутся видны в обозревателе моделей UML.  
  
    - **DiagramName.classdiagram.layout** . В случае удаления этого файла формы в схеме сохранятся, а данные об их размерах и положении исчезнут. Каждый файл макета является дочерним для файла схемы. Чтобы отобразить этот файл, щелкните [+] рядом с файлом схемы в обозревателе решений.  
  
> [!NOTE]
> Важно поддерживать согласованность между файлами. Например, если для отката изменений в UML-файле используется система управления версиями, необходимо одновременно откатить соответствующие изменения в файлах .*diagram и .layout. Элементы, представленные в. \*файл схемы будут потеряны, если они также не представлены в UML-файл.  
  
## <a name="Shared"></a> Работа над совместными проектами моделирования  
 Чтобы свести к минимуму конфликты при одновременной работе с разными частями проекта, необходимо соблюдать следующие правила.  
  
- Разделите проект моделирования на пакеты, представляющие разные области работы. Не оставляйте модель в корневой модели — переместите ее в пакеты. Дополнительные сведения см. в разделе [определение пакетов и пространств имен](../modeling/define-packages-and-namespaces.md).  
  
- Не допускайте одновременной работы разных пользователей с одним и тем же пакетом или схемой.  
  
- Если используются профили, следите за тем, чтобы все участники проекта установили одни и те же профили. См. в разделе [Настройка модели с помощью профилей и стереотипов](../modeling/customize-your-model-with-profiles-and-stereotypes.md).  
  
- Чтобы изменения вносились только в тот пакет, с которым ведется работа, выполните следующие действия:  
  
    - Задайте свойство **LinkedPackage** компонента, схемы вариантов использования или класса UML.  
  
    - В обозревателе моделей UML сразу же перетащите созданное действие или взаимодействие в свой пакет. Этот элемент появится в обозревателе моделей UML, как только вы создадите первый узел в схеме действий или схеме последовательностей.  
  
- Чтобы было удобнее следить за пакетами, переименуйте файлы пакетов в соответствии с фактическими именами этих пакетов.  
  
- В [!INCLUDE[esprscc](../includes/esprscc-md.md)]всегда выполняйте операции **Вернуть** и **Получить последнюю версию** сразу для всего проекта моделирования, а не для отдельных файлов.  
  
- Перед возвратом проекта моделирования обязательно выполните операцию **Получить** .  
  
- Перед выполнением операции **Получить** обязательно закройте все схемы.  
  
    > [!NOTE]
    > Если при выполнении операции **Получить**, в результате которой вносятся локальные изменения, был открыт какой-либо файл, система предложит перезагрузить этот файл. В этом случае выберите **Нет**и перезагрузите весь проект полностью. В **обозревателе решений**щелкните проект моделирования правой кнопкой мыши и выберите команду **Выгрузить проект**, а затем **Перезагрузить проект**.  
  
### <a name="Exclusive"></a> Изменения, требующие монопольного доступа к модели  
 Прежде чем вносить перечисленные ниже изменения, установите блокировку извлечения на весь проект.  
  
- Переименование или удаление элементов, на которые ссылаются другие пакеты.  
  
- Изменение свойств отношений, пересекающих границы пакета.  
  
- Дополнительные сведения о блокировках извлечения см. в разделе [Извлечение и изменение файлов](https://msdn.microsoft.com/library/eb404d63-c448-4994-9416-3e6d50ec554a).  
  
##### <a name="to-move-a-diagram-file-in-or-out-of-a-project-folder"></a>Перемещение файла схемы в папку проекта или из нее  
  
1. Запустите **командную строку разработчика Visual Studio**.  
  
2. Используйте **tf rename** , чтобы переместить файл схемы и соответствующий файл **.layout** :  
  
     `tf rename sourcePath targetPath`  
  
3. В обозревателе решений щелкните файл правой кнопкой мыши и выберите команду **Исключить из проекта**.  
  
4. Добавьте файл в папку назначения.  
  
     В обозревателе решений щелкните папку назначения правой кнопкой мыши, наведите указатель мыши на пункт **Добавить**и выберите **Существующий элемент**. В диалоговом окне выберите файл схемы и нажмите кнопку **Добавить**. Файл макета будет добавлен автоматически.  
  
    > [!NOTE]
    > Перемещать файлы в другие проекты невозможно.  
  
## <a name="Merging"></a> Слияние изменений в файлах и схемах моделей  
 После сеанса совместной работы с моделью нескольких пользователей [!INCLUDE[esprscc](../includes/esprscc-md.md)] выводит запрос о слиянии изменений в файлах модели. Организуя работу над отдельными проектами в соответствии с рекомендациями предыдущих разделов, можно избежать большинства слияний. Как правило, остальные конфликты без проблем объединяются автоматически. Не должно возникнуть проблем при работе со следующими видами изменений:  
  
- Типы линий жизни. При добавлении линии жизни во взаимодействие (схему последовательностей) ее тип хранится в корневой модели. Исключение составляют случаи, когда линия жизни создается из существующего типа.  
  
- Изначально новые действия и взаимодействия хранятся в корневой модели.  
  
- Добавление элементов и отношений.  
  
- Переименование или удаление элементов, ссылки на которые существуют только внутри их собственных пакетов.  
  
## <a name="see-also"></a>См. также  
 [Анализ и моделирование архитектуры](../modeling/analyze-and-model-your-architecture.md)   
 [Общий доступ к моделям и экспорт схем](../modeling/share-models-and-exporting-diagrams.md)
