---
title: 'UML-схемы компонентов: рекомендации | Документация Майкрософт'
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
helpviewer_keywords:
- UML diagrams, component
- diagrams - modeling, component
- diagrams - modeling, UML component
- UML, component diagrams
- component diagrams
ms.assetid: 6c1bdd60-369e-477e-83ed-7f6fe75c9f0b
caps.latest.revision: 37
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 7abc869ebebf4ca2ae8aa1776eaae75f1543176b
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2019
ms.locfileid: "72652261"
---
# <a name="uml-component-diagrams-guidelines"></a>UML-схемы компонентов: правила работы
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

В Visual Studio можно нарисовать *схему компонентов* , чтобы отобразить структуру программной системы. Демонстрационные видеоролики см. в разделе [проектирование физической структуры с помощью схем компонентов](http://channel9.msdn.com/posts/clinted/UML-with-VS-2010-Part-6-Designing-a-Projects-Physical-Structure/).

 Чтобы узнать, какие версии Visual Studio поддерживают эту функцию, см. раздел [Version support for architecture and modeling tools](../modeling/what-s-new-for-design-in-visual-studio.md#VersionSupport).

 Чтобы создать схему компонентов UML, в меню **архитектура** выберите пункт **создать UML или схему слоев**.

 Компонент — это модульная единица, заменяемая в пределах среды. Его внутренние функции скрыты, но имеют один или несколько четко определенных *интерфейсов* , с помощью которых можно получить доступ к своим функциям. Компонент может также иметь *необходимые интерфейсы*. Требуемый интерфейс определяет, какие функции и службы он требует от других компонентов. Объединив предоставленные и требуемые интерфейсы нескольких компонентов, можно создать более крупный компонент. Можно сказать, что вся программная система, по сути, представляет собой компонент.

 Создание схем компонентов имеет несколько преимуществ.

- Анализ основных элементов системы позволяет команде разработчиков понять принципы существующей системы и создать новую.

- Представление системы в качестве коллекции компонентов с четко определенными предоставленными и требуемыми интерфейсами позволяет более эффективно разделить компоненты. В свою очередь, это облегчает понимание конструкции системы и ее корректирование при изменении требований.

  Можно использовать схему компонентов, чтобы представить конструкцию системы независимо от того, какой язык или платформа используется сейчас или будет использоваться в будущем.

## <a name="OtherDiagrams"></a>Связь с другими схемами
 Можно использовать схему компонентов совместно с другими схемами.

|Другая схема|Помогает обсуждать следующие аспекты конструкции и передавать сведения о них|
|-------------------|--------------------------------------------------------------------|
|Схема последовательностей UML|— Взаимодействия между компонентами системы;<br />— Взаимодействия и между частями внутри компонента.<br /><br /> Дополнительные сведения см. в разделе [UML-схемы последовательностей: рекомендации](../modeling/uml-sequence-diagrams-guidelines.md).|
|UML-схема классов|— Интерфейсы компонента. Схема классов позволяет детализировать методы интерфейса.<br />— Данные, отправляемые в параметрах через интерфейсы компонентов.<br /><br /> Дополнительные сведения см. в разделе [UML-схемы классов: рекомендации](../modeling/uml-class-diagrams-guidelines.md).|
|Схемы активности|— Внутренняя обработка, выполняемая компонентом в ответ на входящие сообщения.<br /><br /> Дополнительные сведения см. в разделе [UML-схемы деятельности: рекомендации](../modeling/uml-activity-diagrams-guidelines.md).|
|Схемы слоев|— Логические архитектурные уровни для компонентов.<br /><br /> Дополнительные сведения см. в разделе [схемы слоев. Справочник](../modeling/layer-diagrams-reference.md).|

## <a name="Basics"></a>Основные шаги для рисования схем компонентов
 Справочные сведения об элементах на схемах компонентов см. в разделе [UML-схемы компонентов: Справочник](../modeling/uml-component-diagrams-reference.md).

 Дополнительные сведения об использовании схем компонентов в процессе разработки см. в разделе [Моделирование архитектуры приложения](../modeling/model-your-app-s-architecture.md).

> [!NOTE]
> Подробные инструкции по созданию схем моделирования см. в разделе [изменение моделей и схем UML](../modeling/edit-uml-models-and-diagrams.md).

#### <a name="to-create-a-component-diagram"></a>Создание схемы компонентов

1. В меню **архитектура** выберите пункт **создать UML или схему слоев**.

2. В разделе **шаблоны**щелкните **UML-схема компонентов**.

3. Назовите схему.

4. В меню **Добавить в проект моделирования**выберите существующий проект моделирования в решении или **Создайте новый проект моделирования**и нажмите кнопку **ОК**.

     Новая схема компонентов отображается с панелью элементов UML- **схемы компонентов** . Панель элементов содержит требуемые элементы и отношения.

### <a name="drawing-components"></a>Создание компонентов
 ![Компоненты с интерфейсами](../modeling/media/uml-compdrawing.png "UML_CompDrawing")

 Создайте *компонент* (1) для каждой основной функциональной единицы в системе или приложении.

 В качестве примеров можно привести приложение, аппаратное средство, веб-службу, сборку .NET, программный класс или группу классов или любой другой отделимый сегмент программы.

##### <a name="to-create-components"></a>Создание компонентов

1. Щелкните **компонент** на панели элементов, а затем щелкните пустую часть диаграммы.

     \- или -

     Скопируйте и вставьте существующий компонент.

    1. Поиск существующего компонента в схеме или в **обозревателе моделей UML**.

    2. Щелкните правой кнопкой мыши компонент и выберите команду **Копировать**.

    3. Откройте схему, на которой необходимо отобразить скопированный компонент.

    4. Щелкните правой кнопкой мыши пустую часть диаграммы и выберите команду **Вставить**.

         Копия компонента отображается с новым именем.

2. Щелкните имя компонента, чтобы изменить его.

3. Щелкните шеврон (5), если нужно отобразить только заголовок компонента.

### <a name="showing-the-ports-of-a-component"></a>Отображение портов компонента
 *Порт* (2, 3) представляет группу сообщений или вызовов операций, которые передаются либо в компонент, либо из него. Группа описывается интерфейсом, который определяет тип порта. Порт может либо предоставлять, либо требовать интерфейс.

 Порт с *предоставленным интерфейсом* (2) предоставляет операции, реализуемые компонентом, которые могут использоваться другими компонентами.

 В качестве примеров можно назвать пользовательский интерфейс, веб-службу, интерфейс .NET или коллекцию функций на любом языке программирования.

 Порт с *требуемым интерфейсом* (3) представляет требование компонента для группы операций или служб, предоставляемых другими компонентами или внешними системами.

 Например, веб-браузер требует веб-серверы, а надстройка приложения требует службы из приложения.

 Компонент может иметь неограниченное число портов.

##### <a name="to-add-ports-to-a-component"></a>Добавление портов в компонент

1. На панели элементов щелкните **предоставленный интерфейс** или **требуемый интерфейс**.

2. Щелкните компонент, который необходимо добавить в интерфейс.

    На границе компонента появляется порт.

    Новый интерфейс создается как тип порта. Этот интерфейс отображается в **обозревателе моделей UML**.

3. Перетащите порт через границу компонента и разместите его, где нужно.

4. Перетащите метку порта, чтобы скорректировать его расположение.

5. Щелкните метку, чтобы изменить ее. Метка показывает имя интерфейса. Если изменить ее, изменится и имя интерфейса.

   Если необходимо указать атрибуты и операции интерфейса, это можно сделать, добавив их в интерфейс в обозревателе моделей UML. Кроме того, можно перетащить интерфейс из обозревателя моделей UML на схему классов и добавить операции и атрибуты на ней.

### <a name="linking-between-components"></a>Ссылки между компонентами
 Используйте зависимость (4), чтобы показать, что требования одного компонента можно удовлетворить операциями или службами, предоставленными другим компонентом.

##### <a name="to-show-that-a-provided-interface-can-satisfy-a-required-interface"></a>Как показать, что предоставленный интерфейс может удовлетворить условия требуемого интерфейса

1. В области элементов щелкните **зависимость**.

2. Щелкните порт с требуемым интерфейсом одного компонента, затем щелкните порт с предоставленным интерфейсом другого компонента.

   Следует избегать создания циклов зависимости, в которых каждый компонент группы зависит от всех остальных компонентов.

##### <a name="to-add-a-port-for-an-existing-interface-to-a-component"></a>Добавление в компонент порта для существующего интерфейса

- Найдите интерфейс в **обозревателе моделей UML** и перетащите его из этого компонента в компонент.

     \- или -

- Скопируйте и вставьте ссылку на интерфейс из схемы.

    1. На схеме классов или схеме компонентов щелкните интерфейс правой кнопкой мыши и выберите команду **Копировать**.

    2. На схеме компонентов щелкните правой кнопкой мыши компонент и выберите команду **Вставить ссылку**.

         В компоненте отобразится предоставленный интерфейс. Рядом отобразится тег действия.

        > [!NOTE]
        > Если вместо **ссылки вставить**используется команда **Вставить** , будет создан новый интерфейс с новым именем.

    3. Если вы хотите создать требуемый интерфейс, щелкните тег action, а затем выберите **преобразовать в требуемый интерфейс**.

## <a name="Parts"></a>Отображение внутренних частей компонента
 ![Схема компонентов, отображающая внутренние части](../modeling/media/uml-compshowing.png "UML_CompShowing")

 Можно разместить части (3) в компоненте (1), чтобы показать, что он состоит из более мелких компонентов, взаимодействующих друг с другом.

 Схема на иллюстрации показывает, что каждый экземпляр веб-службы Dinner Now содержит один экземпляр сервера "Клиенты" и один экземпляр сервера "Кухня".

 Часть — это свойство родительского компонента. Отношения между ними можно сравнить с тем, как атрибут принадлежит к обычному классу. Часть имеет собственный тип, который, как правило, также является компонентом. Метка части имеет ту же форму, что и обычный атрибут.

 `+ partName : TypeName`

 Внутри родительского компонента каждая часть показывает предоставляемые и требуемые интерфейсы, определенные для ее типа (4, 5). Операции или службы, требуемые одной частью, могут быть предоставлены другой. Соединители **сборки частей** можно использовать для демонстрации соединения частей друг с другом (6).

 Также можно показать, что одна из частей родительского компонента фактически предоставляет или требует его интерфейс. Вы можете подключить порт родительского компонента к порту внутренней части, используя отношение **делегирования** (9). Оба порта должны относиться к одному виду (предоставленные или требуемые) и иметь совместимые типы интерфейса.

 Новую часть можно создать либо с помощью нового типа, либо из существующего типа.

#### <a name="to-add-parts-to-a-component"></a>Добавление частей в компонент

1. Создайте часть для каждой крупной функциональной единицы, которая является частью родительского компонента.

    1. Щелкните **компонент** на панели элементов, а затем щелкните внутри родительского компонента (1).

         Новая часть (3) появляется внутри родительского компонента.

         В **обозревателе моделей UML**создается новый компонент. Это тип новой части.

         \- или -

         Перетащите существующий компонент из Проводника по моделям UML в родительский компонент.

         Новая часть (3) появляется внутри родительского компонента. Ее тип — это компонент, перемещенный из Проводника по моделям UML.

         \- или -

         Щелкните правой кнопкой мыши компонент на схеме или в обозревателе моделей UML и выберите команду **Копировать**.

         Щелкните родительский компонент правой кнопкой мыши и выберите команду **Вставить ссылку**.

         Новая часть (3) появляется внутри родительского компонента. Ее тип — это скопированный компонент.

    2. Щелкните имя новой части, чтобы изменить его. Изменить ее тип невозможно.

    3. В новую часть можно добавить предоставленные и требуемые интерфейсы (4, 5). Щелкните **указанный интерфейс** или **требуемый интерфейс** , а затем щелкните в части.

         \- или -

         Перетащите существующий интерфейс из **обозревателя моделей UML** на часть.

         Интерфейсы добавляются в тип части и отображаются в самой части. При необходимости корректируется размер родительского компонента.

2. Соедините части друг с другом.

    - Используйте средство **зависимости** для подключения портов различных частей (6).

3. Соедините части с портами родительского компонента.

    1. Создайте один или несколько портов (7) в родительском компоненте. Щелкните **требуемый интерфейс** или **указанный интерфейс** на панели элементов, а затем щелкните родительский компонент.

    2. Делегируйте (9) порт одной или нескольким частям. Щелкните инструмент **делегирования** , затем порт родительского компонента, а затем порт на части. Можно соединить порты, предоставляющие или требующие интерфейсы аналогичным способом.

### <a name="showing-the-parts-of-a-part"></a>Отображение частей части
 После разложения компонента на части каждый тип части можно дополнительно разложить на внутренние части.

 Удобнее разместить каждый слой разложения на отдельной схеме компонентов. Сначала нужно найти тип части. Например, на иллюстрации одна из частей называется `DNCustomerServer`, а ее тип представляет собой компонент, который называется `CustomerServer`. Этот тип можно найти в Проводнике по моделям UML и поместить его на другую схему. Затем можно создавать внутренние части типа.

##### <a name="to-place-a-parts-type-on-a-diagram"></a>Размещение типа части на схеме

1. Определите полное имя для типа части.

     Щелкните правой кнопкой мыши часть и выберите пункт **Свойства**.

     Имя типа отображается в поле **Type (тип** ) окно свойств.

2. Укажите тип части в **обозревателе моделей UML**.

     В меню **вид**выберите пункт **другие окна**, а затем выберите пункт **Обозреватель моделей UML**.

     Разверните проект и (при необходимости) любой пакет, к которому принадлежит тип.

     Тип будет указан как **компонент**.

     При необходимости его имя можно изменить здесь.

3. Откройте или создайте другую схему компонентов.

4. Перетащите тип из Проводника по моделям UML на схему.

     Представление типа отображается как компонент на схеме.

     Он имеет те же интерфейсы, которые были определены для части.

     Теперь можно добавлять части в компонент.

## <a name="Designing"></a>Проектирование компонента

### <a name="describing-how-the-parts-collaborate"></a>Описание взаимодействия частей
 Можно создать схему последовательностей, чтобы показать, как части взаимодействуют друг с другом в ответ на сообщение, поступающее в родительский компонент.

 Можно использовать эти схемы, чтобы проанализировать существующий компонент и создать новый.

 При конструировании компонента можно создавать схемы последовательностей, даже если еще не решено, какие части будут входить в его состав. Схемы последовательностей можно использовать, чтобы поэкспериментировать с различными частями, требуемыми интерфейсами и последовательностями сообщений. Создайте схемы последовательностей для наиболее часто встречающихся и наиболее важных входящих сообщений. После этого можно создавать части в компоненте, которые соответствуют выбранным линиям жизни.

 Используйте схемы последовательностей, чтобы оценить, как функционирование системы распределяется между разными компонентами.

- Если слишком много функций делегировано одной части, вероятно, возникнут сложности с обновлением приложения. При равномерном распределении функций это маловероятно.

- Если функции, напротив, распределены между большим числом компонентов, между которыми существует много взаимодействий, производительность системы может снизиться, ее понимание будет затруднено.

  ![Схема последовательностей, показывающая части совместной работы](../modeling/media/uml-compdescparts.png "UML_CompDescParts")

##### <a name="to-draw-a-sequence-diagram-that-shows-collaboration-between-parts"></a>Создание схемы последовательностей, показывающей взаимодействие частей

1. Создайте новую схему последовательностей.

     Дополнительные сведения см. в разделе [UML-схемы последовательностей: рекомендации](../modeling/uml-sequence-diagrams-guidelines.md).

2. Создайте линию жизни для внешнего компонента, пользователя, устройства или другого субъекта (1), отправляющего сообщения этому компоненту.

     Для свойства **субъекта** этой линии жизни можно задать значение true, чтобы указать, что он является внешним по отношению к рассматриваемому компоненту. Над линией жизни отображается контурограмма.

3. Создайте линию жизни для предоставленного интерфейса (2) этого компонента, которому выбранный субъект отправляет сообщения.

4. Создайте линию жизни для каждой части (3) компонента.

5. Создайте линию жизни для каждого требуемого интерфейса (4) компонента.

6. Создайте сообщения от внешнего субъекта (5). Покажите, как сообщение передается частям и как они взаимодействуют в ответ на него.

7. При необходимости покажите сообщения, отправляемые требуемому интерфейсу (6). Не показывайте никаких подробностей в области выполнения сообщения.

### <a name="is-the-component-more-than-its-parts"></a>Компонент — это больше, чем его части?
 В некоторых случаях компонент — это не больше, чем имя, присвоенное коллекции частей. Всю работу выполняют части, и во время выполнения нет ни кода, ни других артефактов, которые представляют компонент.

 Это можно указать в модели, установив свойство **является неявно созданным экземпляром** компонента. В этом случае все интерфейсы компонента должны находиться в портах и иметь делегирования во внутренние части.

### <a name="describing-the-process-inside-each-part"></a>Описание процесса внутри каждой части
 Чтобы показать, как компонент обрабатывает каждое входящее сообщение, можно использовать схемы активности. Дополнительные сведения см. в разделе [UML-схемы деятельности: рекомендации](../modeling/uml-activity-diagrams-guidelines.md).

 ![Схема активности с буфером данных](../modeling/media/uml-compdescribingproc.png "UML_CompDescribingProc")

 Используйте "Принять действие события" (1), чтобы показать, что входящее сообщение начинает новый поток.

 Используйте узлы объекта и закрепления ввода или вывода, чтобы показать поток сведений и показать, где хранятся сведения. В этом примере узел объекта (2) показывает элементы, буферизованные между двумя потоками.

### <a name="defining-data-and-classes"></a>Определение данных и классов
 UML-схему классов можно использовать, чтобы подробно описать содержимое следующих элементов:

- интерфейсов компонентов; При добавлении порта, который требует или предоставляет интерфейсы компоненту, интерфейс отображается в обозревателе моделей UML. Можно перетащить или скопировать его на схему классов UML, чтобы отобразить его атрибуты и операции, а также отношения с другими интерфейсами.

- данных, переданных в параметрах операций в интерфейсах;

- данных, сохраненных в компонентах, например как показано в потоках объектов на схемах активности;

### <a name="general-dependencies-between-components"></a>общих зависимостей между компонентами.
 Можно использовать схему компонентов только для того, чтобы показать основные части конструкции и взаимозависимости между ними.

 ![Зависимость между компонентами](../modeling/media/uml-compdepend.png "UML_CompDepend")

 Используйте инструмент **зависимости** для рисования зависимости. Это означает, что конструкция одного компонента зависит от конструкции другого.

 Наиболее распространены следующие виды зависимостей.

- Один компонент вызывает код внутри другого.

- Один компонент создает экземпляр класса, определенного внутри другого класса.

- Один компонент использует сведения, созданные другим.

  Можно использовать имя стрелки зависимости, чтобы обозначить конкретный вид использования. Чтобы задать имя, щелкните стрелку правой кнопкой мыши, выберите пункт **Свойства**и задайте поле **имя** в окне Свойства.

## <a name="see-also"></a>См. также раздел
 [Изменение моделей и схем UML](../modeling/edit-uml-models-and-diagrams.md) схемы [компонентов UML. ссылки на](../modeling/uml-component-diagrams-reference.md) [UML-схемы последовательностей: эталонные](../modeling/uml-sequence-diagrams-reference.md) схемы [вариантов использования UML](../modeling/uml-use-case-diagrams-reference.md) : Справочник по схемам [классов](../modeling/uml-class-diagrams-reference.md) UML: Справочник по UML- [схемам компонентов: справочные материалы](../modeling/uml-component-diagrams-reference.md) [ Видео. Разработка физической структуры с помощью схем компонентов](http://channel9.msdn.com/posts/clinted/UML-with-VS-2010-Part-6-Designing-a-Projects-Physical-Structure/)
