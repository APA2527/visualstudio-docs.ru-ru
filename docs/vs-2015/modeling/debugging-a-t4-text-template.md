---
title: Отладка текстового шаблона T4 | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
helpviewer_keywords:
- text templates, troubleshooting
- text templates, debugging
ms.assetid: 0877fdf2-20bf-42da-b3cc-4c5856b80821
caps.latest.revision: 30
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: 08e74dbb5fefcdaa0959690c7eb1633bca2a8bc6
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "68164580"
---
# <a name="debugging-a-t4-text-template"></a>Отладка текстового шаблона T4
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Можно установить точки останова в текстовых шаблонах. Для отладки во время разработки текстового шаблона, сохраните файл текстового шаблона и нажмите **отладить шаблон T4** в контекстном меню файла в обозревателе решений. Отладка во время выполнения текстового шаблона, просто для отладки приложения, к которой он принадлежит.  
  
 Отладка текстового шаблона, необходимо понимать этапов процесса преобразования шаблона. Различным типам ошибок, возникающих в пределах каждого шага. Ниже приведены шаги.  
  
|Шаг|Шаблон разработки: когда оно происходит.|Шаблон времени выполнения: когда оно происходит.|  
|----------|--------------------------------------------|-----------------------------------------|  
|Код создается из текстового шаблона.<br /><br /> Ошибки в директивы, несоответствующие или disordered `<#…#>` теги.|Когда вы сохраните шаблон или вызов преобразования текста.|Когда вы сохраните шаблон или вызов преобразования текста.|  
|Созданный код компилируется.<br /><br /> Ошибки компиляции в код шаблона.|Сразу же после выполнения предыдущего шага.|Вместе с кодом вашего приложения.|  
|Код выполняется.<br /><br /> Ошибки времени выполнения в коде шаблона.|Сразу же после выполнения предыдущего шага.|Когда приложение выполняется и вызывает код шаблона.|  
  
 В большинстве случаев номера строк в коде шаблона приведены в отчет об ошибке. Если отчет об ошибке ссылается на временное имя файла, частой причиной является несоответствие квадратной скобки в коде текстового шаблона.  
  
 Можно установить точки останова в текстовых шаблонах и отладку обычным образом.  
  
## <a name="common-errors-and-fixes"></a>Распространенные ошибки и исправления  
 В следующей таблице перечислены наиболее распространенные ошибки и способы их устранения.  
  
|Сообщение об ошибке|Описание|Решение|  
|-------------------|-----------------|--------------|  
|Не удалось загрузить базовый класс{0}"какие преобразования класс наследником.|Возникает, если не удается найти базовый класс, указанный в `inherits` параметр в директиве шаблона. Сообщение содержит номер строки в директиве template.|Убедитесь в том, что указанный класс существует, и что сборки, в которой он определен в директиву assembly.|  
|Не удалось разрешить текста в файл:{0}|Происходит, когда не удается найти включенный шаблон. Сообщение содержит имя запрошенного файла включения.|Убедитесь, что путь к файлу задается относительно исходного пути шаблона, или что файл находится в расположении, которое регистрируется с узлом или это полный путь к файлу.|  
|Ошибок при инициализации объекта преобразования. Преобразование не будет выполнено.|Происходит, когда «Initialize()» класса преобразования сбоем или возвращает значение false.|Код в функции Initialize() поступает из базового класса преобразования указанного в \<#@template#> директив и из процессоров директив. Ошибка, которая вызвала инициализировать переход на другой, вероятно, находится в списке ошибок. Исследуйте причину сбоя. Можно взглянуть на фактическое созданный код метода Initialize(), следуя процедурам для отладки шаблона.|  
|Сборка "{0}«для обработчика директив»{1}" не был предоставлен набор разрешений FullTrust. Только доверенным сборкам разрешается поставлять процессоры директив. Этот процессор директив не будет загружен.|Происходит, когда система не предоставляет разрешения FullTrust к сборке, содержащей процессор директив. Сообщение содержит имя сборки и имя процессора директив.|Убедитесь, что используются только доверенным сборкам на локальном компьютере.|  
|Путь "{0}" должно быть локальным для этого компьютера или часть вашей зоны надежных узлов.|Происходит, когда директивы или директива assembly ссылается на файл, который находится не на локальном компьютере или на зоны надежных узлов вашей сети.|Убедитесь, что каталог, где находятся директива или директивы сборки находится в доверенной зоны. Сетевой каталог можно добавить в зону доверенных через Internet Explorer.|  
|Несколько синтаксических ошибок, например «Недопустимый токен «catch»» или «пространство имен не может содержать непосредственно элементы»|Слишком много закрывающую фигурную скобку. в коде шаблона. Компилятор будет спутать его со стандартным кодом создания.|Проверьте номер закрытия фигурные скобки и квадратные скобки в разделители кода.|  
|Циклы и условные выражения, которые не компилируются и не выполняются правильно. Например, `<#if (i>10)#> Number is: <#= i #>`.<br /><br /> Этот код всегда выводит значение свойства я. Только «число:» является условным.|В C# всегда используйте фигурные скобки вокруг текстовые блоки, которые внедряются в операторах управления.|Добавить фигурные скобки: `<#if (i>10) { #>    Number is: <#= i #><# } #>`.|  
|«Слишком сложное выражение» при обработке шаблона времени разработки или компиляции шаблона среды выполнения (предварительно обработанном).<br /><br /> [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] прекращает работать при попытке проверить код, сгенерированный шаблонов среды выполнения.|Текстовый блок является слишком длинным. T4 преобразует текстовые блоки объединения строковое выражение, с помощью одного строкового литерала для каждой строки шаблона. Очень длинные текстовые блоки можно превысить ограничения на размер компилятора.|Разбейте длинные текстовые блока с блока выражения, такие как:<br /><br /> `<#= "" #>`|  
  
## <a name="warning-descriptions-and-fixes"></a>Описания и исправления предупреждений  
 Ниже перечислены наиболее распространенные предупреждения и способы их устранения, если он доступен.  
  
|Сообщение с предупреждением|Описание|Решение|  
|---------------------|-----------------|--------------|  
|Загрузке включаемого файла "{0}" возвратил значение null или пустую строку.|Возникает, если в файле шаблона включенного текста пуст. Сообщение содержит имя файла, включенного файла.|Удалите директиву include или убедитесь, что файл имеет некоторое содержимое.|  
|Компиляция преобразования:|Добавляет в начало этой строки, чтобы все ошибки или предупреждения, полученные от компилятора при компиляции преобразования. Эта строка означает, что компилятор выдал ошибку или предупреждение.|Если удалось найти библиотеку DLL, может потребоваться указать полный путь или полное строгое имя, если библиотеки DLL в глобальный кэш СБОРОК.|  
|Параметр "{0}" уже существует в директиве. Повторяющийся параметр будет игнорироваться.|Происходит, когда параметр указан несколько раз в директиве. Сообщение содержит имя параметра и номер строки директивы.|Удалите повторяющийся параметр спецификацию.|  
|Произошла ошибка при загрузке включаемого файла "{0}". Директива включения будет игнорироваться.|Происходит, когда не удается найти файл, указанный в `include` директива. Сообщение содержит имя файла и номер строки директивы.|Убедитесь, что включаемый файл существует, либо в том же каталоге, что исходный файл текстового шаблона, либо в одном из каталогов включения, зарегистрированных с узлом.|  
|Указан недопустимый базовый класс был указан для класса преобразования. Базовый класс должен быть производным от Microsoft.VisualStudio.TextTemplating.TextTransformation.|Происходит при `inherits` в директиве шаблона задает класс, который не является производным от `TextTransformation`. Сообщение содержит номер строки в директиве template.|Укажите класс, который является производным от `TextTransformation`.|  
|В директиве «шаблон» указан недопустимый язык и региональные параметры. Язык и региональные параметры должны быть в формате «xx-XX». Будут использоваться инвариантные язык и региональные параметры.|Происходит, когда параметр языка и региональных параметров в директиве шаблона указан неправильно. Сообщение содержит номер строки в директиве template.|Измените параметр языка и региональных параметров на допустимый язык и региональные параметры в формате «xx-XX».|  
|Недопустимое отладочное значение "{0}" было указано в директиве template. Значение отладки должно быть «true» или «false». Будет использоваться по умолчанию «false».|Происходит при `debug` параметр в директиве шаблона указан неправильно. Сообщение содержит номер строки в директиве template.|Задайте для параметра отладки значение «true» или «false».|  
|Недопустимое значение HostSpecific "{0}" было указано в директиве template. Значение HostSpecific должно быть «true» или «false». Будет использоваться по умолчанию «false».|Происходит, когда параметр среды размещения в `template` неправильно указана директива. Сообщение содержит номер строки в директиве template.|Задайте для параметра конкретного узла значение «true» или «false».|  
|Недопустимый язык "{0}" было указано в директиве «шаблон». Язык должен быть «C#» или «VB». Будет использоваться значение по умолчанию «C#».|Происходит, когда в указан неподдерживаемый язык `template` директива. (Без учета регистра) разрешены только «C#» или «VB». Сообщение содержит номер строки в директиве template.|Задайте `language` параметр в директиве template «C#» или «VB».|  
|В шаблоне было найдено несколько директив выходных данных. Все файлы, кроме первого будут игнорироваться.|Происходит, когда несколько `output` директивы указываются в файле шаблона. Сообщение содержит номер строки директивы повторяющихся выходных данных.|Удалить дубликат `output` директивы.|  
|В шаблоне было найдено несколько директив шаблона. Все файлы, кроме первого будут игнорироваться. Несколько параметров в директиве template, должны быть указаны в пределах одного каталога шаблонов.|Возникает, если задано несколько `template` директив в текстовый файл шаблона (включая включаемых файлов). Сообщение содержит номер строки директивы повторяющийся шаблон.|Статистическая обработка различных `template` директивы в одну `template` директива.|  
|Не указан процессор для директивы с именем "{0}". Директива будет проигнорирована.|Возникает, если указано `custom` директивы, но не предоставляют `processor` атрибута. Сообщение содержит имя директивы и номер строки.|Укажите `processor` атрибут с именем `directive` процессора для директивы.|  
|Процессор с именем "{0}«не найден для директивы с именем»{1}". Директива будет проигнорирована.|Происходит, когда системе не удается найти `directive` процессора, указанного в `custom` директива. Сообщение предоставляет имя директивы, имя процессора и номер строки директивы.|Задайте `processor` атрибут в директиве имя процессора директив.|  
|Обязательный параметр "{0}«для директивы»{1}" не найден. Директива будет проигнорирована.|Происходит, когда система не предоставляет обязательный параметр директивы. Сообщение содержит имя отсутствующего параметра, имя директивы и номер строки.|Укажите отсутствующий параметр.|  
|Процессор с именем "{0}«не поддерживает директиву с именем»{1}". Директива будет проигнорирована.|Происходит, когда процессор директив не поддерживает директиву. Сообщение содержит имя и номер строки вызвавшей ошибку директивы, а также имя процессора директив.|Исправьте имя директивы.|  
|Директива включения для файла "{0}" приводит к бесконечному циклу.|Если циклические директивы включения указаны (например, файл А включает файл Б, который включает файл A).|Не следует указывать циклические директивы #include.|  
|Выполнение преобразования:|Добавляет в начало этой строки для всех ошибок или предупреждений, которые создаются при выполнении преобразования.|Неприменимо.|  
|В пределах блока найден непредвиденный открывающий или закрывающий тег. Убедитесь, что вы не был пропущен открывающий или закрывающий тег и отсутствие любые вложенные блоки в шаблоне.|Отображается при наличии непредвиденного \<# или #>. То есть при наличии \<# после другой открывающий тег, который не был закрыт, или иметь #> при отсутствии не незакрытые открывающий тег, перед ним. Сообщение содержит номер строки пропущенного тега.|Удалите несоответствующие открывающий или закрывающий тег или использовать escape-символ.|  
|Директива указана в неправильном формате. Директива будет проигнорирована. Укажите директиву в формате `<#@ name [parametername="parametervalue"]*  #>`|Если директива не указана в правильном формате отображается средством синтаксического анализа. Сообщение содержит директиву неверный номер строки.|Убедитесь, что все директивы представлены в виде `<#@ name [parametername="parametervalue"]*  #>`. Дополнительные сведения см. в разделе [директивы текстовых шаблонов T4](../modeling/t4-text-template-directives.md).|  
|Не удалось загрузить сборку "{0}«для зарегистрированного обработчика директив»{1}"<br /><br /> {2}|Происходит, когда процессор директив не удалось загрузить с узла. Сообщение идентифицирует сборку, предоставленную для процессора директив и имя процессора директив.|Убедитесь в том, что процессор директив зарегистрирован правильно и что она существует.|  
|Не удалось найти тип "{0}«в сборке»{1}«для зарегистрированного обработчика директив»{2}"<br /><br /> {3}|Происходит, когда тип процессора директив не может быть загружен из его сборки. Сообщение содержит имя типа, сборки и процессора директив.|Vshost находит сведения о процессоре директив (имя сборки и тип) в реестре. Убедитесь в том, что процессор директив зарегистрирован правильно и что тип существует в сборке.|  
|Произошла ошибка при загрузке сборки "{0}"|Происходит, когда имеется проблема при загрузке сборки. Сообщение содержит имя сборки.|Можно указать сборок должен быть загружен в \<@# assembly #> директив и с помощью процессоров директив. Сообщение об ошибке, которое следует за этой строкой должен предоставлять дополнительные данные о причинах сбоя загрузки сборки.|  
|Произошла ошибка при создании и инициализации процессора для директивы с именем "{1}". Тип процессора — {0}. Директива будет проигнорирована.|Происходит, когда системе не удалось создать или инициализировать процессор директив. Сообщение содержит имя и номер строки директивы и тип процессора.|Убедитесь в том, что используется правильный процессор директив и что он имеет открытый конструктор по умолчанию. В противном случае используйте параметры отладки, чтобы узнать причину сбоя метод Initialize() процессора директив. Дополнительные сведения см. в разделе [Устранение неполадок текстовых шаблонов](../modeling/debugging-a-t4-text-template.md).|  
|Возникло исключение при обработке директивы с именем "{0}".|Происходит, когда процессор директив вызовет исключение при обработке директивы.|Убедитесь, что параметры для процессора директив верны.|  
|Узел вызвал исключение при попытке разрешить ссылку на сборку "{0}".|Происходит, когда узел вызывает исключение при попытке разрешить ссылку на сборку. Сообщение содержит сборки строку ссылки.|Сборка берутся ссылки \<@# assembly #> директивы и из процессоров директив. Убедитесь, что параметр «name», указанные в параметре сборки указано правильно.|  
|Попытка указать неподдерживаемый {1} значение "{0}" для директивы {2}|Происходит по RequiresProvidesDirectiveProcessor (все созданные процессоры директив являются производными от него), при указании неподдерживаемого требует или предоставляет аргумент.|Убедитесь, что имена в name = «value» в пары требуется и приведены параметры указаны правильно.|
