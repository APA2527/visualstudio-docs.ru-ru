---
title: Создание кода и текстовые шаблоны T4 | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
f1_keywords:
- VS.ToolsOptionsPages.TextTemplating.TextTemplating
helpviewer_keywords:
- generating text
- .tt files
- code generation
- text templates
- generating code
ms.assetid: 74a0a748-5b11-4999-8bea-49572967827d
caps.latest.revision: 84
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: 4886a23272962d2dee03576504d60d64067faf20
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63433407"
---
# <a name="code-generation-and-t4-text-templates"></a>Создание кода и текстовые шаблоны T4
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

В [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] *текстовый шаблон T4* представляет собой сочетание блоков текста и логики управления, которое может создать текстовый файл. Логика управления записывается в виде фрагментов программного кода в [!INCLUDE[csprcs](../includes/csprcs-md.md)] или [!INCLUDE[vbprvb](../includes/vbprvb-md.md)]. В Visual Studio 2015 с обновлением 2 и более поздних версиях можно использовать функции C# версии 6.0 в директивах шаблонов T4. Созданный файл может быть текстом любого типа, например веб-страницей, файлом ресурса или исходным кодом программы на любом языке.  
  
 Существует два типа текстовых шаблонов T4.  
  
 **Текстовые шаблоны T4 времени выполнения** (предварительно обработанные шаблоны) выполняются в приложении для создания текстовых строк, обычно в рамках выходных данных.  
 Например, можно создать шаблон для определения HTML-страницы:  
  
```  
<html><body>  
 The date and time now is: <#= DateTime.Now #>  
</body></html>  
```  
  
 обратите внимание, что шаблон напоминает созданные выходные данные. Сходство шаблона с результирующими выходными данными помогает избежать ошибок, если необходимо изменить шаблон.  
  
 Кроме того, шаблон содержит фрагменты программного кода. Эти фрагменты можно использовать для повторения разделов текста, создания условных разделов и отображения данных из приложения.  
  
 Чтобы создать выходные данные, приложение вызывает функцию, которая создается с помощью шаблона. Пример:  
  
```csharp  
string webResponseText = new MyTemplate().TransformText();  
  
```  
  
 Приложение может выполняться на компьютере, на котором не установлен [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] .  
  
 Чтобы создать шаблон времени выполнения, добавьте в проект файл **предварительно обработанного текстового шаблона** . Также можно добавить текстовый файл и установить для его свойства **Пользовательское средство** значение **TextTemplatingFilePreprocessor**.  
  
 Дополнительные сведения см. в разделе [Создание текста во время выполнения с помощью текстовых шаблонов T4](../modeling/run-time-text-generation-with-t4-text-templates.md). Дополнительные сведения о синтаксисе шаблонов см. в разделе [написание текстового шаблона T4](../modeling/writing-a-t4-text-template.md).  
  
 **Текстовые шаблоны T4 времени разработки** выполняются в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] для определения части исходного кода и других ресурсов приложения.  
 Обычно используется несколько шаблонов, чтобы считать данные из одного входного файла или базы данных и создать несколько `.cs`, `.vb`или других исходных файлов. Каждый шаблон создает один файл. Они выполняются в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] или [!INCLUDE[vstecmsbuild](../includes/vstecmsbuild-md.md)].  
  
 Например, входными данными может быть XML-файл данных конфигурации. При редактировании XML-файла во время разработки текстовые шаблоны повторно создают соответствующую часть кода приложения. Один из шаблонов может выглядеть примерно так:  
  
```  
<#@ output extension=".txt" #>  
<#@ assembly name="System.Xml" #>  
<#  
 System.Xml.XmlDocument configurationData = ...; // Read a data file here.  
#>  
namespace Fabrikam.<#= configurationData.SelectSingleNode("jobName").Value #>  
{  
  ... // More code here.   
}  
  
```  
  
 В зависимости от значений в XML-файле, созданный файл `.cs` может выглядеть примерно так:  
  
```  
namespace Fabrikam.FirstJob  
{  
  ... // More code here.   
}  
```  
  
 Другим примером входных данных может быть диаграмма рабочих процессов в бизнес-деятельности. Когда пользователи меняют свой рабочий процесс или когда начинается работа с новыми пользователями, у которых есть другой рабочий процесс, легко пересоздать код в соответствии с новой моделью.  
  
 Шаблоны времени разработки позволяют проще и надежнее изменять конфигурацию при изменении требований. Обычно входные данные определяются в зависимости от бизнес-требований, как показано в примере рабочего процесса. Так проще обсуждать изменения с пользователями. Шаблоны времени разработки, таким образом, являются полезным инструментом гибкого процесса разработки.  
  
 Чтобы создать шаблон времени разработки, добавьте в проект файл **текстового шаблона** . Также можно добавить текстовый файл и установить для его свойства **Пользовательское средство** значение **TextTemplatingFileGenerator**.  
  
 Дополнительные сведения см. в разделе [создание кода во время разработки с помощью текстовых шаблонов T4](../modeling/design-time-code-generation-by-using-t4-text-templates.md). Дополнительные сведения о синтаксисе шаблонов см. в разделе [написание текстового шаблона T4](../modeling/writing-a-t4-text-template.md).  
  
> [!NOTE]
> Термин *модель* иногда используется для описания данных, считываемых одним или несколькими шаблонами. Модель может быть представлена в любой форме, в виде файла или базы данных. Она не должна быть моделью UML или моделью для доменного языка. Слово "модель" просто указывает, что данные можно определить с точки зрения бизнес-концепции, а не в виде кода.  
  
 Функция преобразования текстового шаблона называется *T4*.  
  
## <a name="in-this-section"></a>В этом разделе  
 [Создание текста во время выполнения с помощью текстовых шаблонов T4](../modeling/run-time-text-generation-with-t4-text-templates.md)  
 В любом приложении, создающем текстовые файлы, предкомпилированные текстовые шаблоны являются простым и надежным методом определения текста. Тем не менее этот метод невозможно использовать для текстовых шаблонов, которые изменяются во время выполнения.  
  
 [Создание кода во время разработки с помощью текстовых шаблонов T4](../modeling/design-time-code-generation-by-using-t4-text-templates.md)  
 Создание кода и других ресурсов на основе модели позволяет обновлять приложение посредством обновления модели.  
  
 [Создание кода в процессе сборки](../modeling/code-generation-in-a-build-process.md)  
 Если установлен пакет SDK для визуализации и моделирования [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] , то созданное программное обеспечение будет обновляться в соответствии с изменениями в модели.  
  
 [Написание текстового шаблона T4](../modeling/writing-a-t4-text-template.md)  
 Синтаксис файла текстового шаблона.  
  
 [Пошаговое руководство: Создание кода с помощью текстовых шаблонов](../modeling/walkthrough-generating-code-by-using-text-templates.md)  
 Демонстрация одного способа создания кода.  
  
 [Отладка текстового шаблона T4](../modeling/debugging-a-t4-text-template.md)  
 Способы отладки текстовых шаблонов, а также некоторые распространенные ошибки в текстовых шаблонах.  
  
 [Создание файлов с помощью служебной программы TextTransform](../modeling/generating-files-with-the-texttransform-utility.md)  
 Программа командной строки, которую можно использовать для запуска преобразований текстовых шаблонов.  
  
 [Настройка преобразования текста T4](../modeling/customizing-t4-text-transformation.md)  
 Способы написания процессоров директив и хостов настраиваемых шаблонов для источников данных.  
  
## <a name="see-also"></a>См. также  
 [Создание файлов из модели UML](../modeling/generate-files-from-a-uml-model.md)   
 [Создание кода из доменного языка](../modeling/generating-code-from-a-domain-specific-language.md)
