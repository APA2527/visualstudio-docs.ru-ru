---
title: Как реализовать маркеры ошибок | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-sdk
ms.topic: conceptual
helpviewer_keywords:
- editors [Visual Studio SDK], legacy - error markers
ms.assetid: e8e78514-5720-4fc2-aa43-00b6af482e38
caps.latest.revision: 13
ms.author: gregvanl
manager: jillfra
ms.openlocfilehash: 2af9e0765fb5bc73a35bebfc2f50f5d2a41122d3
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "90842709"
---
# <a name="how-to-implement-error-markers"></a>Практическое руководство. Реализация маркеров ошибок
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Маркеры ошибок (или красные волнистые линии) являются наиболее сложными настройками текстового редактора для реализации. Однако преимущества, которые они предоставляют пользователям пакета VSPackage, могут значительно перевысить стоимость их предоставления. Маркеры ошибок незначительно помечают текст, который анализатор языка считает неправильным, подчеркнутой волнистой линией или красной волнистой линией. Этот индикатор помогает программистам визуально отображать неверный код.  
  
 Используйте текстовые маркеры для реализации красной волнистой линией. Как правило, языковые службы добавляют красной волнистой линией текст в текстовый буфер в качестве фонового прохода либо в момент простоя, либо в фоновом потоке.  
  
### <a name="to-implement-the-red-wavy-underline-feature"></a>Реализация функции красной волнистой линией  
  
1. Выберите текст, под которым нужно поместить красной волнистой линией.  
  
2. Создайте маркер типа `MARKER_CODESENSE_ERROR` . Дополнительные сведения см. [в разделе Практические руководства. Добавление стандартных текстовых маркеров](../extensibility/how-to-add-standard-text-markers.md).  
  
3. После этого передайте <xref:Microsoft.VisualStudio.TextManager.Interop.IVsTextMarkerClient> указатель интерфейса.  
  
   Этот процесс также позволяет создать текст подсказки или специальное контекстное меню для данного маркера. Дополнительные сведения см. [в разделе Практические руководства. Добавление стандартных текстовых маркеров](../extensibility/how-to-add-standard-text-markers.md).  
  
   Перед отображением маркеров ошибок необходимо выполнить следующие объекты.  
  
- Средство синтаксического анализа.  
  
- Поставщик задач (то есть реализация <xref:Microsoft.VisualStudio.Shell.Interop.IVsTaskProvider2> ), который поддерживает запись изменений в сведениях о строке, чтобы определять строки для повторного анализа.  
  
- Фильтр представления текста, который фиксирует события изменения из представления с помощью <xref:Microsoft.VisualStudio.TextManager.Interop.IVsTextViewEvents.OnChangeCaretLine%2A> метода).  
  
  Средство синтаксического анализа, поставщик задач и фильтр предоставляют инфраструктуру, необходимую для создания маркеров ошибок. Следующие шаги обеспечивают процесс отображения маркеров ошибок.  
  
1. В фильтруемом представлении фильтр получает указатель на поставщика задач, связанного с данными этого представления.  
  
    > [!NOTE]
    > Вы можете использовать один и тот же фильтр команд для подсказок методов, завершения операторов, маркеров ошибок и т. д.  
  
2. Когда фильтр получает событие, указывающее, что вы перешли на другую строку, создается задача для проверки на наличие ошибок.  
  
3. Обработчик задач проверяет, является ли строка «грязной». Если да, то он анализирует строку на наличие ошибок.  
  
4. При обнаружении ошибок поставщик задач создает экземпляр элемента задачи. Этот экземпляр создает текстовый маркер, используемый средой в качестве маркера ошибок в представлении текста.  
  
## <a name="see-also"></a>См. также:  
 [Использование текстовых маркеров с устаревшим API](../extensibility/using-text-markers-with-the-legacy-api.md)   
 [Руководство. Добавление стандартных текстовых маркеров](../extensibility/how-to-add-standard-text-markers.md)   
 [Как создавать пользовательские маркеры](../extensibility/how-to-create-custom-text-markers.md)   
 [Практическое руководство. Использование текстовых маркеров](../extensibility/how-to-use-text-markers.md)
