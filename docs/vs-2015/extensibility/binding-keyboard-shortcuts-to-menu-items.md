---
title: Привязка сочетаний клавиш к пунктам меню | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-sdk
ms.topic: conceptual
helpviewer_keywords:
- keyboard command
- keyboards
- command key
- keyboard shortcuts
- menu items
ms.assetid: 19f483b6-4d3e-424e-9d68-dc129c788e47
caps.latest.revision: 16
ms.author: gregvanl
manager: jillfra
ms.openlocfilehash: 0396d3290ef870fb2c2c7b7b49c774b66397077c
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "75852218"
---
# <a name="binding-keyboard-shortcuts-to-menu-items"></a>Привязка сочетаний клавиш к пунктам меню
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Чтобы привязать сочетание клавиш к команде пользовательского меню, просто добавьте запись в файл. vsct для пакета. В этом разделе объясняется, как сопоставить сочетание клавиш с пользовательской кнопкой, пунктом меню или командой панели инструментов, а также как применить сочетание клавиш в редакторе по умолчанию или ограничить его настраиваемым редактором.  
  
 Сведения о назначении сочетаний клавиш для существующих элементов меню Visual Studio см. в разделе [Определение и настройка](../ide/identifying-and-customizing-keyboard-shortcuts-in-visual-studio.md)сочетаний клавиш.  
  
## <a name="choosing-a-key-combination"></a>Выбор сочетания клавиш  
 Многие сочетания клавиш уже используются в Visual Studio. Не следует назначать один и тот же ярлык нескольким командам, поскольку дублирование привязок сложно обнаружить, а также может привести к непредсказуемым результатам. Поэтому рекомендуется проверять доступность ярлыка перед его назначением.  
  
#### <a name="to-verify-the-availability-of-a-keyboard-shortcut"></a>Проверка доступности сочетания клавиш  
  
1. В окне **Сервис/параметры/среда** выберите **Клавиатура**.  
  
2. Убедитесь, что для параметра **использовать новый ярлык в** выбрано значение **Global**.  
  
3. В поле Ввод **сочетаний** клавиш введите сочетание клавиш, которое нужно использовать.  
  
    Если сочетание клавиш уже используется в Visual Studio, в диалоговом окне **сочетание клавиш в настоящий момент** будет отображаться команда, которая в данный момент вызывается.  
  
4. Попробуйте использовать разные сочетания ключей, пока не найдете тот, который не сопоставлен.  
  
   > [!NOTE]
   > Сочетания клавиш, использующие ALT, могут открывать меню, а не выполнять команду напрямую. Таким образом, **сочетание клавиш, используемое в настоящий момент** в поле, может быть пустым при вводе ярлыка, включающего ALT. Можно проверить, что ярлык не открывает меню, закрыв диалоговое окно **Параметры** и нажав клавиши.  
  
   В следующей процедуре предполагается наличие существующего пакета VSPackage с командой меню. Если вам нужна помощь, ознакомьтесь с [созданием расширения с помощью команды меню](../extensibility/creating-an-extension-with-a-menu-command.md).  
  
#### <a name="to-assign-a-keyboard-shortcut-to-a-command"></a>Назначение сочетания клавиш команде  
  
1. Откройте файл. vsct для пакета.  
  
2. Создайте пустой `<KeyBindings>` раздел после, `<Commands>` если он еще не существует.  
  
   > [!WARNING]
   > Дополнительные сведения о привязках ключей см. в разделе [настраиваемое сочетание клавиш](../extensibility/keybinding-element.md).  
  
    В `<KeyBindings>` разделе Создайте `<KeyBinding>` запись.  
  
    Задайте `guid`  атрибуты и  `id` для тех элементов команды, которую требуется вызвать.  
  
    Присвойте `mod1` атрибуту значение **Control**, **ALT**или **SHIFT**.  
  
    Раздел сочетания клавиш должен выглядеть примерно так:  
  
   ```xml  
   <KeyBindings>  
       <KeyBinding guid="<name of command set>" id="<name of command id>"  
           editor="guidVSStd97" key1="1" mod1="CONTROL"/>  
   </KeyBindings>  
  
   ```  
  
   Если для сочетания клавиш требуется более двух ключей, задайте `mod2` `key2` атрибуты и.  
  
   В большинстве случаев **SHIFT** не следует использовать без второго модификатора, так как при нажатии на него наиболее буквенно-цифровой ключ вводится прописная буква или символ.  
  
   С помощью кодов виртуальных клавиш можно получить доступ к специальным ключам, которые не содержат связанных с ними символов, например, функциональных клавиш и клавиши **Backspace** . Дополнительные сведения см. в разделе [коды виртуальных клавиш](https://msdn2.microsoft.com/library/ms645540.aspx).  
  
   Чтобы сделать команду доступной в редакторе Visual Studio, присвойте `editor` атрибуту значение `guidVSStd97` .  
  
   Чтобы команда стала доступной только в пользовательском редакторе, присвойте `editor` атрибуту имя пользовательского редактора, созданного [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] шаблоном пакета при создании VSPackage, включающего пользовательский редактор. Чтобы найти значение имени, просмотрите `<Symbols>` раздел для `<GuidSymbol>` узла, `name` атрибут которого заканчивается на " `editorfactory` ." Это имя пользовательского редактора.  
  
## <a name="example"></a>Пример  
 В этом примере сочетание клавиш CTRL + ALT + C привязывается к команде `cmdidMyCommand` в пакете с именем `MyPackage` .  
  
```  
<CommandTable>  
. . .  
<Commands>  
. . .  
</Commands>  
<KeyBindings>  
  <KeyBinding guid="guidMyPackageCmdSet" id="cmdidMyCommand"   
      key1="C" mod1="CONTROL" mod2="ALT" editor="guidVSStd97" />  
</KeyBindings>  
. . .  
</CommandTable>  
```  
  
## <a name="example"></a>Пример  
 В этом примере сочетание клавиш CTL + B привязывается к команде `cmdidBold` в проекте с именем `TestEditor` . Команда доступна только в пользовательском редакторе, а не в других редакторах.  
  
```xml  
<KeyBinding guid="guidVSStd97" id="cmdidBold" editor="guidTestEditorEditorFactory" key1="B" mod1="Control" />  
```  
  
## <a name="see-also"></a>См. также:  
 [Расширение меню и команд](../extensibility/extending-menus-and-commands.md)
