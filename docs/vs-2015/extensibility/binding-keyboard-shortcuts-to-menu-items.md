---
title: Привязка сочетаний клавиш к пунктам меню | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-sdk
ms.topic: conceptual
helpviewer_keywords:
- keyboard command
- keyboards
- command key
- keyboard shortcuts
- menu items
ms.assetid: 19f483b6-4d3e-424e-9d68-dc129c788e47
caps.latest.revision: 16
ms.author: gregvanl
manager: jillfra
ms.openlocfilehash: e362a61c5ecab78c332eb5e077a02ee4e9e3fa9b
ms.sourcegitcommit: bad28e99214cf62cfbd1222e8cb5ded1997d7ff0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2019
ms.locfileid: "74295613"
---
# <a name="binding-keyboard-shortcuts-to-menu-items"></a>Привязка сочетаний клавиш к пунктам меню
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Чтобы привязать сочетание клавиш к команде пользовательского меню, просто добавьте запись в файл. vsct для пакета. В этом разделе объясняется, как сопоставить сочетание клавиш с пользовательской кнопкой, пунктом меню или командой панели инструментов, а также как применить сочетание клавиш в редакторе по умолчанию или ограничить его настраиваемым редактором.  
  
 Сведения о назначении сочетаний клавиш для существующих элементов меню Visual Studio см. в разделе [Определение и настройка](../ide/identifying-and-customizing-keyboard-shortcuts-in-visual-studio.md)сочетаний клавиш.  
  
## <a name="choosing-a-key-combination"></a>Выбор сочетания клавиш  
 Многие сочетания клавиш уже используются в Visual Studio. Не следует назначать один и тот же ярлык нескольким командам, поскольку дублирование привязок сложно обнаружить, а также может привести к непредсказуемым результатам. Поэтому рекомендуется проверять доступность ярлыка перед его назначением.  
  
#### <a name="to-verify-the-availability-of-a-keyboard-shortcut"></a>Проверка доступности сочетания клавиш  
  
1. В окне **Сервис/параметры/среда** выберите **Клавиатура**.  
  
2. Убедитесь, что для параметра **использовать новый ярлык в** выбрано значение **Global**.  
  
3. В поле Ввод **сочетаний** клавиш введите сочетание клавиш, которое нужно использовать.  
  
    Если сочетание клавиш уже используется в Visual Studio, в диалоговом окне **сочетание клавиш в настоящий момент** будет отображаться команда, которая в данный момент вызывается.  
  
4. Попробуйте использовать разные сочетания ключей, пока не найдете тот, который не сопоставлен.  
  
   > [!NOTE]
   > Сочетания клавиш, использующие ALT, могут открывать меню, а не выполнять команду напрямую. Таким образом, **сочетание клавиш, используемое в настоящий момент** в поле, может быть пустым при вводе ярлыка, включающего ALT. Можно проверить, что ярлык не открывает меню, закрыв диалоговое окно **Параметры** и нажав клавиши.  
  
   В следующей процедуре предполагается наличие существующего пакета VSPackage с командой меню. Если вам нужна помощь, ознакомьтесь с [созданием расширения с помощью команды меню](../extensibility/creating-an-extension-with-a-menu-command.md).  
  
#### <a name="to-assign-a-keyboard-shortcut-to-a-command"></a>Назначение сочетания клавиш команде  
  
1. Откройте файл. vsct для пакета.  
  
2. Создайте пустой раздел `<KeyBindings>` после `<Commands>`, если он еще не указан.  
  
   > [!WARNING]
   > Дополнительные сведения о привязках ключей см. в разделе [настраиваемое сочетание клавиш](../extensibility/keybinding-element.md).  
  
    В разделе `<KeyBindings>` создайте запись `<KeyBinding>`.  
  
    Задайте атрибуты `guid` и `id` для тех, которые будут вызываться командой.  
  
    Задайте для атрибута `mod1` значение **Control**, **ALT**или **SHIFT**.  
  
    Раздел сочетания клавиш должен выглядеть примерно так:  
  
   ```xml  
   <KeyBindings>  
       <KeyBinding guid="<name of command set>" id="<name of command id>"  
           editor="guidVSStd97" key1="1" mod1="CONTROL"/>  
   </KeyBindings>  
  
   ```  
  
   Если для сочетания клавиш требуется более двух ключей, задайте атрибуты `mod2` и `key2`.  
  
   В большинстве случаев **SHIFT** не следует использовать без второго модификатора, так как при нажатии на него наиболее буквенно-цифровой ключ вводится прописная буква или символ.  
  
   С помощью кодов виртуальных клавиш можно получить доступ к специальным ключам, которые не содержат связанных с ними символов, например, функциональных клавиш и клавиши **Backspace** . Дополнительные сведения см. в разделе [коды виртуальных клавиш](https://go.microsoft.com/fwlink/?LinkID=105932).  
  
   Чтобы сделать команду доступной в редакторе Visual Studio, присвойте атрибуту `editor` значение `guidVSStd97`.  
  
   Чтобы команда была доступна только в пользовательском редакторе, присвойте атрибуту `editor` имя пользовательского редактора, созданного с помощью шаблона пакета [!INCLUDE[vsprvs](../includes/vsprvs-md.md)], при создании VSPackage, включающего пользовательский редактор. Чтобы найти значение имени, просмотрите раздел `<Symbols>` для `<GuidSymbol>` узла, атрибут `name` которого заканчивается на "`editorfactory`". Это имя пользовательского редактора.  
  
## <a name="example"></a>Пример  
 В этом примере сочетание клавиш CTRL + ALT + C привязывается к команде с именем `cmdidMyCommand` в пакете с именем `MyPackage`.  
  
```  
<CommandTable>  
. . .  
<Commands>  
. . .  
</Commands>  
<KeyBindings>  
  <KeyBinding guid="guidMyPackageCmdSet" id="cmdidMyCommand"   
      key1="C" mod1="CONTROL" mod2="ALT" editor="guidVSStd97" />  
</KeyBindings>  
. . .  
</CommandTable>  
```  
  
## <a name="example"></a>Пример  
 В этом примере сочетание клавиш CTL + B привязывается к команде с именем `cmdidBold` в проекте с именем `TestEditor`. Команда доступна только в пользовательском редакторе, а не в других редакторах.  
  
```xml  
<KeyBinding guid="guidVSStd97" id="cmdidBold" editor="guidTestEditorEditorFactory" key1="B" mod1="Control" />  
```  
  
## <a name="see-also"></a>См. также  
 [Расширение меню и команд](../extensibility/extending-menus-and-commands.md)
