---
title: Управление выполнением | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-sdk
ms.topic: conceptual
helpviewer_keywords:
- debugging [Debugging SDK], control of execution
ms.assetid: 97071846-007e-450f-95a6-f072d0f5e61e
caps.latest.revision: 10
ms.author: gregvanl
manager: jillfra
ms.openlocfilehash: c885c0c983e6fafd69d55b3d68f8ed6e8ff2628c
ms.sourcegitcommit: a77158415da04e9bb8b33c332f6cca8f14c08f8c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/15/2020
ms.locfileid: "86387269"
---
# <a name="control-of-execution"></a>Элемент управления выполнения
[!INCLUDE[vs2017banner](../../includes/vs2017banner.md)]

Модуль отладки (DE) обычно отправляет одно из следующих событий в качестве последнего события запуска:  
  
- Событие точки входа при присоединении к недавно запущенной программе  
  
- Событие завершения загрузки, если присоединение к уже запущенной программе  
  
  Оба эти события останавливают события, а это означает, что метод DE ждет ответа пользователя с помощью интегрированной среды разработки. Дополнительные сведения см. в разделе [Рабочие режимы](../../extensibility/debugger/operational-modes.md).  
  
## <a name="stopping-event"></a>Событие остановки  
 При отправке события остановки в сеанс отладки:  
  
1. Программа и поток, содержащие текущий указатель инструкции, можно получить из интерфейса событий.  
  
2. Интегрированная среда разработки определяет текущий файл исходного кода и его расположение, которое выделяется в редакторе.  
  
3. Сеанс отладки обычно реагирует на это первое событие остановки, вызвав метод **Continue** программы.  
  
4. Затем программа выполняется до тех пор, пока не встретится условие остановки, например достижение точки останова, в результате чего в сеанс отладки отправляется событие точки останова. Событие точки останова — это событие остановки, а метод DE — ждет ответа пользователя.  
  
5. Если пользователь решает выполнить функцию "шаг с заходом", "больше" или "выход из функции", интегрированная среда разработки запрашивает у сеанса отладки вызов `Step` метода программы, передавая ему единицу шага (инструкцию, инструкцию или строку) и тип шага, то есть необходимость перехода к функции или ее пошагового выполнения. После завершения этого шага параметр DE отправляет событие завершения шага в сеанс отладки, который является событием остановки.  
  
    -или-  
  
    Если пользователь выбирает продолжение выполнения из текущего указателя инструкции, интегрированная среда разработки запрашивает у сеанса отладки вызов метода **EXECUTE** программы. Программа возобновляет выполнение до тех пор, пока не встретится следующее условие остановки.  
  
    -или-  
  
    Если сеанс отладки должен игнорировать определенное событие остановки, сеанс отладки вызывает метод **Continue** программы. Если программа выполняла шаг с заходом в функцию, а также или из нее при обнаружении состояния останова, это действие продолжится.  
  
   Программно, когда метод «DE» обнаруживает состояние «останова», он отправляет такие события остановки, как [IDebugLoadCompleteEvent2](../../extensibility/debugger/reference/idebugloadcompleteevent2.md) или [IDebugEntryPointEvent2](../../extensibility/debugger/reference/idebugentrypointevent2.md) , в Диспетчер отладки сеансов (SDM) с помощью интерфейса [IDebugEventCallback2](../../extensibility/debugger/reference/idebugeventcallback2.md) . Интерфейс DE передает интерфейсы [IDebugProgram2](../../extensibility/debugger/reference/idebugprogram2.md) и [IDebugThread2](../../extensibility/debugger/reference/idebugthread2.md) , представляющие программу, и поток, содержащий текущий указатель инструкции. Модель SDM вызывает [IDebugThread2:: енумфрамеинфо](../../extensibility/debugger/reference/idebugthread2-enumframeinfo.md) для получения верхнего кадра стека и вызывает [IDebugStackFrame2:: жетдокументконтекст](../../extensibility/debugger/reference/idebugstackframe2-getdocumentcontext.md) для получения контекста документа, связанного с текущим указателем инструкции. Этот контекст документа обычно представляет собой имя файла исходного кода, строку и номер столбца. Интегрированная среда разработки использует их для выделения исходного кода, содержащего текущий указатель инструкции.  
  
   SDM обычно реагирует на это первое событие остановки, вызвав [IDebugProgram2:: Continue](../../extensibility/debugger/reference/idebugprogram2-continue.md). Затем программа выполняется до тех пор, пока не встретится условие остановки, например достижение точки останова, в результате чего [интерфейс IDebugBreakpointEvent2](../../extensibility/debugger/reference/idebugbreakpointevent2.md) отправляется в SDM. Событие точки останова — это событие остановки, а метод DE — ждет ответа пользователя.  
  
   Если пользователь выбирает функцию "шаг с заходом", "больше" или "вне функции", интегрированная среда разработки запрашивает у SDM вызов [IDebugProgram2:: Step](../../extensibility/debugger/reference/idebugprogram2-step.md), передавая ему [степунит](../../extensibility/debugger/reference/stepunit.md) (инструкцию, инструкцию или строку) и [степкинд](../../extensibility/debugger/reference/stepkind.md), т. е. выполнять шаг с заходом, выход из функции или из нее. После завершения этого шага параметр DE отправляет интерфейс [IDebugStepCompleteEvent2](../../extensibility/debugger/reference/idebugstepcompleteevent2.md) в SDM, который является событием остановки.  
  
   Если пользователь выбирает продолжение выполнения из текущего указателя инструкции, интегрированная среда разработки запрашивает у SDM вызов [IDebugProgram2:: Execute](../../extensibility/debugger/reference/idebugprogram2-execute.md). Программа возобновляет выполнение до тех пор, пока не встретится следующее условие остановки.  
  
   Если пакет отладки должен игнорировать определенное событие остановки, пакет отладки вызывает SDM, который вызывает [IDebugProgram2:: Continue](../../extensibility/debugger/reference/idebugprogram2-continue.md). Если программа выполняла шаг с заходом в функцию, а также или из нее при обнаружении состояния останова, это действие продолжится. Это означает, что программа поддерживает пошаговое состояние, чтобы он знал, как продолжить.  
  
   Вызовы `Step` , **выполняемые**и ПРОЯВЛЯЮЩИЕСЯ в модели SDM **, выполняются** асинхронно, что означает, что модель SDM предполагает, что вызов будет быстро возвращаться. Если метод DE отправляет событие остановки SDM в том же потоке до `Step` , **EXECUTE**или **Continue** , то модель SDM перестает отвечать на запросы.  
  
## <a name="see-also"></a>См. также:  
 [Задачи отладки](../../extensibility/debugger/debugging-tasks.md)
