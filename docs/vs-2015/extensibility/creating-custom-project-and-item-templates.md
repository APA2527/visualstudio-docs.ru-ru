---
title: Создание пользовательских шаблонов проектов и элементов
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-sdk
ms.topic: conceptual
ms.assetid: 586da5dc-f678-402b-afd0-0332959fd7a6
caps.latest.revision: 11
author: gregvanl
ms.author: gregvanl
manager: jillfra
ms.openlocfilehash: c6875e13baa83d349020f50a3fe448a87ec5fd30
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "68197400"
---
# <a name="creating-custom-project-and-item-templates"></a>Создание пользовательских шаблонов проектов и элементов
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Пакет SDK для Visual Studio включает шаблоны проектов, которые создают пользовательский шаблон проекта и пользовательский шаблон элемента. Эти шаблоны включают некоторые общие подстановки параметров и создаются в виде ZIP-файлов. Они не развертываются автоматически и недоступны в экспериментальном экземпляре. Скопируйте ZIP-файл в нужное расположение.

Шаблоны для создания шаблонов позволяют включать шаблоны в более крупные расширения. Включение шаблонов в расширения позволяет реализовать управление версиями в исходных файлах и создать группу проектов шаблонов в одном пакете VSIX.

Для основных сценариев создания шаблонов следует использовать мастер **экспорта шаблонов**, который сохраняет выходные данные в сжатом файле. Дополнительные сведения о создании базового шаблона см. в разделе [Создание шаблонов проектов и элементов](../ide/creating-project-and-item-templates.md).

Начиная с Visual Studio 2017, сканирование пользовательских шаблонов проектов и элементов больше не выполняется. Вместо этого расширение должно предоставлять файлы манифеста шаблона, в которых указано расположение установки этих шаблонов. Для обновления расширений VSIX можно использовать установку предварительной версии 2. При развертывании расширения с помощью MSI необходимо создать файлы манифеста шаблона вручную. Дополнительные сведения см. в статье [Обновление пользовательских шаблоны проектов и элементов для Visual Studio 2017](/visualstudio/extensibility/upgrading-custom-project-and-item-templates-for-visual-studio-2017?view=vs-2015). Схема манифеста шаблона описана в [справочнике по схеме манифеста шаблона Visual Studio](/visualstudio/extensibility/visual-studio-template-manifest-schema-reference).

## <a name="create-a-project-template"></a>Создание шаблона проекта

1. Создайте проект Project Template. Шаблон проекта можно найти в диалоговом окне **Новый проект** в Visual Basic или в папке **расширяемость** Visual C#.

     Шаблон создает файл класса, значок, файл .vstemplate, редактируемый файл проекта с именем ProjectTemplate.vbproj или ProjectTemplate.csproj, а также некоторые файлы, которые обычно создаются в других типах проектов, такие как файл resources.resx, файл AssemblyInfo и файл .settings. Каждый файл кода содержит общие подстановки параметров, если это необходимо.

2. Добавьте и удалите элементы в проекте в соответствии с требованиями проекта. Не удаляйте редактируемый файл проекта, файл AssemblyInfo и файл .vstemplate.

3. Обновите файл .vstemplate, чтобы в нем была отражена информация о добавленных и удаленных элементах проекта. Элемент [Project](../extensibility/project-element-visual-studio-templates.md) должен содержать элемент [ProjectItem](../extensibility/projectitem-element-visual-studio-item-templates.md) для каждого файла, который будет включен в шаблон.

4. Измените файлы кода и другое содержимое, доступное для пользователя, и добавьте соответствующие подстановки параметров.

5. Измените созданное содержимое в соответствии со своими потребностями.

6. Выполните построение проекта.

     Visual Studio создает файл ZIP, содержащий шаблон. Он не развертывается и недоступен в экспериментальном экземпляре.

## <a name="create-an-item-template"></a>Создание шаблона элемента

1. Создайте проект Item Template.

     Шаблон создает файл класса, значок, файл .vstemplate и файл AssemblyInfo. Файл класса содержит некоторые общие подстановки параметров.

2. Добавьте и удалите элементы в проекте в соответствии с требованиями проекта.

3. Обновите файл .vstemplate, чтобы в нем была отражена информация о добавленных и удаленных элементах проекта. Элемент [Project](../extensibility/project-element-visual-studio-templates.md) должен содержать элемент [ProjectItem](../extensibility/projectitem-element-visual-studio-item-templates.md) для каждого файла, который будет включен в шаблон.

4. Измените файлы кода и другое содержимое, доступное для пользователя, и добавьте соответствующие подстановки параметров.

5. Измените созданное содержимое в соответствии со своими потребностями.

6. Выполните построение проекта.

     Visual Studio создает сжатый файл, содержащий шаблон. Он не развертывается и недоступен в экспериментальном экземпляре.

## <a name="deploy-the-project-or-item-template"></a>Развертывание шаблона проекта или элемента

1. Создайте проект VSIX. Дополнительные сведения см. в разделе [шаблон проекта VSIX](../extensibility/vsix-project-template.md).

2. Задайте проект VSIX в качестве запускаемого проекта. В **Обозревателе решений** выберите узел проекта VSIX, щелкните его правой кнопкой мыши и выберите пункт **Назначить запускаемым проектом**.

3. Задайте проект для шаблона проекта (Project Template) в качестве ресурса для проекта VSIX. Откройте файл .vsixmanifest. Перейдите на вкладку **активы** и нажмите кнопку **создать**.

    1. В поле **Тип** задайте значение **Microsoft.VisualStudio.ProjectTemplate** или **Microsoft.VisualStudio.ItemTemplate**.

    2. В поле "Источник" выберите **Проект в текущем решении**, а затем проект, содержащий шаблон.

4. Нажмите клавишу F5, чтобы собрать решение. Откроется экспериментальный экземпляр.

5. Для проекта шаблона проекта шаблон проекта должен быть указан в диалоговом окне **Новый проект** (**файл/создать/проект**) в узле Visual C# или Visual Basic. Для проекта шаблона элемента вы должны увидеть шаблон элемента в диалоговом окне Добавление нового элемента (в **Обозреватель решений**выберите узел проекта и щелкните **Добавить/новый элемент**).

## <a name="see-also"></a>См. также раздел

- [Справочник по шаблонам Visual Studio](../ide/visual-studio-template-reference.md)