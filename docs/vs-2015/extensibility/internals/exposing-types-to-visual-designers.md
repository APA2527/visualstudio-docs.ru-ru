---
title: Предоставление типов для визуальных конструкторов | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-sdk
ms.topic: conceptual
helpviewer_keywords:
- types [Visual Studio SDK], exposing to visual designers
- designers [Visual Studio SDK], exposing types
- custom tools, exposing types to visual designers
ms.assetid: a7a32ad4-3a0a-4eb8-a6ac-491c42885639
caps.latest.revision: 12
ms.author: gregvanl
manager: jillfra
ms.openlocfilehash: f4d6c0e163b751f1873fdb941e85c273dcc4fde5
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "65691206"
---
# <a name="exposing-types-to-visual-designers"></a>Предоставление типов конструкторам визуальных элементов
[!INCLUDE[vs2017banner](../../includes/vs2017banner.md)]

[!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] для отображения визуального конструктора необходимо иметь доступ к определениям классов и типов во время разработки. Классы загружаются из предопределенного набора сборок, включающего полный набор зависимостей текущего проекта (ссылки и их зависимости). Также может потребоваться, чтобы визуальные конструкторы могли обращаться к классам и типам, определенным в файлах, созданных настраиваемыми инструментами.  
  
 [!INCLUDE[vbprvb](../../includes/vbprvb-md.md)] [!INCLUDE[csprcs](../../includes/csprcs-md.md)] Системы проектов и обеспечивают поддержку доступа к создаваемым классам и типам через временные переносимые исполняемые файлы (Временные PE). Любой файл, созданный пользовательским средством, можно скомпилировать во временную сборку, чтобы типы могли быть загружены из этих сборок и предоставлены конструкторам. Выходные данные каждого пользовательского инструмента компилируются в отдельный временный PE, и успех или неудача этой временной компиляции зависит только от того, можно ли компилировать созданный файл. Несмотря на то, что проект может не строиться как единое целое, отдельные Временные PE могут по-прежнему быть доступны для конструкторов.  
  
 Система проектов обеспечивает полную поддержку отслеживания изменений в выходном файле пользовательского средства при условии, что эти изменения являются результатом запуска пользовательского инструмента. При каждом запуске пользовательского инструмента создается новый временный PE-сообщения, и соответствующие уведомления отправляются в конструкторы.  
  
> [!NOTE]
> Так как файл исполняемого файла временной программы выполняется в фоновом режиме, в случае сбоя компиляции пользователю не будет сообщено об ошибке.  
  
 Пользовательские средства, использующие преимущества временной поддержки PE, должны соответствовать следующим правилам.  
  
- `GeneratesDesignTimeSource` в реестре должно быть задано значение 1.  
  
     Компиляция исполняемого файла программы не выполняется без этого параметра.  
  
- Созданный код должен быть на том же языке, что и глобальный параметр проекта.  
  
     Временный PE-содержимое компилируется независимо от того, какие отчеты пользовательское средство в качестве запрошенного расширения в <xref:Microsoft.VisualStudio.Shell.Interop.IVsSingleFileGenerator.DefaultExtension%2A> предоставлено, что в `GeneratesDesignTimeSource` реестре задано значение 1. Расширение не обязательно должно быть. vb,. cs или. ЖСЛ; Это может быть любое расширение.  
  
- Код, создаваемый пользовательским инструментом, должен быть допустимым и должен компилироваться самостоятельно с использованием только набора ссылок, имеющихся в проекте во время <xref:Microsoft.VisualStudio.Shell.Interop.IVsSingleFileGenerator.Generate%2A> выполнения.  
  
     При компиляции временного PE в компиляторе предоставляется только один исходный файл с данными пользовательского инструмента. Таким образом, Пользовательский инструмент, использующий временный PE, должен создавать выходные файлы, которые могут быть скомпилированы независимо от других файлов в проекте.  
  
## <a name="see-also"></a>См. также:  
 [Общие сведения об объекте BuildManager](https://msdn.microsoft.com/50080ec2-c1c9-412c-98ef-18d7f895e7fa)   
 [Реализация генераторов с одним файлом](../../extensibility/internals/implementing-single-file-generators.md)   
 [Определение пространства имен по умолчанию для проекта](../../misc/determining-the-default-namespace-of-a-project.md)   
 [Регистрация генераторов одного файла](../../extensibility/internals/registering-single-file-generators.md)
