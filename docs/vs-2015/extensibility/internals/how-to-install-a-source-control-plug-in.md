---
title: Практическое руководство. Установка подключаемого модуля системы управления версиями | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-sdk
ms.topic: conceptual
helpviewer_keywords:
- installation [Visual Studio SDK], source control plug-ins
- source control plug-ins, installing
ms.assetid: 9e2e01d9-7beb-42b2-99b2-86995578afda
caps.latest.revision: 33
ms.author: gregvanl
manager: jillfra
ms.openlocfilehash: 997e734f6d2ab6bcf70e3a4843ac66564683c79b
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63443315"
---
# <a name="how-to-install-a-source-control-plug-in"></a>Практическое руководство. Установка подключаемого модуля системы управления версиями
[!INCLUDE[vs2017banner](../../includes/vs2017banner.md)]

Создание подключаемого модуля системы управления версиями состоит из трех этапов:  
  
1. Создайте библиотеку DLL с помощью функции, определенные в разделе Справочник по API подключаемых модулей управления источника этой документации.  
  
2. Реализуйте функции, определяемые API подключаемых модулей управления источника. Когда [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] вызовов, убедитесь, интерфейсы и диалоговые окна доступны из подключаемого модуля.  
  
3. Зарегистрируйте библиотеку DLL, сделав соответствующие записи в реестр.  
  
## <a name="integration-with-visual-studio"></a>Интеграция с Visual Studio  
 [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] поддерживает элемент управления подключаемые версиями, которые соответствуют API подключаемых модулей управления источника.  
  
### <a name="registering-the-source-control-plug-in"></a>Регистрация подключаемого модуля системы управления версиями  
 Прежде чем выполняемую среду разработки (IDE) можно вызвать в системе управления версиями, его необходимо найти источник библиотеку DLL подключаемого модуля, который экспортирует API управления.  
  
##### <a name="to-register-the-source-control-plug-in-dll"></a>Чтобы зарегистрировать библиотеку DLL подключаемого модуля управления версиями  
  
1. Добавьте две записи в разделе HKEY_LOCAL_MACHINE в подраздел программного обеспечения, указывает имя подраздела вашей компании, следуют ваш раздел реестра, имя продукта. Шаблон — HKEY_LOCAL_MACHINE\SOFTWARE\\ *[название организации]*\\ *[имя продукта]*\\ *[запись]* = значение. Две записи всегда вызываются SCCServerName и данный параметр. Каждый представляет обычная строка.  
  
     Например если ваша компания называется корпорации Майкрософт и вашей системы управления версиями называется SourceSafe, то этот путь в реестре будет HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe. В этом подразделе первая запись SCCServerName, — это понятное пользователю строка, именования продукта. Вторая запись, данный параметр, — полный путь к источнику управления библиотеку DLL подключаемого модуля, потребуется соединиться с интегрированной среды разработки. Ниже представлен пример записи реестра.  
  
    |Пример записи реестра|Образец значения|  
    |---------------------------|------------------|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\SCCServerName|Microsoft Visual SourceSafe|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\SCCServerPath|c:\vss\win32\ssscc.dll|  
  
    > [!NOTE]
    > Данный параметр является полный путь к подключаемом модуле SourceSafe. Подключаемый модуль системы управления версиями будет использовать различные имена компании и продукте, но одинаковые пути записи реестра.  
  
2. Следующие необязательные параметры реестра можно использовать для изменения поведения подключаемый модуль системы управления версиями. Эти записи перейдите в аналогичный подраздел SccServerName и данный параметр.  
  
    - Операция HideInVisualStudioregistry можно использовать, если требуется запретить источника управления plug в отображаются в списке Выбор подключаемых модулей [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)]. Эта запись также повлияет на автоматическое переключение на подключаемый модуль системы управления версиями. Один из возможных способов использования для данной записи — Если вы предоставляете пакет системы управления версиями, который заменяет подключаемый модуль системы управления версиями, но вы хотите упростить для пользователя для переноса с помощью системы управления версиями, подключаемый модуль для пакета системы управления версиями. При установке пакета системы управления версиями, он устанавливает этот параметр реестра, который скрывает подключаемого модуля.  
  
         HideInVisualStudio является значением типа DWORD и имеет значение 1, чтобы скрыть подключаемый модуль или 0, чтобы показать подключаемого модуля. Если параметр не отображается, поведение по умолчанию — Показать, подключаемый модуль.  
  
    - Запись реестра DisableSccManager можно использовать для отключения или скрытия **запуска \<сервера системы управления версиями >** пункт меню, который обычно отображается в узле **файл**  ->   **Система управления версиями** подменю. Это меню параметр вызовы [SccRunScc](../../extensibility/sccrunscc-function.md) функции. Подключаемый модуль системы управления версиями могут не поддерживать внешнюю программу и поэтому может потребоваться отключить или скрыть даже **запуска** пункт меню.  
  
         DisableSccManager является значение DWORD имеет значение 0, чтобы включить **запуска \<сервера системы управления версиями >** пункт меню, равным 1 к отключении соответствующего пункта меню и значение 2, чтобы скрыть параметр меню. Если этот параметр реестра отсутствует, поведение по умолчанию — Показать пункт меню.  
  
    |Пример записи реестра|Образец значения|  
    |---------------------------|------------------|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\HideInVisualStudio|1|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\DisableSccManager|1|  
  
3. Добавьте подраздел SourceCodeControlProvider, в разделе HKEY_LOCAL_MACHINE в подраздел программного обеспечения.  
  
     В этом подразделе реестра ProviderRegKey присваивается строка, представляющая подраздела, помещенную в реестре на шаге 1. Шаблон — HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\ProviderRegKey = программного обеспечения\\ *[название организации]*\\ *[имя продукта]*.  
  
     Ниже приведен пример содержимого для такого подраздела.  
  
    |Запись реестра|Образец значения|  
    |--------------------|------------------|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\ProviderRegKey|SOFTWARE\Microsoft\SourceSafe|  
  
    > [!NOTE]
    > Подключаемый модуль системы управления версиями будет использовать те же подраздел и имен записей, но значение будет другим.  
  
4. Создайте подраздел с именем InstalledSCCProviders в подразделе SourceCodeControlProvider, а затем поместите одну запись в этом подразделе.  
  
     Имя этой записи понятное пользователю имя поставщика (то же как значение, указанное для операции SCCServerName), и значение, опять же, подраздел, созданное на шаге 1. Шаблон — HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\InstalledSCCProviders\\ *[отображаемое имя]* = программного обеспечения\\ *[название организации]* \\ *[имя продукта]*.  
  
     Пример:  
  
    |Пример записи реестра|Образец значения|  
    |---------------------------|------------------|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\InstalledSCCProviders\Microsoft Visual SourceSafe|SOFTWARE\Microsoft\SourceSafe|  
  
    > [!NOTE]
    > Может существовать несколько модулей системы управления версиями plug-зарегистрированные этим способом. Это как [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] находит все модулей на базе API подключаемых модулей управления источника.  
  
## <a name="how-an-ide-locates-the-dll"></a>Как интегрированная среда разработки определяет библиотеку DLL  
 [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] Среде IDE существует два способа поиска источника контролировать библиотеку DLL подключаемого модуля:  
  
- Найдите подключаемый модуль системы управления версиями по умолчанию и автоматически подключиться к нему.  
  
- Найти все зарегистрированные источник подключаемые модули управления, из которого пользователь выбирает один.  
  
  Для поиска библиотеки DLL в первый способ, IDE ищет в подразделе HKEY_LOCAL_MACHINE\Software\SourceCodeControlProvider для записи ProviderRegKey. Значение этого элемента указывает на другой раздел. Затем, IDE ищет запись с именем данный параметр в этом втором разделе, в разделе HKEY_LOCAL_MACHINE. Значение этого элемента указывает на библиотеку DLL интегрированной среды разработки.  
  
> [!NOTE]
> Интегрированной среды разработки не загружает библиотеки DLL из относительных путей (к примеру,.\NewProvider.DLL). Должен быть указан полный путь к DLL (например, c:\Providers\NewProvider.DLL). Это повышает безопасность интегрированной среды разработки, предотвращая загрузку несанкционированного или олицетворяемые DLL подключаемого модуля.  
  
 Для поиска библиотеки DLL в второй способ, IDE ищет в подразделе HKEY_LOCAL_MACHINE\Software\SourceCodeControlProvider\InstalledSCCProviders для всех записей<em>.</em> Каждая запись содержит имя и значение. Среда интегрированной разработки отобразит список этих имен пользователю<em>.</em> Когда пользователь выбирает имя, интегрированной среды разработки находит значение для выбранного имени, который указывает на раздел. IDE ищет запись с именем данный параметр в этом разделе, в разделе HKEY_LOCAL_MACHINE. Значение этого элемента указывает интегрированной среды разработки на правильный библиотеку DLL.  
  
 Подключаемый модуль системы управления версиями необходимо поддерживать оба способа поиска библиотеки DLL и, следовательно, задайте ProviderRegKey, перезаписав любую предыдущую установку. Что более важно он должен добавить себя в список InstalledSccProviders так что пользователь может выбрать какой подключаемый модуль системы управления версиями для использования.  
  
> [!NOTE]
> Так как используется раздел HKEY_LOCAL_MACHINE, подключаемый модуль системы управления только один источник можно зарегистрировать как по умолчанию модуль управления версиями на данном компьютере (Однако [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] позволяет определить, какие системы управления версиями подключаемого модуля они хотят использовать для конкретного решения). В процессе установки установите флажок, чтобы увидеть, если подключаемый модуль системы управления версиями уже; Если Да, попросите пользователя или не должна использоваться новой системы управления версиями подключаемого модуля, устанавливаемого по умолчанию. Во время удаления не удаляйте другие подразделы реестра, которые являются общими для всех модулей системы управления версиями plug-в HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider; Удалите только определенной SCC подраздела.  
  
## <a name="how-the-ide-detects-version-1213-support"></a>Как IDE обнаруживает поддерживаемые версии 1.2 или 1.3  
 Как does [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] подтверждающих функциональные возможности версии 1.2 и 1.3 подключаемый модуль поддерживает API подключаемых модулей управления источника? Чтобы объявить расширенные возможности, подключаемый модуль системы управления версиями необходимо реализовать соответствующую функцию.  
  
 Во-первых, [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] проверяет значение, возвращаемое вызовом [SccGetVersion](../../extensibility/sccgetversion-function.md). Его должен быть больше или равно 1.2.  
  
 Далее, [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] определяет, поддерживаются ли определенные новые возможности с помощью проверки `lpSccCaps` аргумент в [SccInitialize](../../extensibility/sccinitialize-function.md).  
  
 Если оба эти условия выполняются, может вызываться новые функции, поддерживаемые в версии 1.2 и 1.3.  
  
## <a name="see-also"></a>См. также  
 [Начало работы](../../extensibility/internals/getting-started-with-source-control-plug-ins.md)
