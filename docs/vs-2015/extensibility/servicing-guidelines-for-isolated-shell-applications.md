---
title: Рекомендации по обслуживанию для приложений изолированной оболочки | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-sdk
ms.topic: conceptual
helpviewer_keywords:
- Visual Studio Shell integrated mode, serviceability
- Shell integrated mode [Visual Studio], serviceability
ms.assetid: 747d1a47-b8b3-4e8b-93c0-768724be48f2
caps.latest.revision: 16
ms.author: gregvanl
manager: jillfra
ms.openlocfilehash: 093690c293ff6857eedc50d5eccc793d7d5bb114
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "68159267"
---
# <a name="servicing-guidelines-for-isolated-shell-applications"></a>Рекомендации по обслуживанию для приложений изолированной оболочки
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

При распространении приложения изолированной оболочки Visual Studio необходимо иметь возможность предоставлять обновления программного обеспечения для приложения после его установки. Для этого необходимо установить приложение с помощью файла установщика Microsoft (MSI). Такая установка позволяет распространять обновления программного обеспечения, предоставляемые корпорацией Майкрософт, для загрузки и использования клиентами без вмешательства пользователя.  
  
## <a name="servicing-requirements"></a>Требования к обслуживанию  
 Можно убедиться, что Установка изолированной оболочки может разрешить обновления, убедившись, что программа установки соответствует следующим трем критериям.  
  
### <a name="redistribute-by-using-an-msi"></a>Повторное распространение с помощью MSI  
 Для повторного распространения приложения необходимо использовать MSI-файл, так как MSI сохраняет удостоверение продукта и гарантирует, что приложение имеет физическое расположение на клиентском компьютере. Модули слияния (MSM-файлы) не предоставляют таких гарантий и не должны использоваться.  
  
### <a name="accounting-for-custom-actions"></a>Учет для настраиваемых действий  
 Настраиваемые действия — это нестандартные директивы установки в программе установщика. Настраиваемые действия изменяют такие параметры, как расположение файлов, параметры реестра, параметры пользователя или другие элементы установки. Настраиваемые действия могут манипулировать данными во время установки.  
  
 При использовании настраиваемых действий в программе установки необходимо убедиться, что каждое настраиваемое действие во время установки должно иметь соответствующее пользовательское действие, чтобы отменить действие, когда пользователь удаляет приложение. Если программе установки не удается предоставить соответствующее настраиваемое действие удаления, удаление приложения оставляет его частично установленным.  
  
- Если обновления программного обеспечения изменяют эти версии или хэш-значения, пользовательское действие, основанное на определенной версии файла или хэш-значений, завершится ошибкой. В этом случае пользовательское действие должно вручную обновить эти значения. Дополнительная проблема возникает, если версии файла или хэш-кода являются общими для разных версий продукта. Не используйте эту зависимость, когда это возможно.  
  
### <a name="accounting-for-shared-files"></a>Учет для общих файлов  
 Общие файлы имеют одинаковые имена и устанавливаются в одно расположение несколькими продуктами. Эти продукты могут различаться в зависимости от версии, единицы складского учета (SKU) или и того, и другого, и продукты могут сосуществовать на определенном компьютере. Однако общие файлы создают проблемы обслуживания по нескольким причинам:  
  
- Обновление общих файлов может вызвать проблемы совместимости приложений, так как обновление одного приложения может изменить версию файла, используемого вторым приложением, которое не было обновлено. Установщики для продуктов, которые совместно используют файлы, подсчитывают ссылки на общие файлы. Таким образом, удаление продукта не влияет на общие файлы, кроме уменьшения числа установленных экземпляров.  
  
- Установщик быстрого исправления исправлений (QFE) восстанавливает версии файлов до версий продуктов, обслуживаемых установщиком QFE. Этот процесс может привести к прерыванию приложения, которое доставило обновленный общий файл.
