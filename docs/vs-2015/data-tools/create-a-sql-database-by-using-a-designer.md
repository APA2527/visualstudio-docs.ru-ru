---
title: Создание базы данных SQL с помощью конструктора | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-data-tools
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
- aspx
helpviewer_keywords:
- SQL Server Express
- local data
- LocalDB
- SQLEXPRESS
- data [Visual Studio], Local data
- SQL Express
- data [Visual Studio], walkthroughs
- databases, creating
- database files, creating
ms.assetid: 99c2b06f-47aa-414e-8057-a3453712fd23
caps.latest.revision: 54
author: jillre
ms.author: jillfra
manager: jillfra
robots: noindex,nofollow
ms.openlocfilehash: 33b97050f04fd23a9fa3b6c3c641faa5dfe4802f
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "72651064"
---
# <a name="create-a-sql-database-by-using-a-designer"></a>Создание базы данных SQL с помощью конструктора
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Основные задачи, например добавление таблиц и определение столбцов, можно изучить с помощью Visual Studio для создания и обновления файла локальной базы данных в SQL Server Express LocalDB. Изучив данное пошаговое руководство, вы можете ознакомиться с расширенными функциональными возможностями, используя свою локальную базу данных в качестве отправной точки для работы с другими пошаговыми руководствами, требующими использование базы данных.

 Базу данных также можно создать с помощью SQL Server Management Studio (отдельной загрузки) или инструкций Transact-SQL в окне инструментов **Обозреватель объектов SQL Server** в Visual Studio.

 В этом пошаговом руководстве вам предстоит выполнить следующие задачи:

- [Создание проекта и файла локальной базы данных](../data-tools/create-a-sql-database-by-using-a-designer.md#BKMK_CreateNewSQLDB)

- [Создание таблиц, столбцов, первичных ключей и внешних ключей](../data-tools/create-a-sql-database-by-using-a-designer.md#BKMK_CreateNewTbls)

- [Заполнение таблиц данными](../data-tools/create-a-sql-database-by-using-a-designer.md#BKMK_Populating)

## <a name="prerequisites"></a>Предварительные требования
 Для выполнения этого пошагового руководства убедитесь, что SQL Server Data Tools установлен. В меню **вид** отобразится **Обозреватель объектов SQL Server**. Если это не так, перейдите в раздел **Установка и удаление программ**, щелкните **Visual Studio 2015**, выберите **изменить**и установите флажок рядом с **SQL Server Data Tools**.

## <a name="create-a-project-and-a-local-database-file"></a><a name="BKMK_CreateNewSQLDB"></a> Создание проекта и файла локальной базы данных

#### <a name="to-create-a-project-and-a-database-file"></a>Создание проекта и файла базы данных

1. Создайте Windows Forms проект с именем `SampleDatabaseWalkthrough` .

2. В строке меню выберите **проект**  >  **Добавить новый элемент**.

3. В списке шаблонов элементов прокрутите вниз и выберите **база данных на основе службы**.

    ![Диалоговое окно ''Шаблоны элементов''](../data-tools/media/raddata-vsitemtemplates.png "раддата Вситемтемплатес")

4. Присвойте базе данных имя **сампледатабасе**, а затем нажмите кнопку **Добавить** .

5. Если окно **Источники данных** не открыто, откройте его, нажав клавиши Shift + Alt + D, или в строке меню выберите **Просмотреть**  >  **другие**  >  **Источники данных**Windows.

6. В окне **Источники данных** выберите ссылку **Добавить новый источник данных** .

7. В **мастере настройки источника данных**нажмите кнопку **Далее** четыре раза, чтобы принять параметры по умолчанию, а затем нажмите кнопку **Готово** .

   В окне свойств базы данных отображается строка подключения и расположение основного MDF-файла базы данных. Вы увидите, что файл базы данных находится в папке проекта.

- В Visual Studio выберите **Просмотреть**  >  **Обозреватель объектов SQL Server** , если это окно еще не открыто. Откройте окно Свойства, развернув узел **подключения к данным** , открыв контекстное меню для сампледатабасе. mdf и выбрав пункт **свойства**.

- Кроме того, можно выбрать пункт **Просмотреть**  >  **Обозреватель сервера**, если это окно еще не открыто. Откройте окно Свойства, развернув узел **подключения к данным** . Откройте контекстное меню для Сампледатабасе. mdf и выберите пункт **Свойства**.

## <a name="create-tables-columns-primary-keys-and-foreign-keys"></a><a name="BKMK_CreateNewTbls"></a> Создание таблиц, столбцов, первичных ключей и внешних ключей
 В этом разделе создается несколько таблиц, первичный ключ в каждой таблице и несколько строк данных выборки. В следующем пошаговом руководстве можно получить сведения о том, как эта информация может выглядеть в приложении. Здесь также создается внешний ключ, чтобы определить, как записи в одной таблице могут соотноситься с записями в другой таблице.

#### <a name="to-create-the-customers-table"></a>Чтобы создать таблицу Customers

1. В **Обозреватель сервера** или **Обозреватель объектов SQL Server**разверните узел **подключения к данным** , а затем узел **сампледатабасе. mdf** .

2. Откройте контекстное меню для **таблиц**и выберите команду **Добавить новую таблицу**.

     Будет открыт **Конструктор таблиц**, отобразится сетка с одной строкой по умолчанию, которая представляет один столбец в создаваемой таблице. Путем добавления строк в сетку будут добавлены столбцы в таблицу.

3. В сетке добавьте строку для каждой из следующих записей.

    |Имя столбца|Тип данных|Разрешить значения null|
    |-----------------|---------------|-----------------|
    |`CustomerID`|`nchar(5)`|False (не установлен)|
    |`CompanyName`|`nvarchar(50)`|False (не установлен)|
    |`ContactName`|`nvarchar (50)`|True (установлен)|
    |`Phone`|`nvarchar (24)`|True (установлен)|

4. Откройте контекстное меню `CustomerID` строки и выберите **Задать первичный ключ**.

5. Откройте контекстное меню строки по умолчанию и выберите **Удалить**.

6. Назовите таблицу "Клиенты" путем обновления первой строки в области скриптов, как показано в следующем примере:

    ```
    CREATE TABLE [dbo].[Customers]
    ```

     Отобразятся примерно следующие сведения:

     ![конструктор таблиц](../data-tools/media/raddata-table-designer.png "раддата конструктор таблиц")

7. В левом верхнем углу **Конструктор таблиц**нажмите кнопку **Обновить** .

8. В диалоговом окне **Предварительный просмотр обновлений базы данных** нажмите кнопку **обновить базу данных** .

     Ваши изменения сохраняются в файл локальной базы данных.

#### <a name="to-create-the-orders-table"></a>Чтобы создать таблицу Orders

1. Создайте еще одну таблицу, а затем добавьте строку для каждой записи следующей таблицы.

    |Имя столбца|Тип данных|Разрешить значения null|
    |-----------------|---------------|-----------------|
    |`OrderID`|`int`|False (не установлен)|
    |`CustomerID`|`nchar(5)`|False (не установлен)|
    |`OrderDate`|`datetime`|True (установлен)|
    |`OrderQuantity`|`int`|True (установлен)|

2. Задайте **OrderID** в качестве первичного ключа, а затем удалите строку по умолчанию.

3. Назовите таблицу "Заказы" путем обновления первой строки в области скриптов, как показано в следующем примере:

    ```
    CREATE TABLE [dbo].[Orders]
    ```

4. В левом верхнем углу **Конструктор таблиц**нажмите кнопку **Обновить** .

5. В диалоговом окне **Предварительный просмотр обновлений базы данных** нажмите кнопку **обновить базу данных** .

     Ваши изменения сохраняются в файл локальной базы данных.

#### <a name="to-create-a-foreign-key"></a>Создание внешнего ключа

1. В области контекст в правой части сетки откройте контекстное меню для **внешних ключей**, а затем выберите **Добавить новый внешний ключ**, как показано на следующем рисунке.

     ![Добавление внешнего ключа в конструкторе таблиц](../data-tools/media/foreignkey.png "ForeignKey")

2. В появившемся текстовом поле замените **ToTable** на `Customers` .

3. На панели T-SQL обновите последнюю строку, чтобы она соответствовала следующему примеру:

    ```
    CONSTRAINT [FK_Orders_Customers] FOREIGN KEY ([CustomerID]) REFERENCES [Customers]([CustomerID])
    ```

4. В левом верхнем углу **Конструктор таблиц**нажмите кнопку **Обновить** .

5. В диалоговом окне **Предварительный просмотр обновлений базы данных** нажмите кнопку **обновить базу данных** .

     Ваши изменения сохраняются в файл локальной базы данных.

## <a name="populate-the-tables-with-data"></a><a name="BKMK_Populating"></a> Заполнение таблиц данными

#### <a name="to-populate-the-tables-with-data"></a>Заполнение таблиц данными

1. В **Обозреватель сервера** или **Обозреватель объектов SQL Server**разверните узел образца базы данных.

2. Откройте контекстное меню для узла **таблицы** , выберите **Обновить**, а затем разверните узел **таблицы** .

3. Откройте контекстное меню таблицы Customers и выберите команду **отобразить данные таблицы**.

4. Добавьте любые данные для по крайней мере трех клиентов.

     Можно указать любые пять символов как ИД клиентов, но хотя бы один нужно выбрать и запомнить для дальнейшего использования в этой процедуре.

5. Откройте контекстное меню таблицы Orders и выберите пункт **отобразить данные таблицы**.

6. Добавьте данные для как минимум трех заказов.

    > [!IMPORTANT]
    > Убедитесь, что все идентификаторы заказов и количества заказов — целые числа, и каждый идентификатор клиента соответствует значению, указанному в столбце CustomerID таблицы клиентов.

7. В строке меню выберите **файл**  >  **сохранить все**.

8. В строке меню выберите **файл**  >  **Закрыть решение**.

    > [!NOTE]
    > Рекомендуется создать резервную копию только что созданного файла базы данных путем его копирования с последующей вставкой в другое место или присвоения копии другого имени.

## <a name="next-steps"></a>Next Steps
 Теперь, когда у вас есть файл локальной базы данных с некоторыми образцами данных, можно выполнить любое из пошаговых руководств, демонстрирующих задачи базы данных.
