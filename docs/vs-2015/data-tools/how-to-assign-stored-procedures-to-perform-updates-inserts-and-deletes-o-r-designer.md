---
title: Практическое руководство. Назначение хранимых процедур для выполнения обновлений, вставок и удалений (реляционный конструктор объектов) | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-data-tools
ms.topic: conceptual
ms.assetid: e88224ab-ff61-4a3a-b6b8-6f3694546cac
caps.latest.revision: 5
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: 1b5834e00cfaf43d1e5230ffbb221dbd5044d687
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63386831"
---
# <a name="how-to-assign-stored-procedures-to-perform-updates-inserts-and-deletes-or-designer"></a>Практическое руководство. назначение хранимых процедур для выполнения обновлений, вставок и удалений (реляционный конструктор объектов)
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Сохраненные процедуры можно добавлять в реляционный конструктор объектов и выполнять как обычные методы <xref:System.Data.Linq.DataContext>. Они также могут использоваться для переопределения [!INCLUDE[vbtecdlinq](../includes/vbtecdlinq-md.md)] поведение во время выполнения, которая выполняет вставки, обновления и удаления, когда изменения сохраняются из классов сущностей в базу данных (например, при вызове <xref:System.Data.Linq.DataContext.SubmitChanges%2A> метод).  
  
> [!NOTE]
> Если хранимые процедуры возвращают значения, которые должны отправляться обратно на клиент (например, значения, вычисляемые в хранимой процедуре), создайте в хранимых процедурах выходные параметры. Если использовать выходные параметры невозможно, то вместо применения переопределений, созданных реляционным конструктором объектов, реализуйте разделяемый метод. Элементы, сопоставляемые со значениями, созданными базой данных, должны получать соответствующие значения после успешного завершения операций INSERT или UPDATE. Дополнительные сведения см. в разделе [обязанности разработчика в переопределении поведения по умолчанию](http://msdn.microsoft.com/library/c6909ddd-e053-46a8-980c-0e12a9797be1).  
  
> [!NOTE]
> [!INCLUDE[vbtecdlinq](../includes/vbtecdlinq-md.md)] автоматически обрабатывает значения, генерируемые в базе данных, на принадлежность к столбцам ключей (автоприращение), rowguidcol (созданный базой данных уникальный идентификатор GUID) и столбцам отметок времени. Генерируемые базой данных значения в других типах столбцов будут неожиданно давать нулевое значение. Для возврата генерируемых базой данных значений нужно вручную задать <xref:System.Data.Linq.Mapping.ColumnAttribute.IsDbGenerated%2A> в `true` и <xref:System.Data.Linq.Mapping.ColumnAttribute.AutoSync%2A> в одно из следующих: <xref:System.Data.Linq.Mapping.AutoSync>, <xref:System.Data.Linq.Mapping.AutoSync> или <xref:System.Data.Linq.Mapping.AutoSync>.  
  
## <a name="configuring-the-update-behavior-of-an-entity-class"></a>Конфигурирование Поведения обновления Класса сущностей  
 По умолчанию, логика обновления базы данных (Вставки, Обновления и Удаления) с изменениями данных классов сущностей [!INCLUDE[vbtecdlinq](../includes/vbtecdlinq-md.md)] обеспечивается средой выполнения [!INCLUDE[vbtecdlinq](../includes/vbtecdlinq-md.md)]. Среда выполнения по умолчанию создает команды Insert, Update и Delete, которые основаны на схеме таблицы (столбца и информация о первичных ключах). Когда поведение по умолчанию не требуется, можно конфигурировать поведение обновления, назначив конкретные сохраненные процедуры для выполнения команд вставки, обновления и удаления, необходимых для работы с данными в таблице. Можно также сделать это, когда поведение по умолчанию не сгенерировано, например, когда ваши классы сущностей сопоставляются с представлениями. Наконец, можно отменить поведение обновления по умолчанию, когда база данных требует доступа к таблице через сохраненные процедуры.  
  
 [!INCLUDE[note_settings_general](../includes/note-settings-general-md.md)]  
  
#### <a name="to-assign-stored-procedures-to-override-the-default-behavior-of-an-entity-class"></a>Чтобы назначить сохраненные процедуры для переопределения заданного по умолчанию поведения класса сущностей  
  
1. Откройте файл **LINQ to SQL** в конструкторе. (Дважды щелкните файл DBML-файл в **обозревателе решений**.)  
  
2. В **обозревателя серверов**/**обозреватель баз данных**, разверните **хранимые процедуры** и найдите сохраненные процедуры, которые вы хотите использовать для вставки, обновления, и/или удалить команды класса сущностей.  
  
3. Перетащите сохраненную процедуру на реляционный конструктор объектов.  
  
     Сохраненная процедура добавляется в область методов как метод <xref:System.Data.Linq.DataContext>. Дополнительные сведения см. в разделе [методы DataContext (реляционный конструктор объектов)](../data-tools/datacontext-methods-o-r-designer.md).  
  
4. Выберите класс сущностей, для которого вы хотите использовать сохраненную процедуру для выполнения обновлений.  
  
5. В окне **Свойства** выберите команду для переопределения (**Вставить**, **Обновить** или **Удалить**).  
  
6. Нажмите кнопку с многоточием (...) рядом с полем **Использовать среду выполнения**, чтобы открыть диалоговое окно **Настройка поведения**.  
  
7. Выберите **Настроить**.  
  
8. Выберите нужную сохраненную процедуру в списке **Настроить**.  
  
9. Проверьте список **Аргументы метода** и **Свойства класса**, чтобы убедиться, что **Аргументы метода** сопоставляются соответствующим **Свойствам класса**. Сопоставьте аргументы исходного метода (Original_*Имя_аргумента*) исходным свойствам (*PropertyName* (исходное)) для команд Update и Delete.  
  
    > [!NOTE]
    > По умолчанию аргументы метода сопоставляются со свойствами класса, если их имена совпадают. Если имена свойств были изменены и больше не совпадают в таблице и в классе сущностей, то может потребоваться выбор эквивалентного свойства класса для сопоставления, если конструктор не сможет определить правильное сопоставление.  
  
10. Нажмите кнопку **OK** или кнопку **Применить**.  
  
    > [!NOTE]
    > Можно продолжить настройку поведения для каждого сочетания класса и поведения при условии, что после каждого изменения будет производиться нажатие кнопки **Применить**. Если изменить класс или поведения, прежде чем нажимать кнопку **применить**, предоставляя возможность применить все изменения, появится диалоговое окно предупреждения.  
  
     Чтобы возвратиться к использованию логики среды выполнения по умолчанию наличие обновлений, нажмите кнопку с многоточием рядом с Insert, Update или удаления в **свойства** окна, а затем выберите **использовать среду выполнения** в  **Настроить поведение** диалоговое окно.  
  
## <a name="see-also"></a>См. также  
 [Средства LINQ to SQL в Visual Studio](../data-tools/linq-to-sql-tools-in-visual-studio2.md)   
 [Методы DataContext (реляционный конструктор объектов)](../data-tools/datacontext-methods-o-r-designer.md)   
 [Пошаговое руководство: Создание классов LINQ to SQL (реляционный конструктор объектов)](http://msdn.microsoft.com/library/35aad4a4-2e8a-46e2-ae09-5fbfd333c233)   
 [LINQ to SQL](http://msdn.microsoft.com/library/73d13345-eece-471a-af40-4cc7a2f11655)   
 [Операции вставки, обновления и удаления](http://msdn.microsoft.com/library/26a43a4f-83c9-4732-806d-bb23aad0ff6b)
