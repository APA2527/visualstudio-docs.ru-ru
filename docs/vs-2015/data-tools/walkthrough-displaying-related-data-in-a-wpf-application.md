---
title: Пошаговое руководство. Отображение связанных данных в приложении WPF | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-data-tools
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
- aspx
helpviewer_keywords:
- WPF, data binding in Visual Studio
- WPF data binding [Visual Studio], walkthroughs
- WPF Designer, data binding
ms.assetid: 5c48f188-e9c4-40a6-97d9-67cdb2f90127
caps.latest.revision: 25
author: gewarren
ms.author: gewarren
manager: jillfra
robots: noindex,nofollow
ms.openlocfilehash: c7cd8a48092c39048d52a7ebe9cd27163ba32110
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63424782"
---
# <a name="walkthrough-displaying-related-data-in-a-wpf-application"></a>Пошаговое руководство. Отображение связанных данных в приложении WPF
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

В этом пошаговом руководстве вы создадите приложение WPF, в котором отображаются данные из таблиц базы данных, которые имеют связь «родители потомки». Данные инкапсулированы в сущностях в модели EDM. Родительская сущность содержит общие сведения о наборе заказов. Каждое свойство данной сущности привязан к другой элемент управления в приложении. Дочерняя сущность содержит подробные сведения о каждом заказе. Этот набор данных привязывается к <xref:System.Windows.Controls.DataGrid> элемента управления.  
  
 В данном пошаговом руководстве рассмотрены следующие задачи:  
  
- Создание приложения WPF и модели EDM, созданной из данных в базе данных AdventureWorksLT.  
  
- Создание набора элементов управления с привязкой к данным, которые отображают Общие сведения о наборе заказов. Создание элементов управления путем перетаскивания сущности из родительского **источников данных** окно, чтобы **конструктор WPF**.  
  
- Создание <xref:System.Windows.Controls.DataGrid> выбранным элемент управления, в которой отображаются связанные сведения для каждого заказа. Создание элементов управления путем перетаскивания сущности из дочерних **источников данных** в в окно **конструктор WPF**.  
  
   [!INCLUDE[note_settings_general](../includes/note-settings-general-md.md)]  
  
## <a name="prerequisites"></a>Предварительные требования  
 Ниже приведены компоненты, необходимые для выполнения данного пошагового руководства.  
  
- [!INCLUDE[vsprvs](../includes/vsprvs-md.md)].  
  
- Доступ к запущенному экземпляру SQL Server или SQL Server Express с подключенной учебной базой данных AdventureWorksLT. Можно загрузить базу данных AdventureWorksLT с [веб-сайте CodePlex](http://go.microsoft.com/fwlink/?linkid=87843).  
  
  Перед изучением приведенных ниже концепций будет полезно, хотя и не обязательно, ознакомиться со следующим пошаговым руководством.  
  
- Модели EDM и ADO.NET Entity Framework. Дополнительные сведения см. в разделе [Обзор Entity Framework](http://msdn.microsoft.com/library/a2166b3d-d8ba-4a0a-8552-6ba1e3eaaee0).  
  
- Работа с Конструктором WPF. Дополнительные сведения см. в разделе [WPF и Silverlight Обзор конструктора](http://msdn.microsoft.com/570b7a5c-0c86-4326-a371-c9b63378fc62).  
  
- Привязка данных WPF. Более подробную информацию см. в разделе [Общие сведения о связывании данных](http://msdn.microsoft.com/library/c707c95f-7811-401d-956e-2fffd019a211).  
  
## <a name="creating-the-project"></a>Создание проекта  
 Создайте новый проект WPF для отображения записей заказов.  
  
#### <a name="to-create-a-new-wpf-project"></a>Создание нового проекта WPF  
  
1. Запустите Visual Studio.  
  
2. В меню **Файл** выберите пункт **Создать**, а затем команду **Проект**.  
  
3. Разверните **Visual C#** или **Visual Basic**, а затем выберите **Windows**.  
  
4. Убедитесь, что **.NET Framework 4** выбран в поле со списком в верхней части диалогового окна. <xref:System.Windows.Controls.DataGrid> Элемент управления, который используется в этом пошаговом руководстве можно использовать только в .NET Framework 4.  
  
5. Выберите шаблон проекта **Приложение WPF**.  
  
6. В поле **Имя файла** введите `AdventureWorksOrdersViewer`.  
  
7. Нажмите кнопку **ОК**.  
  
     Visual Studio создает `AdventureWorksOrdersViewer` проекта.  
  
## <a name="creating-an-entity-data-model-for-the-application"></a>Создание модели EDM для приложения  
 Перед созданием элементов управления с привязкой к данным нужно определить модель данных для своего приложения и добавить ее в окно **Источники данных**. В этом пошаговом руководстве модели данных является моделью EDM.  
  
#### <a name="to-create-an-entity-data-model"></a>Создание модели EDM  
  
1. На **данных** меню, щелкните **добавить новый источник данных** открыть **мастер настройки источника данных**.  
  
2. На **Выбор типа источника данных** щелкните **базы данных**, а затем нажмите кнопку **Далее**.  
  
3. На **Выбор модели базы данных** щелкните **модели EDM**, а затем нажмите кнопку **Далее**.  
  
4. На **Выбор содержимого модели** щелкните **создать из базы данных**, а затем нажмите кнопку **Далее**.  
  
5. На **Выбор подключения к данным** выполните одно из следующих:  
  
   - Если подключение к учебной базе данных AdventureWorksLT доступно в раскрывающемся списке, то выберите его.  
  
      -или-  
  
   - Нажмите кнопку **новое подключение** и создайте подключение к базе данных AdventureWorksLT.  
  
     Убедитесь, что **сохранить настройки подключения сущности в App.Config как** параметр выбран и нажмите кнопку **Далее**.  
  
6. На **Choose Your Database Objects** странице, разверните узел **таблиц**, а затем выберите следующие таблицы:  
  
   - **SalesOrderDetail**  
  
   - **SalesOrderHeader**  
  
7. Нажмите кнопку **Готово**.  
  
8. Выполните построение проекта.  
  
## <a name="creating-data-bound-controls-that-display-the-orders"></a>Создание привязки данных элементов управления, отображающих заказы  
 Создание элементов управления, отображающих записей заказов путем перетаскивания `SalesOrderHeaders` сущность из **источников данных** окно в конструктор WPF.  
  
#### <a name="to-create-data-bound-controls-that-display-the-order-records"></a>Для создания элементов управления с привязкой к данным, отображающие записи заказа  
  
1. В **обозревателе решений**, дважды щелкните файл MainWindow.xaml.  
  
    Открывается окно в Конструкторе WPF.  
  
2. Редактирование XAML таким образом **высота** и **ширины** задано значение 800  
  
3. В **источников данных** окно, щелкните стрелку раскрывающегося меню **SalesOrderHeaders** узел и выберите **сведения**.  
  
4. Разверните узел **SalesOrderHeaders**.  
  
5. Щелкните стрелку раскрывающегося меню рядом с **SalesOrderID** и выберите **ComboBox**.  
  
6. Для каждого из следующих дочерних узлов **SalesOrderHeaders** узел, щелкните стрелку раскрывающегося меню рядом с узлом и выберите **None**:  
  
   - **RevisionNumber**  
  
   - **OnlineOrderFlag**  
  
   - **ShipToAddressID**  
  
   - **BillToAddressID**  
  
   - **CreditCardApprovalCode**  
  
   - **Промежуточный итог**  
  
   - **TaxAmt**  
  
   - **Freight**  
  
   - **rowguid**  
  
   - **ModifiedDate**  
  
     Это действие не позволяет Visual Studio создать элементы управления с привязкой к данным для этих узлов на следующем шаге. В данном пошаговом руководстве подразумевается, что конечному пользователю не требуется просматривать эти данные.  
  
7. Из **источников данных** окно, перетащите **SalesOrderHeaders** узла в окне **конструктор WPF**.  
  
    Visual Studio создает XAML, который создает набор элементов управления, привязанных к данным в **SalesOrderHeaders** сущности и код, который загружает данные. Дополнительные сведения о созданных XAML и кода, см. в разделе [элементы управления WPF, привязка к данным в Visual Studio](../data-tools/bind-wpf-controls-to-data-in-visual-studio1.md).  
  
8. В конструкторе щелкните поле со списком рядом **идентификатор заказа на продажу** метки.  
  
9. В окне **Свойства** установите флажок рядом со свойством **IsReadOnly**.  
  
## <a name="creating-a-datagrid-that-displays-the-order-details"></a>Создание элемента управления DataGrid, которая отображает сведения о заказе  
 Создание <xref:System.Windows.Controls.DataGrid> элемент управления, отображающий сведения о заказе, перетащив `SalesOrderDetails` сущность из **источников данных** окно в конструктор WPF.  
  
#### <a name="to-create-a-datagrid-that-displays-the-order-details"></a>Чтобы создать элемент управления DataGrid, отображающий сведения о заказе  
  
1. В **источников данных** окна, найдите **SalesOrderDetails** узел, который является дочерним объектом **SalesOrderHeaders** узла.  
  
   > [!NOTE]
   > Имеется также **SalesOrderDetails** узел, который является одноранговым в отношении **SalesOrderHeaders** узла. Убедитесь, что дочерний узел **SalesOrderHeaders** узла.  
  
2. Разверните дочерний **SalesOrderDetails** узла.  
  
3. Для каждого из следующих дочерних узлов **SalesOrderDetails** узел, щелкните стрелку раскрывающегося меню рядом с узлом и выберите **None**:  
  
   - **SalesOrderID**  
  
   - **SalesOrderDetailID**  
  
   - **rowguid**  
  
   - **ModifiedDate**  
  
     Это действие не позволяет добавлять эти данные в Visual Studio <xref:System.Windows.Controls.DataGrid> управления создается в следующем шаге. В данном пошаговом руководстве подразумевается, что конечному пользователю не требуется просматривать эти данные.  
  
4. Из **источников данных** окно, перетащите дочерний **SalesOrderDetails** узла в окне **конструктор WPF**.  
  
    Visual Studio создает XAML для определения новой привязкой к данным <xref:System.Windows.Controls.DataGrid> управления и элемент управления отображается в конструкторе. Visual Studio также обновляет созданный `GetSalesOrderHeadersQuery` метод в файл с выделенным кодом для включения данных в **SalesOrderDetails** сущности.  
  
## <a name="testing-the-application"></a>Тестирование приложения  
 Постройте и запустите приложение, чтобы убедиться, что он отображает все записи с заказами.  
  
#### <a name="to-test-the-application"></a>Тестирование приложения  
  
1. Нажмите клавишу **F5**.  
  
     Выполняется сборка и запуск приложения. Проверьте следующее.  
  
    - **Идентификатор заказа на продажу** отображает поле со списком **71774**. Это первый идентификатор заказа в сущности.  
  
    - Для каждого заказа, выберите в **идентификатор заказа на продажу** поле со списком отображаются подробные сведения в <xref:System.Windows.Controls.DataGrid>.  
  
2. Закройте приложение.  
  
## <a name="next-steps"></a>Следующие шаги  
 После выполнения данного пошагового руководства, сведения об использовании **источников данных** окно в Visual Studio для привязки WPF элементы управления в другие типы источников данных. Дополнительные сведения см. в разделе [элементы управления WPF, привязка к службе данных WCF](../data-tools/bind-wpf-controls-to-a-wcf-data-service.md) и [элементы управления WPF, привязка к набору данных](../data-tools/bind-wpf-controls-to-a-dataset.md).  
  
## <a name="see-also"></a>См. также  
 [Привязка элементов управления WPF к данным в Visual Studio](../data-tools/bind-wpf-controls-to-data-in-visual-studio1.md)   
 [Отображение связанных данных в приложениях WPF](../data-tools/display-related-data-in-wpf-applications.md)