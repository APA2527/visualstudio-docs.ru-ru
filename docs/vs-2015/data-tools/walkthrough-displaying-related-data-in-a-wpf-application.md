---
title: Пошаговое руководство. Отображение связанных данных в приложении WPF | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-data-tools
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
- aspx
helpviewer_keywords:
- WPF, data binding in Visual Studio
- WPF data binding [Visual Studio], walkthroughs
- WPF Designer, data binding
ms.assetid: 5c48f188-e9c4-40a6-97d9-67cdb2f90127
caps.latest.revision: 25
author: jillre
ms.author: jillfra
manager: jillfra
robots: noindex,nofollow
ms.openlocfilehash: 8116d4ab4a2f20f79f3849ae7f8b324af9832dd5
ms.sourcegitcommit: c150d0be93b6f7ccbe9625b41a437541502560f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/10/2020
ms.locfileid: "75850241"
---
# <a name="walkthrough-displaying-related-data-in-a-wpf-application"></a>Пошаговое руководство. Отображение связанных данных в приложении WPF
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

В этом пошаговом руководстве вы создадите приложение WPF, которое отображает данные из таблиц базы данных, имеющих связь «родители-потомки». Данные инкапсулируются в сущности в EDM. Родительская сущность содержит обзорные сведения для набора заказов. Каждое свойство этой сущности привязано к другому элементу управления в приложении. Дочерняя сущность содержит подробные сведения для каждого заказа. Этот набор данных привязан к элементу управления <xref:System.Windows.Controls.DataGrid>.

 В данном пошаговом руководстве рассмотрены следующие задачи:

- Создание приложения WPF и EDM, созданного на основе данных в образце базы данных AdventureWorksLT.

- Создание набора элементов управления с привязкой к данным, отображающих общие сведения для набора заказов. Элементы управления создаются путем перетаскивания родительской сущности из окна **Источники данных** в **конструктор WPF**.

- Создание элемента управления <xref:System.Windows.Controls.DataGrid>, отображающего связанные сведения для каждого выбранного заказа. Элементы управления создаются путем перетаскивания дочерней сущности из окна **Источники данных** в окно в **конструкторе WPF**.

   [!INCLUDE[note_settings_general](../includes/note-settings-general-md.md)]

## <a name="prerequisites"></a>Prerequisites
 Ниже приведены компоненты, необходимые для выполнения данного пошагового руководства.

- [!INCLUDE[vsprvs](../includes/vsprvs-md.md)].

- Доступ к запущенному экземпляру SQL Server или SQL Server Express с подключенной учебной базой данных AdventureWorksLT. Базу данных AdventureWorksLT можно загрузить с [веб-сайта CodePlex](https://codeplex.com/SqlServerSamples).

  Перед изучением приведенных ниже концепций будет полезно, хотя и не обязательно, ознакомиться со следующим пошаговым руководством.

- Модели EDM и ADO.NET Entity Framework. Дополнительные сведения см. в разделе [Entity Framework обзор](https://msdn.microsoft.com/library/a2166b3d-d8ba-4a0a-8552-6ba1e3eaaee0).

- Работа с Конструктором WPF. Дополнительные сведения см. в разделе [Общие сведения о конструкторе WPF и Silverlight](https://msdn.microsoft.com/570b7a5c-0c86-4326-a371-c9b63378fc62).

- Привязка данных WPF. Более подробную информацию см. в разделе [Общие сведения о связывании данных](https://msdn.microsoft.com/library/c707c95f-7811-401d-956e-2fffd019a211).

## <a name="creating-the-project"></a>Создание проекта
 Создайте новый проект WPF для вывода записей о заказах.

#### <a name="to-create-a-new-wpf-project"></a>Создание нового проекта WPF

1. Запустите Visual Studio.

2. В меню **Файл** выберите пункт **Создать**, а затем команду **Проект**.

3. Разверните **элемент C# визуальный** или **Visual Basic**, а затем выберите **Windows**.

4. Убедитесь, что в поле со списком в верхней части диалогового окна выбрано **.NET Framework 4** . Элемент управления <xref:System.Windows.Controls.DataGrid>, используемый в этом пошаговом руководстве, доступен только в .NET Framework 4.

5. Выберите шаблон проекта **Приложение WPF**.

6. В поле **Имя файла** введите `AdventureWorksOrdersViewer`.

7. Нажмите кнопку **ОК**.

     Visual Studio создает проект `AdventureWorksOrdersViewer`.

## <a name="creating-an-entity-data-model-for-the-application"></a>Создание EDM для приложения
 Перед созданием элементов управления с привязкой к данным нужно определить модель данных для своего приложения и добавить ее в окно **Источники данных**. В этом пошаговом руководстве модель данных является EDM.

#### <a name="to-create-an-entity-data-model"></a>Создание модели EDM

1. В меню **данные** выберите команду **Добавить новый источник данных** , чтобы открыть **Мастер настройки источника данных**.

2. На странице **Выбор типа источника данных** выберите **база данных**, а затем нажмите кнопку **Далее**.

3. На странице **Выбор модели базы данных** щелкните **EDM**, а затем нажмите кнопку **Далее**.

4. На странице **Выбор содержимого модели** нажмите кнопку **создать из базы данных**, а затем нажмите кнопку **Далее**.

5. На странице **Выбор подключения к данным** выполните одно из следующих действий.

   - Если подключение к учебной базе данных AdventureWorksLT доступно в раскрывающемся списке, то выберите его.

      \- или -

   - Щелкните **создать соединение** и создайте соединение с базой данных AdventureWorksLT.

     Убедитесь, что выбран параметр **сохранить параметры подключения сущности в App. config как** , и нажмите кнопку **Далее**.

6. На странице **Выбор объектов базы данных** разверните узел **таблицы**и выберите следующие таблицы:

   - **Заказа**

   - **SalesOrderHeader**

7. Нажмите кнопку **Готово**.

8. Постройте проект.

## <a name="creating-data-bound-controls-that-display-the-orders"></a>Создание элементов управления с привязкой к данным, отображающих заказы
 Создайте элементы управления, которые отображают записи о заказах, перетащив Сущность `SalesOrderHeaders` из окна **Источники данных** в конструктор WPF.

#### <a name="to-create-data-bound-controls-that-display-the-order-records"></a>Создание элементов управления с привязкой к данным, отображающих записи о заказах

1. В **Обозреватель решений**дважды щелкните файл MainWindow. XAML.

    Открывается окно в Конструкторе WPF.

2. Измените код XAML, чтобы свойства **Height** и **Width** были установлены в значение 800.

3. В окне **Источники данных** щелкните раскрывающееся меню для узла **SalesOrderHeaders** и выберите **сведения**.

4. Разверните узел **SalesOrderHeaders**.

5. Щелкните раскрывающееся меню рядом с **SalesOrderID** и выберите **ComboBox**.

6. Для каждого из следующих дочерних узлов узла **SalesOrderHeaders** щелкните раскрывающееся меню рядом с узлом и выберите пункт **нет**:

   - **RevisionNumber**

   - **OnlineOrderFlag**

   - **шиптоаддрессид**

   - **биллтоаддрессид**

   - **CreditCardApprovalCode**

   - **Подытог**

   - **TaxAmt**

   - **Freight**

   - **rowguid**

   - **ModifiedDate**

     Это действие не позволяет Visual Studio создать элементы управления с привязкой к данным для этих узлов на следующем шаге. В данном пошаговом руководстве подразумевается, что конечному пользователю не требуется просматривать эти данные.

7. Из окна **Источники данных** перетащите узел **SalesOrderHeaders** в окно **конструктора WPF**.

    Visual Studio создает код XAML, который создает набор элементов управления, привязанных к данным в сущности **SalesOrderHeaders** , и код, загружающий данные. Дополнительные сведения о созданных XAML и коде см. в разделе [Привязка элементов управления WPF к данным в Visual Studio](../data-tools/bind-wpf-controls-to-data-in-visual-studio1.md).

8. В конструкторе щелкните поле со списком рядом с меткой **идентификатор заказа на продажу** .

9. В окне **Свойства** установите флажок рядом со свойством **IsReadOnly**.

## <a name="creating-a-datagrid-that-displays-the-order-details"></a>Создание элемента управления DataGrid, отображающего сведения о заказе
 Создайте элемент управления <xref:System.Windows.Controls.DataGrid>, отображающий сведения о заказах, перетащив `SalesOrderDetails` сущность из окна **Источники данных** в конструктор WPF.

#### <a name="to-create-a-datagrid-that-displays-the-order-details"></a>Создание элемента управления DataGrid, отображающего сведения о заказе

1. В окне **Источники данных** выберите узел **SalesOrderDetails** , который является дочерним по отношению к узлу **SalesOrderHeaders** .

   > [!NOTE]
   > Существует также узел **SalesOrderDetails** , который является одноранговым узлом узла **SalesOrderHeaders** . Убедитесь, что выбран дочерний узел узла **SalesOrderHeaders** .

2. Разверните дочерний узел **SalesOrderDetails** .

3. Для каждого из следующих дочерних узлов узла **SalesOrderDetails** щелкните раскрывающееся меню рядом с узлом и выберите пункт **нет**:

   - **SalesOrderID**

   - **SalesOrderDetailID**

   - **rowguid**

   - **ModifiedDate**

     Это действие не позволит Visual Studio включать эти данные в элемент управления <xref:System.Windows.Controls.DataGrid>, созданный на следующем шаге. В данном пошаговом руководстве подразумевается, что конечному пользователю не требуется просматривать эти данные.

4. Из окна **Источники данных** Перетащите дочерний узел **SalesOrderDetails** в окно в **конструкторе WPF**.

    Visual Studio создает XAML для определения нового элемента управления <xref:System.Windows.Controls.DataGrid>, привязанного к данным, а элемент управления отображается в конструкторе. Visual Studio также обновляет созданный метод `GetSalesOrderHeadersQuery` в файле кода программной части для включения данных в сущность **SalesOrderDetails** .

## <a name="testing-the-application"></a>Тестирование приложения
 Выполните сборку и запустите приложение, чтобы убедиться, что в нем отображаются записи о заказах.

#### <a name="to-test-the-application"></a>Тестирование приложения

1. Нажмите клавишу **F5**.

     Выполняется сборка и запуск приложения. Проверьте следующее.

    - В поле со списком **идентификаторов заказов на продажу** отображается **71774**. Это первый идентификатор заказа в сущности.

    - Для каждого заказа, выбранного в поле со списком **идентификатор заказа на продажу** , подробные сведения о заказе отображаются в <xref:System.Windows.Controls.DataGrid>.

2. Закройте приложение.

## <a name="next-steps"></a>Дальнейшие действия
 По завершении этого пошагового руководства вы узнаете, как использовать окно " **Источники данных** " в Visual Studio для привязки элементов управления WPF к другим типам источников данных. Дополнительные сведения см. в разделе [Привязка элементов управления WPF к службе данных WCF](../data-tools/bind-wpf-controls-to-a-wcf-data-service.md) и [Привязка элементов управления WPF к набору данных](../data-tools/bind-wpf-controls-to-a-dataset.md).

## <a name="see-also"></a>См. также раздел
 [Привязка элементов управления WPF к данным в Visual Studio](../data-tools/bind-wpf-controls-to-data-in-visual-studio1.md) [Отображение связанных данных в приложениях WPF](../data-tools/display-related-data-in-wpf-applications.md)
