---
title: Развертывание приложений ClickOnce для тестирования и рабочих серверов без подписывания | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-deployment
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- ClickOnce applications, deploying without resigning
- ClickOnce deployment, without resigning
- application updates, ClickOnce
- update location [ClickOnce]
- deploymentProvider tag
- manifests [ClickOnce]
ms.assetid: 1218a98d-1ad5-4eef-95dd-0e0b3c44168c
caps.latest.revision: 12
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: a8e41e67d5e2800acc41e1220fe632001420a274
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "80395376"
---
# <a name="deploying-clickonce-applications-for-testing-and-production-servers-without-resigning"></a>Развертывание приложений ClickOnce для тестовых и рабочих серверов без повторного подписывания
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

В этом разделе обсуждается новая функция ClickOnce, появившаяся в .NET Framework версии 3,5, которая позволяет развертывать приложения ClickOnce из нескольких сетевых расположений без повторного подписывания или изменения манифестов ClickOnce.  
  
> [!NOTE]
> Подписывание по-прежнему является предпочтительным способом развертывания новых версий приложений. Везде, где это возможно, используйте метод подписывания. Дополнительные сведения см. в разделе [Mage.exe (средство создания и редактирования манифеста)](https://msdn.microsoft.com/library/77dfe576-2962-407e-af13-82255df725a1).  
  
 Сторонние разработчики и независимые поставщики программного обеспечения могут принять участие в этой функции, упрощая для клиентов обновление своих приложений. Эта функция может использоваться в следующих ситуациях.  
  
- При обновлении приложения, а не первой установки приложения.  
  
- Если на компьютере имеется только одна конфигурация приложения. Например, если приложение настроено для указания двух разных баз данных, использовать эту функцию нельзя.  
  
## <a name="excluding-deploymentprovider-from-deployment-manifests"></a>Исключение deploymentProvider из манифестов развертывания  
 В .NET Framework 2,0 и .NET Framework 3,0 любое приложение ClickOnce, устанавливаемое в системе для обеспечения доступности в автономном режиме, должно указывать `deploymentProvider` в манифесте развертывания. `deploymentProvider`Часто называется расположением обновления. это расположение, в котором ClickOnce будет проверять наличие обновлений приложения. Это требование в сочетании с тем, чтобы издатели приложений подписали свои развертывания, затрудняют компании обновление приложения ClickOnce от поставщика или другого стороннего производителя. Это также усложняет развертывание одного и того же приложения из нескольких расположений в одной сети.  
  
 Благодаря изменениям, внесенным в ClickOnce в .NET Framework 3,5, сторонние лица могут предоставить приложение ClickOnce другой организации, которое затем может развернуть приложение в своей сети.  
  
 Чтобы воспользоваться преимуществами этой функции, разработчики приложений ClickOnce должны исключить `deploymentProvider` из манифестов развертывания. Это означает исключение `-providerUrl` аргумента при создании манифестов развертывания с Mage.exe или при создании манифестов развертывания с помощью MageUI.exe текстовое поле **Расположение запуска** на вкладке **манифест приложения** остается пустым.  
  
## <a name="deploymentprovider-and-application-updates"></a>Обновление deploymentProvider и приложения  
 Начиная с .NET Framework 3,5 вам больше не нужно указывать `deploymentProvider` в манифесте развертывания, чтобы развернуть приложение ClickOnce как для оперативного, так и для автономного использования. Это поддерживает сценарий, в котором необходимо упаковать и подписать развертывание самостоятельно, но разрешить другим компаниям развертывать приложение по своим сетям.  
  
 Важно помнить, что приложения, которые исключают, `deploymentProvider` не могут изменить свое расположение установки во время обновления, пока они не поставляют обновление, включающее `deploymentProvider` тег.  
  
 Вот два примера для пояснения этой точки. В первом примере публикуется приложение ClickOnce, не имеющее `deploymentProvider` тега, и пользователю предлагается установить его с помощью `http://www.adatum.com/MyApplication/` . Если вы решили опубликовать следующее обновление приложения из `http://subdomain.adatum.com/MyApplication/` , вы не сможете указать это в манифесте развертывания, который находится в `http://www.adatum.com/MyApplication/` . Можно выполнить одно из двух действий:  
  
- Попросите пользователей удалить предыдущую версию и установить новую версию из нового расположения.  
  
- Включает в себя обновление `http://www.adatum.com/MyApplication/` , которое содержит `deploymentProvider` ссылку на `http://www.adatum.com/MyApplication/` . Затем отпустите еще одно обновление позже, `deploymentProvider` указав `http://subdomain.adatum.com/MyApplication/` .  
  
  Во втором примере вы публикуете приложение ClickOnce, которое указывает `deploymentProvider` , а затем решает удалить его. После того как новая версия не `deploymentProvider` будет загружена на клиенты, вы не сможете перенаправить путь, используемый для обновлений, до выпуска версии приложения, которое было `deploymentProvider` восстановлено. Как и в первом примере, `deploymentProvider` должен изначально указывать на текущее расположение обновления, а не на новое расположение. В этом случае при попытке вставить объект, `deploymentProvider` который ссылается на `http://subdomain.adatum.com/MyApplication/` , следующее обновление завершится ошибкой.  
  
## <a name="creating-a-deployment"></a>Создание развертывания  
 Пошаговые инструкции по созданию развертываний, которые могут быть развернуты из разных сетевых расположений, см. в разделе [Пошаговое руководство. Развертывание вручную приложения ClickOnce, которое не требует повторного подписания и сохраняет сведения о фирменной символике](/visualstudio/deployment/walkthrough-manually-deploying-a-clickonce-app-no-re-signing-required?view=vs-2015).  
  
## <a name="see-also"></a>См. также:  
 [Mage.exe (Инструмент создания и изменения манифестов)](https://msdn.microsoft.com/library/77dfe576-2962-407e-af13-82255df725a1)   
 [MageUI.exe (средство создания и редактирования манифестов, графический клиент)](https://msdn.microsoft.com/library/f9e130a6-8117-49c4-839c-c988f641dc14)
