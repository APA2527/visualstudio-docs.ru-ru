---
title: '&lt;InstallChecks&gt; элемент (загрузчик) | Документация Майкрософт'
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-deployment
ms.topic: conceptual
dev_langs:
- FSharp
- VB
- CSharp
- C++
helpviewer_keywords:
- <InstallChecks> element [bootstrapper]
ms.assetid: ad329c87-b0ad-4304-84de-ae9496514c42
caps.latest.revision: 25
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: d6156b729835d16d2e83cc76507ad096528994d4
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "68189013"
---
# <a name="ltinstallchecksgt-element-bootstrapper"></a>&lt;InstallChecks&gt; элемент (установщик)
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

`InstallChecks` Элемент поддерживает запуск тестов на локальном компьютере, чтобы убедиться в том, что все соответствующие предварительные требования для приложения были установлены.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
<InstallChecks>  
    <AssemblyCheck   
        Property  
        Name  
        PublicKeyToken  
        Version  
        Language  
        ProcessorArchitecture  
    />  
    <RegistryCheck  
        Property  
        Key  
        Value  
    />  
    <ExternalCheck   
        PackageFile  
        Property  
        Arguments  
    />  
    <FileCheck   
        Property  
        FileName  
        SearchPath  
        SpecialFolder  
        SearchDepth  
    />  
    <MsiProductCheck   
        Property  
        Product  
        Feature  
    />  
    <RegistryFileCheck   
        Property  
        Key  
        Value  
        FileName  
        SearchDepth  
    />  
</InstallChecks>  
```  
  
## <a name="assemblycheck"></a>AssemblyCheck  
 Этот элемент является необязательный дочерний элемент элемента `InstallChecks`. Для каждого экземпляра `AssemblyCheck`, загрузчик проверит наличие сборку, указанную в элементе в глобальный кэш сборок (GAC). Он не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. Это свойство может ссылаться на тест `InstallConditions` элемент, который является дочерним элемента `Command` элемент. Дополнительные сведения см. в разделе [ \<команды > элемент](../deployment/commands-element-bootstrapper.md).|  
|`Name`|Обязательный. Полное имя сборки.|  
|`PublicKeyToken`|Обязательный. Сокращенное название открытый ключ, связанный с данным строгое имя сборки. Все сборки, хранящиеся в глобальном кэше СБОРОК должны иметь имя, версию и открытый ключ.|  
|`Version`|Обязательный. Версия сборки.<br /><br /> Номер версии имеет формат \< *основной номер версии*>.\< *дополнительный номер версии*>.\< *версия сборки*>.\< *номер редакции*>.|  
|`Language`|Необязательный параметр. Язык локализованной сборки. Значение по умолчанию — `neutral`.|  
|`ProcessorArchitecture`|Необязательный параметр. Процессор компьютера, назначения для этой установки. Значение по умолчанию — `msil`.|  
  
## <a name="externalcheck"></a>ExternalCheck  
 Этот элемент является необязательный дочерний элемент элемента `InstallChecks`. Для каждого экземпляра `ExternalCheck`, загрузчик будет выполнять именованную внешнюю программу в отдельном процессе и сохранять ее код выхода в свойстве, обозначаемые `Property`. `ExternalCheck` полезно для реализации проверок сложных зависимостей, или когда единственным способом проверить наличие компонента является создание его экземпляра.  
  
 `ExternalCheck` не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. Это свойство может ссылаться на тест `InstallConditions` элемент, который является дочерним элемента `Command` элемент. Дополнительные сведения см. в разделе [ \<команды > элемент](../deployment/commands-element-bootstrapper.md).|  
|`PackageFile`|Обязательный. Внешняя программа для выполнения. Программа должна быть частью установочного пакета.|  
|`Arguments`|Необязательный параметр. Аргументы командной строки для исполняемого файла с именем, `PackageFile`.|  
  
## <a name="filecheck"></a>FileCheck  
 Этот элемент является необязательный дочерний элемент элемента `InstallChecks`. Для каждого экземпляра `FileCheck`, загрузчик определяет, существует ли указанный файл и возвращает номер версии файла. Если файл не имеет номер версии, загрузчик свойства с именем, `Property` 0. Если файл не существует, `Property` не задано любое значение.  
  
 `FileCheck` не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. Это свойство может ссылаться на тест `InstallConditions` элемент, который является дочерним элемента `Command` элемент. Дополнительные сведения см. в разделе [ \<команды > элемент](../deployment/commands-element-bootstrapper.md).|  
|`FileName`|Обязательный. Имя файла для поиска.|  
|`SearchPath`|Обязательный. Диск или папку, в котором выполняется поиск файла. Это должен быть относительный путь, если `SpecialFolder` назначенный; в противном случае он должен быть абсолютным путем.|  
|`SpecialFolder`|Необязательный параметр. Папка с особой важности в Windows или [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)]. По умолчанию используется для интерпретации `SearchPath` как абсолютный путь. Допустимы следующие значения:<br /><br /> `AppDataFolder`. Папке данных приложения для этого [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] приложения; для текущего пользователя.<br /><br /> `CommonAppDataFolder`. Папке данных приложения, используемого всеми пользователями.<br /><br /> `CommonFilesFolder`. Папка общих файлов для текущего пользователя.<br /><br /> `LocalDataAppFolder`. Папка данных для приложений, не перемещается.<br /><br /> `ProgramFilesFolder`. Стандартная папка Program Files для 32-разрядных приложений.<br /><br /> `StartUpFolder`. Папка, содержащая все приложения, запускаемые при запуске системы.<br /><br /> `SystemFolder`. Каталог, который содержит 32-разрядных системных библиотек DLL.<br /><br /> `WindowsFolder`. Каталог, который содержит установку системы Windows.<br /><br /> `WindowsVolume`. Диск или раздел, содержащий установки системы Windows.|  
|`SearchDepth`|Необязательный параметр. Глубина, используемый для поиска вложенные папки для файла. Поиск выполняется преимущественно в глубину. Значение по умолчанию равно 0, что ограничивает поиск в папке верхнего уровня, заданной параметром `SpecialFolder` и **SearchPath**.|  
  
## <a name="msiproductcheck"></a>MsiProductCheck  
 Этот элемент является необязательный дочерний элемент элемента `InstallChecks`. Для каждого экземпляра `MsiProductCheck`, загрузчик проверяет, запускалось ли указанный установки установщика Windows, до его завершения. Значение свойства задается в зависимости от состояния установленного продукта. Положительное значение указывает, установлен продукт, 0 или -1 указывает, он не установлен. (См. пакет SDK для установщика Windows функция MsiQueryFeatureState Дополнительные сведения). . Если установщик Windows не установлен на компьютере, `Property` не задано.  
  
 `MsiProductCheck` не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. Это свойство может ссылаться на тест `InstallConditions` элемент, который является дочерним элемента `Command` элемент. Дополнительные сведения см. в разделе [ \<команды > элемент](../deployment/commands-element-bootstrapper.md).|  
|`Product`|Обязательный. Идентификатор GUID для установленного продукта.|  
|`Feature`|Необязательный параметр. Идентификатор GUID для компонента установленного приложения.|  
  
## <a name="registrycheck"></a>RegistryCheck  
 Этот элемент является необязательный дочерний элемент элемента `InstallChecks`. Для каждого экземпляра `RegistryCheck`, загрузчик проверяет, существует ли указанный раздел реестра или содержит указанное значение.  
  
 `RegistryCheck` не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. Это свойство может ссылаться на тест `InstallConditions` элемент, который является дочерним элемента `Command` элемент. Дополнительные сведения см. в разделе [ \<команды > элемент](../deployment/commands-element-bootstrapper.md).|  
|`Key`|Обязательный. Имя раздела реестра.|  
|`Value`|Необязательный параметр. Имя извлекаемого значения реестра. По умолчанию используется для возврата текстового значения по умолчанию. `Value` должен быть строкой, или значение типа DWORD.|  
  
## <a name="registryfilecheck"></a>RegistryFileCheck  
 Этот элемент является необязательный дочерний элемент элемента `InstallChecks`. Для каждого экземпляра `RegistryFileCheck`, загрузчик извлекает версию указанного файла, впервые пытается получить путь к файлу из указанного раздела реестра. Это особенно полезно в том случае, если вы хотите найти файл в каталог, указанный как значение в реестре.  
  
 `RegistryFileCheck` не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. Это свойство может ссылаться на тест `InstallConditions` элемент, который является дочерним элемента `Command` элемент. Дополнительные сведения см. в разделе [ \<команды > элемент](../deployment/commands-element-bootstrapper.md).|  
|`Key`|Обязательный. Имя раздела реестра. Его значение интерпретируется как путь к файлу, если не `File` атрибут имеет значение. Если этот ключ не существует, `Property` не задано.|  
|`Value`|Необязательный параметр. Имя извлекаемого значения реестра. По умолчанию используется для возврата текстового значения по умолчанию. `Value` должно быть строкой.|  
|`FileName`|Необязательный параметр. Имя файла. Если указано, значение, полученное из раздела реестра предполагается, что путь к каталогу, и это имя добавляется к нему. Если не указан, предполагается, что значение, возвращаемое из реестра содержать полный путь к файлу.|  
|`SearchDepth`|Необязательный параметр. Глубина, используемый для поиска вложенные папки для файла. Поиск выполняется преимущественно в глубину. Значение по умолчанию равно 0, что ограничивает поиск папки верхнего уровня, определяемого значением раздела реестра.|  
  
## <a name="remarks"></a>Примечания  
 Хотя элементов, расположенных под `InstallChecks` определить какие тесты нужно запускать, но не выполняют их. Для выполнения тестов, необходимо создать `Command` элементов, расположенных под `Commands` элемент.  
  
## <a name="example"></a>Пример  
 В следующем примере кода показано `InstallChecks` элемент, так как он используется в файле продукта для [!INCLUDE[dnprdnshort](../includes/dnprdnshort-md.md)].  
  
```  
<InstallChecks>  
    <ExternalCheck Property="DotNetInstalled" PackageFile="dotnetchk.exe" />  
    <RegistryCheck Property="IEVersion" Key="HKLM\Software\Microsoft\Internet Explorer" Value="Version" />  
</InstallChecks>  
```  
  
## <a name="installconditions"></a>InstallConditions  
 Когда `InstallChecks` , вычисляется, они создают свойства. Свойства используются `InstallConditions` для определения, должен ли пакет установки, обходить или вызвать сбой. В следующей таблице перечислены `InstallConditions`:  
  
|||  
|-|-|  
|`FailIf`|При наличии `FailIf` условие принимает значение true, выполнение пакета завершится ошибкой. Остальные условия не проверяются.|  
|`BypassIf`|При наличии `BypassIf` условие принимает значение true, пакет не выполняется. Остальные условия не проверяются.|  
  
## <a name="predefined-properties"></a>Стандартные свойства  
 В следующей таблице перечислены `BypassIf` и `FailIf` элементы:  
  
|Свойство.|Примечания|Возможные значения|  
|--------------|-----------|---------------------|  
|`Version9X`|Номер версии операционной системы Windows 9 X.|4.10 = Windows 98|  
|`VersionNT`|Номер версии операционной системы на базе Windows NT.|Major.Minor.ServicePack<br /><br /> 5.0 = Windows 2000<br /><br /> 5.1.0 = Windows XP<br /><br /> 5.1.2 = Windows XP Professional SP2<br /><br /> 5.2.0 = Windows Server 2003|  
|`VersionNT64`|Номер версии на базе Windows NT 64-разрядной операционной системы.|То же, как было сказано ранее.|  
|`VersionMsi`|Номер версии службы установщика Windows.|2.0 = установщик Windows 2.0|  
|`AdminUser`|Указывает, имеет ли пользователь права администратора в операционной системе на базе Windows NT.|0 = нет привилегий администратора<br /><br /> 1 = права администратора|  
  
 Например чтобы заблокировать установку на компьютере под управлением Windows 95, используйте следующий код:  
  
```  
<!-- Block install on Windows 95 -->  
    <FailIf Property="Version9X" Compare="VersionLessThan" Value="4.10" String="InvalidPlatform"/>  
```  
  
## <a name="see-also"></a>См. также  
 [\<Команды > элемент](../deployment/commands-element-bootstrapper.md)   
 [Справочные сведения о схеме пакетов и продуктов](../deployment/product-and-package-schema-reference.md)
