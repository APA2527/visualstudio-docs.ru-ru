---
title: '&lt;&gt;Элемент инсталлчеккс (начальный загрузчик) | Документация Майкрософт'
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-deployment
ms.topic: conceptual
dev_langs:
- FSharp
- VB
- CSharp
- C++
helpviewer_keywords:
- <InstallChecks> element [bootstrapper]
ms.assetid: ad329c87-b0ad-4304-84de-ae9496514c42
caps.latest.revision: 25
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: e78f3c1174d2a288a9ffc432f0206aed4956fe8f
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "85531824"
---
# <a name="ltinstallchecksgt-element-bootstrapper"></a>&lt;&gt;Элемент инсталлчеккс (начальный загрузчик)
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

`InstallChecks`Элемент поддерживает запуск различных тестов на локальном компьютере, чтобы убедиться, что все необходимые компоненты для приложения установлены.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
<InstallChecks>  
    <AssemblyCheck   
        Property  
        Name  
        PublicKeyToken  
        Version  
        Language  
        ProcessorArchitecture  
    />  
    <RegistryCheck  
        Property  
        Key  
        Value  
    />  
    <ExternalCheck   
        PackageFile  
        Property  
        Arguments  
    />  
    <FileCheck   
        Property  
        FileName  
        SearchPath  
        SpecialFolder  
        SearchDepth  
    />  
    <MsiProductCheck   
        Property  
        Product  
        Feature  
    />  
    <RegistryFileCheck   
        Property  
        Key  
        Value  
        FileName  
        SearchDepth  
    />  
</InstallChecks>  
```  
  
## <a name="assemblycheck"></a>ассембличекк  
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `AssemblyCheck` загрузчик должен убедиться, что сборка, определенная элементом, существует в глобальном кэше сборок (GAC). Он не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|  
|`Name`|Обязательный. Полное имя проверяемой сборки.|  
|`PublicKeyToken`|Обязательный. Сокращенная форма открытого ключа, связанная с этой строго именованной сборкой. Все сборки, хранимые в глобальном кэше сборок, должны иметь имя, версию и открытый ключ.|  
|`Version`|Обязательный. Версия сборки.<br /><br /> Номер версии имеет формат \<*major version*> . \<*minor version*> . \<*build version*> . \<*revision version*>|  
|`Language`|Необязательный элемент. Язык локализованной сборки. По умолчанию — `neutral`.|  
|`ProcessorArchitecture`|Необязательный элемент. Процессор компьютера, предназначенный для данной установки. По умолчанию — `msil`.|  
  
## <a name="externalcheck"></a>екстерналчекк  
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `ExternalCheck` загрузчик запустит именованную внешнюю программу в отдельном процессе и сохранит свой код выхода в свойстве, указанном параметром `Property` . `ExternalCheck` полезен для реализации сложных проверок зависимостей, или если единственным способом проверки существования компонента является создание его экземпляра.  
  
 `ExternalCheck` не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|  
|`PackageFile`|Обязательный. Внешняя программа для выполнения. Программа должна входить в состав пакета распространения установки.|  
|`Arguments`|Необязательный элемент. Предоставляет аргументы командной строки исполняемому файлу с именем `PackageFile` .|  
  
## <a name="filecheck"></a>FileCheck  
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `FileCheck` загрузчик определит, существует ли именованный файл, и возвратит номер версии файла. Если у файла нет номера версии, начальный загрузчик задает для свойства с именем `Property` значение 0. Если файл не существует, параметр не `Property` имеет значение.  
  
 `FileCheck` не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|  
|`FileName`|Обязательный. Имя искомого файла.|  
|`SearchPath`|Обязательный. Диск или папка, в которых следует искать файл. Этот путь должен быть относительным путем `SpecialFolder` , если назначен. в противном случае он должен быть абсолютным путем.|  
|`SpecialFolder`|Необязательный элемент. Папка, которая имеет особую важность либо для Windows, либо для [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] . Значение по умолчанию интерпретируется `SearchPath` как абсолютный путь. Допустимые значения.<br /><br /> `AppDataFolder`. Папка Application Data для этого [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] приложения; относится к текущему пользователю.<br /><br /> `CommonAppDataFolder`. Папка данных приложения, используемая всеми пользователями.<br /><br /> `CommonFilesFolder`. Папка общих файлов для текущего пользователя.<br /><br /> `LocalDataAppFolder`. Папка данных для приложений без роуминга.<br /><br /> `ProgramFilesFolder`. Стандартная папка Program Files для 32-разрядных приложений.<br /><br /> `StartUpFolder`. Папка, содержащая все приложения, запускаемые при запуске системы.<br /><br /> `SystemFolder`. Папка, содержащая 32-разрядные системные библиотеки DLL.<br /><br /> `WindowsFolder`. Папка, содержащая установку системы Windows.<br /><br /> `WindowsVolume`. Диск или раздел, содержащий установку системы Windows.|  
|`SearchDepth`|Необязательный элемент. Глубина поиска в вложенных папках для именованного файла. Поиск сначала имеет глубину. Значение по умолчанию равно 0, что ограничит поиск до папки верхнего уровня, заданной параметром `SpecialFolder` и **SearchPath**.|  
  
## <a name="msiproductcheck"></a>мсипродуктчекк  
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `MsiProductCheck` загрузчик проверяет, выполнялась ли указанная установка Microsoft установщик Windows до ее завершения. Значение свойства задается в зависимости от состояния установленного продукта. Положительное значение указывает на то, что продукт установлен, 0 или-1 означает, что он не установлен. (Дополнительные сведения см. в описании функции установщик Windows SDK Мсикуерифеатурестате.) . Если установщик Windows не установлен на компьютере, не устанавливается `Property` .  
  
 `MsiProductCheck` не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|  
|`Product`|Обязательный. Идентификатор GUID установленного продукта.|  
|`Feature`|Необязательный элемент. Идентификатор GUID для определенной функции установленного приложения.|  
  
## <a name="registrycheck"></a>регистричекк  
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `RegistryCheck` загрузчик проверяет, существует ли указанный раздел реестра или имеет ли он указанное значение.  
  
 `RegistryCheck` не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|  
|`Key`|Обязательный. Имя раздела реестра.|  
|`Value`|Необязательный элемент. Имя извлекаемого значения реестра. По умолчанию возвращается текст значения по умолчанию. `Value` значение должно быть строкой или DWORD.|  
  
## <a name="registryfilecheck"></a>регистрифилечекк  
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `RegistryFileCheck` загрузчик извлекает версию указанного файла, сначала пытаясь получить путь к файлу из указанного раздела реестра. Это особенно полезно, если требуется найти файл в каталоге, заданном как значение в реестре.  
  
 `RegistryFileCheck` не содержит элементов и имеет следующие атрибуты.  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`Property`|Обязательный. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|  
|`Key`|Обязательный. Имя раздела реестра. Его значение интерпретируется как путь к файлу, если только `File` не задан атрибут. Если этот раздел не существует, `Property` он не задан.|  
|`Value`|Необязательный элемент. Имя извлекаемого значения реестра. По умолчанию возвращается текст значения по умолчанию. `Value` значение должно быть строкой.|  
|`FileName`|Необязательный элемент. Имя файла. Если указано, то значение, полученное из раздела реестра, считается путем к каталогу, к которому добавляется это имя. Если значение не указано, то в реестре предполагается, что возвращается полный путь к файлу.|  
|`SearchDepth`|Необязательный элемент. Глубина поиска в вложенных папках для именованного файла. Поиск сначала имеет глубину. Значение по умолчанию — 0, в результате чего поиск будет ограничен папкой верхнего уровня, заданной значением раздела реестра.|  
  
## <a name="remarks"></a>Remarks  
 Хотя элементы под `InstallChecks` определяют тесты для выполнения, они не выполняют их. Чтобы выполнить тесты, необходимо создать `Command` элементы под `Commands` элементом.  
  
## <a name="example"></a>Пример  
 В следующем примере кода демонстрируется `InstallChecks` элемент, который используется в файле продукта для [!INCLUDE[dnprdnshort](../includes/dnprdnshort-md.md)] .  
  
```  
<InstallChecks>  
    <ExternalCheck Property="DotNetInstalled" PackageFile="dotnetchk.exe" />  
    <RegistryCheck Property="IEVersion" Key="HKLM\Software\Microsoft\Internet Explorer" Value="Version" />  
</InstallChecks>  
```  
  
## <a name="installconditions"></a>инсталлкондитионс  
 При `InstallChecks` вычислении они создают свойства. Затем эти свойства используются `InstallConditions` для определения того, должен ли пакет устанавливаться, обходиться или завершаться ошибкой. В следующей таблице перечислены `InstallConditions` :  
  
|Имя|Описание|
|-|-|  
|`FailIf`|Если любое из `FailIf` условий имеет значение true, произойдет сбой пакета. Остальные условия не будут оцениваться.|  
|`BypassIf`|Если любое из `BypassIf` условий имеет значение true, пакет будет обходиться. Остальные условия не будут оцениваться.|  
  
## <a name="predefined-properties"></a>Предопределенные свойства  
 В следующей таблице перечислены `BypassIf` элементы и `FailIf` .  
  
|Свойство|Примечания|Возможные значения|  
|--------------|-----------|---------------------|  
|`Version9X`|Номер версии операционной системы Windows 9X.|4,10 = Windows 98|  
|`VersionNT`|Номер версии операционной системы на основе Windows NT.|Основная. Дополнительная. ServicePack<br /><br /> 5,0 = Windows 2000<br /><br /> 5.1.0 = Windows XP<br /><br /> 5.1.2 = Windows XP Professional SP2<br /><br /> 5.2.0 = Windows Server 2003|  
|`VersionNT64`|Номер версии 64-разрядной операционной системы на основе Windows NT.|То же, что упоминалось ранее.|  
|`VersionMsi`|Номер версии службы установщик Windows.|2,0 = установщик Windows 2,0|  
|`AdminUser`|Указывает, имеет ли пользователь права администратора в операционной системе на основе Windows NT.|0 = нет прав администратора<br /><br /> 1 = права администратора|  
  
 Например, чтобы заблокировать установку на компьютере под Windows 95, используйте следующий код:  
  
```  
<!-- Block install on Windows 95 -->  
    <FailIf Property="Version9X" Compare="VersionLessThan" Value="4.10" String="InvalidPlatform"/>  
```  
  
## <a name="see-also"></a>См. также:  
 [\<Commands> Дерев](../deployment/commands-element-bootstrapper.md)   
 [Справочные сведения о схеме пакетов и продуктов](../deployment/product-and-package-schema-reference.md)
