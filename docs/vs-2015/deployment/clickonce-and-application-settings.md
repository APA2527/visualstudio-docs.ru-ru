---
title: ClickOnce и параметры приложения | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-deployment
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- ClickOnce deployment, application settings
ms.assetid: 891caba6-faef-4a3c-8f71-60e6fadb60eb
caps.latest.revision: 12
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: c8e1ffe6d6f32cfad137d5890715a5a0032a29d7
ms.sourcegitcommit: 08fc78516f1107b83f46e2401888df4868bb1e40
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2019
ms.locfileid: "65696686"
---
# <a name="clickonce-and-application-settings"></a>ClickOnce и параметры приложения
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Параметры приложения для Windows Forms позволяет легко создавать, хранить и поддерживать настраиваемые приложения и параметры пользователя на стороне клиента. В следующем документе описано, как файлы параметров приложения работают в приложении ClickOnce, и как ClickOnce переносит параметры при обновлении до следующей версии.  
  
 Приведенные ниже сведения относятся только к поставщику параметров приложения по умолчанию, <xref:System.Configuration.LocalFileSettingsProvider> класса. При указании пользовательского поставщика, этим поставщиком определяется, как он хранит свои данные и как его обновляет его параметры между версиями. Дополнительные сведения о поставщиках параметров приложений см. в разделе [архитектура параметров приложения](https://msdn.microsoft.com/library/c8eb2ad0-fac6-4ea2-9140-675a4a44d562).  
  
## <a name="application-settings-files"></a>Файлы параметров приложений  
 Параметры приложения использует два файла: *приложения*. exe.config и user.config, где *приложения* — имя приложения Windows Forms. User.config создается на время первого клиента, приложение сохраняет параметры пользователя. *приложение*. exe.config, напротив, будет существовать до развертывания при определении значения по умолчанию для параметров. Visual Studio включает этот файл автоматически при использовании его **публикации** команды. При создании приложения ClickOnce с помощью Mage.exe или MageUI.exe, необходимо убедиться в том этот файл входит в состав приложения и другие файлы при заполнении манифест приложения.  
  
 В приложениях Windows Forms, не развертываются по технологии ClickOnce, приложения *приложения*. exe.config файл хранится в каталоге приложения, при сохранении файла user.config пользователя **Documents and Settings**  папки. В приложении ClickOnce *приложения*. exe.config проживает в каталоге приложения в кэш приложения ClickOnce, а user.config живет в каталог данных ClickOnce для приложения.  
  
 Независимо от того, как вы развернете приложение, параметры приложения обеспечивают безопасный доступ к *приложения*. exe.config и доступ к user.config безопасный чтения/записи.  
  
 В приложении ClickOnce размер файлов конфигурации, используемые параметры приложения ограничивается объем кэша ClickOnce. Дополнительные сведения см. в разделе [Общие сведения о кэше ClickOnce](../deployment/clickonce-cache-overview.md).  
  
## <a name="version-upgrades"></a>Обновление версии  
 Так же, как каждая версия приложения ClickOnce изолирована от всех остальных версий, параметры приложения для ClickOnce-приложения изолированы от параметров для других версий, а также. Когда пользователь обновляет до более поздней версии приложения, параметры приложения сравнивает самой последней (наибольший номер) версии параметры параметрами, поставляемыми с обновленной версии и параметры объединяются в новый набор файлов параметров.  
  
 В следующей таблице описаны способ определения того, какие параметры для копирования.  
  
|Тип изменения|Действие обновления|  
|--------------------|--------------------|  
|Параметр, добавляемый *приложения*. exe.config|Новый параметр объединяется в текущей версии *приложения*. exe.config|  
|Параметр, удалены из *приложения*. exe.config|Старый параметр удаляется из текущей версии *приложения*. exe.config|  
|По умолчанию параметра изменено; локальный параметр по-прежнему значение исходное значение по умолчанию в user.config|Параметр объединяется в user.config текущей версии с новым каналом по умолчанию в качестве значения|  
|По умолчанию параметра изменено; значение не по умолчанию в user.config|Параметр объединяется в текущей версии user.config с значения не по умолчанию|  
  
 Если вы создали параметры приложения класс-оболочка и хотите настроить логику обновления, можно переопределить <xref:System.Configuration.ApplicationSettingsBase.Upgrade%2A> метод.  
  
## <a name="clickonce-and-roaming-settings"></a>ClickOnce и параметры роуминга  
 ClickOnce не работает с настройками роуминга, что позволяет перемещать между компьютерами в сети файла параметров. Если требуется, чтобы параметры роуминга, необходимо будет реализовать поставщика параметров приложения, который хранит параметры сети, или разрабатывать собственные классы пользовательские параметры для сохранения параметров на удаленном компьютере. Дополнительные сведения в поставщиков параметров см. в разделе [архитектура параметров приложения](https://msdn.microsoft.com/library/c8eb2ad0-fac6-4ea2-9140-675a4a44d562).  
  
## <a name="see-also"></a>См. также  
 [Развертывание и безопасность технологии ClickOnce](../deployment/clickonce-security-and-deployment.md)   
 [Общие сведения о параметрах приложений](https://msdn.microsoft.com/library/0dd8bca5-a6bf-4ac4-8eec-5725d08b38dc)   
 [Общие сведения о кэше ClickOnce](../deployment/clickonce-cache-overview.md)   
 [Доступ к локальным и удаленным данным в приложениях ClickOnce](../deployment/accessing-local-and-remote-data-in-clickonce-applications.md)
