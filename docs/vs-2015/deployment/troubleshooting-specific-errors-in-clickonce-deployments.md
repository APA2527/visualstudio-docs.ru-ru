---
title: Устранение конкретных ошибок в развертываниях ClickOnce | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-deployment
ms.topic: troubleshooting
f1_keywords:
- Microsoft.VisualStudio.Publish.ClickOnceProvider.ErrorPrompt.UncRequired
- Microsoft.VisualStudio.Publish.ClickOnceProvider.ErrorPrompt.NoInstallUrl
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- deploying applications, ClickOnce
- troubleshooting ClickOnce deployments
- ClickOnce deployment, troubleshooting
ms.assetid: 22dfe8f1-8271-4708-9c25-6bbb13920ac8
caps.latest.revision: 15
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: c66a25830e34571648727bd6ec71791e5e637ca8
ms.sourcegitcommit: bad28e99214cf62cfbd1222e8cb5ded1997d7ff0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2019
ms.locfileid: "74294730"
---
# <a name="troubleshooting-specific-errors-in-clickonce-deployments"></a>Устранение неполадок, приводящих к определенным ошибкам в развертываниях ClickOnce
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

В этом разделе перечислены распространенные ошибки, которые могут возникнуть при развертывании приложения [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)], а также действия по устранению каждой проблемы.  
  
## <a name="general-errors"></a>Общие ошибки  
  
#### <a name="when-you-try-to-locate-an-application-file-nothing-occurs-or-xml-renders-in-internet-explorer-or-you-receive-a-run-or-save-as-dialog-box"></a>При попытке выполнить обнаружение файла приложения, ничего не происходит, или XML-файлы визуализируются в Internet Explorer или появляется диалоговое окно «Запуск или сохранение как»  
 Эта ошибка может быть вызвана неправильной регистрацией типов содержимого (также известных как типы MIME) на сервере или клиенте.  
  
 Во-первых, убедитесь, что сервер настроен для связи расширения приложения с типом содержимого application/x-MS-Application.  
  
 Если сервер настроен правильно, убедитесь, что на компьютере установлен [!INCLUDE[dnprdnlong](../includes/dnprdnlong-md.md)]. Если [!INCLUDE[dnprdnlong](../includes/dnprdnlong-md.md)] установлен и вы по-прежнему видите эту проблему, попробуйте удалить и переустановить [!INCLUDE[dnprdnlong](../includes/dnprdnlong-md.md)] для повторной регистрации типа содержимого на клиенте.  
  
#### <a name="error-message-says-unable-to-retrieve-application-files-missing-in-deployment-or-application-download-has-been-interrupted-check-for-network-errors-and-try-again-later"></a>Сообщение об ошибке "не удалось получить приложение. Файлы, отсутствующие в развертывании "или" скачивание приложения прерваны, проверьте наличие ошибок сети и повторите попытку позже ".  
 Это сообщение означает, что не удается скачать один или несколько файлов, на которые ссылаются манифесты [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)]. Самый простой способ отладки этой ошибки — попытаться загрузить URL-адрес, который [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] говорит, что он не может быть загружен. Ниже приведены некоторые возможные причины.  
  
- Если в файле журнала указано "(403) запрещено" или "(404) не найдено", убедитесь, что веб-сервер настроен так, чтобы он не блокировал загрузку этого файла. Дополнительные сведения см. в разделе [Вопросы настройки сервера и клиента в развертываниях ClickOnce](../deployment/server-and-client-configuration-issues-in-clickonce-deployments.md).  
  
- Если файл конфигурации блокируется сервером, см. раздел "ошибка загрузки при попытке установить приложение [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] с расширением config" Далее в этом разделе.  
  
- Определите, произошло ли это, потому что URL-адрес `deploymentProvider` в манифесте развертывания указывает на расположение, отличное от URL-адреса, используемого для активации.  
  
- Убедитесь, что на сервере имеются все файлы. Журнал [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] должен сообщить, какой файл не был найден.  
  
- Проверьте наличие проблем с сетевым подключением. Это сообщение можно получить, если клиентский компьютер перешел в автономный режим во время загрузки.  
  
#### <a name="download-error-when-you-try-to-install-a-clickonce-application-that-has-a-config-file"></a>Ошибка скачивания при попытке установить приложение ClickOnce с файлом config  
 По умолчанию Visual Basic приложение на основе Windows включает файл App. config. Если пользователь пытается установить с веб-сервера, использующего Windows Server 2003, возникает проблема, так как эта операционная система блокирует установку файлов. config по соображениям безопасности. Чтобы включить устанавливаемый файл конфигурации, нажмите кнопку **использовать расширение файла. deploy** в диалоговом окне **Параметры публикации** .  
  
 Кроме того, для файлов. Application,. manifest и. deploy должны быть соответствующим образом заданы типы содержимого (также называемые MIME-типами). Дополнительные сведения см. в документации по веб-серверу.  
  
 Дополнительные сведения см. в разделе "Windows Server 2003: заблокированные типы содержимого" статьи [проблемы конфигурации сервера и клиента в развертываниях ClickOnce](../deployment/server-and-client-configuration-issues-in-clickonce-deployments.md).  
  
#### <a name="error-message-application-is-improperly-formatted-log-file-contains-xml-signature-is-invalid"></a>Сообщение об ошибке: "приложение неправильно отформатировано;" Файл журнала содержит "XML-подпись недопустима"  
 Убедитесь, что вы обновили файл манифеста и повторно подписали его. Повторно опубликуйте приложение с помощью [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] или с помощью Mage, чтобы снова подписать приложение.  
  
#### <a name="you-updated-your-application-on-the-server-but-the-client-does-not-download-the-update"></a>Приложение было обновлено на сервере, но клиент не скачивает обновление  
 Эту проблему можно устранить, выполнив одну из следующих задач.  
  
- Проверьте URL-адрес `deploymentProvider` в манифесте развертывания. Убедитесь, что вы обновляете биты в том же расположении, на которое `deploymentProvider` указывает.  
  
- Проверьте интервал обновления в манифесте развертывания. Если для этого интервала задано значение периодического интервала, например один раз в шесть часов, [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] не будет проверять наличие обновления до тех пор, пока этот интервал не пройдет. Вы можете изменить манифест, чтобы проверять наличие обновлений при каждом запуске приложения. Изменение интервала обновления является удобным вариантом во время разработки для проверки установки обновлений, но замедляет активацию приложения.  
  
- Попробуйте снова запустить приложение в меню "Пуск". [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] мог обнаружить обновление в фоновом режиме, но предложит установить эти биты при следующей активации.  
  
#### <a name="during-update-you-receive-an-error-that-has-the-following-log-entry-the-reference-in-the-deployment-does-not-match-the-identity-defined-in-the-application-manifest"></a>Во время обновления возникает ошибка со следующей записью журнала: "ссылка в развертывании не соответствует удостоверению, определенному в манифесте приложения"  
 Эта ошибка может возникать из-за того, что вы вручную редактировали манифесты развертывания и приложения, и это привело к тому, что описание удостоверения сборки в одном манифесте не будет синхронизировано с другим. Идентификатор сборки состоит из ее имени, версии, языка и региональных параметров и токена открытого ключа. Изучите описания удостоверений в манифестах и исправьте все различия.  
  
#### <a name="first-time-activation-from-local-disk-or-cd-rom-succeeds-but-subsequent-activation-from-start-menu-does-not-succeed"></a>При первой активации с локального диска или с компакт-диска происходит успешная активация, но последующие активации из меню "Пуск" не выполняются.  
 [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] использует URL-адрес поставщика развертывания для получения обновлений для приложения. Убедитесь, что расположение, на которое указывает URL-адрес, является правильным.  
  
#### <a name="error-cannot-start-the-application"></a>Ошибка: "не удается запустить приложение"  
 Это сообщение об ошибке обычно указывает на наличие проблемы при установке этого приложения в хранилище [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)]. Либо приложение содержит ошибку, либо хранилище повреждено. Файл журнала может сообщить, где произошла ошибка.  
  
 Необходимо выполнить следующие действия.  
  
- Убедитесь, что идентификатор манифеста развертывания, удостоверение манифеста приложения и идентификатор основного EXE приложения являются уникальными.  
  
- Убедитесь, что пути к файлам не длиннее 100 символов. Если приложение содержит слишком длинные пути к файлам, возможно превышение ограничений на максимальный путь, который можно хранить. Попробуйте сократить пути и переустановить.  
  
#### <a name="privatepath-settings-in-application-config-file-are-not-honored"></a>Параметры PrivatePath в файле конфигурации приложения не учитываются  
 Чтобы использовать PrivatePath (пути зондирования Fusion), приложение должно запросить разрешение полного доверия. Попробуйте изменить манифест приложения, чтобы запросить полное доверие, а затем повторите попытку.  
  
#### <a name="during-uninstall-a-message-appears-saying-failed-to-uninstall-application"></a>Во время удаления появляется сообщение "не удалось удалить приложение".  
 Это сообщение обычно означает, что приложение уже удалено, или хранилище повреждено. После нажатия кнопки **ОК**будет удалена запись **Добавить или удалить программу** .  
  
#### <a name="during-installation-a-message-appears-that-says-that-the-platform-dependencies-are-not-installed"></a>Во время установки появляется сообщение о том, что зависимости платформы не установлены  
 Отсутствует необходимое условие в GAC (глобальный кэш сборок), которое требуется приложению для запуска.  
  
## <a name="publishing-with-visual-studio"></a>Публикация с помощью Visual Studio  
  
#### <a name="publishing-in-visual-studio-fails"></a>Сбой публикации в Visual Studio  
 Убедитесь, что у вас есть право на публикацию на сервере, на котором вы нацелены. Например, если вы выполнили вход на компьютер сервера терминалов в качестве обычного пользователя, а не администратора, то, вероятно, у вас не будет прав, необходимых для публикации на локальном веб-сервере.  
  
 При публикации с помощью URL-адреса убедитесь, что на целевом компьютере включены серверные расширения FrontPage.  
  
#### <a name="error-message-unable-to-create-the-web-site-site-the-components-for-communicating-with-frontpage-server-extensions-are-not-installed"></a>Сообщение об ошибке: не удалось создать веб-сайт "\<сайт >". Компоненты для взаимодействия с серверными расширениями FrontPage не установлены.  
 Убедитесь, что на компьютере, на котором выполняется публикация, установлен компонент Microsoft Visual Studio Web Authoring. Для пользователей Express этот компонент не устанавливается по умолчанию. Дополнительные сведения см. на веб-сайте [http://go.microsoft.com/fwlink/?LinkId=102310](https://go.microsoft.com/fwlink/?LinkId=102310).  
  
#### <a name="error-message-could-not-find-file-microsoftwindowscommon-controls-version6000-culture-publickeytoken6595b64144ccf1df-processorarchitecture-typewin32"></a>Сообщение об ошибке: не удалось найти файл "Microsoft. Windows. Common-Controls, Version = 6.0.0.0, Culture = *, PublicKeyToken = 6595b64144ccf1df, ProcessorArchitecture =\*, Type = Win32"  
 Это сообщение об ошибке появляется при попытке публикации приложения WPF с включенными стилями оформления. Чтобы устранить эту проблему, см. раздел [как опубликовать приложение WPF с включенными визуальными стилями](../deployment/how-to-publish-a-wpf-application-with-visual-styles-enabled.md).  
  
## <a name="using-mage"></a>Использование Mage  
  
#### <a name="you-tried-to-sign-with-a-certificate-in-your-certificate-store-and-a-received-blank-message-box"></a>Вы попытались подписать сертификат в хранилище сертификатов и получено пустое окно сообщения  
 В диалоговом окне **Подписывание** необходимо:  
  
- Выберите **знак с сохраненным сертификатом**и  
  
- Выберите сертификат из списка. Первый сертификат не является выбором по умолчанию.  
  
#### <a name="clicking-the-dont-sign-button-causes-an-exception"></a>Нажатие кнопки "не подписывать" приводит к возникновению исключения  
 Эта проблема является известной ошибкой. Все манифесты [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] должны быть подписаны. Просто выберите один из параметров подписывания и нажмите кнопку **ОК**.  
  
## <a name="additional-errors"></a>Дополнительные ошибки  
 В следующей таблице показаны некоторые распространенные сообщения об ошибках, которые пользователь клиентского компьютера может получить, когда пользователь устанавливает [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] приложение. Каждое сообщение об ошибке отображается рядом с описанием наиболее вероятной причины ошибки.  
  
|Сообщение об ошибке|Описание|  
|-------------------|-----------------|  
|Не удается запустить приложение. Обратитесь к издателю приложения.<br /><br /> Не удается запустить приложение. Обратитесь за помощью к поставщику приложения.|Это общие сообщения об ошибках, которые возникают, когда не удается запустить приложение и не удается найти другие конкретные причины. Часто это означает, что приложение каким-либо образом повреждено или что хранилище [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] повреждено.|  
|Не удается продолжить. Приложение имеет неправильный формат. Обратитесь за помощью к издателю приложения.<br /><br /> Проверка приложения не выполнена. Продолжение невозможно.<br /><br /> Не удалось получить файлы приложения. Файлы повреждены при развертывании.|Один из файлов манифеста в развертывании синтаксически недействителен или содержит хэш, который не может быть согласован с соответствующим файлом. Эта ошибка может также означать, что манифест, внедренный в сборку, поврежден. Повторное создание развертывания и повторная компиляция приложения, а также поиск и исправление ошибок в манифестах вручную.|  
|Не удается получить приложение. Ошибка проверки подлинности.<br /><br /> Установка приложения не выполнена. Не удается разместить файлы приложений на сервере. Обратитесь за помощью к издателю приложения или к администратору.|Не удается скачать один или несколько файлов в развертывании, так как у вас нет разрешения на доступ к ним. Это может быть вызвано ошибкой 403, которая возвращается веб-сервером, что может произойти, если один из файлов в развертывании заканчивается расширением, позволяющим веб-серверу рассматривать его как защищенный файл. Кроме того, для доступа к каталогу, содержащему один или несколько файлов приложения, может потребоваться имя пользователя и пароль.|  
|Не удается скачать приложение. В приложении отсутствуют необходимые файлы. Обратитесь за помощью к поставщику приложения или к системному администратору.|Один или несколько файлов, перечисленных в манифесте приложения, не найдены на сервере. Убедитесь, что все зависимые от развертывания файлы отправлены, и повторите попытку.|  
|Загрузка приложения не выполнена. Проверьте сетевое подключение или обратитесь к системному администратору или поставщику сетевых услуг.|[!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] не удается установить сетевое подключение к серверу. Проверьте доступность сервера и состояние сети.|  
|Сбой Урлдовнлоадтокачефиле с HRESULT "\<number >". При попытке загрузить файл "\<>" произошла ошибка.|Если пользователь установил параметр Internet Explorer Advanced Security (предупреждать при переходе между безопасным и небезопасным режимами) на целевом компьютере развертывания, и если URL-адрес установки устанавливаемого приложения ClickOnce перенаправляется с незащищенного на защищенный сайт (или наоборот), установка не будет выполнена, так как предупреждение Internet Explorer прервет его.<br /><br /> Для решения этой проблемы можно выполнить одно из следующих действий.<br /><br /> -Снимите флажок безопасность.<br />— Убедитесь, что URL-адрес установки не перенаправляется таким образом, чтобы изменить режим безопасности.<br />— Полностью удалить перенаправление, указав фактический URL-адрес настройки.|  
|Произошла ошибка при записи на жесткий диск. Возможно, на диске недостаточно свободного места. Обратитесь за помощью к поставщику приложения или к системному администратору.|Это может означать нехватку дискового пространства для хранения приложения, но оно также может указывать на более общую ошибку ввода-вывода при попытке сохранить файлы приложения на диске.|  
|Не удается запустить приложение. Недостаточно свободного места на диске.|Жесткий диск заполнен. Освободите место и попробуйте запустить приложение еще раз.|  
|Одновременно выполняется попытка загрузки слишком большого числа развернутых активаций.|[!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] ограничивает количество различных приложений, которые могут запускаться одновременно. В основном это помогает защититься от вредоносных попыток инстигате атак типа «отказ в обслуживании» на локальную службу [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)]; Пользователи, которые пытаются повторно запустить одно и то же приложение, в быстрых успешных операциях будут иметь только один экземпляр приложения.|  
|Ярлыки нельзя активировать по сети.|Ярлыки для [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] приложения можно запускать только на локальном жестком диске. Они не могут быть запущены путем открытия URL-адреса, указывающего на файл ярлыка на удаленном сервере.|  
|Приложение слишком велико для работы в режиме частичного доверия. Обратитесь за помощью к поставщику приложения или к системному администратору.|Приложение, выполняющееся в режиме частичного доверия, не может быть больше половины размера квоты онлайн-приложения, значение по умолчанию — 250 МБ.|  
  
## <a name="see-also"></a>См. также  
 [Развертывание и безопасность технологии ClickOnce](../deployment/clickonce-security-and-deployment.md)   
 [Устранение неполадок развертывания ClickOnce](../deployment/troubleshooting-clickonce-deployments.md)
