---
title: Локализация приложений ClickOnce | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-deployment
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- WPF, ClickOnce applications
- ClickOnce deployment, globalization
- deploying applications [ClickOnce], localizing ClickOnce applications
- localization, ClickOnce deployment
- ClickOnce deployment, download on-demand
- ClickOnce deployment, localization
- Windows Forms, ClickOnce applications
- console applications, ClickOnce applications
ms.assetid: c92b193b-054d-4923-834b-d4226a4c7a1a
caps.latest.revision: 18
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 3c29bd6a58d510d98f2a08c96d0cd0bc774e197e
ms.sourcegitcommit: 08fc78516f1107b83f46e2401888df4868bb1e40
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2019
ms.locfileid: "65679999"
---
# <a name="localizing-clickonce-applications"></a>Локализация приложений ClickOnce
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Локализация — это процедура адаптации вашего приложения к конкретному языку и региональным параметрам. Эта процедура включает перевод текста пользовательского интерфейса на определенный язык, использование подходящего формата дат и валюты, изменение размера элементов управления в формах и зеркальное отражение элементов управления справа налево, если необходимо.  
  
 Локализация приложения позволяет создать одну или более вспомогательных сборок. Каждая сборка содержит строки пользовательского интерфейса, изображения и другие ресурсы, соответствующие конкретной культуре. (Главный исполняемый файл приложения содержит строки для языка и региональных параметров по умолчанию вашего приложения).  
  
 В этом разделе описываются три способа развертывания приложения [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] для других языков и региональных параметров.  
  
- Включение всех вспомогательных сборок в одно развертывание.  
  
- Создание одного развертывания для каждого языка и региональных параметров, содержащего одну вспомогательную сборку.  
  
- Загрузка вспомогательных сборок по требованию  
  
## <a name="including-all-satellite-assemblies-in-a-deployment"></a>Включение всех вспомогательных сборок в развертывание  
 Вместо публикации нескольких развертываний [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] можно опубликовать одно развертывание [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)], содержащее все вспомогательные сборки.  
  
 Этот метод используется в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] по умолчанию. Для использования этого метода в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] не нужно выполнять никаких дополнительных действий.  
  
 Чтобы использовать этот метод с помощью MageUI.exe, необходимо задать язык и региональные параметры для вашего приложения, чтобы **нейтральный** в MageUI.exe. Затем необходимо вручную включить в развертывание все вспомогательные сборки. В MageUI.exe можно добавить вспомогательные сборки с помощью **заполнить** кнопку **файлы** вкладке манифеста приложения.  
  
 Преимущество такого подхода заключается в создании одного развертывания, что значительно упрощает локализованное развертывание. Во время выполнения будет использоваться соответствующая вспомогательная сборка в зависимости от языка и региональных параметров по умолчанию ОС Windows пользователя. Недостатком данного подхода является то, что все вспомогательные сборки загружаются всякий раз при установке или обновлении приложения на клиентском компьютере. Если приложение имеет большое количество строк или у клиентов медленное сетевое подключение, этот процесс может повлиять на производительность во время обновления приложения.  
  
> [!NOTE]
> При использовании этого подхода предполагается, что приложение изменяет высоту, ширину и положение элементов управления автоматически, адаптируя внешний вид с учетом разного размера текстовых строк в разных культурах. Windows Forms содержит разнообразные элементы управления и технологии, которые позволяют разрабатывать форму так, чтобы ее было удобно локализовать, включая элементы управления <xref:System.Windows.Forms.FlowLayoutPanel> и <xref:System.Windows.Forms.TableLayoutPanel>, а также свойство <xref:System.Windows.Forms.Control.AutoSize%2A>.  Также см. раздел [Как Поддержки локализации в Windows Forms, с помощью функции AutoSize и элемента управления TableLayoutPanel](https://msdn.microsoft.com/library/1zkt8b33\(v=vs.110\)).  
  
## <a name="generate-one-deployment-for-each-culture"></a>Создание одного развертывания для каждого языка и региональных параметров  
 В этой стратегии развертывания создается несколько развертываний. В каждое развертывание включается только одна вспомогательная сборка, необходимая для конкретного языка и региональных параметров, и помечается, что развертывание соответствует определенному языку и региональным параметрам.  
  
 Для использования этого метода в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] задайте нужный регион в свойстве **Язык публикации** на вкладке **Опубликовать**. [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] автоматически включит вспомогательную сборку, необходимую для выбранного региона, и исключит из развертывания все остальные вспомогательные сборки.  
  
 Того же результата можно добиться, воспользовавшись средством MageUI.exe в Microsoft [!INCLUDE[winsdklong](../includes/winsdklong-md.md)]. Используйте **заполнить** кнопку **файлы** манифест приложения, чтобы исключить все остальные вспомогательные сборки из каталога приложения, а затем установите на вкладке **языка и региональных параметров**на **имя** вкладку для манифеста развертывания в MageUI.exe. Эти действия позволяют не только включить нужную вспомогательную сборку, но и задать соответствующий язык и региональные параметры для атрибута `language` элемента `assemblyIdentity` в манифесте развертывания.  
  
 После публикации приложения необходимо повторить этот шаг для всех поддерживаемых приложением языков и региональных параметров. Необходимо убедиться, что все публикации выполняются в разные каталоги веб-сервера или каталоги общих папок, потому что каждый манифест приложения будет ссылаться на определенную вспомогательную сборку, а каждый манифест развертывания будет иметь определенное значение для атрибута `language`.  
  
## <a name="downloading-satellite-assemblies-on-demand"></a>Загрузка вспомогательных сборок по требованию  
 Если решено включить все вспомогательные сборки в одно развертывание, производительность системы можно повысить, воспользовавшись загрузкой по требованию, что позволяет помечать сборки как необязательные. Помеченные сборки не будут загружаться при установке или обновлении приложения. Вызов метода <xref:System.Deployment.Application.ApplicationDeployment.DownloadFileGroup%2A> в классе <xref:System.Deployment.Application.ApplicationDeployment> позволяет устанавливать сборки тогда, когда они требуются.  
  
 Загрузка вспомогательных сборок по требованию несколько отличается от загрузки по требованию других типов сборок. Дополнительные сведения и примеры кода по включению данного сценария с помощью [!INCLUDE[winsdkshort](../includes/winsdkshort-md.md)] средства для [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)], см. в разделе [Пошаговое руководство: Загрузка вспомогательных сборок по требованию с помощью API развертывания ClickOnce](../deployment/walkthrough-downloading-satellite-assemblies-on-demand-with-the-clickonce-deployment-api.md).  
  
 Этот сценарий также можно включить в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)].  Также см. в разделе [Пошаговое руководство: Загрузка вспомогательных сборок по требованию с помощью API развертывания ClickOnce с помощью конструктора](https://msdn.microsoft.com/library/ms366788\(v=vs.110\)) или [Пошаговое руководство: Загрузка вспомогательных сборок по требованию с помощью API развертывания ClickOnce с помощью конструктора](https://msdn.microsoft.com/library/ms366788\(v=vs.120\)).  
  
## <a name="testing-localized-clickonce-applications-before-deployment"></a>Тестирование локализованных приложений ClickOnce перед развертыванием  
 Вспомогательная сборка будет использоваться для приложения Windows Forms только в том случае, если для свойства <xref:System.Threading.Thread.CurrentUICulture%2A> для основного потока приложения задан язык и региональные параметры вспомогательной сборки . Клиенты на местах, вероятно, уже пользуются локализованной версией Windows, в которой нужный язык и региональные параметры по умолчанию заданы правильно.  
  
 Существует три варианта тестирования локализованных развертываний до предоставления приложения пользователям.  
  
- Можно запустить приложение [!INCLUDE[ndptecclick](../includes/ndptecclick-md.md)] в соответствующих локализованных версиях Windows.  
  
- Можно задать свойство <xref:System.Threading.Thread.CurrentUICulture%2A> в своем приложении программным образом. (Это свойство нужно задать до вызова метода <xref:System.Windows.Forms.Application.Run%2A>).  
  
## <a name="see-also"></a>См. также  
 [\<assemblyIdentity > элемент](../deployment/assemblyidentity-element-clickonce-deployment.md)   
 [Развертывание и безопасность технологии ClickOnce](../deployment/clickonce-security-and-deployment.md)   
 [Глобализация Windows Forms](https://msdn.microsoft.com/library/72f6cd92-83be-45ec-aa37-9cb8e3ebc3c5)
