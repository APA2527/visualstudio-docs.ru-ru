---
title: Рефакторинг переименования (C#) | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-general
ms.topic: reference
f1_keywords:
- vs.csharp.refactoring.rename
dev_langs:
- CSharp
helpviewer_keywords:
- refactoring [C#], Rename
- Rename refactoring [C#]
ms.assetid: 268942fc-b142-4dfa-8d90-bedd548c2e4f
caps.latest.revision: 45
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 0db7696268e5e3d24d005fbf35a08b330f2dc849
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2019
ms.locfileid: "72667475"
---
# <a name="rename-refactoring-c"></a>Переименовать рефакторинг (C#)
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

**Refactor** — это функция рефакторинга в интегрированной среде разработки (IDE) Visual Studio, которая предоставляет простой способ переименования идентификаторов для символов кода, таких как поля, локальные переменные, методы, пространства имен, свойства и типы. **Rename** можно использовать для изменения имен в комментариях и в строках, а также для изменения объявлений и вызовов идентификатора.

> [!NOTE]
> При использовании системы управления версиями для Visual Studio получите последнюю версию источников, прежде чем пытаться выполнить рефакторинг переименования.

 Рефакторинг переименования доступен в следующих функциях Visual Studio:

|Возможность|Поведение рефакторинга в интегрированной среде разработки|
|-------------|----------------------------------------|
|Редактор кода|В редакторе кода Рефакторинг переименования доступен при наведении курсора на определенные типы символов кода. Если курсор находится в этой позиции, можно вызвать команду **Rename** , введя сочетание клавиш (Ctrl + r, Ctrl + r) или выбрав команду **Переименовать** из смарт-тега, контекстного меню или меню **Рефакторинг** .|
|Представление классов|При выборе идентификатора в представление классов Рефакторинг переименования доступен в контекстном меню и в меню **рефакторинга** .|
|Обозреватель объектов|При выборе идентификатора в обозревателе объектов Рефакторинг переименования доступен только в меню " **Рефакторинг** ".|
|Сетка свойств конструктор Windows Forms|В **сетке свойств** конструктор Windows Forms при изменении имени элемента управления будет инициирована операция переименования для этого элемента управления. Диалоговое окно **Переименование** не появится.|
|обозреватель решений|В **Обозреватель решений**команда **Переименовать** доступна в контекстном меню. Если выбранный исходный файл содержит класс, имя класса которого совпадает с именем файла, можно использовать эту команду для одновременного переименования исходного файла и выполнения рефакторинга переименования.<br /><br /> Например, если создать приложение на основе Windows по умолчанию, а затем переименовать Form1.cs в TestForm.cs, имя исходного файла Form1.cs изменится на TestForm.cs, а класс Form1 и все ссылки на этот класс будут переименованы в Тестформ. **Примечание.**  Команда **Undo** (Ctrl + Z) отменяет только Рефакторинг переименования в коде и не изменяет имя файла обратно на исходное имя. <br /><br /> Если выбранный исходный файл не содержит класс, имя которого совпадает с именем файла, команда **Refactor** в **Обозреватель решений** будет переименовывать только исходный файл и не будет выполнять Рефакторинг переименования.|

## <a name="rename-operations"></a>Операции переименования
 При выполнении **переименования**подсистема рефакторинга выполняет операцию переименования, относящуюся к каждому символу кода, как описано в следующей таблице.

|Символ кода|Операция переименования|
|-----------------|----------------------|
|Поле|Изменяет объявление и использование поля на новое имя.|
|Локальная переменная|Изменяет объявление и использование переменной на новое имя.|
|Метод|Изменяет имя метода и все ссылки на этот метод на новое имя. **Примечание.**  При переименовании метода расширения операция переименования распространяется на все экземпляры метода, которые находятся в области, независимо от того, используется ли метод расширения в качестве статического метода или метода экземпляра. Дополнительные сведения см. в разделе [Методы расширения](https://msdn.microsoft.com/library/175ce3ff-9bbf-4e64-8421-faeb81a0bb51).|
|Пространство имен|Изменяет имя пространства имен на новое имя в объявлении, все операторы `using` и полные имена. **Примечание.**  При переименовании пространства имен [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] также обновляет свойство **пространства имен по умолчанию** на странице **приложения** в **конструкторе проектов**. Это свойство нельзя сбросить, выбрав в меню **Правка** пункт **отменить** . Чтобы сбросить значение свойства **пространства имен по умолчанию** , необходимо изменить свойство в **конструкторе проектов**. Дополнительные сведения см. на [странице приложения](../ide/reference/application-page-project-designer-csharp.md).|
|свойство;|Изменяет объявление и использование свойства на новое имя.|
|Type|Изменяет все объявления и все случаи использования типа на новое имя, включая конструкторы и деструкторы. Для разделяемых типов операция переименования будет распространяться на все части.|

#### <a name="to-rename-an-identifier"></a>Переименование идентификатора

1. Создайте консольное приложение с именем `RenameIdentifier`, а затем замените `Program` на следующий пример кода.

    ```csharp
    class ProtoClassA
    {
        // Invoke on 'MethodB'.
        public void MethodB(int i, bool b) { }
    }

    class ProtoClassC
    {
        void D()
        {
            ProtoClassA MyClassA = new ProtoClassA();

            // Invoke on 'MethodB'.
            MyClassA.MethodB(0, false);
        }
    }
    ```

2. Поместите курсор на `MethodB`, либо в объявлении метода, либо в вызове метода.

3. В меню **Рефакторинг** выберите команду **Переименовать**. Откроется диалоговое окно **Переименование** .

     Можно также щелкнуть курсор правой кнопкой мыши, навести указатель на пункт **Рефакторинг** в контекстном меню и выбрать команду **Переименовать** , чтобы открыть диалоговое окно **Переименование** .

4. В поле **New Name (новое имя** ) введите `MethodC`.

5. Установите флажок **Искать в комментариях** .

6. Нажмите кнопку **ОК**.

7. В диалоговом окне **Просмотр изменений** нажмите кнопку **Применить**.

#### <a name="to-rename-an-identifier-using-smart-tags"></a>Переименование идентификатора с помощью смарт-тегов

1. Создайте консольное приложение с именем `RenameIdentifier`, а затем замените `Program` на следующий пример кода.

    ```csharp
    class ProtoClassA
    {
        // Invoke on 'MethodB'.
        public void MethodB(int i, bool b) { }
    }

    class ProtoClassC
    {
        void D()
        {
            ProtoClassA MyClassA = new ProtoClassA();

            // Invoke on 'MethodB'.
            MyClassA.MethodB(0, false);
        }
    }
    ```

2. В объявлении для `MethodB` введите или BACKSPACE в качестве идентификатора метода. Под этим идентификатором появится запрос смарт-тега.

    > [!NOTE]
    > Рефакторинг переименования можно вызвать только с помощью смарт-тегов в объявлении идентификатора.

3. Введите сочетание клавиш SHIFT + ALT + F10, а затем нажмите клавишу Стрелка вниз, чтобы открыть меню смарт-тега.

     \- или -

     Наведите указатель мыши на запрос смарт-тега, чтобы отобразить смарт-тег. Затем наведите указатель мыши на смарт-тег и щелкните стрелку вниз, чтобы открыть меню смарт-тега.

4. Выберите пункт меню **Переименовать "\<identifer1 >" в "\<identifier2 >"** , чтобы вызвать Рефакторинг переименования без предварительного просмотра изменений в коде. Все ссылки на **\<identifer1 >** будут автоматически обновлены до **\<identifier2 >** .

     \- или -

     Выберите пункт меню **Переименовать с предварительным просмотром** , чтобы вызвать Рефакторинг переименования с предварительным просмотром изменений в коде. Появится диалоговое окно **Просмотр изменений** .

## <a name="remarks"></a>Заметки

## <a name="renaming-implemented-or-overridden-members"></a>Переименование реализованных или переопределенных членов
 При **переименовании** члена, который либо реализует/Overrides, либо реализуется или переопределяется членами других типов, [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] отображает диалоговое окно с сообщением о том, что операция переименования приведет к каскадным обновлениям. При нажатии кнопки **продолжить**подсистема рефакторинга рекурсивно находит и переименовывает все члены в базовых и производных типах, которые имеют связи Implements/Overrides с переименованным членом.

 В следующем примере кода содержатся элементы с отношениями Implements и Overrides.

 [!code-csharp[CsUsingCsIDERefactor#1](../snippets/csharp/VS_Snippets_VBCSharp/CsUsingCsIDERefactor/CS/Class1.cs#1)]

 В предыдущем примере переименование `C.Method()` также переименовывает `Ibase.Method()`, так как `C.Method()` реализует `Ibase.Method()`. Затем подсистема рефакторинга рекурсивно видит, что `Ibase.Method()` реализуется `Derived.Method()` и переименовывает `Derived.Method()`. Механизм рефакторинга не переименовывает `Base.Method()`, поскольку `Derived.Method()` не переопределяет `Base.Method()`. Подсистема рефакторинга останавливается, если в диалоговом окне **Переименование** не установлены **переименованные перегрузки** .

 Если флажок **Переименовать перегрузки** установлен, подсистема реструктуризации переименовывает `Derived.Method(int i)`, так как перегружает `Derived.Method()`, `Base.Method(int i)`, так как она переопределяется `Derived.Method(int i)` и `Base.Method()`, поскольку является перегрузкой `Base.Method(int i)`.

> [!NOTE]
> При переименовании элемента, определенного в сборке, на которую указывает ссылка, в диалоговом окне объясняется, что переименование приведет к ошибкам сборки.

## <a name="renaming-properties-of-anonymous-types"></a>Переименование свойств анонимных типов
 При переименовании свойства в анонимных типах операция переименования распространяется на свойства в других анонимных типах, имеющих те же свойства. В следующих примерах показано такое поведение.

```csharp
var a = new { ID = 1};
var b = new { ID = 2};
```

 В приведенном выше коде переименование `ID` изменит `ID` в обеих инструкциях, так как они имеют тот же самый базовый анонимный тип.

```csharp
var companyIDs =
    from c in companylist
    select new { ID = c.ID, Name = c.Name};

var orderIDs =
    from o in orderlist
    select new { ID = o.ID, Item = o.Name};
```

 В приведенном выше коде переименование `ID` приведет к переименованию только одного экземпляра `ID`, так как `companyIDs` и `orderIDs` имеют разные свойства.

## <a name="see-also"></a>См. также раздел
 [Рефакторинг (C#)](../csharp-ide/refactoring-csharp.md) [анонимные типы](https://msdn.microsoft.com/library/59c9d7a4-3b0e-475e-b620-0ab86c088e9b)