---
title: Приложения из хранилища анализа статического кода C++
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-test
ms.topic: conceptual
f1_keywords:
- vs.codeanalysis.propertypages.native.express
ms.assetid: c5355e43-a37c-4686-a969-18e3dfc59a9c
caps.latest.revision: 15
author: alexhomer1
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: c20fe8bccdf48cf307dda72a085b3c2a72f1d0cf
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "72672711"
---
# <a name="analyze-c-code-quality-of-store-apps-using-visual-studio-static-code-analysis"></a>Анализ качества кода C++ в приложениях Магазина с помощью функций анализа статического кода Visual Studio
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Применяется к Windows и Windows Phone] (.. /Video windows_and_phone_content.png "windows_and_phone_content")

 Средство анализа кода в выпусках Visual Studio Express анализирует код с целью найти общие проблемы и нарушения рекомендаций программирования. Предупреждения, возникающие в ходе анализа кода, отличаются от ошибок и предупреждений компилятора, потому что при анализе кода выполняется поиск конкретных шаблонов кода, которые являются допустимыми, но, тем не менее, могут вызвать проблемы при использовании кода вами или другими специалистами. Анализ кода позволяет находить дефекты в коде, которые невозможно обнаружить в процессе тестирования. Регулярный запуск средства анализа кода в процессе разработки позволяет создать приложение более высокого качества.

> [!NOTE]
> В Visual Studio Ultimate, Visual Studio Premium и Visual Studio Professional можно пользоваться всеми функциональными возможностями средств анализа кода. См. статью [Анализ качества приложений с помощью средств анализа кода](https://msdn.microsoft.com/library/dd264897.aspx) в библиотеке MSDN.

## <a name="running-code-analysis"></a><a name="BKMK_Run"></a> Выполнение анализа кода
 Чтобы запустить анализ кода для решения Visual Studio, выполните следующие действия:

- В меню **Сборка** выберите **Выполнить анализ кода в решении**.

  Чтобы анализ кода автоматически запускался при каждом построении проекта, выполните следующие действия:

1. Выберите имя проекта в обозревателе решений и щелкните **Свойства**.

2. На странице свойств проекта выберите **Анализ кода** и установите флажок **Включить анализ кода для C/C++ при сборке**.

   Решение компилируется, и запускается анализ кода. Результаты выводятся в окне "Анализ кода".

   ![Окно анализа кода](../test/media/ca-cpp-collapsed.png "CA_CPP_Collapsed")

## <a name="analyzing-and-resolving-code-analysis-warnings"></a><a name="BKMK_Analyze"></a> Анализ и разрешение предупреждений анализа кода
 Чтобы проанализировать конкретное предупреждение, выберите заголовок предупреждения в окне "Анализ кода". Предупреждение разворачивается, позволяя просмотреть подробные сведения о проблеме. По возможности средство анализа кода отображает номер строки и логическую схему анализа, вызвавшие предупреждение.

 ![Расширенное предупреждение анализа кода](../test/media/ca-cpp-expanded-callout.png "CA_CPP_Expanded_Callout")

 При разворачивании предупреждения строки кода, которые вызвали предупреждение, выделяются в редакторе кода Visual Studio.

 ![Выделенный исходный код](../test/media/ca-cpp-sourceline.png "CA_CPP_SourceLine")

 Поняв, в чем заключается проблема, можно разрешить ее в коде. После этого повторно запустите анализ кода, чтобы убедиться, что предупреждение больше не отображается в окне анализа кода и исправление не привело к появлению новых предупреждений.

> [!TIP]
> Повторно запустить анализ кода можно из окна "Анализ кода". Нажмите кнопку **Анализировать** и выберите область анализа. Можно повторно запустить анализ для всего решения или для выбранного проекта.

## <a name="suppressing-code-analysis-warnings"></a><a name="BKMK_Suppress"></a> Подавление предупреждений анализа кода
 В некоторых случаях разработчик может принять решение не разрешать предупреждение анализа кода. Возможно, разрешение предупреждения требует слишком значительного переписывания кода в сравнении с вероятностью того, что проблема проявит себя в какой-либо реальной его реализации. Или, например, разработчик может посчитать, что используемая в предупреждении логика анализа не соответствует данному контексту. Можно подавить отдельные предупреждения, чтобы они больше не отображались в окне "Анализа кода".

 Чтобы подавить предупреждение, выполните следующие действия.

1. Если подробные сведения не отображаются, разверните заголовок предупреждения.

2. Выберите ссылку **Действия** внизу предупреждения.

3. Выберите **Подавить сообщение** и щелкните **В исходном**.

   Подавление сообщения вставляет `#pragma(warning:` *варнингид* `)` , которое подавляет предупреждение для строки кода.

## <a name="searching-and-filtering-code-analysis-results"></a><a name="BKMK_Search"></a> Поиск и фильтрация результатов анализа кода
 Можно выполнять поиск в длинных списках предупреждений, а также фильтровать предупреждения в решениях, состоящих из нескольких проектов.

 ![Поиск и фильтрация в окне анализа кода](../test/media/ca-searchfilter.png "CA_SearchFilter")

## <a name="c-code-analysis-warnings"></a><a name="Warnings"></a> Предупреждения анализа кода C++
 Анализ кода C++ вызывает следующие предупреждения:

|                                      Правило                                      |                                                  Описание                                                  |
|--------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|                       [C6001](../code-quality/c6001.md)                        |                                          Использование неинициализированной памяти                                           |
|                       [C6011](../code-quality/c6011.md)                        |                                          Разыменование пустого (NULL) указателя                                           |
|                       [C6029](../code-quality/c6029.md)                        |                                            Использование значения unchecked                                             |
|                       [C6053](../code-quality/c6053.md)                        |                                          Вызов завершается нулем                                           |
|                       [C6059](../code-quality/c6059.md)                        |                                               Неверное объединение                                               |
|                       [C6063](../code-quality/c6063.md)                        |                                  Пропущен строковый аргумент функции форматирования                                   |
|                       [C6064](../code-quality/c6064.md)                        |                                  Пропущен целочисленный аргумент функции форматирования                                  |
|                       [C6066](../code-quality/c6066.md)                        |                                  Пропущен аргумент-указатель функции форматирования                                  |
|                       [C6067](../code-quality/c6067.md)                        |                              Пропущен аргумент указателя на строку для функции форматирования                               |
|                       [C6101](../code-quality/c6101.md)                        |                                        Возврат неинициализированной памяти                                         |
|                       [C6200](../code-quality/c6200.md)                        |                                         Индекс превышает максимальный размер буфера                                          |
|                       [C6201](../code-quality/c6201.md)                        |                                      Индекс превышает максимальный размер буфера стека                                       |
|                       [C6270](../code-quality/c6270.md)                        |                                   Пропущен аргумент с плавающей запятой для функции форматирования                                   |
|                       [C6271](../code-quality/c6271.md)                        |                                       Лишний аргумент у функции форматирования                                       |
|                       [C6272](../code-quality/c6272.md)                        |                                     Аргумент не с плавающей запятой у функции форматирования                                     |
|                       [C6273](../code-quality/c6273.md)                        |                                    Нецелочисленный аргумент у функции форматирования                                     |
|                       [C6274](../code-quality/c6274.md)                        |                                   Несимвольный аргумент у функции форматирования                                   |
|                       [C6276](../code-quality/c6276.md)                        |                                              Недопустимое приведение строки                                              |
|                       [C6277](../code-quality/c6277.md)                        |                                          Недопустимый вызов CreateProcess                                           |
|                       [C6284](../code-quality/c6284.md)                        |                                  Недопустимый объект в качестве аргумента функции форматирования                                   |
|                       [C6290](../code-quality/c6290.md)                        |                                      Приоритет логического НЕ и побитового И                                       |
|                       [C6291](../code-quality/c6291.md)                        |                                       Приоритет логического НЕ и побитового ИЛИ                                       |
|                       [C6302](../code-quality/c6302.md)                        |                             Недопустимый аргумент в виде строки символов у функции форматирования                              |
|                       [C6303](../code-quality/c6303.md)                        |                           Недопустимый аргумент в виде строки расширенных символов у функции форматирования                           |
|                       [C6305](../code-quality/c6305.md)                        |                                         Несоответствие размера и количества                                         |
|                       [C6306](../code-quality/c6306.md)                        |                                   Недопустимый переменный аргумент при вызове функции                                   |
|                       [C6328](../code-quality/c6328.md)                        |                                       Возможное несоответствие типа аргумента                                        |
|                       [C6385](../code-quality/c6385.md)                        |                                                 Переполнение при чтении                                                  |
|                       [C6386](../code-quality/c6386.md)                        |                                                 Переполнение при записи                                                 |
|                       [C6387](../code-quality/c6387.md)                        |                                            Недопустимое значение параметра                                            |
|                       [C6500](../code-quality/c6500.md)                        |                                          Недопустимое свойство атрибута                                           |
|                       [C6501](../code-quality/c6501.md)                        |                                     Конфликт значений свойств атрибутов                                     |
|                       [C6503](../code-quality/c6503.md)                        |                                           Ссылки не могут быть пустыми (NULL)                                           |
|                       [C6504](../code-quality/c6504.md)                        |                                              Значение NULL у переменной, не являющейся указателем                                              |
|                       [C6505](../code-quality/c6505.md)                        |                                               MustCheck для Void                                               |
|                       [C6506](../code-quality/c6506.md)                        |                                      Размер буфера для массива или переменной, не являющейся указателем                                      |
| [C6507](https://msdn.microsoft.com/18f88cd1-d035-4403-a6a4-12dd0affcf21)        |                                       Несовпадение NULL на уровне разыменовывания 0                                       |
|                       [C6508](../code-quality/c6508.md)                        |                                           Попытка записи константы                                            |
|                       [C6509](../code-quality/c6509.md)                        |                                          Использование return в предусловии                                          |
|                       [C6510](../code-quality/c6510.md)                        |                                        Завершение нулем у переменной, не являющейся указателем                                         |
|                       [C6511](../code-quality/c6511.md)                        |                                          Свойство MustCheck должно иметь значение Yes или No                                          |
|                       [C6513](../code-quality/c6513.md)                        |                                       Размер элемента без размера буфера                                        |
|                       [C6514](../code-quality/c6514.md)                        |                                        Размер буфера превышает размер массива                                         |
|                       [C6515](../code-quality/c6515.md)                        |                                          Размер буфера для переменной, не являющейся указателем                                           |
|                       [C6516](../code-quality/c6516.md)                        |                                          Нет свойств у атрибута                                           |
|                       [C6517](../code-quality/c6517.md)                        |                                       Допустимый размер у буфера, недоступного для чтения                                       |
|                       [C6518](../code-quality/c6518.md)                        |                                     Записываемый размер у буфера, недоступного для записи                                      |
| [C6521](https://msdn.microsoft.com/e98d0ae3-6f13-47b2-9a15-15d4055af9ef)  |                                        Недопустимый размер у разыменования строки                                        |
|                       [C6522](../code-quality/c6522.md)                        |                                           Недопустимый размер у строкового типа                                            |
| [C6523](https://msdn.microsoft.com/11397a31-b224-46b0-afb7-d49ca576a3bb)  |                                         Недопустимый размер у параметра строки                                         |
|                       [C6525](../code-quality/c6525.md)                        |                                   Недоступное расположение у строки недопустимого размера                                    |
| [C6526](https://msdn.microsoft.com/59c590c7-0098-4166-a1ac-87f324596002)  |                                        Недопустимый размер у типа буфера строки                                        |
|                       [C6527](../code-quality/c6527.md)                        |              Недопустимая аннотация: свойство "NeedsRelease" не может использоваться для значений типа void               |
|                       [C6530](../code-quality/c6530.md)                        |                                       Неизвестный стиль строки формата                                        |
|                       [C6540](../code-quality/c6540.md)                        | Если для данной функции использовать аннотации атрибута, все ее существующие аннотации __declspec станут недействительными  |
|                       [C6551](../code-quality/c6551.md)                        |                              Недопустимая спецификация размера: синтаксический анализ выражения невозможен                              |
|                       [C6552](../code-quality/c6552.md)                        |                              Недопустимый Deref= или Notref=: синтаксический анализ выражения невозможен                               |
|                       [C6701](../code-quality/c6701.md)                        |                                  Значение не является одним из допустимых значений (Yes/No/Maybe):                                  |
|                       [C6702](../code-quality/c6702.md)                        |                                        Значение не является строковым                                        |
|                       [C6703](../code-quality/c6703.md)                        |                                           Значение не является числом                                           |
|                       [C6704](../code-quality/c6704.md)                        |                                    Непредвиденная ошибка выражения аннотации                                     |
|                       [C6705](../code-quality/c6705.md)                        |     Ожидаемое число аргументов для аннотации не совпадает с фактическим числом аргументов      |
|                       [C6706](../code-quality/c6706.md)                        |                                  Непредвиденная ошибка аннотации                                   |
|                      [C28021](../code-quality/c28021.md)                       |                                Аннотируемый параметр должен быть указателем                                |
|                      [C28182](../code-quality/c28182.md)                       |         Разыменование пустого (NULL) указателя. Этот указатель содержит то же значение NULL, которое содержал другой указатель.          |
|                      [C28202](../code-quality/c28202.md)                       |                                    Недопустимая ссылка на нестатический член                                     |
|                      [C28203](../code-quality/c28203.md)                       |                                     Неоднозначная ссылка на член класса.                                      |
|                      [C28205](../code-quality/c28205.md)                       |                           \_Success\_ или \_On_failure\_ используется в недопустимом контексте                            |
|                      [C28206](../code-quality/c28206.md)                       |                                   Левый операнд указывает на структуру, используйте "->"                                   |
|                      [C28207](../code-quality/c28207.md)                       |                                       Левый операнд является структурой, используйте "."                                       |
|                      [C28210](../code-quality/c28210.md)                       |                 Аннотации для контекста _on_failure_ не должны находиться в явном предконтексте                  |
|                      [C28211](../code-quality/c28211.md)                       |                                 Для SAL_context ожидалось имя статического контекста                                  |
|                      [C28212](../code-quality/c28212.md)                       |                                  Для аннотации ожидалось выражение указателя                                   |
|                      [C28213](../code-quality/c28213.md)                       | Аннотация \_Use_decl_annotations\_ должна использоваться для ссылки, без изменения, перед объявлением. |
|                      [C28214](../code-quality/c28214.md)                       |                                   Допустимые имена параметров атрибута: p1...p9                                   |
|                      [C28215](../code-quality/c28215.md)                       |                    typefix нельзя применять к параметру, который уже имеет typefix                    |
|                      [C28216](../code-quality/c28216.md)                       |        Аннотация checkReturn применяется только к постусловиям для конкретного параметра функции.         |
|                      [C28217](../code-quality/c28217.md)                       |            Для функции число параметров у аннотации не совпадает с числом в файле             |
|                      [C28218](../code-quality/c28218.md)                       |             Для параметра функции параметр аннотации не соответствует значению, найденному в файле              |
|                      [C28219](../code-quality/c28219.md)                       |                 Для параметра аннотации ожидался член перечисления                 |
|                      [C28220](../code-quality/c28220.md)                       |                  Для параметра аннотации ожидалось целочисленное выражение                   |
|                      [C28221](../code-quality/c28221.md)                       |                        Для параметра аннотации ожидалось строковое выражение                         |
|                      [C28222](../code-quality/c28222.md)                       |                               Для аннотации ожидалось __yes, \__no или \__maybe                               |
|                      [C28223](../code-quality/c28223.md)                       |                       Не найден ожидаемый токен/идентификатор для аннотации, параметр                        |
|                      [C28224](../code-quality/c28224.md)                       |                                        Аннотации требуются параметры                                         |
|                      [C28225](../code-quality/c28225.md)                       |                     Не найдено правильное число обязательных параметров в аннотации                      |
|                      [C28226](../code-quality/c28226.md)                       |                          Аннотация не может также быть PrimOp (в текущем объявлении)                          |
|                      [C28227](../code-quality/c28227.md)                       |                          Аннотация не может также быть PrimOp (см. предыдущее объявление)                           |
|                      [C28228](../code-quality/c28228.md)                       |                             Параметр аннотации: невозможно использовать тип в аннотации                              |
|                      [C28229](../code-quality/c28229.md)                       |                                    Аннотация не поддерживает параметры                                     |
|                      [C28230](../code-quality/c28230.md)                       |                                     Тип параметра не содержит членов.                                      |
|                      [C28231](../code-quality/c28231.md)                       |                                       Аннотация допустима только для массива                                       |
|                      [C28232](../code-quality/c28232.md)                       |                               Ни к одной аннотации не применено pre, post или deref                               |
|                      [C28233](../code-quality/c28233.md)                       |                                    Pre, post или deref применено к блоку                                     |
|                      [C28234](../code-quality/c28234.md)                       |                              Выражение _At_ не применяется к текущей функции                               |
|                      [C28235](../code-quality/c28235.md)                       |                               Функция не может использоваться изолированно как аннотация                                |
|                      [C28236](../code-quality/c28236.md)                       |                                Аннотацию нельзя использовать в выражениях                                 |
|                      [C28237](../code-quality/c28237.md)                       |                              Аннотация в параметре больше не поддерживается                               |
|                      [C28238](../code-quality/c28238.md)                       |      Аннотация в параметре содержит несколько значений value, stringValue и longValue. Используйте paramn=xxx       |
|                      [C28239](../code-quality/c28239.md)                       |  Аннотация в параметре одновременно содержит значение value, stringValue или longValue и выражение paramn=xxx. Используйте только paramn=xxx   |
|                      [C28240](../code-quality/c28240.md)                       |                             Аннотация в параметре содержит param2, но не содержит param1                              |
|                      [C28241](../code-quality/c28241.md)                       |                          Аннотация для функции в параметре не распознана                           |
|                      [C28243](../code-quality/c28243.md)                       |   Заметки для функции в параметре требуется больше разыменований, чем допускает фактический аннотируемый тип   |
|                      [C28245](../code-quality/c28245.md)                       |                     Заметка для функции добавляет заметки к this в функции, не являющейся членом                     |
|                      [C28246](../code-quality/c28246.md)                       |                Аннотация параметра для функции не соответствует типу параметра                 |
|                      [C28250](../code-quality/c28250.md)                       |                    Несогласованная аннотация функции: предыдущий экземпляр содержит ошибку.                     |
|                      [C28251](../code-quality/c28251.md)                       |                       Несогласованная аннотация функции: этот экземпляр содержит ошибку.                       |
|                      [C28252](../code-quality/c28252.md)                       |           Несогласованная аннотация функции: параметр имеет другие аннотации для этого экземпляра.           |
|                      [C28253](../code-quality/c28253.md)                       |           Несогласованная аннотация функции: параметр имеет другие аннотации для этого экземпляра.           |
|                      [C28254](../code-quality/c28254.md)                       |                               dynamic_cast<>() не поддерживается в аннотациях                                |
|                      [C28262](../code-quality/c28262.md)                       |                    В функции обнаружена синтаксическая ошибка для аннотации                     |
|                      [C28263](../code-quality/c28263.md)                       |                 Во встроенной функции обнаружена синтаксическая ошибка условной аннотации                 |
|                      [C28267](../code-quality/c28267.md)                       |                    В аннотациях для функции обнаружена синтаксическая ошибка для аннотации.                    |
|                      [C28272](../code-quality/c28272.md)                       |      Аннотация для функции: параметр не согласуется с объявлением функции при проверке      |
|                      [C28273](../code-quality/c28273.md)                       |                    Функция: причины не согласуются с объявлением функции                     |
|                      [C28275](../code-quality/c28275.md)                       |                                   Значение параметра для \_Macro_value\_ равно NULL                                    |
|                      [C28279](../code-quality/c28279.md)                       |                           Для символа обнаружен begin без соответствующего end                            |
|                      [C28280](../code-quality/c28280.md)                       |                           Для символа обнаружен end без соответствующего begin                           |
|                      [C28282](../code-quality/c28282.md)                       |                                    Строки формата должны находиться в предусловиях                                    |
|                      [C28285](../code-quality/c28285.md)                       |                                    Для функции синтаксическая ошибка в параметре                                    |
|                      [C28286](../code-quality/c28286.md)                       |                                    Для функции синтаксическая ошибка рядом с окончанием                                    |
|                      [C28287](../code-quality/c28287.md)                       |                Для функции: синтаксическая ошибка в аннотации \_At\_() (не распознано имя параметра)                |
|                      [C28288](../code-quality/c28288.md)                       |                  Для функции: синтаксическая ошибка в аннотации \_At\_() (недопустимое имя параметра)                   |
|                      [C28289](../code-quality/c28289.md)                       |                Для функции: ReadableTo или WritableTo не содержало спецификацию ограничения в качестве параметра                |
|                      [C28290](../code-quality/c28290.md)                       |           Количество внешних элементов в аннотации для функции превышает фактическое число параметров            |
|                      [C28291](../code-quality/c28291.md)                       |                        После NULL/не NULL на уровне разыменовывания 0 параметра не имеет смысла для функции.                        |
|                      [C28300](../code-quality/c28300.md)                       |                            Несовместимые типы операндов выражения для оператора                             |
|                      [C28301](../code-quality/c28301.md)                       |                               Для первого объявления функции отсутствуют аннотации.                               |
|                      [C28302](../code-quality/c28302.md)                       |                             В аннотации обнаружен дополнительный оператор \_Deref\_.                              |
|                      [C28303](../code-quality/c28303.md)                       |                           В аннотации обнаружен неоднозначный оператор \_Deref\_.                            |
|                      [C28304](../code-quality/c28304.md)                       |                     Обнаружен неверно размещенный оператор \_Notref\_, применяемый к токену.                      |
|                      [C28305](../code-quality/c28305.md)                       |                                При синтаксическом анализе токена обнаружена ошибка.                                 |
|                      [C28350](../code-quality/c28350.md)                       |                  Заметка описывает ситуацию, к которой неприменимы условия.                   |
|                      [C28351](../code-quality/c28351.md)                       |         Аннотация описывает ситуацию, когда динамическое значение (переменная) не может использоваться в условии.          |
