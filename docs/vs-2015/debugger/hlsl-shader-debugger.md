---
title: Отладчик HLSL шейдера | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.graphics.shaderviewer
ms.assetid: 4ccec541-3c49-42bd-972a-686eb3a88fbc
caps.latest.revision: 21
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: bef6c5a742c4bf6acc15a6326190686e46fef79b
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "90843208"
---
# <a name="hlsl-shader-debugger"></a>Отладчик HLSL шейдера
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Отладчик HLSL в анализаторе графики Visual Studio помогает понять, как работает код шейдера HLSL в реальных условиях использования приложения.  
  
 Это отладчик HLSL:  
  
 ![Отладка HLSL с использованием окон контрольных значений и стека вызовов.](../debugger/media/gfx-diag-demo-hlsl-debugger-orientation.png "gfx_diag_demo_hlsl_debugger_orientation")  
  
## <a name="understanding-the-hlsl-debugger"></a>Что такое отладчик HLSL  
 Отладчик HLSL может помочь понять проблемы, возникающие в коде шейдера. Отладка кода HLSL в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] напоминает отладку кода, написанного на других языках, например на C++, C# или Visual Basic. Вы можете отслеживать содержимое переменных, устанавливать точки останова, пошагово выполнять код и перемещаться по стеку вызовов, как и при отладке кода на других языках.  
  
 Однако поскольку GPU обеспечивают высокую производительность за счет выполнения кода шейдера в нескольких сотнях потоков одновременно, отладчик HLSL предназначен для работы совместно с другими инструментами анализатора графики, предоставляя информацию в наиболее понятном виде. Инструменты анализатора диагностики графики воспроизводят захваченные кадры, используя данные, которые были записаны в журнал графики; отладчик HLSL не отслеживает работу GPU в режиме реального времени во время выполнения кода шейдеров. Поскольку журнал графики содержит достаточно информации для воспроизведения любой части вывода графики, а анализ графики предоставляет средства, которые могут помочь точно выявить пиксель и событие, где произошла ошибка, отладчик HLSL должен имитировать только точный поток шейдера, интересующий пользователя. Это означает, что работу шейдера можно имитировать на ЦП, где хорошо видны все выполняемые операции. Именно благодаря этому работа отладчика HLSL похожа на отладку процессов на ЦП.  
  
 Однако отладчик HLSL в настоящее время имеет следующие ограничения:  
  
- Отладчик HLSL не поддерживает операцию "Изменить и продолжить", однако вы можете внести изменения в свои шейдеры и затем повторно создать кадр для просмотра результатов.  
  
- невозможно отлаживать приложение и его код шейдера одновременно. Однако можно выбирать между ними;  
  
- в окно контрольных значений можно добавлять переменные и регистры, однако выражения не поддерживаются.  
  
  Тем не менее отладчик HLSL обеспечивает лучшую, более приближенную к ЦП, среду отладки по сравнению с другими средствами.  
  
## <a name="hlsl-shader-edit--apply"></a>Режим "Изменить и применить" для шейдеров HLSL  
 Отладчик шейдеров HLSL не поддерживает режим "Изменить и продолжить" так же, как отладчик ЦП, потому что модель выполнения GPU не позволяет отменить изменение состояния шейдера. Вместо этого отладчик HLSL поддерживает режим "Изменить и применить", который позволяет изменить исходные файлы HLSL, а затем выбрать команду **Применить**, чтобы повторно создать кадр и увидеть результаты изменений. Измененный код шейдера хранится в отдельном файле, чтобы сохранить целостность исходного исходного файла HLSL проекта, но если вы удовлетворены изменениями, можно выбрать команду **Копировать в...** для копирования изменений в проект. С помощью этой возможности вы можете быстро выполнять итерацию кода шейдера, содержащего ошибки, и избежать затратных операций повторного построения и захвата в рамках рабочего процесса отладки HLSL.  
  
## <a name="hlsl-disassembly"></a>Дизассемблирование HLSL  
 Отладчик шейдеров HLSL предоставляет код сборки шейдеров HLSL справа от исходного кода HLSL.  
  
## <a name="debugging-hlsl-code"></a>Отладка кода HLSL  
 Отладчик HLSL можно запускать из окна "Этапы конвейера" или "Журнал пикселей".  
  
#### <a name="to-start-the-hlsl-debugger-from-the-graphics-pipeline-stages-window"></a>Запуск отладчика HLSL из окна "Этапы графического конвейера"  
  
1. В окне **Этапы графического конвейера** найдите этап конвейера, связанный с шейдером, который требуется отладить.  
  
2. Под заголовком этапа конвейера выберите команду **Начать отладку**, обозначенную небольшой зеленой стрелкой.  
  
    > [!NOTE]
    > Эта точка входа в отладчик HLSL отлаживает только первый поток шейдера для соответствующего этапа, то есть первую обрабатываемую вершину или пиксель. Для доступа к другим потокам этих этапов шейдера можно использовать "Журнал пикселей".  
  
#### <a name="to-start-the-hlsl-debugger-from-the-graphics-pixel-history"></a>Запуск отладчика HLSL из журнала пикселей графики  
  
1. В окне **Журнал пикселей графики** разверните вызов Draw, связанный с шейдером, который требуется отладить. Каждый вызов рисования может соответствовать нескольким примитивам.  
  
2. В данных вызова рисования разверните примитив, результирующий вклад в цвет которого предположительно содержит ошибку в коде шейдера. Если ошибку могут содержать несколько примитивов, выберите первый их них, чтобы избежать накопления ошибок, которое может затруднить диагностику проблемы.  
  
3. В данных примитива укажите, что следует отлаживать — **Шейдер вершин** или **Шейдер пикселей**. Выберите шейдер вершин, если вы предполагаете, что шейдер пикселей работает правильно, но формирует неверный вклад в цвет, поскольку шейдер вершин передает ему неправильные константы. В противном случае следует отлаживать шейдер пикселей.  
  
    Справа от выбранного шейдера выберите команду **Начать отладку**, обозначенную небольшой зеленой стрелкой.  
  
   > [!NOTE]
   > Эта точка входа в отладчик HLSL отлаживает поток шейдера пикселей, соответствующего выбранному вызову рисования, примитиву или пикселю, или потоки шейдера вершин, результаты которых интерполируются выбранным вызовом рисования, примитивом или пикселем. В случае шейдеров вершин можно дополнительно уточнить точку входа (до конкретной вершины), развернув сведения шейдера вершин.  
  
   Примеры использования отладчика HLSL для устранения ошибок шейдеров см. в разделе [Примеры](../debugger/graphics-diagnostics-examples.md) и в пошаговых руководствах, указанных в разделе "См. также".  
  
## <a name="see-also"></a>См. также:  
 [Пошаговое руководство. отсутствие объектов из-за затенения вершин](../debugger/walkthrough-missing-objects-due-to-vertex-shading.md)   
 [Пошаговое руководство. Отладка ошибок отрисовки из-за затенения](../debugger/walkthrough-debugging-rendering-errors-due-to-shading.md)   
 [Пошаговое руководство: Использование диагностики графики для отладки вычислительного шейдера](../debugger/walkthrough-using-graphics-diagnostics-to-debug-a-compute-shader.md)
