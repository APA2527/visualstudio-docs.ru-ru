---
title: Отладка нескольких процессов | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.debug.programs
- vs.debug.processes.attaching
- vs.debug.activeprogram
- vs.debug.attaching
- vs.debug.attachedprocesses
dev_langs:
- FSharp
- VB
- CSharp
- C++
ms.assetid: bde37134-66af-4273-b02e-05b3370c31ab
caps.latest.revision: 19
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 97d98522e011023cb3a021a69c9a82e8bb34cef3
ms.sourcegitcommit: b885f26e015d03eafe7c885040644a52bb071fae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/30/2020
ms.locfileid: "85533280"
---
# <a name="debug-multiple-processes"></a>Отладка нескольких процессов
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Ниже описаны способы запуска отладки процессов, переключения между процессами, приостановки и возобновления выполнения, пошагового выполнения исходного кода, остановки отладки, а также отсоединения от процессов или прекращения их работы.  
  
## <a name="contents"></a><a name="BKMK_Contents"></a> Описание  
 [Настройка поведения выполнения нескольких процессов](#BKMK_Configure_the_execution_behavior_of_multiple_processes)  
  
 [Поиск исходных и файл символов (. pdb)](#BKMK_Find_the_source_and_symbol___pdb__files)  
  
 [Запуск нескольких процессов в решении VS, присоединение к процессу, автоматический запуск процесса в отладчике](#BKMK_Start_multiple_processes_in_a_VS_solution__attach_to_a_process__automatically_start_a_process_in_the_debugger)  
  
 [Переключение процессов, выполнение останова и продолжение выполнения, пошаговая обработка исходного кода](#BKMK_Switch_processes__break_and_continue_execution__step_through_source)  
  
 [Остановка отладки, окончание или отсоединение от процессов](#BKMK_Stop_debugging__terminate_or_detach_from_processes)  
  
## <a name="configure-the-execution-behavior-of-multiple-processes"></a><a name="BKMK_Configure_the_execution_behavior_of_multiple_processes"></a>Настройка поведения выполнения нескольких процессов  
 Когда в отладчике запущено одновременно несколько процессов, команды приостановки выполнения и пошагового выполнения, а также остановка команд отладчика по умолчанию влияют на все процессы. Например, когда один процесс приостанавливается в точке останова, выполнение всех остальных процессов также приостанавливается. Можно изменить это принимаемое по умолчанию поведение, чтобы обрести больший контроль над целевыми объектами команд выполнения.  
  
1. В меню **Отладка** выберите **Параметры и настройки**.  
  
2. На странице **Отладка**, **Общие** снимите флажок **прерывать все процессы при прерывании одного процесса** .  
  
   ![В начало](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержимое](#BKMK_Contents)  
  
## <a name="find-the-source-and-symbol-pdb-files"></a><a name="BKMK_Find_the_source_and_symbol___pdb__files"></a> Поиск исходных файлов и файлов символов (PDB)  
 Для отображения и пошагового выполнения исходного кода процесса отладчику требуется доступ к исходным файлам и файлам символов процесса. См. раздел [Указание символов (. pdb) и исходных файлов](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).  
  
 Если не удается получить доступ к файлам процесса, для перемещения по коду можно воспользоваться окном "Дизассемблирование". См [. раздел как использовать окно дизассемблирования.](../debugger/how-to-use-the-disassembly-window.md)  
  
 ![В начало](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержимое](#BKMK_Contents)  
  
## <a name="start-multiple-processes-in-a-vs-solution-attach-to-a-process-automatically-start-a-process-in-the-debugger"></a><a name="BKMK_Start_multiple_processes_in_a_VS_solution__attach_to_a_process__automatically_start_a_process_in_the_debugger"></a>Запуск нескольких процессов в решении VS, присоединение к процессу, автоматический запуск процесса в отладчике  
  
- [Запуск отладки нескольких процессов в решении Visual Studio](#BKMK_Start_debugging_multiple_processes_in_a_Visual_Studio_solution) • [изменение запускаемого проекта](#BKMK_Change_the_startup_project) • [Запуск конкретного проекта в решении](#BKMK_Start_a_specific_project_in_a_solution) • [Запуск нескольких проектов в решении](#BKMK_Start_multiple_projects_in_a_solution) • [Присоединение к процессу](#BKMK_Attach_to_a_process) • [Автоматический запуск процесса в отладчике](#BKMK_Automatically_start_an_process_in_the_debugger)  
  
> [!NOTE]
> Отладчик не присоединяется автоматически к дочернему процессу, который запущен отлаживаемым процессом, даже если дочерний проект находится в том же решении. Чтобы отладить дочерний процесс:  
> 
> - Присоединитесь к дочернему процессу после того, как он запущен.  
> 
>   -или-  
>   - Настройте параметры Windows таким образом, что дочерний процесс автоматически запускался в новом экземпляре отладчика.  
  
### <a name="start-debugging-multiple-processes-in-a-visual-studio-solution"></a><a name="BKMK_Start_debugging_multiple_processes_in_a_Visual_Studio_solution"></a>Запуск отладки нескольких процессов в решении Visual Studio  
 Если в решении Visual Studio имеется несколько проектов, которые могут выполняться независимо (проекты, выполняемые в отдельных процессах), можно выбрать, какие проекты запускаются отладчиком.  
  
 ![Изменение типа запуска для проекта](../debugger/media/dbg-execution-startmultipleprojects.png "DBG_Execution_StartMultipleProjects")  
  
#### <a name="change-the-startup-project"></a><a name="BKMK_Change_the_startup_project"></a>Изменение запускаемого проекта  
 Чтобы изменить запускаемый проект для решения, выберите проект в обозреватель решений а затем в контекстном меню выберите пункт **Назначить запускаемым проектом** .  
  
#### <a name="start-a-specific-project-in-a-solution"></a><a name="BKMK_Start_a_specific_project_in_a_solution"></a>Запуск конкретного проекта в решении  
 Чтобы запустить проект для решения без изменения запускаемого по умолчанию проекта, выберите проект в обозреватель решений а затем в контекстном меню выберите пункт **Отладка** . Затем можно выбрать пункт **запустить новый экземпляр** или **Шаг с заходом в новый экземпляр**.  
  
 К ![началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") работы [Запуск нескольких процессов в решении VS, присоединение к процессу, автоматический запуск процесса в отладчике](../debugger/debug-multiple-processes.md#BKMK_Start_multiple_processes_in_a_VS_solution__attach_to_a_process__automatically_start_a_process_in_the_debugger)  
  
 ![В начало](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержимое](#BKMK_Contents)  
  
#### <a name="start-multiple-projects-in-a-solution"></a><a name="BKMK_Start_multiple_projects_in_a_solution"></a>Запуск нескольких проектов в решении  
  
1. Выберите решение в обозреватель решений а затем в контекстном меню выберите пункт **Свойства** .  
  
2. В диалоговом окне **Свойства** выберите **Общие свойства**, **запускаемый проект** .  
  
3. Для каждого проекта, который необходимо изменить, выберите **Запуск**, **Запуск без отладки**или **нет**.  
  
   К ![началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") работы [Запуск нескольких процессов в решении VS, присоединение к процессу, автоматический запуск процесса в отладчике](../debugger/debug-multiple-processes.md#BKMK_Start_multiple_processes_in_a_VS_solution__attach_to_a_process__automatically_start_a_process_in_the_debugger)  
  
   ![В начало](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержимое](#BKMK_Contents)  
  
### <a name="attach-to-a-process"></a><a name="BKMK_Attach_to_a_process"></a> Присоединение к процессу  
 Отладчик может также *подключаться* к программам, которые выполняются в процессах вне Visual Studio, включая программы, работающие на удаленном устройстве. После присоединения к программе можно использовать команды отладчика, проверять состояние программы и выполнять другие действия. Возможности проверки программы могут быть ограничены в зависимости от того, была ли программа собрана с отладочной информацией, имеется ли доступ к исходному коду программы, а также отслеживает ли JIT-компилятор среды CLR отладочную информацию.  
  
 Дополнительные сведения см. [в разделе Присоединение к запущенным процессам](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md) .  
  
 **Присоединение к процессу, выполняющемуся на локальном компьютере**  
  
 Выберите **Отладка**, **присоединить к процессу**. В диалоговом окне **Присоединение к процессу** выберите процесс из списка **Доступные процессы** и нажмите кнопку **присоединить**.  
  
 ![Диалоговое окно "Присоединение к процессу"](../debugger/media/dbg-attachtoprocessdlg.png "DBG_AttachToProcessDlg")  
  
 ![В начало](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержимое](#BKMK_Contents)  
  
### <a name="automatically-start-a-process-in-the-debugger"></a><a name="BKMK_Automatically_start_an_process_in_the_debugger"></a>Автоматический запуск процесса в отладчике  
 В некоторых случаях может потребоваться отладить код запуска для программы, которая запускается другим процессом. К ним относятся службы и действия пользовательской настройки. В этих случаях можно заставить отладчик запускаться и автоматически присоединяться при запуске приложения.  
  
1. Запустите редактор реестра (**regedit.exe**).  
  
2. Перейдите в папку **HKEY_LOCAL_MACHINE \Софтваре\микрософт\виндовс Нт\куррентверсион\имаже File Execution options** .  
  
3. Выберите папку приложения, которое требуется запустить в отладчике.  
  
    Если имя приложения не указано в качестве дочерней папки, выберите **Параметры выполнения файла изображения** , а затем в контекстном меню выберите **создать**, **ключ** . Выберите новый ключ, в контекстном меню выберите **Переименовать** , а затем введите имя приложения.  
  
4. В контекстном меню папки приложения выберите **создать**, **строковое значение**.  
  
5. Измените имя нового значения с **нового** на `debugger` .  
  
6. В контекстном меню записи отладчика выберите **изменить**.  
  
7. В диалоговом окне Изменение строки введите `vsjitdebugger.exe` значение в поле **данные** .  
  
    ![Диалоговое окно "Изменение строки"](../debugger/media/dbg-execution-automaticstart-editstringdlg.png "DBG_Execution_AutomaticStart_EditStringDlg")  
  
   ![Запись автоматического запуска отладчика в regedit.exe](../debugger/media/dbg-execution-automaticstart-result.png "DBG_Execution_AutomaticStart_Result")  
  
   ![В начало](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержимое](#BKMK_Contents)  
  
## <a name="switch-processes-break-and-continue-execution-step-through-source"></a><a name="BKMK_Switch_processes__break_and_continue_execution__step_through_source"></a>Переключение процессов, выполнение останова и продолжение выполнения, пошаговая обработка исходного кода  
  
- [Переключение между процессами](#BKMK_Switch_between_processes) • [команды break, Step и Continue](#BKMK_Break__step__and_continue_commands)  
  
### <a name="switch-between-processes"></a><a name="BKMK_Switch_between_processes"></a> Переключение между процессами  
 Во время отладки можно подключиться к нескольким процессам, но в любой момент времени только один из них будет активным в отладчике. Активный или *текущий* процесс можно задать на панели инструментов место отладки или в окне **процессы** . Для переключения между процессами оба процесса должны находиться в режиме приостановки выполнения.  
  
 **Установка текущего процесса**  
  
- На панели инструментов место отладки нажмите кнопку **обработать** , чтобы просмотреть список **процессов** . Выберите процесс, который требуется установить в качестве текущего процесса.  
  
   ![Переключение между процессами](../debugger/media/dbg-execution-switchbetweenmodules.png "DBG_Execution_SwitchBetweenModules")  
  
   Если панель инструментов **место отладки** не отображается, выберите **Сервис**, **Настройка**. На вкладке **панели инструментов** выберите пункт **Расположение отладки**.  
  
- Откройте окно **процессы** (сочетание **клавиш CTRL + ALT + Z**), найдите процесс, который необходимо задать в качестве текущего процесса, и дважды щелкните его.  
  
   ![Окно "Процессы"](../debugger/media/dbg-processeswindow.png "DBG_ProcessesWindow")  
  
   Текущий процесс будет отмечен желтой стрелкой.  
  
  Переключение к проекту делает этот проект текущим процессом для отладки. Статус текущего процесса отображается в любом используемом окне отладчика, и все команды пошагового выполнения влияют только на текущий процесс.  
  
  ![Возврат к началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [процессов переключения, выполнение останова и продолжение выполнения, пошаговая обработка исходного кода](../debugger/debug-multiple-processes.md#BKMK_Switch_processes__break_and_continue_execution__step_through_source)  
  
  ![В начало](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержимое](#BKMK_Contents)  
  
### <a name="break-step-and-continue-commands"></a><a name="BKMK_Break__step__and_continue_commands"></a> Команды прерывания, пошагового выполнения и продолжения выполнения  
  
> [!NOTE]
> По умолчанию предусмотренные в отладчике команды прерывания, продолжения и пошагового выполнения влияют на все отлаживаемые в данный момент процессы. Сведения об изменении этого поведения см. в разделе [Настройка поведения выполнения нескольких процессов](#BKMK_Configure_the_execution_behavior_of_multiple_processes) .  
  
|**Command**|**Прерывать все процессы при прерывании одного процесса**<br /><br /> Флажок установлен (по умолчанию)|**Прерывать все процессы при прерывании одного процесса**<br /><br /> Очищено|  
|-|-|-|
|Меню **отладки** :<br /><br /> -   **Прервать все**|Все процессы приостанавливаются.|Все процессы приостанавливаются.|  
|Меню **отладки** :<br /><br /> -   **Продолжения**|Все процессы возобновляются.|Все приостановленные процессы возобновляются.|  
|Меню **отладки** :<br /><br /> -   **Шаг с заходом**<br />-   **Шаг с обходом**<br />-   **Шаг с выходом**|Во время выполнения шага текущего процесса все процессы выполняются.<br /><br /> Затем все процессы приостанавливаются.|Текущий процесс выполняется пошагово.<br /><br /> Приостановленные процессы возобновляются.<br /><br /> Выполняемые процессы продолжают выполняться.|  
|Меню **отладки** :<br /><br /> -   **Шаг с заходом в текущий процесс**<br />-   **Шаг с обходом текущего процесса**<br />-   **Шаг с выходом текущего процесса**|Недоступно|Текущий процесс выполняется пошагово.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
|Окна исходного кода.<br /><br /> -   **Установлена**|Все процессы приостанавливаются.|Приостанавливается только процесс окна исходного кода.|  
|Контекстное меню окна исходного кода:<br /><br /> -   **Выполнить до текущей позиции**<br /><br /> Окно исходного кода должно находиться в текущем процессе.|Все процессы выполняются, а процесс в окне исходного кода выполняется до курсора и приостанавливается.<br /><br /> После этого приостанавливаются все остальные процессы.|Процесс в окне исходного кода выполняется до курсора.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
|Контекстное меню окна **процессов** :<br /><br /> -   **Остановить процесс**|Недоступно|Выбранный процесс приостанавливается.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
|Контекстное меню окна **процессов** :<br /><br /> -   **Продолжить процесс**|Н/Д|Выбранный процесс возобновляется.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
  
 ![Возврат к началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [процессов переключения, выполнение останова и продолжение выполнения, пошаговая обработка исходного кода](../debugger/debug-multiple-processes.md#BKMK_Switch_processes__break_and_continue_execution__step_through_source)  
  
 ![В начало](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержимое](#BKMK_Contents)  
  
## <a name="stop-debugging-terminate-or-detach-from-processes"></a><a name="BKMK_Stop_debugging__terminate_or_detach_from_processes"></a>Остановка отладки, завершение или отсоединение процессов  
  
- [Команды остановки, окончания и отсоединения](#BKMK_Stop__terminate__and_detach_commands)  
  
  По умолчанию при выборе **Debug (Отладка**) **остановить отладку** , если в отладчике открыто несколько процессов, отладчик завершает работу или отсоединяется от всех процессов в зависимости от того, как процесс был открыт в отладчике:  
  
- Если текущий процесс был запущен в отладчике, этот процесс завершается.  
  
- Если отладчик был присоединен к текущему процессу, отладчик отсоединяется от процесса, не прекращая его выполнение.  
  
  Например, если начать отладку процесса из решения Visual Studio, подключиться к другому процессу, который уже выполняется, а затем выбрать **остановить отладку**, сеанс отладки завершится, процесс, запущенный в Visual Studio, будет завершен, а присоединенный процесс останется запущенным. Действие команды остановки отладки можно индивидуально задать для каждого процесса с помощью описанной ниже процедуры.  
  
> [!NOTE]
> Параметр **прерывать все процессы при прерывании одного процесса** не влияет на остановку отладки, завершение и отсоединение процессов.  
  
 **Изменение влияния команды "Остановить отладку" на отдельный процесс**  
  
- Откройте окно **процессы** (сочетание **клавиш CTRL + ALT + Z**). Выберите процесс и установите или снимите флажок **отсоединить при остановке отладки** .  
  
### <a name="stop-terminate-and-detach-commands"></a><a name="BKMK_Stop__terminate__and_detach_commands"></a>Команды "остановить", "завершить" и "отсоединить"  
  
|**Команда**|**Описание**|  
|-|-|  
|Меню **отладки** :<br /><br /> -   **Отключить отладку**|Если поведение не изменяется при **отсоединении окна процессов при остановке отладки** : **Processes**<br /><br /> 1. процессы, запущенные отладчиком, завершаются.<br />2. присоединенные процессы отсоединяются от отладчика.|  
|Меню **отладки** :<br /><br /> -   **Завершить все**|Все процессы завершаются.|  
|Меню **отладки** :<br /><br /> -   **Отсоединить все**|Отладчик отсоединяется от всех процессов.|  
|Контекстное меню окна **процессов** :<br /><br /> -   **Отсоединить процесс**|Отладчик отсоединяется от выбранного процесса.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
|Контекстное меню окна **процессов** :<br /><br /> -   **Завершить процесс**|Выбранный процесс завершается.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
|Контекстное меню окна **процессов** :<br /><br /> -   **Отсоединиться при остановке отладки**|Переключает поведение **отладки**и **останавливает отладку** для выбранного процесса:<br /><br /> -Checked — Отладчик отсоединяется от процесса.<br />-Очистить: процесс завершен.|  
  
 ![Вернуться к началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [отладки, завершить или отсоединить процессы](../debugger/debug-multiple-processes.md#BKMK_Stop_debugging__terminate_or_detach_from_processes)  
  
 ![В начало](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержимое](#BKMK_Contents)  
  
## <a name="see-also"></a>См. также  
 [Указание символов (. pdb) и исходных файлов](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)   
 [Присоединение к выполняющимся процессам](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)   
 [Навигация по коду с помощью отладчика](../debugger/navigating-through-code-with-the-debugger.md)   
 [JIT-отладка](../debugger/just-in-time-debugging-in-visual-studio.md)   
 [Отладка многопоточных приложений](../debugger/debug-multithreaded-applications-in-visual-studio.md)
