---
title: Отладка нескольких процессов | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.debug.programs
- vs.debug.processes.attaching
- vs.debug.activeprogram
- vs.debug.attaching
- vs.debug.attachedprocesses
dev_langs:
- FSharp
- VB
- CSharp
- C++
ms.assetid: bde37134-66af-4273-b02e-05b3370c31ab
caps.latest.revision: 19
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 9a2679825d41a6360dde05e7511d607f8be69dfa
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63434111"
---
# <a name="debug-multiple-processes"></a>Отладка нескольких процессов
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Ниже описаны способы запуска отладки процессов, переключения между процессами, приостановки и возобновления выполнения, пошагового выполнения исходного кода, остановки отладки, а также отсоединения от процессов или прекращения их работы.  
  
## <a name="BKMK_Contents"></a> Описание  
 [Настройка поведения выполнения нескольких процессов](#BKMK_Configure_the_execution_behavior_of_multiple_processes)  
  
 [Поиск источника и файлов символов (PDB) файлы](#BKMK_Find_the_source_and_symbol___pdb__files)  
  
 [Запуск нескольких процессов в решении VS, присоединение к процессу, автоматический запуск процесса в отладчике](#BKMK_Start_multiple_processes_in_a_VS_solution__attach_to_a_process__automatically_start_a_process_in_the_debugger)  
  
 [Переключение процессов, приостановка и продолжение выполнения, пошагового выполнения исходного](#BKMK_Switch_processes__break_and_continue_execution__step_through_source)  
  
 [Остановка отладки, окончание или отсоединение от процессов](#BKMK_Stop_debugging__terminate_or_detach_from_processes)  
  
## <a name="BKMK_Configure_the_execution_behavior_of_multiple_processes"></a> Настройка поведения выполнения нескольких процессов  
 Когда в отладчике запущено одновременно несколько процессов, команды приостановки выполнения и пошагового выполнения, а также остановка команд отладчика по умолчанию влияют на все процессы. Например, когда один процесс приостанавливается в точке останова, выполнение всех остальных процессов также приостанавливается. Можно изменить это принимаемое по умолчанию поведение, чтобы обрести больший контроль над целевыми объектами команд выполнения.  
  
1. В меню **Отладка** выберите **Параметры и настройки**.  
  
2. На **Отладка**, **Общие** странице снимите **прерывать все процессы при прерывании одного** "флажок".  
  
   ![К началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержание](#BKMK_Contents)  
  
## <a name="BKMK_Find_the_source_and_symbol___pdb__files"></a> Поиск исходных файлов и файлов символов (PDB)  
 Для отображения и пошагового выполнения исходного кода процесса отладчику требуется доступ к исходным файлам и файлам символов процесса. См. статью [Указание файлов символов (.pdb) и файлов с исходным кодом в отладчике Visual Studio](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).  
  
 Если не удается получить доступ к файлам процесса, для перемещения по коду можно воспользоваться окном "Дизассемблирование". См. практическое руководство по [ Использование окна дизассемблирования](../debugger/how-to-use-the-disassembly-window.md)  
  
 ![К началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержание](#BKMK_Contents)  
  
## <a name="BKMK_Start_multiple_processes_in_a_VS_solution__attach_to_a_process__automatically_start_a_process_in_the_debugger"></a> Запуск нескольких процессов в решении VS, присоединение к процессу, автоматический запуск процесса в отладчике  
  
- [Запуск отладки нескольких процессов в решении Visual Studio](#BKMK_Start_debugging_multiple_processes_in_a_Visual_Studio_solution) • [Смена запускаемого проекта](#BKMK_Change_the_startup_project) • [запуск конкретного проекта в решении](#BKMK_Start_a_specific_project_in_a_solution) • [запуск нескольких проектов решение](#BKMK_Start_multiple_projects_in_a_solution) • [присоединение к процессу](#BKMK_Attach_to_a_process) • [автоматический запуск процесса в отладчике](#BKMK_Automatically_start_an_process_in_the_debugger)  
  
> [!NOTE]
> Отладчик не присоединяется автоматически к дочернему процессу, который запущен отлаживаемым процессом, даже если дочерний проект находится в том же решении. Чтобы отладить дочерний процесс:  
> 
> - Присоединитесь к дочернему процессу после того, как он запущен.  
> 
>   -или-  
>   - Настройте параметры Windows таким образом, что дочерний процесс автоматически запускался в новом экземпляре отладчика.  
  
### <a name="BKMK_Start_debugging_multiple_processes_in_a_Visual_Studio_solution"></a> Запуск отладки нескольких процессов в решении Visual Studio  
 Если в решении Visual Studio имеется несколько проектов, которые могут выполняться независимо (проекты, выполняемые в отдельных процессах), можно выбрать, какие проекты запускаются отладчиком.  
  
 ![Изменение типа запуска для проекта](../debugger/media/dbg-execution-startmultipleprojects.png "DBG_Execution_StartMultipleProjects")  
  
#### <a name="BKMK_Change_the_startup_project"></a> Смена запускаемого проекта  
 Чтобы сменить запускаемый проект для решения, выберите проект в обозревателе решений и выберите **Назначить запускаемым проектом** в контекстном меню.  
  
#### <a name="BKMK_Start_a_specific_project_in_a_solution"></a> Запуск конкретного проекта в решении  
 Чтобы запустить проект для решения без изменения начального проекта по умолчанию, выберите проект в обозревателе решений и выберите **Отладка** в контекстном меню. Затем можно выбрать **запустить новый экземпляр** или **шаг с заходом в новый экземпляр**.  
  
 ![К началу страницы](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [запуск нескольких процессов в решении VS, присоединение к процессу, автоматический запуск процесса в отладчике](../debugger/debug-multiple-processes.md#BKMK_Start_multiple_processes_in_a_VS_solution__attach_to_a_process__automatically_start_a_process_in_the_debugger)  
  
 ![К началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержание](#BKMK_Contents)  
  
#### <a name="BKMK_Start_multiple_projects_in_a_solution"></a> Запуск нескольких проектов в решении  
  
1. В обозревателе решений выберите решение, а затем выберите **свойства** в контекстном меню.  
  
2. Выберите **общие свойства**, **запускаемым проектом** на **свойства** диалоговое окно.  
  
3. Для каждого проекта, который вы хотите изменить, выбрав **запустить**, **Запуск без отладки**, или **None**.  
  
   ![К началу страницы](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [запуск нескольких процессов в решении VS, присоединение к процессу, автоматический запуск процесса в отладчике](../debugger/debug-multiple-processes.md#BKMK_Start_multiple_processes_in_a_VS_solution__attach_to_a_process__automatically_start_a_process_in_the_debugger)  
  
   ![К началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержание](#BKMK_Contents)  
  
### <a name="BKMK_Attach_to_a_process"></a> Присоединение к процессу  
 Отладчик может также *присоединить* к программам, выполняемым в процессах вне Visual Studio, включая программы, запущенные на удаленном устройстве. После присоединения к программе можно использовать команды отладчика, проверять состояние программы и выполнять другие действия. Возможности проверки программы могут быть ограничены в зависимости от того, была ли программа собрана с отладочной информацией, имеется ли доступ к исходному коду программы, а также отслеживает ли JIT-компилятор среды CLR отладочную информацию.  
  
 См. в разделе [подключиться к процессам, под управлением](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md) Дополнительные сведения.  
  
 **Присоединение к процессу, который выполняется на локальном компьютере**  
  
 Выберите **Отладка**, **присоединение к процессу**. На **присоединение к процессу** диалоговое окно, выберите процесс, из **доступные процессы** , а затем выберите **Attach**.  
  
 ![Присоединение к процессу-диалоговое окно](../debugger/media/dbg-attachtoprocessdlg.png "DBG_AttachToProcessDlg")  
  
 ![К началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержание](#BKMK_Contents)  
  
### <a name="BKMK_Automatically_start_an_process_in_the_debugger"></a> Автоматический запуск процесса в отладчике  
 В некоторых случаях может потребоваться отладить код запуска для программы, которая запускается другим процессом. К ним относятся службы и действия пользовательской настройки. В этих случаях можно заставить отладчик запускаться и автоматически присоединяться при запуске приложения.  
  
1. Запустите редактор реестра (**regedit.exe**).  
  
2. Перейдите к **HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Image File Execution Options** папки.  
  
3. Выберите папку приложения, которое требуется запустить в отладчике.  
  
    Если имя приложения не указана как дочерняя папка, выберите **Image File Execution Options** и выберите **New**, **ключ** в контекстном меню. Выберите новый ключ, выберите **Переименовать** в контекстном меню, а затем введите имя приложения.  
  
4. В контекстном меню папки приложения, выберите **New**, **строковое значение**.  
  
5. Измените имя нового значения с **новое значение** для `debugger`.  
  
6. В контекстном меню записи отладчика, выберите **изменить**.  
  
7. В диалоговом окне Изменение строкового типа `vsjitdebugger.exe` в **значение** поле.  
  
    ![Изменить строку](../debugger/media/dbg-execution-automaticstart-editstringdlg.png "DBG_Execution_AutomaticStart_EditStringDlg")  
  
   ![Запись автоматического запуска отладчика в regedit.exe](../debugger/media/dbg-execution-automaticstart-result.png "DBG_Execution_AutomaticStart_Result")  
  
   ![К началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержание](#BKMK_Contents)  
  
## <a name="BKMK_Switch_processes__break_and_continue_execution__step_through_source"></a> Переключение процессов, приостановка и продолжение выполнения, пошагового выполнения исходного  
  
- [Переключение между процессами](#BKMK_Switch_between_processes) • [прерывания, шаг и продолжения выполнения команды](#BKMK_Break__step__and_continue_commands)  
  
### <a name="BKMK_Switch_between_processes"></a> Переключение между процессами  
 Во время отладки можно подключиться к нескольким процессам, но в любой момент времени только один из них будет активным в отладчике. Можно задать активный или *текущей* процесса, в панели инструментов места отладки или **процессы** окна. Для переключения между процессами оба процесса должны находиться в режиме приостановки выполнения.  
  
 **Чтобы задать текущий процесс**  
  
- На панели инструментов места отладки, выберите **процесс** для просмотра **процесс** поле со списком. Выберите процесс, который требуется установить в качестве текущего процесса.  
  
   ![Переключение между процессами](../debugger/media/dbg-execution-switchbetweenmodules.png "DBG_Execution_SwitchBetweenModules")  
  
   Если **место отладки** инструментов не отображается, выберите **средства**, **Настройка**. На **панелей инструментов** вкладке, выберите **место отладки**.  
  
- Откройте **процессы** окна (ярлык **Ctrl + Alt + Z**), найдите процесс, который требуется задать в качестве текущего процесса и дважды щелкните его.  
  
   ![Окно процессов](../debugger/media/dbg-processeswindow.png "DBG_ProcessesWindow")  
  
   Текущий процесс будет отмечен желтой стрелкой.  
  
  Переключение к проекту делает этот проект текущим процессом для отладки. Статус текущего процесса отображается в любом используемом окне отладчика, и все команды пошагового выполнения влияют только на текущий процесс.  
  
  ![К началу страницы](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [переключение процессов, приостановка и продолжение выполнения, пошагового выполнения исходного](../debugger/debug-multiple-processes.md#BKMK_Switch_processes__break_and_continue_execution__step_through_source)  
  
  ![К началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержание](#BKMK_Contents)  
  
### <a name="BKMK_Break__step__and_continue_commands"></a> Команды прерывания, пошагового выполнения и продолжения выполнения  
  
> [!NOTE]
> По умолчанию предусмотренные в отладчике команды прерывания, продолжения и пошагового выполнения влияют на все отлаживаемые в данный момент процессы. Чтобы изменить это поведение, см. в разделе [Настройка поведения выполнения нескольких процессов](#BKMK_Configure_the_execution_behavior_of_multiple_processes)  
  
||||  
|-|-|-|  
|**Команда**|**Прерывать все процессы при прерывании одного**<br /><br /> Флажок установлен (по умолчанию)|**Прерывать все процессы при прерывании одного**<br /><br /> Флажок снят|  
|**Отладка** меню:<br /><br /> -   **Прервать все**|Все процессы приостанавливаются.|Все процессы приостанавливаются.|  
|**Отладка** меню:<br /><br /> -   **Продолжить**|Все процессы возобновляются.|Все приостановленные процессы возобновляются.|  
|**Отладка** меню:<br /><br /> -   **Шаг с заходом**<br />-   **Шаг с обходом**<br />-   **Шаг с выходом**|Во время выполнения шага текущего процесса все процессы выполняются.<br /><br /> Затем все процессы приостанавливаются.|Текущий процесс выполняется пошагово.<br /><br /> Приостановленные процессы возобновляются.<br /><br /> Выполняемые процессы продолжают выполняться.|  
|**Отладка** меню:<br /><br /> -   **Шаг с заходом в текущем процессе**<br />-   **Шаг с обходом текущего процесса**<br />-   **Шаг с выходом текущего процесса**|Н/Д|Текущий процесс выполняется пошагово.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
|Окна исходного кода.<br /><br /> -   **Точки останова**|Все процессы приостанавливаются.|Приостанавливается только процесс окна исходного кода.|  
|Контекстное меню окна исходного кода:<br /><br /> -   **Выполнить до курсора**<br /><br /> Окно исходного кода должно находиться в текущем процессе.|Все процессы выполняются, а процесс в окне исходного кода выполняется до курсора и приостанавливается.<br /><br /> После этого приостанавливаются все остальные процессы.|Процесс в окне исходного кода выполняется до курсора.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
|**Процессы** контекстное меню окна:<br /><br /> -   **Прервать процесс**|Н/Д|Выбранный процесс приостанавливается.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
|**Процессы** контекстное меню окна:<br /><br /> -   **Продолжить процесс**|Н/Д|Выбранный процесс возобновляется.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
  
 ![К началу страницы](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [переключение процессов, приостановка и продолжение выполнения, пошагового выполнения исходного](../debugger/debug-multiple-processes.md#BKMK_Switch_processes__break_and_continue_execution__step_through_source)  
  
 ![К началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержание](#BKMK_Contents)  
  
## <a name="BKMK_Stop_debugging__terminate_or_detach_from_processes"></a> Остановка отладки, окончание или отсоединение от процессов  
  
- [Остановки, окончания и отсоединения команды](#BKMK_Stop__terminate__and_detach_commands)  
  
  По умолчанию при выборе **Отладка**, **остановить отладку** при нескольких процессов открыты в отладчике, отладчик завершает или отсоединяет все процессы, в зависимости от того, как процесс был открыт в отладчик:  
  
- Если текущий процесс был запущен в отладчике, этот процесс завершается.  
  
- Если отладчик был присоединен к текущему процессу, отладчик отсоединяется от процесса, не прекращая его выполнение.  
  
  Например, если запустить отладку некоторого процесса из решения Visual Studio, присоединить к другому процессу, который уже выполняется и выберите **остановить отладку**, сеанс отладки завершается, процесс, который был запущен в Visual Studio завершается, пока процесс, который вы подключили продолжит выполняться. Действие команды остановки отладки можно индивидуально задать для каждого процесса с помощью описанной ниже процедуры.  
  
> [!NOTE]
> **Прерывать все процессы при прерывании одного** параметр не влияет на поведение остановки отладки или завершения процессов и отсоединения от процессов.  
  
 **Чтобы изменить остановить отладку влияние отдельного процесса**  
  
- Откройте **процессы** окна (ярлык **Ctrl + Alt + Z**). Выберите процесс, а затем установите или снимите **отсоединиться при остановке отладки** "флажок".  
  
### <a name="BKMK_Stop__terminate__and_detach_commands"></a> Остановки, окончания и отсоединения команды  
  
|||  
|-|-|  
|**Команда**|**Описание**|  
|**Отладка** меню:<br /><br /> -   **Остановить отладку**|Если поведение изменено параметром **процессы** окно **отсоединиться при остановке отладки** параметр:<br /><br /> 1.  Процессы, запущенные отладчиком, завершаются.<br />2.  Присоединенные процессы отсоединяются от отладчика.|  
|**Отладка** меню:<br /><br /> -   **Завершить все**|Все процессы завершаются.|  
|**Отладка** меню:<br /><br /> -   **Отсоединить все**|Отладчик отсоединяется от всех процессов.|  
|**Процессы** контекстное меню окна:<br /><br /> -   **Отсоединение процесса**|Отладчик отсоединяется от выбранного процесса.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
|**Процессы** контекстное меню окна:<br /><br /> -   **Завершение процесса**|Выбранный процесс завершается.<br /><br /> Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|  
|**Процессы** контекстное меню окна:<br /><br /> -   **Отсоединиться при остановке отладки**|Переключает поведение **Отладка**, **остановить отладку** для выбранного процесса:<br /><br /> -Checked: Отладчик отсоединяется от процесса.<br />-Флажок снят: Процесс завершен.|  
  
 ![К началу страницы](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [остановка отладки, окончание или отсоединение от процессов](../debugger/debug-multiple-processes.md#BKMK_Stop_debugging__terminate_or_detach_from_processes)  
  
 ![К началу](../debugger/media/pcs-backtotop.png "PCS_BackToTop") [Содержание](#BKMK_Contents)  
  
## <a name="see-also"></a>См. также  
 [Указание файлов символов (PDB) и файлов с исходным кодом](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)   
 [Подключение к выполняющимся процессам](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)   
 [Навигация по коду с помощью отладчика](../debugger/navigating-through-code-with-the-debugger.md)   
 [Отладка Just-In-Time](../debugger/just-in-time-debugging-in-visual-studio.md)   
 [Отладка многопоточных приложений](../debugger/debug-multithreaded-applications-in-visual-studio.md)
