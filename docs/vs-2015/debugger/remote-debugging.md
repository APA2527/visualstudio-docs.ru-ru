---
title: Удаленная отладка | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.debug.remote.overview
dev_langs:
- C++
- CSharp
- FSharp
- JScript
- VB
helpviewer_keywords:
- remote debugging, setup
ms.assetid: 5a94ad64-100d-43ca-9779-16cb5af86f97
caps.latest.revision: 81
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 41b3e662668967d07e2a304d589d498dd2c7b51d
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63446101"
---
# <a name="remote-debugging"></a>Remote Debugging
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Вы можете отладить приложение Visual Studio, развернутое на другом компьютере.  Для этого используется удаленный отладчик Visual Studio.  
  
 Информация в этом разделе относится к классическим приложениям Windows и приложениям ASP.NET.  Сведения о удаленная отладка приложений Windows Store и приложения Azure, см. в разделе [удаленной отладки в приложениях Windows Store и Azure](#bkmk_winstoreAzure).  
  
## <a name="get-the-remote-tools"></a>Получить инструменты удаленной отладки  
Можно либо загрузить инструменты удаленной отладки непосредственно на устройстве или сервере, для отладки, или можно получить инструменты удаленной отладки от хост-компьютера с установленной среды Visual Studio.

### <a name="to-download-and-install-the-remote-tools"></a>Чтобы скачать и установить инструменты удаленной отладки
  
1. На устройство или сервер компьютера, необходимо выполнить отладку (а не компьютер под управлением Visual Studio) получите правильную версию инструментов удаленной отладки.

    |Версия|Ссылка|Примечания|
    |-|-|-|
    |Visual Studio 2015 с обновлением 3|[Инструменты удаленной отладки](https://my.visualstudio.com/Downloads?q=remote%20tools%20visual%20studio%202015)|При появлении присоединиться к группе Visual Studio Dev Essentials бесплатно, или можно просто войти в действующую подписку Visual Studio. Затем повторно откройте ссылку, при необходимости. Всегда Загрузите версию, которая соответствует операционной системе устройства (x 86, x64 или версию ARM)|
    |Visual Studio 2015 (более старая)|[Инструменты удаленной отладки](https://my.visualstudio.com/Downloads?q=remote%20tools%20visual%20studio%202015)|При появлении присоединиться к группе Visual Studio Dev Essentials бесплатно, или можно просто войти в действующую подписку Visual Studio. Затем повторно откройте ссылку, при необходимости.|
    |Visual Studio 2013|[Инструменты удаленной отладки](https://msdn.microsoft.com/library/bt727f1t(v=vs.120).aspx#BKMK_Installing_the_Remote_Tools)|Загрузить страницу в документации по Visual Studio 2013|
    |Visual Studio 2012|[Инструменты удаленной отладки](https://msdn.microsoft.com/library/bt727f1t(v=vs.110).aspx#BKMK_Installing_the_Remote_Tools)|Загрузить страницу в документации по Visual Studio 2012|
  
2. На странице загрузки выберите версию инструментов, которая соответствует операционной системе (x 86, x64 или версию ARM) и загрузить инструменты удаленной отладки.
  
    > [!IMPORTANT]
    > Мы рекомендуем установить последнюю версию инструментов удаленной отладки, соответствующую используемой версии Visual Studio. Несовпадение версий не рекомендуется.  
    >   
    >  Кроме того необходимо установить инструменты удаленной отладки, которые имеют ту же архитектуру, что операционной системы, на котором вы хотите установить его. Другими словами Если вы хотите выполнить отладку 32-разрядное приложение на удаленном компьютере под управлением 64-разрядной ОС, необходимо установить 64-разрядной версии инструментов удаленной отладки на удаленном компьютере.  
  
3. Скачав исполняемый файл, следуйте инструкциям по установке приложения на удаленном компьютере. См. в разделе [инструкции по установке](#bkmk_setup)

Если попытаться скопировать удаленный отладчик (msvsmon.exe) на удаленный компьютер и запустите его, имейте в виду, **мастер настройки удаленного отладчика** (**rdbgwiz.exe**) устанавливается только в том случае, при загрузке инструменты и вам может потребоваться использовать мастер для настройки позднее, особенно в том случае, если требуется, чтобы удаленный отладчик для запуска в качестве службы. Дополнительные сведения см. в разделе [(необязательно) Настройка удаленного отладчика как службы](#bkmk_configureService) ниже.

### <a name="to-run-the-remote-debugger-from-a-file-share"></a>Для запуска удаленного отладчика из общей папки

Можно найти удаленный отладчик (**msvsmon.exe**) на компьютере с Visual Studio 2015 Community, Professional или Enterprise уже установлен. Во многих случаях самым простым способом настройки удаленной отладки является запуск удаленного отладчика (msvsmon.exe) из общей папки. Ограничения использования, см. в разделе страницы справки удаленный отладчик (**Справка / использования** в удаленный отладчик).

1. Найти **msvsmon.exe** в каталоге, соответствующие вашей версии Visual Studio. Для Visual Studio 2015:

      **Program Files\Microsoft Visual Studio 14.0\Common7\IDE\Remote Debugger\x86\msvsmon.exe**
      
      **Program Files\Microsoft Visual Studio 14.0\Common7\IDE\Remote Debugger\x64\msvsmon.exe**

2. Общий ресурс **удаленный отладчик** папку на компьютере с Visual Studio.

3. На удаленном компьютере, запустите **msvsmon.exe**. Выполните [инструкции по установке](#bkmk_setup).

> [!TIP] 
> Установка из командной строки и справочник по командной строке, см. на странице справки для **msvsmon.exe** , введя ``msvsmon.exe /?`` в командной строке на компьютере с установленной среды Visual Studio (или перейдите к **Справка / использования**в удаленный отладчик).

## <a name="supported-operating-systems"></a>Supported Operating Systems  
 Удаленный компьютер должен работать под управлением одной из следующих операционных систем:  
  
- Windows 10  
  
- Windows 8 или 8.1  
  
- Windows 7 с пакетом обновления 1 (SP1)  
  
- Windows Server 2012 или Windows Server 2012 R2  
  
- Windows Server 2008 с пакетом обновления 2 (SP2), Windows Server 2008 R2 с пакетом обновления 1 (SP1)  
  
## <a name="supported-hardware-configurations"></a>Поддерживаемые конфигурации оборудования  
  
- Процессор с тактовой частотой 1,6 ГГц или большей  
  
- 1 ГБ ОЗУ (1,5 ГБ при выполнении в виртуальной машине)  
  
- 1 ГБ доступного пространства на жестком диске  
  
- Жесткий диск 5400 об/мин  
  
- Видеоадаптер с поддержкой DirectX 9 и разрешением экрана 1024x768 или выше  
  
## <a name="network-configuration"></a>Конфигурация сети  
 Удаленный компьютер и компьютер Visual Studio должны быть подключены по сети, объединены в рабочую или домашнюю группу либо соединены напрямую с помощью кабеля Ethernet. Отладка через Интернет не поддерживается.  
  
## <a name="bkmk_setup"></a>Настройка удаленного отладчика  
 на удаленном компьютере требуются права администратора.  
  
1. Найдите приложение "Удаленный отладчик". (Откройте меню "Пуск" и найдите **удаленный отладчик**.)
  
    Если вы используете удаленный отладчик на удаленном сервере, можно правой кнопкой мыши приложение удаленного отладчика и выбрать **Запуск от имени администратора** (или запуска удаленного отладчика в качестве службы). Если вы не используете его на удаленном сервере, запустите его обычным образом.
  
2. При запуске инструментов удаленной отладки в первый раз (или до его настройки), **конфигурация удаленной отладки** отображается как поле.  
  
    ![RemoteDebuggerConfWizardPage](../debugger/media/remotedebuggerconfwizardpage.png "RemoteDebuggerConfWizardPage")  
  
3. Если API службы Windows не установлен (что возможно только в Windows Server 2008 R2), выберите **установить** кнопки.  
  
4. Выберите типы сетей, в которых необходимо использовать инструменты удаленной отладки. Должен быть выбран по крайней мере один тип сети. Если компьютеры соединены через домен, необходимо выбрать первый пункт. Если компьютеры соединены посредством рабочей или домашней группы, необходимо выбрать второй или третий пункт.  
  
5. Выберите **настроить удаленную отладку** настроить брандмауэр и запустить средство.  
  
6. По завершении настройки появится окно удаленного отладчика.
  
    ![RemoteDebuggerWindow](../debugger/media/remotedebuggerwindow.png "RemoteDebuggerWindow")
  
    Удаленный отладчик теперь Ожидание подключения. Запомните или запишите имя сервера и номер порта, который отображается, так как он потребуется позже для настройки в Visual Studio.  
  
   После завершения отладки и необходимо остановить работу удаленного отладчика щелкните **файл / Выход** в окне. Его можно перезапустить из **запустить** меню или из командной строки:  
  
   **\<Каталог установки Visual Studio > \Common7\IDE\Remote Debugger\\< x86, x64 или Appx\msvsmon.exe**.  
  
## <a name="configure-the-remote-debugger"></a>Настройка удаленного отладчика  
 После первого запуска удаленного отладчика можно изменить некоторые аспекты его конфигурации.
  
- Чтобы разрешить другим пользователям для подключения к удаленному отладчику, выберите **Сервис / разрешения**. Для предоставления разрешений или отказа в предоставлении необходимо обладать правами администратора.

  > [!IMPORTANT]
  > Можно запускать удаленный отладчик с учетной записью пользователя, которая отличается от учетной записи пользователя, используемой на компьютере с Visual Studio, но необходимо добавить учетную запись другого пользователя для разрешения удаленного отладчика. 

   Кроме того, удаленный отладчик можно запустить из командной строки с **/ allow \<имя пользователя >** параметр: **msvsmon / allow \< username@computer>**.
  
- Чтобы изменить режим аутентификации или номер порта или указать значение времени ожидания для инструментов удаленной отладки: выберите **Сервис / Параметры**.  
  
   Список номеров портов, используемых по умолчанию, см. в разделе [Remote Debugger Port Assignments](../debugger/remote-debugger-port-assignments.md).  
  
   > [!WARNING]
  > Вы можете запускать инструменты удаленной отладки в режиме "без аутентификации", однако настоятельно рекомендуется не использовать этот режим. При работе в этом режиме сетевая безопасность не обеспечивается. Режим без аутентификации можно выбрать, только если вы уверены в отсутствии вредоносного или опасного трафика.

## <a name="bkmk_configureService"></a> (Необязательно) Настройка удаленного отладчика в качестве службы
 Для отладки в ASP.NET и других серверных средах, необходимо запустить удаленный отладчик с правами администратора или, при необходимости его всегда работает, запускать удаленный отладчик как службу.
  
 Если вы хотите настроить удаленный отладчик как службу, выполните следующие действия.  
  
1. Найдите **мастер настройки удаленного отладчика** (rdbgwiz.exe). (Это отдельное приложение, не входящее в состав удаленного отладчика.) Он доступен только в том случае, если вы установили инструменты удаленной отладки. Вместе с Visual Studio он не устанавливается.  
  
2. Запустите мастер настройки. Когда появится первая страница, нажмите кнопку **Далее**.  
  
3. Установите флажок **Запускать удаленный отладчик Visual Studio 2015 как службу** .  
  
4. Добавьте имя учетной записи пользователя и пароль.  
  
    Для этой учетной записи может потребоваться добавить разрешение **Вход в качестве службы** . (Найдите элемент **Локальная политика безопасности** (secpol.msc) на **начальной** странице или в начальном окне (либо введите **secpol** в командной строке). В открывшемся окне дважды щелкните элемент **Назначение прав пользователя**, а затем в области справа найдите элемент **Вход в качестве службы** . Дважды щелкните его. Добавить учетную запись пользователя, **свойства** и щелкните **ОК**.) Нажмите кнопку **Далее**.  
  
5. Выберите тип сети, с которой должны взаимодействовать инструменты удаленной отладки. Должен быть выбран по крайней мере один тип сети. Если компьютеры соединены через домен, необходимо выбрать первый пункт. Если компьютеры соединены посредством рабочей или домашней группы, необходимо выбрать второй или третий пункт. Нажмите кнопку **Далее**.  
  
6. Если службу удается запустить, вы увидите сообщение **Вы успешно завершили работу мастера настройки удаленного отладчика Visual Studio**. Если службу не удается запустить, вы увидите сообщение **Не удалось завершить мастер настройки удаленного отладчика Visual Studio**. На странице также приводится ряд советов по запуску службы.  
  
7. Нажмите кнопку **Готово**.  
  
   Теперь удаленный отладчик должен работать как служба. Чтобы проверить, так ли это, выберите **Панель управления/Службы** и найдите службу **Удаленный отладчик Visual Studio 2015**.  
  
   Останавливать и запускать службу удаленного отладчика можно с помощью компонента **Панель управления / Службы**.  

## <a name="remote-debug-an-aspnet-application"></a>Удаленная отладка приложения ASP.NET  
 Развертывание приложения ASP.NET на удаленном компьютере со службами IIS выполняется по-разному в зависимости от операционной системы и версии IIS. Для удаленных компьютеров под управлением Windows Server 2008 или Windows Server 2012, IIS 7.5 или более поздней версии, см. в разделе [Remote Debugging ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md).
 
 При отладке приложения ASP.NET Core, см. в разделе [публикация в службах IIS](https://docs.asp.net/en/latest/publishing/iis.html). Различные шаги необходимые для публикации ASP.NET Core в службах IIS. После успешной публикации приложения ASP.NET Core, можно удаленно отлаживать его [так же, как другие приложения ASP.NET](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md), за исключением того, что процесс, необходимо присоединить к является dnx.exe вместо w3wp.exe.

## <a name="remote-debug-a-visual-c-project"></a>Удаленная отладка проекта Visual C++  
 В следующей процедуре, имя и путь проекта — C:\remotetemp\MyMfc, а имя удаленного компьютера — **MJO DL**.  
  
1. Создайте приложение MFC с именем **mymfc**.  
  
2. Создайте точку останова в легкодоступном месте приложения, например в файле **MainFrm.cpp**, в начале `CMainFrame::OnCreate`.  
  
3. В обозревателе решений щелкните правой кнопкой мыши проект и выберите **свойства**. Откройте вкладку **Отладка**.  
  
4. Для параметра **Загружаемый отладчик** задайте значение **Удаленный отладчик Windows**.  
  
    ![RemoteDebuggingCPlus](../debugger/media/remotedebuggingcplus.png "RemoteDebuggingCPlus")  
  
5. Внесите в свойства следующие изменения:  
  
   |Параметр|Значение|
   |-|-|  
   |Удаленная команда|C:\remotetemp\mymfc.exe|  
   |Рабочий каталог|C:\remotetemp|  
   |Имя удаленного сервера|Список Рассылки MJO:*номер_порта*|  
   |Подключение|Удаленный доступ с аутентификацией Windows|  
   |Тип отладчика|Только машинный код|  
   |Каталог развертывания|C:\remotetemp.|  
   |Дополнительные файлы развертывания|C:\data\mymfcdata.txt.|  
  
    При развертывании дополнительных файлов (необязательно), папка должна существовать на обоих компьютерах.  
  
6. В обозревателе решений щелкните решение правой кнопкой мыши и выберите **Configuration Manager**.  
  
7. Для конфигурации **Отладка** установите флажок **Развертывание**.  
  
    ![RemoteDebugCplusDeploy](../debugger/media/remotedebugcplusdeploy.png "RemoteDebugCplusDeploy")  
  
8. Начать отладку (**отладка | начать отладку**, или **F5**).  
  
9. Исполняемый файл автоматически развернется на удаленном компьютере.  
  
10. При появлении запроса введите сетевые учетные данные для подключения к удаленному компьютеру.  
  
     Необходимые учетные данные зависят от конфигурации безопасности вашей сети. Например на компьютере домена, могут выбрать сертификат безопасности или введите имя домена и пароль. На компьютере не входящих в домен, можно ввести имя компьютера и имя учетной записи пользователя, например <strong>MJO-DL\name@something.com</strong>, а также правильный пароль.  
  
11. На компьютере с Visual Studio вы должны увидеть, что выполнение остановилось в точке останова.  
  
    > [!TIP]
    > Кроме того, файлы можно развернуть как отдельный шаг. В **обозревателе решений** щелкните правой кнопкой мыши узел **mymfc** и выберите пункт **Развернуть**.  
  
    Если приложение должно использовать файлы, не являющиеся файлами кода, их нужно включить в проект Visual Studio. Создайте папку проекта для дополнительных файлов (в **обозревателе решений**, нажмите кнопку **Add / новую папку**.) Затем добавьте файлы в папку (в **обозревателе решений**, нажмите кнопку **добавить / существующий элемент**, выберите нужные файлы.). На странице **Свойства** для каждого файла задайте для свойства **Копировать в выходной каталог** значение **Всегда копировать**.  
  
## <a name="remote-debug-a-visual-c-or-visual-basic-project"></a>Удаленная отладка проекта Visual C# или Visual Basic  
 Отладчик не может развертывать классические приложения Visual C# и Visual Basic на удаленном компьютере, но вы все же можете выполнять их удаленную отладку описанным ниже образом. В следующей процедуре предполагается, что вы хотите выполнить его отладку на компьютере с именем **MJO DL**, как показано на предыдущем рисунке.
  
1. Создайте проект WPF с именем **MyWpf**.  
  
2. Установите точку останова в легкодоступном месте кода.  
  
    Например, ее можно установить в обработчике кнопки. Для этого откройте файл MainWindow.xaml и добавьте элемент управления Button с панели инструментов, а затем дважды щелкните кнопку, чтобы открыть ее обработчик.
  
3. В обозревателе решений щелкните правой кнопкой мыши проект и выберите **свойства**.  
  
4. На странице **Свойства** откройте вкладку **Отладка**.  
  
    ![RemoteDebuggerCSharp](../debugger/media/remotedebuggercsharp.png "RemoteDebuggerCSharp")  
  
5. Убедитесь, что текстовое поле **Рабочий каталог** пустое.  
  
6. Выберите **использовать удаленный компьютер**и тип **MJO-DL:4020** в текстовом поле. (4020 — номер порта, отображаются в окне удаленного отладчика).  
  
7. Убедитесь в том, что параметр **Разрешить отладку машинного кода** не выбран.  
  
8. Выполните построение проекта.  
  
9. Создайте на удаленном компьютере папку с тем же путем, что и у папки **Debug** на компьютере с Visual Studio: **\<исходный путь>\MyWPF\MyWPF\bin\Debug**.  
  
10. Скопируйте исполняемый файл, сборку которого вы только что выполнили, с компьютера с Visual Studio в созданную на удаленном компьютере папку.
  
    > [!CAUTION]
    > Не следует вносить изменения в код или перестроения (или необходимо повторить этот шаг). Исполняемый файл, скопированный на удаленный компьютер, должен в точности совпадать с локальным исходным кодом и символами.

    Можно скопировать в проект вручную, использовать Xcopy, Robocopy, Powershell или другие параметры.
  
11. Убедитесь, что удаленный отладчик запущен на целевом компьютере. (Если это не так, найдите **удаленный отладчик** в **запустить** меню. ) В окне удаленного отладчика выглядит следующим образом.  
  
     ![RemoteDebuggerWindow](../debugger/media/remotedebuggerwindow.png "RemoteDebuggerWindow")  
  
12. В Visual Studio начните отладку (**отладка | начать отладку**, или **F5**).  
  
13. При появлении запроса введите сетевые учетные данные для подключения к удаленному компьютеру.  
  
     Необходимые учетные данные зависят от конфигурации безопасности вашей сети. Например на компьютере домена, можно ввести имя домена и пароль. На компьютере не входящих в домен, можно ввести имя компьютера и имя учетной записи пользователя, например <strong>MJO-DL\name@something.com</strong>, а также правильный пароль.

     Главное окно приложения WPF должно быть открыто на удаленном компьютере.
  
14. При необходимости предпринимать действия для достигнута точка останова. Она должна быть активна. Если она не активна, символы для приложения не загрузились. Повторите попытку и, если это не поможет, получить сведения о загрузке символов и устранении связанных с ними в [основные сведения о файлах символов и Visual Studio параметры символов](http://blogs.msdn.com/b/visualstudioalm/archive/2015/01/05/understanding-symbol-files-and-visual-studio-s-symbol-settings.aspx).
  
15. На компьютере с Visual Studio вы должны увидеть, что выполнение остановилось в точке останова.
  
    Если приложение должно использовать файлы, не являющиеся файлами кода, их нужно включить в проект Visual Studio. Создайте папку проекта для дополнительных файлов (в **обозревателе решений**, нажмите кнопку **Add / новую папку**.) Затем добавьте файлы в папку (в **обозревателе решений**, нажмите кнопку **добавить / существующий элемент**, выберите нужные файлы.). На странице **Свойства** для каждого файла задайте для свойства **Копировать в выходной каталог** значение **Всегда копировать**.
  
## <a name="set-up-debugging-with-remote-symbols"></a>Настройка отладки с удаленными символами  
 Вы можете отлаживать код с использованием символов, созданных на компьютере Visual Studio. Производительность удаленного отладчика гораздо выше при использовании локальных символов.  Если необходимо использовать удаленные символы, укажите, что монитор удаленной отладки должен искать символы на удаленном компьютере.  
  
 Начиная с версии Visual Studio 2013 с обновлением 2 можно использовать следующий параметр командной строки msvsmon для использования удаленных символов для управляемого кода: `Msvsmon / /FallbackLoadRemoteManagedPdbs`  
  
 Дополнительные сведения см в справке по удаленной отладке (нажмите клавишу **F1** в окне удаленного отладчика, или щелкните **Справка / использования**). Также см. запись блога с описанием [изменений, связанных с удаленной загрузкой символов .NET в Visual Studio 2012 и 2013](http://blogs.msdn.com/b/visualstudioalm/archive/2013/10/16/net-remote-symbol-loading-changes-in-visual-studio-2012-and-2013.aspx).  
  
## <a name="bkmk_winstoreAzure"></a> Удаленная отладка в приложениях Windows Store и Azure  
 Сведения об удаленной отладке приложений Windows Store, см. в разделе [отладка и тестирование приложений Windows Store на удаленном устройстве из Visual Studio](http://msdn.microsoft.com/library/windows/apps/hh441469.aspx).  
  
 Сведения об отладке в Azure см. в одном из следующих разделов:  
  
- [Отладка облачной службы или виртуальной машины в Visual Studio](../azure/vs-azure-tools-debug-cloud-services-virtual-machines.md)  
  
- [Отладка серверной части .NET в Visual Studio](http://blogs.msdn.com/b/azuremobile/archive/2014/03/14/debugging-net-backend-in-visual-studio.aspx)  
  
- Введение в удаленную отладку на веб-сайты Azure ([часть 1](http://azure.microsoft.com/blog/2014/05/06/introduction-to-remote-debugging-on-azure-web-sites/), [часть 2](http://azure.microsoft.com/blog/2014/05/07/introduction-to-remote-debugging-azure-web-sites-part-2-inside-remote-debugging/), [часть 3](http://azure.microsoft.com/blog/2014/05/08/introduction-to-remote-debugging-on-azure-web-sites-part-3-multi-instance-environment-and-git/)).  
  
## <a name="see-also"></a>См. также  
 [Отладка в Visual Studio](../debugger/debugging-in-visual-studio.md)   
 [Настройка брандмауэра Windows для удаленной отладки](../debugger/configure-the-windows-firewall-for-remote-debugging.md)   
 [Remote Debugger Port Assignments](../debugger/remote-debugger-port-assignments.md)   
 [Удаленная отладка ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)  
 [Ошибки удаленной отладки и их устранение](../debugger/remote-debugging-errors-and-troubleshooting.md)
