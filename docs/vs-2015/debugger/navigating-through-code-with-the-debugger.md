---
title: Навигация по коду с помощью отладчика | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.debug.execution
dev_langs:
- FSharp
- VB
- CSharp
- C++
- JScript
helpviewer_keywords:
- stepping
- debugging [Visual Studio], execution control
- execution, controlling in debugger
ms.assetid: 759072ba-4aaa-447e-8e51-0dd1456fe896
caps.latest.revision: 47
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: f79ece781db19f2483ef1dd6cb0a81ff7cf78e06
ms.sourcegitcommit: 4be64917e4224fd1fb27ba527465fca422bc7d62
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "88608942"
---
# <a name="navigating-through-code-with-the-debugger"></a>Навигация по коду с помощью отладчика
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Ознакомьтесь с командами и сочетаниями клавиш для навигации по коду в отладчике, что упростит поиск и устранение проблем в приложении. При переходе по коду в отладчике можно [проверить состояние приложения](https://msdn.microsoft.com/library/mt243867.aspx#BKMK_Inspect_Variables) или получить дополнительные сведения о его потоке выполнения.  
  
## <a name="start-debugging"></a>Начать отладку  
 Часто сеанс отладки запускается с помощью **клавиши F5** (**Отладка**  /  **начать отладку**). Эта команда запускает приложение с подключенным отладчиком.  
  
 Зеленая стрелка также запускает отладчик (то же, что и **клавишу F5**).  
  
 ![Общие сведения о&#95;DBG&#95;запуск отладки&#95;](../debugger/media/dbg-basics-start-debugging.png "DBG_Basics_Start_Debugging")  
  
 Существует несколько других способов запуска приложения с подключенным отладчиком: **F11** (шаг с заходом[в код](#BKMK_Step_into__over__or_out_of_the_code)),  **F10** (шаг с обходом[кода](#BKMK_Step_over_Step_out)) или с помощью команды **выполнить до текущей позиции**.  Сведения о том, что делают эти параметры, см. в других разделах этой статьи.  
  
 При отладке желтая линия показывает код, который будет выполнен далее.  
  
 ![Общие сведения о&#95;е DBG&#95;режиме&#95;Break](../debugger/media/dbg-basics-break-mode.png "DBG_Basics_Break_Mode")  
  
 Во время отладки можно переключаться между командами, такими как **F5**, **F11** и использовать другие функции, описанные в этом разделе (например, точки останова), чтобы быстро перейти к коду, который вы хотите просмотреть.  
  
 Большинство функций отладчика, например просмотр значений переменных в окне "Локальные" или вычисление выражений в окно контрольных значений, доступны только тогда, когда отладчик приостановлен (также называется *режимом приостановки выполнения*). При приостановке отладчика состояние приложения приостанавливается, а функции, переменные и объекты остаются в памяти. В режиме приостановки можно проверить позиции и состояния элементов, чтобы найти нарушения или ошибки. Для некоторых типов проектов можно также вносить корректировки в приложение.  
  
## <a name="step-into-code-line-by-line"></a><a name="BKMK_Step_into__over__or_out_of_the_code"></a> Шаг с заходом в код, построчная  
 Чтобы останавливаться на каждой строке кода (каждой инструкции) во время отладки, используйте сочетание клавиш **F11** (или **Отладка**  /  **шага** в меню).  
  
> [!TIP]
> При выполнении каждой строки кода можно навести указатель мыши на переменную, чтобы просмотреть их значения, или использовать окна [локальные](../debugger/autos-and-locals-windows.md) и [Контрольные](../debugger/autos-and-locals-windows.md) значения для просмотра измененных значений.  
  
 Ниже приведены некоторые сведения о поведении **шага в**.  
  
- При вызове вложенных функций команда **Шаг с заходом** позволяет попасть в самую глубокую вложенную функцию. Если использовать **Шаг с заходом** на вызове `Func1(Func2())`, отладчик заходит в функцию `Func2`.  
  
- Отладчик фактически осуществляет пошаговое выполнение операторов кода, а не физических строк. Например, предложение `if` может быть записано в одной строке:  
  
  ```csharp  
  int x = 42;  
  string s = "Not answered";  
  if( int x == 42) s = "Answered!";  
  ```  
  
  ```vb  
  Dim x As Integer = 42  
  Dim s As String = "Not answered"  
  If x = 42 Then s = "Answered!"  
  ```  
  
   При пошаговом выполнении этой строки отладчик обрабатывает условие как один шаг, а следствие как другой (в этом примере условие выполняется).  
  
  Сведения о визуальной трассировке стека вызовов при пошаговом выполнении функций см. в разделе [методы Map в стеке вызовов во время отладки](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md).  
  
## <a name="step-through-code-skipping-functions"></a><a name="BKMK_Step_over_Step_out"></a> Пошаговое прокрутка кода, пропуск функций  
 При выполнении кода в отладчике часто возникает необходимость в том, что не нужно видеть, что происходит в определенной функции (это не важно, или вы знаете, что он работает, как хорошо протестированный код библиотеки). Используйте эти команды для пропуска кода (функции по-прежнему выполняются, конечно, но отладчик пропускает их).  
  
|Команда с клавиатуры|Команда меню|Описание|  
|----------------------|------------------|-----------------|  
|**F10**|**Шаг с обходом**|Если текущая строка содержит вызов функции, шаг с **обходом** запускает код, а затем приостанавливает выполнение на первой строке кода после того, как вызванная функция возвращает значение.|  
|**SHIFT+F11**|**Шаг с выходом**|**Шаг с выходом** продолжит выполнение кода и приостанавливает выполнение, когда текущая функция возвращает значение (отладчик пропускается через текущую функцию).|  
  
> [!TIP]
> Если необходимо найти точку входа в приложении, начните с клавиши **F10** или **F11**. Эти команды часто полезны при проверке состояния приложения или при попытке найти дополнительные сведения о последовательности выполнения.  
  
## <a name="run-to-a-specific-location-or-function"></a><a name="BKMK_Break_into_code_by_using_breakpoints_or_Break_All"></a> Выполнение до указанного места или функции  
 Часто предпочтительным методом отладки кода являются такие методы, которые необходимы, если точно известно, какой код вы хотите проверить, или по крайней мере вам известно, где вы хотите начать отладку.  
  
- **Задание точек останова в коде**  
  
     Для установки простой точки останова в коде откройте исходный файл в редакторе Visual Studio. Установите курсор в строке кода, в которой нужно приостановить выполнение, а затем щелкните правой кнопкой мыши в окне кода, чтобы открыть контекстное меню и выбрать точку останова или **Вставить точку** остановки (или нажмите клавишу **F9**). Отладчик приостанавливает выполнение прямо перед выполнением строки.  
  
     ![Установка точки останова](../debugger/media/dbg-basics-setbreakpoint.png "DBG_Basics_SetBreakpoint")  
  
     Точки останова в Visual Studio предоставляют широкий набор дополнительных функций, таких как условные точки останова и точки трассировки. См. раздел [Использование точек останова](../debugger/using-breakpoints.md).  
  
- **Выполнение до расположения курсора**  
  
     Чтобы осуществить выполнение до расположения курсора, поместите курсор в исполняемую строку кода в окне исходного кода. В контекстном меню редактора (щелкните правой кнопкой мыши в редакторе) и выберите **выполнить до текущей позиции**. Это аналогично установке временной точки останова.  
  
- **Приостановка выполнения кода вручную**  
  
     Чтобы приостановить выполнение на следующей доступной строке кода в выполняющемся приложении, выберите **Отладка**, **Прервать все** (на клавиатуре: **Ctrl+Alt+Break**).  
  
     Если во время приостановки выполнения кода отсутствуют соответствующие исходные файлы или файлы символов (PDB-файлы), отладчик отображает страницу **Исходный файл не найден** или **Символы не найдены** , которая поможет найти необходимые файлы. См. раздел [Указание символов (. pdb) и исходных файлов](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md). Если у вас нет доступа к вспомогательным файлам, можно выполнить отладку инструкций на языке ассемблера в окне "Дизассемблирование".  
  
- **Выполнение до функции в стеке вызовов**  
  
     В окне **Стек вызовов** (доступно во время отладки) выберите функцию, щелкните ее правой кнопкой мыши и выберите команду **выполнить до текущей позиции**. Сведения о визуальном отслеживании стека вызовов см. в статье [Сопоставление методов в визуализации стека вызовов при отладке](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md).  
  
- **Выполнение до функции, указанной по имени**  
  
     Можно указать отладчику запустить приложение, пока не достигнет указанной функции. Можно задать функцию по имени или выбрать ее из стека вызовов.  
  
     Чтобы указать функцию по имени, последовательно выберите **Отладка**, **Создать точку останова**, **Прервать в функции**, а затем введите имя функции и другие идентификационные сведения.  
  
     ![Диалоговое окно «Создать точку останова»](../debugger/media/dbg-execution-newbreakpoint.png "DBG_Execution_NewBreakpoint")  
  
     Если функция перегружается или находится в нескольких пространствах имен, необходимые функции можно выбрать в диалоговом окне **Выбор точек останова** .  
  
     ![Диалоговое окно «Выбор точек останова»](../debugger/media/dbg-execution-overloadedbreakpoints.png "DBG_Execution_OverloadedBreakpoints")  
  
## <a name="move-the-pointer-to-change-the-execution-flow"></a><a name="BKMK_Set_the_next_statement_to_execute"></a> Перемещение указателя для изменения потока выполнения  
 Пока отладчик приостановлен, можно переместить указатель инструкции, чтобы задать следующий оператор кода для выполнения. Желтая стрелка на границе исходного текста или в окне "Дизассемблированный код" отмечает текущее расположение оператора, который должен быть выполнен следующим. Посредством перемещения этой стрелки можно пропустить часть кода или вернуться к строке, выполненной ранее. Это можно использовать при возникновении таких ситуаций, как пропуск раздела кода, содержащего известную ошибку.  
  
 ![Example2](../debugger/media/dbg-basics-example2.png "DBG_Basics_Example2")  
  
 Чтобы задать следующий оператор для выполнения, воспользуйтесь одной из следующих процедур.  
  
- В окне исходного кода перетащите желтую стрелку в то место этого же исходного файла, где необходимо задать следующий оператор.  
  
- В окне исходного кода установите курсор на строке, которую нужно выполнить следующим, щелкните правой кнопкой мыши и выберите **задать следующий оператор**.  
  
- В окне дизассемблирования установите курсор на инструкцию сборки, которую нужно выполнить следующим, щелкните правой кнопкой мыши и выберите **задать следующий оператор**.  
  
> [!CAUTION]
> Установка следующего оператора заставит программный счетчик инструкций перейти непосредственно на новое место. Следует применять эту команду с осторожностью.  
> 
> - Инструкции между старой и новой точками не выполняются.  
>   - При перемещении точки выполнения обратно, промежуточные инструкции не отменяются.  
>   - Перемещение следующего оператора на другую функцию или область обычно приводит к повреждению стека вызова, вызывая ошибку времени выполнения или исключение. При попытке перемещения следующего оператора в другую область, отладчик открывает диалоговое окно с предупреждением и предоставляет возможность отменить операцию. В Visual Basic нельзя переместить следующий оператор на другую область или функцию.  
>   - Если при использовании машинного кода C++ включены проверки времени выполнения, установка следующего оператора может вызвать исключение, когда выполнение достигнет конца метода.  
>   - При включенной операции "Изменить и продолжить" команда **Задать следующий оператор** завершится неудачей, если вы внесете изменения, которые операция "Изменить и продолжить" не сможет немедленно применить. Например, это может произойти, если были внесены изменения внутри блока catch. При возникновении такой ситуации появится сообщение об ошибке, указывающее, что операция не поддерживается.  
> 
> [!NOTE]
> В управляемом коде нельзя перемещать следующий оператор в следующих случаях:  
> 
> - Следующий оператор находится в методе, отличном от метода текущего оператора.  
>   - Отладка была запущена через JIT–отладку.  
>   - Выполняется очистка стека вызова.  
>   - Вызвано исключение System.StackOverflowException или System.Threading.ThreadAbortException.  
  
 Нельзя устанавливать следующий оператор, если приложение выполняется. Чтобы задать следующий оператор, отладчик должен находиться в режиме приостановки.  
  
## <a name="step-into-non-user-code"></a>Шаг с заходом в код, не являющийся пользовательским  
 По умолчанию отладчик пытается отобразить только код вашего приложения во время отладки, который определяется параметром отладчика, который называется *только мой код*. (См. [только мой код](../debugger/just-my-code.md) , чтобы узнать, как это работает для различных типов проектов и языков и как можно настроить поведение.) Однако иногда во время отладки может возникнуть необходимость взглянуть на код платформы, сторонний код библиотеки или вызовы операционной системы (системные вызовы).  
  
 Чтобы отключить только мой код, перейдите в **меню Сервис**  /  **Параметры**  /  **Отладка** и снимите флажок **включить только мой код** .  
  
 Если Только мой код отключена, отладчик может выполнить шаг с заходом в код, не являющийся пользовательским, а код, не являющийся пользовательским, появится в окнах отладчика.  
  
> [!NOTE]
> Режим "Только мой код" не поддерживается для проектов устройств.  
  
 **Шаг с заходом в системные вызовы**  
  
 Если вы загрузили отладочные символы для системного кода и Только мой код не включены, можно выполнить шаг с заходом в системный вызов так же, как любой другой вызов.  
  
 Сведения о доступе к файлам символов Майкрософт см. в разделе [Использование серверов символов для поиска файлов символов, отсутствующих на локальном компьютере](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md#BKMK_Use_symbol_servers_to_find_symbol_files_not_on_your_local_machine) , в статье [Указание символа (PDB) и исходных файлов](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md) .  
  
 Чтобы загрузить символы для определенного системного компонента во время отладки, выполните следующие действия.  
  
1. Откройте окно "Модули" (на клавиатуре: **Ctrl+Alt+U**).  
  
2. Выберите модуль, для которого требуется загрузить символы.  
  
     Определить, для каких модулей символы загружены, можно по значению в столбце **Состояние символов** .  
  
3. В контекстном меню выберите команду **Загрузить символы** .  
  
## <a name="step-into-properties-and-operators-in-managed-code"></a><a name="BKMK_Step_into_properties_and_operators_in_managed_code"></a> Шаг с заходом в свойства и операторы в управляемом коде  
 По умолчанию отладчик обходит свойства и операторы при пошаговом выполнении в управляемом коде. В большинстве случаев это делает отладку более удобной и эффективной. Чтобы включить пошаговое выполнение свойств и операторов, выберите пункт **Отладка** / **Параметры**. На странице "Общие" **отладки**  /  **General** снимите флажок **Шаг с обходом свойств и операторов (только управляемый)** .
