---
title: Пошаговое руководство. С помощью IntelliTrace | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
ms.assetid: e1c9c91a-0009-4c4e-9b4f-c9ab3a6022a7
caps.latest.revision: 10
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 96d18ae0684dab5b6dc5c4001b93804bb13aa75e
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63444260"
---
# <a name="walkthrough-using-intellitrace"></a>Пошаговое руководство. Использование IntelliTrace
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

IntelliTrace можно использовать для сбора сведений о конкретных событиях или категориях событий, а также об отдельных вызовах функций в дополнение к событиям. Процедура приведена ниже.  
  
 IntelliTrace можно использовать в выпуске Visual Studio Enterprise (но не в выпусках Professional или Community).  
  
## <a name="GettingStarted"></a> Использование IntelliTrace только с событиями  
 Вы можете попробовать выполнить отладку только с помощью событий IntelliTrace. События IntelliTrace — это события отладчика, исключения, события .NET Framework и другие системные события. До начала отладки следует включить или отключить определенные события в зависимости от того, должно ли их записывать средство IntelliTrace. Дополнительные сведения см. в разделе [возможности IntelliTrace](../debugger/intellitrace-features.md).  
  
 В следующих шагах показано, как выполнить отладку только с использованием событий IntelliTrace.  
  
1. Включите событие IntelliTrace для доступа к файлам. Перейдите на страницу **Сервис | Параметры | IntelliTrace | События IntelliTrace** и разверните категорию **Файл** . Установите флажок напротив категории событий **Файл** . Будут проверены все события, связанные с файлами (доступ, закрытие, удаление).  
  
2. Создайте консольное приложение C#. В файле Program.cs добавьте следующую инструкцию `using` :  
  
    ```csharp  
    using System.IO;  
    ```  
  
3. Создайте <xref:System.IO.FileStream> в методе Main, выполните его считывание, закройте его и удалите файл. Добавьте еще одну строку, чтобы задать точку останова:  
  
    ```csharp  
    static void Main(string[] args)  
    {  
        FileStream fs = File.Create("WordSearchInputs.txt");  
        fs.ReadByte();  
        fs.Close();  
        File.Delete("WordSearchInputs.txt");  
  
        Console.WriteLine("done");  
    }  
    ```  
  
4. Задайте точку останова в `Console.WriteLine("done");`  
  
5. Запустите отладку обычным образом. (Нажмите клавишу **F5** или щелкните **Отладка | Начать отладку**.  
  
    > [!TIP]
    > Не закрывайте окна **Локальные** и **Видимые** при отладке, чтобы просматривать и записывать отображаемые в них значения.  
  
6. Выполнение прекратится в точке останова. Если вы не видите окно **Средства диагностики** , щелкните **Отладка | Windows | События IntelliTrace**.  
  
     В окне **Средства диагностики** найдите вкладку **События** (должны появиться три вкладки: **События**, **Использование памяти**и **Использование ЦП**). На вкладке **События** показан хронологический список событий, заканчивающийся последним событием перед завершением выполнения отладчика. Должно иметься событие **Доступ к WordSearchInputs.txt**.  
  
     Приведенный ниже снимок экрана сделан в Visual Studio 2015 с обновлением 1.  
  
     ![IntelliTrace&#45;Update1](../debugger/media/intellitrace-update1.png "IntelliTrace-Update1")  
  
7. Выберите событие и просмотрите подробности о нем.  
  
     Приведенный ниже снимок экрана сделан в Visual Studio 2015 с обновлением 1.  
  
     ![IntelliTraceUpdate1&#45;SingleEvent](../debugger/media/intellitraceupdate1-singleevent.png "IntelliTraceUpdate1 SingleEvent")  
  
     Вы можете щелкнуть ссылку пути, чтобы открыть файл. Если полный путь недоступен, откроется диалоговое окно **Открыть файл** .  
  
     Щелкните **Активировать отладку с ведением журнала**, чтобы задать в контексте отладчика время, когда было собрано указанное событие, после чего в окнах **Стек вызовов**, **Локальные** и других отобразятся данные журнала. Если исходный код доступен, Visual Studio перемещает указатель на соответствующий код в окне источника, чтобы вы могли его изучить.  
  
     Приведенный ниже снимок экрана сделан в Visual Studio 2015 с обновлением 1.  
  
     ![HistoricalDebugging&#45;Update1](../debugger/media/historicaldebugging-update1.png "HistoricalDebugging Update1")  
  
8. Если ошибка не найдена, попробуйте изучить другие события, которые предположительно ее вызвали. Вы также можете просмотреть сведения о вызове записи IntelliTrace и выполнить вызовы функций по шагам.  
  
## <a name="using-intellitrace-with-events-and-function-calls"></a>Использование IntelliTrace с событиями и вызовами функций  
 IntelliTrace может записывать вызовы функций вместе с событиями. Это позволит увидеть журнал стека вызовов и переходить по вызовам в вашем коде. IntelliTrace записывает такие данные, как имена функций, точки входа и выхода функций и определенные значения параметров, а также возвращаемые значения. См. в разделе [возможности IntelliTrace](../debugger/intellitrace-features.md).  
  
1. Включите сбор данных о вызовах. (Последовательно щелкните **Сервис | Параметры | IntelliTrace | Общие**, выберите **События IntelliTrace и данные вызовов**. IntelliTrace начнет собирать эту информацию при запуске следующего сеанса отладки.  
  
    > [!TIP]
    > Это может замедлить работу приложения и увеличить размер файлов журнала IntelliTrace (ITRACE-файлов), которые сохраняются на диск. Чтобы получить подробные сведения о вызовах, не замедляя работу приложения, записывайте данные только об интересующих вас модулях. Чтобы изменить максимальный размер ITRACE-файлов, перейдите в раздел **Сервис | Параметры | IntelliTrace | Дополнительно**и укажите максимальный размер дискового пространства. Значение по умолчанию — 250 МБ.  
  
2. Запустите отладку в консольном приложении C#, созданном в предыдущем разделе. Выполнение прекратится в точке останова. Если вы не видите окно **Средства диагностики** , щелкните **Отладка | Windows | События IntelliTrace**.  
  
3. Перейдите на вкладку **Вызовы** .  
  
     После этого отобразятся вызовы функций приложения, начиная с вызова корня (в текущем решении это точка входа Main) и заканчивая местом прерывания.  
  
     Выберите один из вызовов функций и дважды щелкните его. Должны появиться точки входа и выхода функции, а также вызовы, сделанные в другие функции и созданные вызовом события IntelliTrace. Если не включена отладка с ведением журнала, это действие включит ее. Дополнительные сведения об отладке с ведением журнала см. в разделе [Historical Debugging](../debugger/historical-debugging.md).  
  
    > [!NOTE]
    > Некоторые вызовы могут оказаться неактивными. Это происходит из-за того, что средство IntelliTrace не записало данные из соответствующих модулей. Для просмотра этих данных включите сбор данных IntelliTrace из таких модулей. Сведения об указании модулей см. в разделе [возможности IntelliTrace](../debugger/intellitrace-features.md).  
  
## <a name="next-steps"></a>Следующие шаги
