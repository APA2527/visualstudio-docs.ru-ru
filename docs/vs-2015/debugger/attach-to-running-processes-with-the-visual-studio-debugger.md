---
title: Присоединение к выполняемым процессам с помощью отладчика | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.debug.processes.attach
- vs.debug.process
- vs.debug.programs
- vs.debug.detaching
- vs.debug.processes
- vs.debug.error.attach
- vs.debug.remotemachine
dev_langs:
- C++
- CSharp
- FSharp
- VB
- c++
helpviewer_keywords:
- remote debugging, attaching to programs
- processes, attaching to running processes
- Attach to Process dialog box
- debugging [Visual Studio], attaching to processes
- debugger, processes
ms.assetid: 27900e58-090c-4211-a309-b3e1496d5824
caps.latest.revision: 62
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 15b9921514f76d788430c1eda66603e9fc446361
ms.sourcegitcommit: 748d9cd7328a30f8c80ce42198a94a4b5e869f26
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/15/2019
ms.locfileid: "67891026"
---
# <a name="attach-to-running-processes-with-the-visual-studio-debugger"></a>Присоединение к выполняемым процессам с использованием отладчика Visual Studio
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Отладчик Visual Studio можно подключить к запущенному процессу на локальном или удаленном компьютере. Запустив процесс, выберите команду **отладка / присоединение к процессу** (или нажмите клавишу **CTRL + ALT + P**) чтобы открыть **присоединение к процессу** диалоговое окно.

Эту возможность можно использовать для отладки приложений, запущенных на локальном или удаленном компьютере, одновременной отладки нескольких процессов или отладки приложения, который не был создан в Visual Studio. Часто бывает полезно для устранения проблем в приложении, но (по любой причине) вы не запускали приложение из Visual Studio с подключенным отладчиком. Например если вы запускаете приложение без отладчика и исключение, может затем присоединяется к процессу, запустив его, чтобы начать отладку.

> [!TIP]
> Не уверены ли вам нужно использовать **присоединение к процессу** для отладки сценария? См. в разделе [распространенных сценариях отладки](#BKMK_Scenarios). Если необходимо выполнить отладку приложений ASP.NET, которые были развернуты в IIS, см. в разделе [Remote Debugging ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md).

## <a name="BKMK_Attach_to_a_running_process"></a> Присоединение к выполняющемуся процессу на локальном компьютере
 Для присоединения к процессу, необходимо знать имя процесса (см. в разделе [распространенных сценариях отладки](#BKMK_Scenarios) для несколько общих имен процесса).

1. В Visual Studio выберите **отладка / присоединение к процессу** (или нажмите клавишу **CTRL + ALT + P**).

2. В диалоговом окне **Присоединение к процессу** найдите программу, к которой требуется присоединиться, в списке **Доступные процессы** .

     Чтобы быстро выбрать процесс, которому необходимо, введите первую букву имени процесса. Если вы не знаете имя процесса, см. в разделе [распространенных сценариях отладки](#BKMK_Scenarios).

     ![DBG_Basics_Attach_To_Process](../debugger/media/dbg-basics-attach-to-process.png "DBG_Basics_Attach_To_Process")

     Если процесс выполняется с другой учетной записью пользователя, установите флажок **Показать процессы всех пользователей** .

3. Убедитесь, что в окне **Присоединиться к** указан тип кода, который необходимо отладить. Параметр по умолчанию **Авто** пытается определить тип кода, который нужно отладить. Чтобы вручную задать тип кода, выполните следующие действия.

    1. В поле **Присоединиться к** щелкните **Выбрать**.

    2. В диалоговом окне **Выбор типа кода** нажмите кнопку **Выполнять отладку кода следующих типов** и выберите типы для отладки.

    3. Нажмите кнопку **ОК**.

4. Нажмите кнопку **Присоединить**.

## <a name="BKMK_Attach_to_a_process_on_a_remote_computer"></a> Присоединение к процессу на удаленном компьютере
 Для присоединения к процессу, необходимо знать имя процесса (см. в разделе [распространенных сценариях отладки](#BKMK_Scenarios) для несколько общих имен процесса). Для получения более подробной для приложения ASP.NET, которые были развернуты в IIS, см. в разделе [Remote Debugging ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md). Для других приложений, возможно, имя процесса удастся найти в диспетчере задач.

 При использовании диалогового окна **Присоединение к процессу** можно выбрать другой компьютер, который настроен для удаленной отладки. Дополнительные сведения см. в разделе [удаленной отладки](https://msdn.microsoft.com/library/90f45630-0d26-4698-8c1f-63f85a12db9c). После выбора удаленного компьютера можно просмотреть список доступных процессов, запущенных на этом компьютере, и подключиться к одному или нескольким процессам для отладки.

 **Чтобы выбрать удаленный компьютер:**

1. В Visual Studio выберите **отладка / присоединение к процессу** (или нажмите клавишу **CTRL + ALT + P**).

2. В диалоговом окне **Присоединение к процессу** выберите подходящий тип подключения в списке **Транспорт** . **По умолчанию** — правильный параметр в большинстве случаев.

   Параметр **Транспорт** хранится между сеансами отладки.

3. Воспользуйтесь списком **Квалификатор** для выбора имени удаленного компьютера одним из следующих способов:

   1. Введите имя в списке **Квалификатор** .

      > [!NOTE]
      > Если позднее, не удается подключиться, используя имя удаленного компьютера, используйте IP-адрес. (Номер порта может отображаться автоматически после выбора процесса. Можно также ввести его вручную. На следующем рисунке 4020 является портом по умолчанию для удаленного отладчика.)

   2. Щелкните стрелку раскрывающегося списка **Квалификатор** и выберите из раскрывающегося списка имя компьютера.

   3. Нажмите кнопку **найти** рядом с пунктом **квалификатор** списка, чтобы открыть **выберите подключение к удаленному отладчику** диалоговое окно. В диалоговом окне **Выбор подключения к удаленному отладчику** будут перечислены все устройства, присутствующие в локальной подсети, а также устройства, непосредственно подключенные к компьютеру с помощью кабеля Ethernet (если таковые имеются). Щелкните нужный компьютер или устройство, после чего щелкните **Выбрать**.

      Параметр **Квалификатор** хранится между сеансами отладки только в случае успешного подключения отладки с этим квалификатором.

4. Нажмите кнопку **Обновить**.

     Список **Доступные процессы** отображается автоматически при открытии диалогового окна **Процессы** . Процессы могут запускаться и останавливаться в фоновом режиме, пока диалоговое окно открыто. Однако содержимое окна не всегда отражает текущее состояние. Можно обновить список в любое время, щелкнув кнопку **Обновить**, чтобы просмотреть текущий список процессов.

5. В диалоговом окне **Присоединение к процессу** найдите программу, к которой требуется присоединиться, в списке **Доступные процессы** .

    Если процесс выполняется с другой учетной записью пользователя, установите флажок **Показать процессы всех пользователей** .

6. Нажмите кнопку **Присоединить**.

## <a name="additional-info"></a>Дополнительные сведения

Во время отладки можно подключиться к нескольким программам, но в любой момент времени только одна из них активна в отладчике. Можно выбрать текущую программу в панели инструментов **Место отладки** или окне **Процессы** . Дополнительные сведения см. в разделе [Практическое руководство. Установка текущей программы](https://msdn.microsoft.com/7e1d7fa5-0e40-44cf-8c41-d3dba31c969e).

Если попытаться подключиться к процессу, работающему под управлением ненадежной учетной записи, появится диалоговое окно подтверждения с предупреждением безопасности. Дополнительные сведения см. в разделе [предупреждение системы безопасности: Подключение к процессу, который принадлежит пользователю, не являющемуся доверенным, может быть опасным. Если вы не уверены, ниже сведения, не присоединяться к процессу](/visualstudio/debugger/security-warning-attaching-to-a-process-owned-by-an-untrusted-user?view=vs-2015).

В некоторых случаях при отладке в сеансе удаленного рабочего стола (службы терминалов), список **Доступные процессы** не отображает все доступные процессы. При работе с Visual Studio в качестве пользователя с ограниченным доступом в списке **Доступные процессы** не будут отображаться процессы, запущенные в сеансе 0, который используется для служб и других серверных процессов, включая w3wp.exe. Можно устранить эту проблему, запустив [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] под учетной записью администратора или запустив [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] с консоли сервера вместо сеанса служб терминалов. Если ни один из этих обходных путей использовать невозможно, третий вариант — присоединение к процессу путем запуска `vsjitdebugger.exe -p` *ProcessId* из командной строки Windows. Можно определить идентификатор процесса с помощью Tlist.exe. Чтобы получить файл tlist.exe, скачайте и установите средства отладки для Windows, которые доступны на  [странице файлов загрузки WDK и WinDbg](http://go.microsoft.com/fwlink/?LinkId=168279).

## <a name="BKMK_Scenarios"></a> Распространенные сценарии отладки

Чтобы помочь вам определить, является ли вам нужно использовать **присоединение к процессу** и какой процесс для присоединения, ниже представлены наиболее распространенные сценарии отладки (список не является исчерпывающим). Там, где доступны дополнительные инструкции, мы предоставляем ссылки.

Для некоторых типов приложений (например, приложения Windows Store), не прямое подключение к имени процесса, но использовать **отлаживать установленный пакет приложения** параметр меню (см. таблицу).

> [!NOTE]
> Сведения о основы отладки в Visual Studio, см. в разделе [Приступая к работе с отладчиком](../debugger/getting-started-with-the-debugger.md).

|Сценарий|Отладка метода|Имя процесса|Примечания и ссылки|
|-|-|-|-|
|Отладка управляемого или собственного приложения на локальном компьютере|Использовать присоединение к процессу или [стандартный отладки](../debugger/getting-started-with-the-debugger.md)|*AppName*.exe|Чтобы быстро получить доступ к диалоговое окно, используйте **CTRL + ALT + P** и введите первую букву имени процесса.|
|Отладка приложений ASP.NET на локальном компьютере после запуска приложения без отладчика|Использовать присоединение к процессу|iiexpress.exe|Это может быть полезно отключить учет загрузить приложения быстрее, такие как (например) при профилировании. |
|Удаленная отладка ASP.NET 4 или 4.5 на сервере IIS|Используйте инструменты удаленной отладки и присоединение к процессу|w3wp.exe|См. в разделе [Remote Debugging ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|Удаленная отладка ASP.NET Core на сервере IIS|Используйте инструменты удаленной отладки и присоединение к процессу|dnx.exe|Для развертывания приложений, см. в разделе [публикация в IIS](https://docs.asp.net/en/latest/publishing/iis.html). Для отладки, см. в разделе [Remote Debugging ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|Отладка других поддерживаемых типов приложений в процессе сервера|Использовать удаленные средства (если сервер расположен удаленно) и присоединение к процессу|Iexplore.exe или других процессов|При необходимости используйте диспетчер задач для определения процесса. См. в разделе [удаленной отладки](../debugger/remote-debugging.md) и дальнейших разделах этой статьи|
|Удаленная отладка классического приложения Windows|Инструменты удаленной отладки и F5|Н/Д| См. в разделе [удаленной отладки](../debugger/remote-debugging.md)|
|Удаленная отладка в приложение универсальной Windows (UWP), OneCore, HoloLens и IoT|Отладка установленного пакета приложения|Н/Д|Используйте **отладка: другие целевые объекты отладки / Debug пакет установленные приложения** вместо **присоединение к процессу**|
|Отладка приложения универсальной Windows (UWP), OneCore, HoloLens и IoT, вы не запускали из Visual Studio|Отладка установленного пакета приложения|Н/Д|Используйте **отладка: другие целевые объекты отладки / Debug пакет установленные приложения** вместо **присоединение к процессу**|

> [!WARNING]
> Для присоединения к универсальному приложению Windows, которое написано на JavaScript, сначала необходимо включить отладку для приложения. См. раздел [Attach the debugger](../debugger/start-a-debugging-session-for-store-apps-in-visual-studio-javascript.md#BKMK_Attach_the_debugger) в Центре разработчика Windows.

> [!NOTE]
> Чтобы отладчик мог присоединиться к коду на языке C++, код должен предоставлять `DebuggableAttribute`. Это можно добавить в код автоматически, путем связывания с параметром [/ASSEMBLYDEBUG](https://msdn.microsoft.com/library/94443af3-470c-41d7-83a0-7434563d7982) компоновщика.

## <a name="what-debugger-features-can-i-use"></a>Какие возможности отладчика можно использовать?

Чтобы использовать все возможности отладчика Visual Studio (например, прерывания в точках останова) при присоединении к процессу, исполняемый файл должен точно соответствовать локального источника и символов (то есть отладчик должен находиться удалось загрузить правильный [(.pbd) файлы символов ](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)). По умолчанию для этого отладочную сборку.

Для удаленной отладки сценариев необходимо иметь исходный код (или копию исходного кода), уже открыт в Visual Studio. Двоичные файлы скомпилированное приложение на удаленном компьютере должны поступать из одной сборки, как на локальном компьютере.

В некоторых сценариях локальной отладки отладки в Visual Studio без доступа к источнику при наличии файлов правильный символов с помощью приложения (по умолчанию для этого требуется отладочной сборки). Дополнительные сведения см. в разделе [Указание файлов символов и исходных файлов](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).

## <a name="BKMK_Troubleshoot_attach_errors"></a> Устранение ошибок присоединения
 При присоединении отладчика к выполняющемуся процессу этот процесс может содержать один или несколько типов кода. Типы кода, к которым может присоединиться отладчик, отображаются и выбираются в диалоговом окне **Выбор типа кода** .

 Иногда отладчик может успешно присоединяться к одному типу кода, но не к другому. Такое может происходить при попытке присоединения к процессу, выполняющемуся на удаленном компьютере. На удаленном компьютере для одних типов кода могут иметься компоненты удаленной отладки, а для других — нет. Такое также может происходить при попытке присоединиться к двум или более процессам для прямой отладки базы данных. Отладка SQL поддерживает присоединение только к одному процессу.

 Если отладчик может присоединиться не ко всем типам кода, то будет отображено сообщение, идентифицирующее типы, к которым присоединиться не удалось.

 Если отладчик успешно подключается хотя бы к одному типу кода, то можно приступать к отладке процесса. Но отлаживать можно будет только те типы кода, к которым удалось подсоединиться. В приведенном выше сообщении указано, что не удалось присоединиться к типу кода скриптов. Поэтому проводить отладку кода скриптов в данном процессе не удастся. Код скриптов в этом процессе будет выполняться, но задавать в этом сценарии точки останова, просматривать данные и выполнять другие операции отладки не удастся.

 Если нужны более конкретные сведения о том, почему отладчику не удалось присоединиться к некоторому типу кода, можно попытаться повторно присоединиться только к этому типу кода.

 **Чтобы получить подробные сведения о причине сбоя типа кода для присоединения**

1. Отключитесь от процесса. В меню **Отладка** выберите команду **Отсоединить все**.

2. Вновь подключитесь к процессу, выбрав единственный тип кода.

   1. В диалоговом окне **Присоединение к процессу** выберите процесс в списке **Доступные процессы** .

   2. Нажмите кнопку **Выбрать**.

   3. В диалоговом окне **Выбор типа кода** выберите **Выполнять отладку кода следующих типов** и выберите тип кода, к которому не удалось присоединиться. Отмените выбор всех остальных типов кода.

   4. Нажмите кнопку **ОК**. Диалоговое окно **Выбор типа кода** будет закрыто.

   5. В диалоговом окне **Присоединение к процессу** нажмите **Присоединиться**.

      На этот раз присоединение не пройдет полностью, и будет выдано сообщение о конкретной ошибке.

## <a name="see-also"></a>См. также
 [Отладка нескольких процессов](../debugger/debug-multiple-processes.md) [отладки Just-In-Time](../debugger/just-in-time-debugging-in-visual-studio.md) [удаленной отладки](../debugger/remote-debugging.md)
