---
title: Историческая отладка | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
ms.assetid: 7cc5ddf2-2f7c-4f83-b7ca-58e92e9bfdd2
caps.latest.revision: 9
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: c7db175535e0eebdcf1974f0f85123959ba5a3ed
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "68192189"
---
# <a name="historical-debugging"></a>Отладка с ведением журнала
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Отладка с ведением журнала — это режим отладки, который зависит от сведений, собранных IntelliTrace. В этом режиме можно переходить назад и вперед по выполнению приложения и проверять его состояние.  
  
 IntelliTrace можно использовать в выпуске Visual Studio Enterprise (но не в выпусках Professional или Community).  
  
## <a name="why-use-historical-debugging"></a>Для чего используется отладка с ведением журнала?  
 Задание точек останова для поиска ошибок может быть выполняемой наугад задачей. Точка останова устанавливается в коде ближе к месту, где предполагается возникновение ошибки. Затем приложение запускается в отладчике с надеждой достижения этой точки. В месте прерывания выполнения можно обнаружить источник ошибки. В противном случае придется попробовать установить точку останова в другом месте в коде, повторно запустить отладчик и выполнять тестирование до тех пор, пока проблема не будет найдена.  
  
 ![Установка точки останова](../debugger/media/breakpointprocesa.png "бреакпоинтпроцеса")  
  
 IntelliTrace и режим отладки с ведением журнала позволяют перемещаться по приложению и проверять его состояние (стек вызовов и локальные переменные) без необходимости задания точек останова, перезапуска отладки и многократного выполнения действий по тестированию. Это позволяет сэкономить много времени, особенно если ошибка обнаружена практически в центре тестового сценария, выполнение которого является продолжительным.  
  
## <a name="how-do-i-start-using-historical-debugging"></a>Как приступить к использованию отладки с ведением журнала?   
 Инструмент IntelliTrace включен по умолчанию. Все, что нужно сделать — решить, какие события и вызовы функций представляют интерес. Дополнительные сведения об определении нужных компонентов см. в разделе [Возможности IntelliTrace](../debugger/intellitrace-features.md). Пошаговую учетную запись отладки с помощью IntelliTrace см. в разделе [Пошаговое руководство. использование IntelliTrace](../debugger/walkthrough-using-intellitrace.md).  
  
## <a name="navigating-your-code-with-historical-debugging"></a>Перемещение по коду с помощью отладки с ведением журнала  
 Начнем с простой программы, содержащей ошибку. В консольном приложении C# добавьте следующий код:  
  
```csharp  
static void Main(string[] args)  
{  
    int testInt = 0;  
    int resultInt = AddAll(testInt);  
    Console.WriteLine(resultInt);  
}  
private static int AddAll(int j)  
{  
    for (int i = 0; i < 20; i++)  
    {  
        j = AddInt(j);  
    }  
    return j;  
}  
  
private static int AddInt(int add)  
{  
    if (add == 10)  
    {  
        return add += 25;  
    }  
    return ++add;  
}  
```  
  
 Предположим, что ожидаемое значение `resultInt` после вызова `AddAll()` — 20 (результат увеличения `testInt` в 20 раз). (Также предположим, что ошибка не отображается в `AddInt()`). Но фактическим результатом будет 44. Как можно найти ошибку без обращения к `AddAll()` 10 раз? Отладка с ведением журнала позволяет находить ошибки быстро и просто. Этот процесс описывается далее.  
  
1. Последовательно выбрав «Сервис/Параметры/IntelliTrace/Общие», убедитесь, что инструмент IntelliTrace включен, выберите события IntelliTrace и вызовите параметр информирования. Если этот параметр не выбран, область навигации отображаться не будет (как описано ниже).  
  
2. Установите точку останова на строке `Console.WriteLine(resultInt);` .  
  
3. Приступите к отладке. Код выполняется до точки останова. В окне **Локальные** можно увидеть, что значение `resultInt` равно 44.  
  
4. Откройте окно **средства диагностики** (**Отладка или показ средства диагностики**). Окно кода должно выглядеть следующим образом.  
  
    ![Окно кода в точке останова](../debugger/media/historicaldebuggingbreakpoint.png "HistoricalDebuggingBreakpoint")  
  
5. Рядом с левым полем непосредственно над точкой останова отображается двойная стрелка. Эта область называется областью навигации и используется для отладки с ведением журнала. Щелкните стрелку.  
  
    В окне кода предыдущая строка кода (`int resultInt = AddIterative(testInt);`) выделена розовым цветом. Над окном отображается сообщение, информирующее о включенном режиме отладки с ведением журнала.  
  
    Теперь окно кода выглядит следующим образом.  
  
    ![окно кода в режиме отладки с ведением журнала](../debugger/media/historicaldebuggingback.png "HistoricalDebuggingBack")  
  
6. Теперь можно выполнить шаг с заходом в метод `AddAll()` (**F11** или нажмите кнопку **Шаг с заходом** в области навигации). Выполните шаг вперед (**F10** или нажмите кнопку **Перейти к следующему вызову** в области навигации). Теперь розовая строка находится на строке `j = AddInt(j);`. Нажатие клавиши **F10** в этом случае выполняет переход к следующей строке кода. Вместо этого осуществляется вызов следующей функции. Отладка с ведением журнала переходит от вызова к вызову и пропускает строки кода, которые не включают вызов функции.  
  
7. Выполните шаг с заходом в метод `AddInt()`. Вы сразу же увидите ошибку в этом коде.  
  
   В этой процедуре приведен лишь краткий обзор всех действий, выполняемых в рамках отладки с ведением журнала. Дополнительные сведения о различных параметрах и действиях кнопок в области навигации см. в разделе [Возможности IntelliTrace](../debugger/intellitrace-features.md).
