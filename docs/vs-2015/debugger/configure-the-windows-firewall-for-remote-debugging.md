---
title: Настройка брандмауэра Windows для удаленной отладки | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
ms.assetid: 66e3230a-d195-4473-bbce-8ca198516014
caps.latest.revision: 6
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: f232446ed699bd7cc034e4b6d6148b665830cf2d
ms.sourcegitcommit: b885f26e015d03eafe7c885040644a52bb071fae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/30/2020
ms.locfileid: "85535529"
---
# <a name="configure-the-windows-firewall-for-remote-debugging"></a>Настройка брандмауэра Windows для удаленной отладки
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

В этом разделе описывается настройка брандмауэра для обеспечения удаленной отладки на компьютерах со следующими операционными системами:  
  
- Windows 7  
  
- Windows 8 или 8.1  
  
- Windows 10  
  
- Windows Server 2008 (R2)  
  
- Windows Server 2012  
  
- Windows Server 2012 R2  
  
  Если сеть, в которой выполняется отладка, не защищена брандмауэром, в этой настройке нет необходимости. В противном случае и на компьютере, на котором размещена среда Visual Studio, и на удаленном компьютере, на котором выполняется отладка, нужно внести изменения в конфигурацию брандмауэра.  
  
  **IPSec** . Если обмен данными по сети должен выполняться по протоколу IPSec, необходимо открыть дополнительные порты как на компьютере с Visual Studio, так и на удаленном компьютере.  
  
  **Веб-сервер** . При отладке удаленного веб-сервера необходимо открыть дополнительный порт на удаленном компьютере.  
  
  Имейте в виду, что на двух компьютерах необязательно должна использоваться одна и та же операционная система. Например, на компьютере с Visual Studio может использоваться Windows 10, а на удаленном компьютере — Windows Server 2012 R2.  
  
## <a name="to-configure-windows-firewall-on-the-visual-studio-computer"></a>Настройка брандмауэра Windows на компьютере Visual Studio  
 Инструкции по настройке брандмауэра Windows немного различаются в зависимости от операционной системы. В Windows 7 и Windows Server 2008 используется слово **программа** , а в Windows 8, Windows 8.1, Windows 10 и Windows Server 2012 — слово **приложение** .  В приведенных ниже инструкциях будет использоваться слово **приложение**.  
  
1. Откройте страницу брандмауэра Windows. (В поле поиска меню **Пуск** введите **Брандмауэр Windows**).  
  
2. Выберите **Разрешение взаимодействия с приложением или компонентом в брандмауэре Windows**.  
  
3. В списке **Разрешенные программы и компоненты** найдите пункт **Обнаружение удаленного отладчика Visual Studio**. Если он есть, убедитесь в том, что он выбран и что также выбран один или несколько типов сетей.  
  
4. Если пункт **Обнаружение удаленного отладчика Visual Studio** отсутствует в списке, щелкните **Разрешить другое приложение**. Если вы по-прежнему не видите его в окне **Добавление приложения** , нажмите кнопку **Обзор** и перейдите к ** \<Visual Studio installation directory> отладчику \Common7\IDE\Remote**. Найдите соответствующую приложению папку (x86, x64, Appx) и выберите файл **msvsmon.exe**. Нажмите кнопку **Добавить**.  
  
5. В списке **Разрешенные программы и компоненты** выберите пункт **Монитор удаленной отладки Visual Studio**. Выберите один или несколько типов сетей (**Доменная, Домашняя или рабочая (частная), Общедоступная**), с которыми должен взаимодействовать монитор удаленной отладки. Эти типы должны включать сеть, к которой подключен компьютер Visual Studio.  
  
## <a name="to-open-a-port-on-the-visual-studio-computer-to-enable-discovery"></a>Открытие порта на компьютере Visual Studio для включения отображения  
 Необходимо разрешить обнаружение компьютеров, на которых запущен удаленный отладчик, через входящий порт UDP 3702. Инструкции по его добавлению см. в разделе "Настройка портов в брандмауэре".  
  
## <a name="to-configure-the-windows-firewall-of-the-remote-computer-for-remote-debugging"></a>Настройка брандмауэра Windows на удаленном компьютере для удаленной отладки  
 Компоненты удаленной отладки можно установить на удаленном компьютере или запустить из общего каталога. В обоих случаях необходимо настроить брандмауэр на удаленном компьютере. Компоненты удаленной отладки находятся в следующем каталоге:  
  
 **\<Visual Studio installation directory>Отладчик \Common7\IDE\Remote**  
  
 Инструкции по настройке брандмауэра Windows немного различаются в зависимости от операционной системы. В Windows 7 и Windows Server 2008 используется слово **программа** , а в Windows 8, Windows 8.1, Windows 10 и Windows Server 2012 — слово **приложение** .  В приведенных ниже инструкциях будет использоваться слово **приложение**.  
  
1. Откройте страницу брандмауэра Windows. (В поле поиска меню **Пуск** введите **Брандмауэр Windows**.)  
  
2. Выберите **Разрешение взаимодействия с приложением или компонентом в брандмауэре Windows**.  
  
3. В списке **Разрешенные программы и компоненты** найдите пункт **Монитор удаленной отладки Visual Studio**. Если он есть, убедитесь в том, что он выбран и что также выбран один или несколько типов сетей.  
  
4. Если пункт **Монитор удаленной отладки Visual Studio** отсутствует в списке, щелкните **Разрешить другое приложение**. Если вы по-прежнему не видите его в **окне Добавление приложения**, нажмите кнопку **Обзор** и перейдите к ** \<Visual Studio installation directory> отладчику \Common7\IDE\Remote**. Найдите соответствующую приложению папку (x86, x64, Appx) и выберите файл **msvsmon.exe**. Нажмите кнопку **Добавить**.  
  
5. В списке **Разрешенные программы** выберите пункт **Монитор удаленной отладки Visual Studio**. Выберите один или несколько типов сетей (**Доменная, Домашняя или рабочая (частная), Общедоступная**), с которыми должен взаимодействовать монитор удаленной отладки. Эти типы должны включать сеть, к которой подключен компьютер Visual Studio.  
  
## <a name="ports-on-the-remote-computer-that-enable-remote-debugging"></a>Порты на удаленном компьютере, обеспечивающие удаленную отладку  
  
|**Порты**|**Входящий или исходящий**|**Протокол**|**Описание**|  
|-|-|-|-|
|3702|Исходящий|UDP|Требуется для обнаружения удаленного отладчика.|  
|4020||TCP|Для Visual Studio 2015. Номер порта увеличивается на 2 с каждой версией Visual Studio. Более подробную информацию см. в разделе "Назначение портов удаленного отладчика Visual Studio".|  
|4021||TCP|Для Visual Studio 2015. Номер порта увеличивается на 2 с каждой версией Visual Studio. Более подробную информацию см. в разделе "Назначение портов удаленного отладчика Visual Studio".|  
  
## <a name="ports-on-the-remote-computer-that-enable-remote-debugging-with-managed-or-native-compatibility-mode"></a>Порты на удаленном компьютере, обеспечивающие удаленную отладку в режиме совместимости управляемого или машинного кода  
  
|**Порты**|**Входящий или исходящий**|**Протокол**|**Описание**|  
|-|-|-|-|  
|135, 139, 445|Исходящий|TCP|Обязательный.|  
|137, 138|Исходящий|UDP|Обязательный.|  
|500, 4500|Исходящий|UDP|Требуется, если в соответствии с политикой домена обмен данными по сети должен осуществляться по протоколу IPSec.|  
|80|Исходящий|TCP|Требуется для отладки веб-сервера.|  
  
## <a name="how-to-configure-ports-in-windows-firewall"></a>Настройка портов в брандмауэре Windows  
  
1. В меню **Пуск** найдите пункт **Брандмауэр Windows в режиме повышенной безопасности**.  
  
2. Щелкните **Правила для входящих подключений** или **Правила для исходящих подключений** , а затем в списке **Действия** выберите пункт **Новое правило** .  
  
3. На странице **тип правила** выберите **порт** и нажмите кнопку **Далее**.  
  
4. На странице **Протокол и порты** выберите протокол порта (TCP или UDP). Выберите **Определенные локальные порты** и введите один или несколько номеров портов, которые нужно включить для протокола. Номера отделяются запятыми. Затем нажмите кнопку **Далее**.  
  
5. На странице **Действие** выберите **Разрешить подключение** и нажмите кнопку **Далее**.  
  
6. На странице **Профиль** выберите один или несколько типов сетей, которые нужно включить для порта. Выбранные типы должны включать сеть, к которой подключен удаленный компьютер. Затем нажмите кнопку **Далее**.  
  
7. На странице **Имя** введите имя правила, а затем нажмите кнопку **Готово**.  
  
8. Новое правило должно отобразиться в списке правила для **входящих подключений** или **правила исходящих подключений** .  
  
## <a name="see-also"></a>См. также  
 [Remote Debugging](../debugger/remote-debugging.md)
