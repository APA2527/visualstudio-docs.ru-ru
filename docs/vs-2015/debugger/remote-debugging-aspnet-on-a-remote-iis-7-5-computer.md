---
title: Удаленная отладка ASP.NET на удаленном компьютере IIS 7,5 | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
ms.assetid: 573a3fc5-6901-41f1-bc87-557aa45d8858
caps.latest.revision: 13
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: c43f392cddfd5ea36180d9b2675db82469f86ce0
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "90842801"
---
# <a name="remote-debugging-aspnet-on-a-remote-iis-computer"></a>Удаленная отладка ASP.NET на удаленном компьютере IIS
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Вы можете развернуть веб-приложение ASP.NET на компьютере Windows Server с IIS и настроить его для удаленной отладки. В этом руководство объясняется, как настроить и настроить приложение 4.5.2 MVC Visual Studio 2015, развернуть его в IIS и подключить удаленный отладчик из Visual Studio.

Эти процедуры были протестированы в следующих конфигурациях сервера.
* Windows Server 2012 R2 и IIS 10
* Windows Server 2008 R2 и IIS 7,5

Большинство сведений в этой статье также применимо к удаленной отладке ASP.NET Coreного приложения, за исключением того, что развертывание приложений ASP.NET Core отличается и требует дополнительных действий. Чтобы развернуть приложение ASP.NET Core в службах IIS, необходимо выполнить все разделы [этой статьи](https://docs.asp.net/en/latest/publishing/iis.html).

## <a name="prerequisites-install-the-remote-debugger-on-the-windows-server-computer"></a>Необходимые условия: Установка удаленного отладчика на компьютере Windows Server

Инструкции по загрузке удаленного отладчика на компьютер Windows Server см. в разделе [Удаленная отладка](../debugger/remote-debugging.md).

Чтобы выполнить удаленную отладку приложений ASP.NET, можно запустить приложение удаленного отладчика от имени администратора или запустить удаленный отладчик как службу. Подробную информацию о запуске удаленного отладчика в качестве службы можно найти в разделе [Remote Debugging](../debugger/remote-debugging.md).

После установки убедитесь, что удаленный отладчик работает на целевом компьютере. (Если это не так, выполните поиск **удаленного отладчика** в меню " **Пуск** ". ) Окно удаленного отладчика выглядит следующим образом. (номер порта по умолчанию — 4020)

![RemoteDebuggerWindow](../debugger/media/remotedebuggerwindow.png "RemoteDebuggerWindow")
  
## <a name="create-the-application-on-the-visual-studio-computer"></a>Создание приложения на компьютере с Visual Studio  
  
1. Создайте приложение MVC ASP.NET. (Выберите**Файл &gt; Создать &gt; Проект**, а затем **Visual C# &gt; Интернет &gt; Веб-приложение ASP.NET** . В разделе шаблонов **ASP.NET 4.5.2** выберите шаблон **MVC**. Убедитесь, что **узел в облаке** не выбран в разделе Azure. Назовите проект **MyMVC**.)
1. Откройте файл HomeController.cs и установите точку останова в методе `About()` .
1. В **обозревателе решений**щелкните правой кнопкой мыши узел проекта и выберите пункт **Опубликовать**.
1. В поле **Выберите цель публикации**выберите пункт **Настраиваемая** и назовите профиль **MyMVC**. Нажмите кнопку **Далее**.
1. На вкладке **Подключение** задайте в поле **Метод публикации** значение **Файловая система** , а в поле **Целевое расположение** укажите локальный каталог. Нажмите кнопку **Далее**.

    ![RemoteDBG_Publish_Local](../debugger/media/remotedbg-publish-local.png "RemoteDBG_Publish_Local")
1. Задайте конфигурацию **Отладка**. Нажмите кнопку **Опубликовать**.

    ![RemoteDBG_Publish_Debug_Config](../debugger/media/remotedbg-publish-debug-config.png "RemoteDBG_Publish_Debug_Config")
    
    Приложение должно опубликоваться в локальном каталоге.

## <a name="deploy-the-aspnet-application-on-the-windows-server-remote-computer"></a><a name="BKMK_deploy_asp_net"></a> Развертывание приложения ASP.NET на удаленном компьютере Windows Server

 В этом разделе предполагается, что на компьютере Windows Server уже включены службы IIS. В Windows Server 2012 R2 см. раздел [Настройка IIS](https://docs.asp.net/en/latest/publishing/iis.html#iis-configuration) для включения служб IIS. (Вы можете пропустить другие разделы этой статьи, если вы не пытаетесь развернуть приложение ASP.NET Core. Для ASP.NET Core выполните действия, описанные в статье, чтобы развернуть приложение, а не действия, описываемые здесь.)
1. Установите ASP.NET. Используйте компоненты веб-платформы для установки ASP.NET 4,5 (из узла сервера в Windows Server 2012 R2 выберите **получить новые компоненты веб-платформы** , а затем выполните поиск по запросу ASP.NET).

    ![RemoteDBG_IIS_AspNet_45](../debugger/media/remotedbg-iis-aspnet-45.png "RemoteDBG_IIS_AspNet_45")

    В Windows Server 2008 R2 установите ASP.NET 4, используя следующую команду:   **к:\виндовс\микрософт.нет\фрамеворк (64) \v4.0.30319\aspnet_regiis.exe-IR**
1. Скопируйте каталог проекта ASP.NET с компьютера Visual Studio в локальный каталог (который мы назовем **C:\Publish**) на компьютере Windows Server. Вы можете скопировать проект вручную, использовать XCOPY, веб-развертывание, Robocopy, PowerShell или другие параметры.

    > [!CAUTION]
    > Если вам потребуется внести изменения в код или повторно скомпилировать его, повторите публикацию и описанный выше процесс. Исполняемый файл, скопированный на удаленный компьютер, должен в точности совпадать с локальным исходным кодом и символами.
1. Убедитесь в том, что в файле web.config указана правильная версия .NET Framework.  Например, .NET Framework версия, установленная по умолчанию в Windows Server 2008 R2, — это 4.0.30319, но мы создали версию ASP.NET 4.5.2. Если приложение ASP.NET 4,0 выполняется на компьютере Windows Server, необходимо изменить версию:
  
    ```xml
    <system.web>
        <authentication mode="None" />  
        <compilation debug="true" targetFramework="4.0.30319" />
        <httpRuntime targetFramework="4.0.30319" />
      </system.web>
  
    ```

1. Откройте **Диспетчер служб IIS** и перейдите к разделу **Сайты**.
1. Щелкните правой кнопкой мыши узел **Веб-сайт по умолчанию** и выберите команду **Добавить приложение**.
1. Задайте для поля **псевдоним** значение **MyMVC** , а в поле пул приложений — **ASP.NET v 4.0** (ASP.NET 4,5 не является параметром для пула приложений). В поле **Физический путь** укажите значение **C:\Publish** (это каталог, в который вы скопировали каталог проекта ASP.NET).

    >[!NOTE] 
    > Для ASP.NET Core приложений в поле пул приложений задайте значение **без управляемого кода**.
1. Протестируйте развертывание, щелкнув правой кнопкой мыши **веб-сайт по умолчанию** и выбрав **Обзор**.
    Если приложение успешно развернуто, вы увидите веб-страницу.

## <a name="attach-to-the-aspnet-application-from-the-visual-studio-computer"></a>Подключение к приложению ASP.NET с компьютера с Visual Studio

1. На компьютере с Visual Studio откройте решение **MyMVC** .
1. В Visual Studio щелкните **Отладка/присоединение к процессу** (**CTRL + ALT + P**).
1. Задайте для поля квалификатор значение ** \<remote computer name> : 4020**.
1. Нажмите кнопку **Обновить**.
    В окне **Доступные процессы** должен появиться ряд процессов.

    Если вы не видите никаких процессов, попробуйте использовать IP-адрес вместо имени удаленного компьютера (указывать порт обязательно). `ipconfig`Чтобы получить IPv4-адрес, используйте в командной строке.
1. Установите флажок  **Показать процессы, запущенные всеми пользователями**.
1. Найдите процесс **w3wp.exe** и щелкните **Присоединить**.

     Чтобы быстро найти имя процесса, введите первую букву процесса.
     
    >[!NOTE]
    > Для ASP.NET Core приложения выберите dnx.exe процесс вместо w3wp.exe. (Это имя процесса может измениться в предстоящем выпуске.)

    ![RemoteDBG_AttachToProcess](../debugger/media/remotedbg-attachtoprocess.png "RemoteDBG_AttachToProcess")

1. Откройте веб-сайт удаленного компьютера. Для этого откройте в браузере адрес **http://\<remote computer name>** .
    
    Должна открыться веб-страница ASP.NET.
1. На веб-странице ASP.NET щелкните ссылку на страницу About ( **сведения** ).

    В Visual Studio должна быть достигнута точка останова.
