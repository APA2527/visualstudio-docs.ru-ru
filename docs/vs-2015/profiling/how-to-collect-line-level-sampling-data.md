---
title: Практическое руководство. Выборка данных на уровне строк | Документы Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
helpviewer_keywords:
- performance tools, line-level sampling
ms.assetid: 44803aad-dd39-4c2e-9209-d35185d44983
caps.latest.revision: 27
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 65890bf31a1257c3a41bc1fd7ed3f732c50eda14
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "68185954"
---
# <a name="how-to-collect-line-level-sampling-data"></a>Практическое руководство. Выборка данных на уровне строк
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Выборка на уровне строк — это возможность профилировщика определить, где в коде функции, потребляющей большой объем ресурсов процессора (например, функции с высокой частотой исключающих выборок), тратится самый большой объем времени процессора.  
  
## <a name="overview"></a>Обзор  
 При выборке на уровне строк профилировщик обходит стек вызовов программы через заданные интервалы и объединяет результаты обходов. Эти результаты показывают, какие инструкции выполнял процессор во время выборок. Собранные данные об исключающих выборках затем анализируются, чтобы определить строки кода и указатель инструкций.  
  
 Выборка на уровне строк поддерживает как управляемый, так и машинный код. Отчеты о производительности, в которых отображаются эти данные, включают представление "Строки" и "Модули".  
  
 Сведения о начальных и конечных символах недоступны для машинного кода. Для многострочных инструкций сведения о начале строки недоступны для машинного кода; доступны только сведения о конце строки.  
  
### <a name="available-data"></a>Доступные данные  
 Доступные данные выборки на уровне строк включают следующие сведения.  
  
- Имя функции.  
  
- Адрес функции.  
  
- Начало строки — номер строки кода, к которой применяется выборка.  
  
- Конец строки — номер конечной строки исходного кода. Как правило, это значение совпадает со значением "Начало строки", за исключением случаев, когда одна инструкция программы занимает несколько строк исходного кода.  
  
- Начальный символ — начальный столбец агрегированной выборки. Это значение обычно равно нулю, за исключением случаев, когда одна строка содержит несколько инструкций программы.  
  
- Конечный символ — конечный столбец агрегированной выборки.  
  
- IP-адрес — адрес, по которому выполнялась агрегированная выборка (только в представлении IP-адресов).  
  
  В представлении **Модули**, если функция имеет статистику уровня строк, эта статистика представлена под каждой такой функцией. Кроме того, статистические данные на уровне IP-адреса представлены под каждой строкой.  
  
### <a name="turn-off-line-level-sampling-for-managed-code"></a>Отключение выборки на уровне строк для управляемого кода  
 По умолчанию выборка на уровне строк включена. Сбор данных на уровне строк для управляемого кода можно отключить, выполнив одно из следующих действий.  
  
- Перед профилированием введите команду **VSPerfCLREnv /samplelineoff**. Это влияет на приложения и службы.  
  
     Или...  
  
- При запуске приложения введите команду **VSPerfCmd /lineoff \<other arguments>** .  
  
## <a name="see-also"></a>См. также:  
 [Настройка сеансов анализа производительности](../profiling/configuring-performance-sessions.md)   
 [Анализ данных средств профилирования](../profiling/analyzing-performance-tools-data.md)
