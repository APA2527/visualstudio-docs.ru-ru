---
title: Временная шкала приложения | Документы Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
ms.assetid: df7d854b-0a28-45a9-8a64-c015a4327701
caps.latest.revision: 15
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 63673dd42987154d69346505c8e1f80b3b4789e8
ms.sourcegitcommit: bad28e99214cf62cfbd1222e8cb5ded1997d7ff0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2019
ms.locfileid: "74297755"
---
# <a name="application-timeline"></a>Временная шкала приложения
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Используйте профилировщик **Временная шкала приложения** , чтобы найти и исправить проблемы производительности в работе приложений XAML, связанные с взаимодействием. Это средство помогает улучшить производительность приложений XAML, предоставляя подробные сведения об использовании ресурсов приложений. Вы можете проанализировать время, затраченное приложением на подготовку кадров пользовательского интерфейса (макет и обработка), обработку запросов от сети и дисков, а также на такие сценарии, как запуск приложения, загрузка страницы и изменение размера окон.  
  
 **Временная шкала приложения** — это одно из средств, которое можно запустить, выбрав **Отладка | Профилировщик производительности**.  
  
 Это средство заменяет средство **проверки скорости реагирования пользовательского интерфейса XAML** , которое входило в набор средств диагностики для Visual Studio 2013.  
  
 Вы можете использовать это средство на следующих платформах:  
  
1. универсальные приложения для Windows (на Windows 10);  
  
2. Магазин Windows 8.1;  
  
3. Windows Phone 8.1 (обычная платформа XAML);  
  
4. Windows Presentation Foundation (.NET 4.0 и более поздней версии).  
  
5. Windows 7  
  
> [!NOTE]
> Вы можете собирать и анализировать данные о загрузке ЦП и энергопотреблении вместе с данными средства **Временная шкала приложения** . См. раздел [Запуск средств профилирования без отладки](https://msdn.microsoft.com/library/e97ce1a4-62d6-4b8e-a2f7-61576437ff01) .  
  
## <a name="BKMK_Collect_Timeline_data_for_your_app"></a> Сбор данных временной шкалы приложения  
 Скорость реагирования приложения можно профилировать на локальном компьютере, подключенном устройстве, симуляторе или эмуляторах Visual Studio либо на удаленном устройстве. См. раздел [Запуск средств профилирования без отладки](https://msdn.microsoft.com/library/e97ce1a4-62d6-4b8e-a2f7-61576437ff01).  
  
> [!TIP]
> Если это возможно, запустите приложение непосредственно на устройстве. Производительность приложения, наблюдаемая на имитаторе или посредством подключения к удаленному рабочему столу, может отличаться от фактической производительности на устройстве. С другой стороны, сбор данных с помощью инструментов удаленной отладки Visual Studio не влияет на данные о производительности.  
  
 Ниже перечислены основные шаги.  
  
1. Откройте приложение XAML.  
  
2. Щелкните **Отладка/профилировщик производительности.** .. В окне diagsession должен отобразиться список средств профилирования.  
  
3. Выберите **Временная шкала приложения** и щелкните **Запустить** в нижней части окна.  
  
    > [!NOTE]
    > Может появиться окно «Контроль учетных записей» с запросом на разрешение запуска файла VsEtwCollector.exe. Щелкните **Да**.  
  
4. Запустите интересующий вас сценарий профилирования в приложении, чтобы собрать данные о производительности.  
  
5. Чтобы остановить профилирование, переключитесь обратно на окно DIAGSESSION и щелкните **Остановить** в верхней части окна.  
  
     Visual Studio анализирует собранные данные и отображает результаты.  
  
     ![Отчет профилировщика временной шкалы](../profiling/media/timeline-base.png "TIMELINE_Base")  
  
## <a name="BKMK_Analyze_Timeline_profiling_data"></a> Анализ данных профилирования средства "Временная шкала"  
 После сбора данных профилирования выполните следующие действия для запуска анализа.  
  
1. Просмотрите информацию на диаграммах **Использование потока пользовательского интерфейса** и **Пропускная способность визуализации (кадров/с)** , а затем с помощью панелей навигации временной шкалы выберите диапазон времени, который требуется проанализировать.  
  
2. Используя информацию на диаграммах **Использование потока пользовательского интерфейса** или **Пропускная способность визуализации (кадров/с)** , просмотрите сведения в представлении **Сведения о временной шкале** , чтобы определить возможные причины любой явной нехватки скорости реагирования.  
  
### <a name="BKMK_Report_scenarios_categories_and_events"></a> Сценарии отчетов, категории и события  
 Средство **Временная шкала приложения** отображает данные о времени для сценариев, категорий и событий, которые относятся к производительности XAML.  
  
### <a name="BKMK_Diagnostic_session_timeline"></a> Временная шкала диагностического сеанса  
 ![Временная шкала производительности и диагностики](../profiling/media/diaghub-timelinewithusermarks.png "DIAGHUB_TimelineWithUserMarks")  
  
 На линейке в верхней части страницы отображается временная шкала профилированной информации. Эта шкала применяется для диаграмм **Использование потока пользовательского интерфейса** и **Пропускная способность визуализации** . Область отчета можно сузить, перетащив панели навигации на временной шкале, чтобы выбрать ее сегмент.  
  
 На временной шкале также отображаются все вставленные пользовательские отметки и события жизненного цикла активации приложения.  
  
### <a name="BKMK_UI_thread_utilization_graph"></a> Диаграмма использования потока пользовательского интерфейса  
 ![Граф использования ЦП](../profiling/media/timeline-cpuutilization.png "TIMELINE_CpuUtilization")  
  
 Диаграмма **Использование потока пользовательского интерфейса (%)** представляет собой линейчатую диаграмму, которая отображает относительный объем потраченного времени в категории в ходе сбора данных.  
  
### <a name="BKMK_Visual_throughput_FPS_graph"></a> Диаграмма пропускной способности визуализации (кадров/с)  
 ![График пропускной способности визуализации](../profiling/media/timeline-visualthroughput.png "TIMELINE_VisualThroughput")  
  
 На диаграмме **Пропускная способность визуализации (кадров/с)** отображается число кадров в секунду в пользовательском интерфейсе и потоке компоновки приложения.  
  
### <a name="BKMK_Timeline_details_"></a> Сведения о временной шкале  
 Большая часть времени будет уходить на анализ отчета в подробном представлении. В нем показаны все сведения о загрузке ЦП в приложении по категориям: для подсистемы платформы пользовательского интерфейса или для компонента системы, который использует ресурсы ЦП.  
  
 Поддерживаются следующие события:  
  
|||  
|-|-|  
|**Синтаксический анализ**|Время, затраченное на синтаксический анализ файлов XAML и создание объектов.<br /><br /> Расширение узла **Синтаксический анализ** в представлении **Сведения о временной шкале** позволяет отображать цепочку зависимостей всех файлов XAML, которые были проанализированы в результате корневого события. Это позволит идентифицировать ненужный синтаксический анализ файлов и создание объектов в сценариях, чувствительных к производительности, и оптимизировать их.|  
|**Макет**|В больших приложениях на экране могут одновременно отображаться тысячи элементов. Это может привести к низкой частоте кадров пользовательского интерфейса и, соответственно, низкой скорости ответа приложения. Событие макета (Layout) точно определяет затраты на размещение каждого элемента (например, время затраченное на Arrange, Measure, ApplyTemplate, ArrangeOverride и ArrangeOverride) и выполняет сборку визуальных деревьев, которые участвуют в передаче макета. Вы можете использовать эту визуализацию, чтобы определить, какие логические деревья требуют очистки, а также для оценки других механизмов отсрочки для оптимизации передачи макета.|  
|**Прорисовка**|Время, затраченное на прорисовку элементов XAML на экране.|  
|**Операции ввода-вывода**|Время, затраченное на получение данных с локального диска или из сетевых ресурсов, доступ к которым выполняется через [Microsoft Windows Internet (WinINet) API](https://msdn.microsoft.com/library/windows/desktop/aa385331.aspx).|  
|**Код приложения**|Время, затраченное на выполнение (пользовательского) кода приложения, который не связан с синтаксическим анализом и созданием макета.|  
|**Другие данные XAML**|Время, потраченное на исполнение кода среды выполнения XAML.|  
  
> [!TIP]
> Выберите средство **Использование ЦП** вместе со средством **Временная шкала приложения** при запуске профилирования, чтобы просмотреть методы приложений, которые выполняются в потоке пользовательского интерфейса. Перемещение кода приложения с длительным временем выполнения в фоновый поток может повысить скорость реагирования ИП.  
  
#### <a name="BKMK_Customizing_Timeline_details_"></a> Настройка сведений о временной шкале  
 Для сортировки, фильтрации и указания заметок для записей представления **Сведения о временной шкале** используйте панель инструментов **Сведения о временной шкале** .  
  
|||  
|-|-|  
|**Сортировать по**|Сортировка по времени начала или длительности событий.|  
|![Группировать события по кадрам](../profiling/media/timeline-groupbyframes.png "TIMELINE_GroupByFrames")|Добавляет или удаляет категорию **Кадр** верхнего уровня, которая группирует события по кадрам.|  
|![Фильтровать список сведений о временной шкале](../profiling/media/timeline-filter.png "TIMELINE_Filter")|Фильтрует список по выбранным категориям и длительности событий.|  
|![Настройка сведений о временной шкале](../profiling/media/timeline-viewsettings.png "TIMELINE_ViewSettings")|Позволяет указать заметки для событий.|  
  
## <a name="see-also"></a>См. также  
 [Блог группы разработчиков WPF. Новое средство анализа производительности пользовательского интерфейса для приложений WPF.](https://devblogs.microsoft.com/wpf/new-ui-performance-analysis-tool-for-wpf-applications/)   
 [Рекомендации по повышению производительности приложений Магазина Windows на C++, C# и Visual Basic](https://msdn.microsoft.com/567bcefa-5da5-4e42-a4b8-1358c71adfa2)   
 [Улучшение производительности приложений WPF](https://msdn.microsoft.com/library/ac8c6aa3-3c68-4a24-9827-3b6c829c1ebf)
