---
title: DA0023. Высокое время ЦП сборки мусора | Документы Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: reference
f1_keywords:
- vs.performance.DA0023
- vs.performance.23
- vs.performance.rules.DA0023
ms.assetid: aba875fe-9cbc-418d-a2c4-6eb47519a5bb
caps.latest.revision: 15
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 667dc76019259faa12d41b7e4b7bf383bcda2258
ms.sourcegitcommit: b885f26e015d03eafe7c885040644a52bb071fae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/30/2020
ms.locfileid: "85542926"
---
# <a name="da0023-high-gc-cpu-time"></a>DA0023. Высокое время ЦП ГК
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

|Item|Значение|  
|-|-|  
|Идентификатор правила|DA0023|  
|Категория|Использование .NET Framework|  
|Способ профилирования|All|  
|Сообщение|% времени сборщика мусора довольно велик. Это сообщение говорит о том, что чрезмерные затраты времени на сборку мусора могут повлиять на скорость отклика приложения. Чтобы лучше понимать схему выделения памяти, используемую вашим приложением, вы можете собрать данные о распределении памяти .NET и сведения о времени жизни объекта.|  
|Тип правила|Informational|  
  
 При профилировании с помощью выборки, памяти .NET или методов разрешения конфликтов ресурсов необходимо собрать минимум 10 выборок, чтобы активировать это правило.  
  
## <a name="cause"></a>Причина  
 Данные о производительности системы, собранные во время профилирования, указывают, что время, затраченное на сборку мусора, весьма велико по сравнению с общим временем обработки приложения.  
  
## <a name="rule-description"></a>Описание правила  
 Среда CLR Microsoft .NET обеспечивает автоматический механизм управления памятью, использующий сборщик мусора для удаления из памяти объектов, которые приложение больше не использует. Сборщик мусора ориентирован на поколение, исходя из той предпосылки, что многие выделения памяти являются краткосрочными. Например, срок жизни локальных переменных должен быть небольшим. Вновь созданные объекты сначала находятся в поколении 0 (gen 0), а затем переходят в поколение 1, если они сохраняются после выполнения сборки мусора и, наконец, переходят в поколение 2, если приложение по-прежнему использует их.  
  
 Объекты поколения 0 собираются часто и обычно очень эффективно. Объекты поколения 1 собираются менее часто и менее эффективно. Наконец, сбор долгоживущих объектов в поколении 2 должен происходить еще реже. Сбор поколения 2, то есть полная сборка мусора, также является наиболее ресурсоемкой операцией.  
  
 Это правило срабатывает, если количество времени, затраченное на сборку мусора, значительно в сравнении с общим временем обработки приложения.  
  
> [!NOTE]
> Если доля времени, затраченного на сборку мусора, слишком велика по сравнению с общим временем обработки приложения, вместо этого правила создается предупреждение [DA0024: слишком высокое время ЦП сборки мусора](../profiling/da0024-excessive-gc-cpu-time.md).  
  
## <a name="how-to-investigate-a-warning"></a>Изучение причин предупреждения  
 Дважды щелкните сообщение в окне "Список ошибок", чтобы перейти к представлению [Метки](../profiling/marks-view.md) данных профилирования. Найдите столбец **Память CLR .NET\\% времени сборщика мусора**. Определите, есть ли какие-то конкретные этапы выполнения программы, когда затраты на сборку мусора в управляемой памяти выше, чем на других этапах. Сравните значение столбца "% времени сборщика мусора" со значением частоты сборки мусора в столбцах **Сборов "мусора" для поколения 0**, **Сборов "мусора" для поколения 1**, **Сборов "мусора" для поколения 2**.  
  
 Значение "% времени сборщика мусора" призвано указать количество времени, которое приложение тратит на выполнение сборки мусора пропорционально общему объему обработки. Имейте в виду, что существуют ситуации, когда в столбце "% времени сборщика мусора" может быть очень большое значение, но не из-за избыточной сборки мусора. Дополнительные сведения о способе вычисления процента времени, затрачиваемого на сборку мусора, см. в разделе [Отличия между данными по производительности в отчетах различных инструментов — 4](https://devblogs.microsoft.com/dotnet/difference-between-perf-data-reported-by-different-tools-4/) (на англ. языке) в блоге **Maoni's Weblog** на сайте MSDN. Если возникают сбои страниц или выполнение приложения прерывается другим заданием с более высоким приоритетом во время сборки мусора, счетчик "% времени сборщика мусора" будет отражать такие дополнительные задержки.
