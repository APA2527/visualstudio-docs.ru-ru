---
title: Шаг 4. Добавление к каждой метке обработчика событий щелчка мышью | Документы Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-general
ms.topic: conceptual
ms.assetid: 16bdbc7c-4129-411d-bace-f4a3e5375975
caps.latest.revision: 22
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 0b78a1757586dfaf6087711eaf1ed6001155a3b7
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2019
ms.locfileid: "72671806"
---
# <a name="step-4-add-a-click-event-handler-to-each-label"></a>Шаг 4. Добавление к каждой метке обработчика событий щелчка мышью
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Игра "Подбери пару!" работает следующим образом.

1. Когда игрок выбирает один из квадратов со скрытым значком, программа показывает значок игроку, изменяя цвет значка на черный.

2. После этого игрок выбирает другой скрытый значок.

3. Если значки совпадают, они остаются видимыми. Если нет, оба значка снова скрываются.

   Чтобы программа работала именно так, добавьте обработчик событий Click, изменяющий цвет выбираемой метки.

### <a name="to-add-a-click-event-handler-to-each-label"></a>Добавление обработчика событий Click к каждой метке

1. Откройте форму в конструкторе Windows Forms. В обозревателе решений выберите Form1.cs или Form1.vb. В строке меню выберите **Вид**, **Конструктор**.

2. Выберите первый элемент Label, чтобы выделить его. Затем, удерживая нажатой клавишу CTRL, выберите каждую из оставшихся меток, чтобы выбрать и их. Убедитесь, что выбраны все метки.

3. Нажмите кнопку **События** на панели инструментов в окне **Свойства**, чтобы открыть страницу **События** в окне **Свойства**. Прокрутите вниз до события **Click** и введите **label_Click** в поле, как показано на следующем рисунке.

     ![Окно свойств отображается событие щелчка](../ide/media/express-labelclick.png "Express_labelClick") окно свойств отображается событие щелчка

4. Нажмите клавишу ВВОД. Интегрированная среда разработки добавит обработчик событий Click, который называется `label_Click()`, в код и подключит его к каждой метке в форме.

5. Добавьте остальную часть кода следующим образом:

     [!code-csharp[VbExpressTutorial4Step2_3_4#4](../snippets/csharp/VS_Snippets_VBCSharp/vbexpresstutorial4step2_3_4/cs/form1.cs#4)]
     [!code-vb[VbExpressTutorial4Step2_3_4#4](../snippets/visualbasic/VS_Snippets_VBCSharp/vbexpresstutorial4step2_3_4/vb/form1.vb#4)]

    > [!NOTE]
    > При копировании и вставке блока кода `label_Click()` вместо его ввода вручную проследите за тем, что заменить существующий код `label_Click()`. В противном случае в коде появится дублирующий блок.

    > [!NOTE]
    > Возможно, вы узнали `object sender` в верхней части обработчика событий; он совпадает с кодом в руководстве [Учебное руководство 2. Создание ограниченной по времени математической головоломки](../ide/tutorial-2-create-a-timed-math-quiz.md). Поскольку вы подключили различные события Click элемента управления Label к одному методу обработчика событий, один и тот же метод вызывается независимо от того, какую метку щелкнет пользователь. Методу обработчика событий необходимо знать, какую метку выбрал игрок, поэтому для определения элемента управления Label используется имя **sender**. Первая строка метода сообщает программе, что это не просто универсальный объект, а элемент управления Label, для обращения к свойствам и методам которого используется имя **clickedLabel**.

     Этот метод сначала проверяет, было ли успешно выполнено преобразование (приведение) **clickedLabel** из объекта в элемент управления Label. Если операция завершилась неудачно, его значение будет `null` (C#) или `Nothing` (Visual Basic) и оставшаяся часть кода метода не будет выполнена. Затем метод с помощью свойства **ForeColor** элемента управления Label проверяет цвет текста выбранной метки. Если цвет текста метки черный, это это означает, что значок уже был выбран, а метод выполнен. (Это то, что делает инструкция `return`: она сообщает программе, что выполнение метода будет прервано.) В противном случае значок не выбран, поэтому программа изменяет цвет текста метки на черный.

6. В строке меню выберите **Файл**, **Сохранить все**, чтобы сохранить ход выполнения, а затем в строке меню выберите **Отладка**, **Начать отладку**, чтобы запустить программу. Вы должны увидеть пустую форму с синим фоном. Выберите любую ячейку в форме, и один из значков станет видимым. Продолжайте выбирать различные ячейки формы. Значки будут отображаться при их выборе.

### <a name="to-continue-or-review"></a>Продолжить или повторить пройденный материал

- Следующий шаг руководства см. в разделе [Шаг 5. Добавление ссылок на метки](../ide/step-5-add-label-references.md).

- Предыдущий шаг руководства см. в разделе [Шаг 3. Назначение каждой метке случайного значка](../ide/step-3-assign-a-random-icon-to-each-label.md).
