---
title: Фрагменты кода Visual C++ | Документы Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-general
ms.topic: conceptual
ms.assetid: 74e26fd4-e5ca-4611-a816-0a521b4947a0
caps.latest.revision: 6
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: 884ec6cc25fd2ef415dc71055361344d79021d5e
ms.sourcegitcommit: 08fc78516f1107b83f46e2401888df4868bb1e40
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2019
ms.locfileid: "65696380"
---
# <a name="visual-c-code-snippets"></a>Фрагменты кода Visual C++
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

С помощью фрагментов кода в Visual Studio можно добавлять часто используемый код в файлы кода C++. В целом, фрагменты кода используются так же, как в C#, но набор фрагментов кода по умолчанию отличается.  
  
 Вы можете добавить фрагмент кода в определенное место в коде (то есть вставить его) или заключить выделенный код во фрагмент кода.  
  
## <a name="inserting-a-code-snippet"></a>Вставка фрагмента кода  
 Чтобы вставить фрагмент кода, откройте файл кода C++ (CPP или H), щелкните в любом месте внутри файла и выполните одно из указанных ниже действий.  
  
- Щелкните правой кнопкой мыши, чтобы открыть контекстное меню, и выберите пункт **Вставить фрагмент**.  
  
- В меню **Правка > IntelliSense** выберите пункт **Вставить фрагмент**.  
  
- Нажмите клавиши **CTRL + K + X**  
  
  Должен появиться список вариантов, начинающийся с **#if**. Если выбрать **#if**, в файл должен добавиться следующий код:  
  
```cpp  
#if 0  
  
#endif // 0  
```  
  
 После этого 0 можно заменить на нужное условие.  
  
## <a name="using-a-code-snippet-to-surround-selected-code"></a>Добавление фрагмента кода вокруг выделенного кода  
 Чтобы заключить выделенный код во фрагмент кода, выделите одну или несколько строк и выполните одно из указанных ниже действий.  
  
1. Щелкните правой кнопкой мыши, чтобы открыть контекстное меню, и выберите пункт **Разместить во фрагменте**.  
  
2. В меню **Правка > IntelliSense** выберите пункт **Разместить во фрагменте**.  
  
3. Нажмите клавиши **CTRL + K + S**  
  
   Выберите **#if**. Результат должен быть примерно таким:  
  
```cpp  
#if 0  
#include "pch.h"  // or whatever line you had selected  
#endif // 0  
```  
  
 После этого 0 можно заменить на нужное условие.  
  
## <a name="where-can-i-find-a-complete-list-of-the-c-code-snippets"></a>Где можно найти полный список фрагментов кода C++?  
 Чтобы просмотреть полный список фрагментов кода C++, откройте **диспетчер фрагментов кода** (в меню **Сервис**) и выберите для параметра **Язык** значение **Visual C++**. В окне ниже разверните раздел **Visual C++**. Вы увидите список имен всех фрагментов кода C++ в алфавитном порядке.  
  
 Имена большинства фрагментов кода вполне очевидны, но некоторые могут вызвать путаницу.  
  
## <a name="class-vs-classi"></a>Class и classi  
 Фрагмент кода **class** содержит определение класса MyClass с соответствующими конструктором и деструктором по умолчанию, определения которых находятся вне класса:  
  
```cpp  
class MyClass  
{  
public:  
MyClass();  
~MyClass();  
  
private:  
  
};  
  
MyClass::MyClass()  
{  
}  
  
MyClass::~MyClass()  
{  
}  
```  
  
 Фрагмент кода classi также содержит определение класса MyClass, но его конструктор и деструктор по умолчанию определены внутри определения класса:  
  
```cpp  
class MyClass  
{  
public:  
MyClass()  
{  
}  
  
~MyClass()  
{  
}  
  
private:  
  
};  
```  
  
## <a name="for-vs-foreach-vs-forr-vs-rfor"></a>For, foreach, forr и rfor  
 Есть четыре различных фрагмента, предоставляющих циклы for.  
  
 Фрагмент **for** предоставляет цикл `for`, в качестве условия которого выступает длина объекта (в `size_t`):  
  
```cpp  
for (size_t i = 0; i < length; i++)  
{  
  
}  
```  
  
 Фрагмент **foreach** предоставляет цикл `for each` для перебора элементов коллекции:  
  
```cpp  
for each (object var in collection_to_loop)  
{  
  
}  
```  
  
 Фрагмент **forr** предоставляет обратный цикл `for`, в качестве условия которого выступает длина объекта (в виде целого числа):  
  
```cpp  
for (int i = length - 1; i >= 0; i--)  
{  
  
}  
```  
  
 Фрагмент **rfor** предоставляет цикл for [на основе диапазона](https://msdn.microsoft.com/library/5750ba1d-ba48-4236-a923-e32de8345c2d) (ссылку):  
  
```cpp  
for (auto& i : v)  
{  
  
}  
```  
  
## <a name="the-destructor-snippet-"></a>Фрагмент деструктора (~)  
 Фрагмент деструктора (**~**) ведет себя по-разному в разных контекстах. Если вставить его в класс, он предоставит деструктор для этого класса. Допустим, имеется такой код:  
  
```cpp  
class SomeClass {  
  
};  
```  
  
 Если вставить фрагмент деструктора, добавится деструктор для класса SomeClass:  
  
```cpp  
class SomeClass {  
    ~SomeClass()  
    {  
  
    }  
};  
```  
  
 При попытке вставить фрагмент деструктора вне класса будет добавлен деструктор с именем-заполнителем:  
  
```cpp  
~TypeNamePlaceholder()  
{  
  
```
