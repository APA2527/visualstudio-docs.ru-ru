---
title: Шаг 2. Добавление случайного объекта и списка значков | Документы Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-general
ms.topic: conceptual
ms.assetid: 95faea28-eddc-4cfa-95fb-3b34b5a976d7
caps.latest.revision: 24
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 7370bf956fd79f5568737af5d9a96b9c64a5316b
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2019
ms.locfileid: "72667313"
---
# <a name="step-2-add-a-random-object-and-a-list-of-icons"></a>Шаг 2. Добавление случайного объекта и списка значков
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

На этом шаге будет создан набор парных символов для игры. Каждый символ добавляется в две случайные ячейки в TableLayoutPanel в форме. Для этого используются два оператора `new`, создающие два объекта. Первый является объектом `Random`. Такой же объект использовался в игре "Математическая головоломка". Он используется в этом коде для случайного выбора ячейки в TableLayoutPanel. Второй объект, который может показаться вам новым, это объект `List`, используемый для хранения случайно выбранных символов.

### <a name="to-add-a-random-object-and-a-list-of-icons"></a>Добавление случайного объекта и списка значков

1. В **обозревателе решений** выберите **Form1.cs**, если используется Visual C#, или **Form1.vb**, если используется Visual Basic, а затем в строке меню выберите **Вид**, **Код**. В качестве альтернативы можно нажать клавишу **F7** или дважды щелкнуть **Form1** в **обозревателе решений**.

     Будет показан модуль кода формы Form1.

2. В имеющийся код добавьте следующий фрагмент.

     [!code-csharp[VbExpressTutorial4Step2_3_4#1](../snippets/csharp/VS_Snippets_VBCSharp/vbexpresstutorial4step2_3_4/cs/form1.cs#1)]
     [!code-vb[VbExpressTutorial4Step2_3_4#1](../snippets/visualbasic/VS_Snippets_VBCSharp/vbexpresstutorial4step2_3_4/vb/form1.vb#1)]

     При написании кода на языке Visual C# убедитесь, что вы помещаете код после открывающей фигурной скобки и сразу после объявления класса (`public partial class Form1 : Form`). При написании кода на языке Visual Basic поместите код сразу после объявления класса (`Public Class Form1`).

3. При добавлении объекта `List` обратите внимание на открывшееся окно **IntelliSense**. Ниже приведен пример на языке Visual C#, но аналогичный текст отобразится и при добавлении списка в Visual Basic.

     ![Properties window showing Click event](../ide/media/express-listintellisense.png "Express_ListIntellisense") Окно IntelliSense

    > [!NOTE]
    > Окно Intellisense отображается только при вводе кода вручную. При копировании и вставке кода оно не отображается.

     Код проще понять, если рассматривать его (и примечания) небольшими частями. Объекты `List` можно использовать для отслеживания элементов множества различных типов. Список может содержать числа, значения true или false, текст и другие объекты. Также объект `List` может содержать другие объекты `List`. Список состоит из *элементов*, и каждый список содержит только один тип элементов. Поэтому список чисел может содержать только числа. В него нельзя добавить текст. Аналогично нельзя добавлять числа в список значений true или false.

     При создании объекта `List` с помощью оператора `new` необходимо указать ему, данные какого типа будут храниться в этом объекте. Вот почему подсказка в верхней части окна **IntelliSense** указывает на тип элементов списка. Вот что значит код `List<string>` (в Visual C#) и `List(Of String)` (в Visual Basic) — это объект `List`, содержащий элементы типа `string`. Строка используется программой для хранения текста, о чем и сообщается в подсказке справа от окна **IntelliSense**.

4. Рассмотрим, почему в Visual Basic сначала необходимо создать временный массив, а в Visual C# можно создавать список с помощью одного оператора. Это происходит потому, что язык Visual C# имеет *инициализаторы коллекций*, которые подготавливают список к приему значений. В Visual Basic можно использовать инициализатор коллекции. Однако для обеспечения совместимости с предыдущей версией Visual Basic рекомендуется использовать предыдущий код.

     При использовании инициализатора коллекции с оператором `new` после создания нового объекта `List` программа заполняет его данными, которые указаны внутри фигурных скобок. В этом случае будет инициализирован список строк с именем **icons**, содержащий шестнадцать строк. Каждая из этих строк представляет одну букву, которая соответствует значку, отображаемому в метке. Таким образом, игра будет иметь пару восклицательных знаков, пару прописных букв N, пару запятых и т. д. (Если для этих символов задан шрифт Webdings, они будут отображаться как символы, такие как шина, велосипед, пасьянс «паук» и т. д.). Объект `List` будет содержать шестнадцать строк, по одному для каждой ячейки на панели TableLayoutPanel.

    > [!NOTE]
    > В Visual Basic получится такой же результат, но сначала строки помещаются во временный массив, который затем преобразуется в объект `List`. Массив похож на список, за исключением того, например, что массивы создаются фиксированного размера. Списки можно уменьшать и увеличивать по мере необходимости, что важно для этой программы.

### <a name="to-continue-or-review"></a>Продолжить или повторить пройденный материал

- Следующий шаг руководства см. в разделе [Шаг 3. Назначение каждой метке случайного значка](../ide/step-3-assign-a-random-icon-to-each-label.md).

- Предыдущий шаг руководства см. в разделе [Шаг 1. Создание проекта и добавление таблицы в форму](../ide/step-1-create-a-project-and-add-a-table-to-your-form.md).
