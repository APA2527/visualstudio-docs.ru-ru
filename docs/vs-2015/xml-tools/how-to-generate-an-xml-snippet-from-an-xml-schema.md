---
title: Как создать XML-фрагмент из схемы XML | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-xml-tools
ms.topic: conceptual
ms.assetid: 2c128d2a-aaa6-4814-aa95-e07056afe338
caps.latest.revision: 7
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: e3d90185180cac5f526594650bde0a8f380c7668
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2019
ms.locfileid: "72666528"
---
# <a name="how-to-generate-an-xml-snippet-from-an-xml-schema"></a>Как создать XML-фрагмент из XML-схемы
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Редактор XML может создавать XML-фрагменты из схемы на языке XSD. Например, во время работы с XML-файлом, если курсор находится сразу после имени элемента, можно нажать клавишу TAB, чтобы заполнить элемент XML-данными, созданными на основе информации схемы для этого элемента.

 Эта возможность доступна только для элементов. При этом действуют следующие правила.

- Элемент должен иметь схему связанного с ним типа, то есть элемент должен быть правильным согласно какой-либо связанной схеме. Тип схемы не может быть абстрактным и должен содержать необходимые атрибуты или необходимые дочерние элементы.

- Текущий элемент в редакторе должен быть пустым, не имеющим атрибутов. Например, все приведенные ниже элементы являются правильными.

  - `<Account`

  - `<Account>`

  - `<Account></Account>`

- Курсор должен находиться непосредственно справа от имени элемента.

  Созданный фрагмент содержит все необходимые атрибуты и элементы. Если значение `minOccurs` больше единицы, во фрагмент включается необходимое минимальное количество экземпляров этого элемента. Максимум составляет 100 экземпляров. Любые фиксированные значения, обнаруженные в схеме, становятся фиксированными значениями во фрагменте. Элементы `xsd:any` и `xsd:anyAttribute` не учитываются и не увеличивают конструкцию фрагмента.

  Значения по умолчанию создаются и помечаются как редактируемые значения. Если в схеме указано значение по умолчанию, используется это значение. Но если в схеме значением по умолчанию является пустая строка, редактор создает значения по умолчанию следующим образом.

- Если тип схемы содержит аспекты перечисления, заданные прямо или косвенно с помощью любого из членов типа объединения, то по умолчанию используется первое перечисляемое значение, найденное в модели объектов схемы.

- Если тип схемы является атомарным, редактор получает атомарный тип и вставляет имя атомарного типа. Для производного простого типа используется базовый простой тип. Для типа списка в качестве типа `itemType` используется атомарный тип. Атомарным типом для объединения является атомарный тип первого типа `memberType`.

## <a name="example"></a>Пример
 Шаги в этом разделе показывают, как использовать в редакторе XML возможность создания XML-фрагментов из схемы.

> [!NOTE]
> Прежде чем приступать к этим процедурам, сохраните файл схемы на локальном компьютере.

#### <a name="to-create-a-new-xml-file-and-associate-it-with-an-xml-schema"></a>Создание нового XML-файла и связывание его со схемой XML

1. В меню **файл** наведите указатель мыши на пункт **создать**и выберите **файл**.

2. Выберите **XML-файл** в области **шаблоны** и нажмите кнопку **Открыть**.

     Новый файл открывается в редакторе. Этот файл содержит XML-декларацию по умолчанию: `<?xml version="1.0" encoding="utf-8">`.

3. В окне Свойства документа нажмите кнопку обзора ( **...** ) в поле **схемы** .

     Откроется диалоговое окно **схемы XSD** .

4. Нажмите кнопку **Добавить**.

     Откроется диалоговое окно **Открытие схемы XSD** .

5. Выберите файл схемы и нажмите кнопку **Открыть**.

6. Нажмите кнопку **ОК**.

     Теперь с XML-документом связана XML-схема.

#### <a name="to-generate-an-xml-snippet"></a>Создание XML-фрагмента

1. Наберите `<` на панели редактора.

2. Список членов отображает следующие возможные элементы:

     **!--** добавить комментарий.

     **! DOCTYPE** для добавления типа документа.

     **?** для добавления инструкции по обработке.

     Чтобы добавить корневой элемент, **обратитесь** к.

3. Выберите **контакт** в списке участников и нажмите клавишу ВВОД.

     Редактор добавляет открывающий тег, `<Contact`, и помещает курсор после имени элемента.

4. Нажмите клавишу TAB, чтобы создать XML-данные для элемента `Contact` на основании информации схемы.

### <a name="input"></a>Ввод
 В этом пошаговом руководстве используется следующий файл схемы.

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:simpleType name="phoneType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Voice"/>
      <xs:enumeration value="Fax"/>
      <xs:enumeration value="Pager"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="Contact">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Name">
          <xs:simpleType>
            <xs:restriction base="xs:string"></xs:restriction>
          </xs:simpleType>
        </xs:element>
        <xs:element name="Title"
                    type="xs:string" />
        <xs:element name="Phone"
                    minOccurs="1"
                    maxOccurs="unbounded">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Number"
                          minOccurs="1">
                <xs:simpleType>
                  <xs:restriction base="xs:string"></xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Type"
                          default="Voice"
                          minOccurs="1"
                          type="phoneType"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
```

### <a name="output"></a>Вывод
 Далее приведены XML-данные, созданные на основе информации схемы, которая связана с элементом `Contact`. Элементы, помеченные как `bold`, обозначают изменяемые поля в XML-фрагменте.

```
<Contact>
  <Name>name</Name>
  <Title>title</Title>
  <Phone>
    <Number>number</Number>
    <Type>Voice</Type>
  </Phone>
</Contact>
```

## <a name="see-also"></a>См. также раздел
 [XML-фрагменты](../xml-tools/xml-snippets.md) [: как использовать фрагменты XML](../xml-tools/how-to-use-xml-snippets.md)
