---
title: Справочник по командной строке MSBuild | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: msbuild
ms.topic: reference
dev_langs:
- VB
- CSharp
- C++
- jsharp
helpviewer_keywords:
- MSBuild, msbuild.exe
- MSBuild, command line reference
- msbuild.exe
ms.assetid: edaa65ec-ab8a-42a1-84cb-d76d5b2f4584
caps.latest.revision: 61
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 8d40bfefb1f89496b538612dfa1819cc6d65c76c
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "68181052"
---
# <a name="msbuild-command-line-reference"></a>Справочник по командной строке MSBuild
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

При использовании MSBuild.exe для создания файла проекта или решения можно включить несколько переключателей для указания различных аспектов процесса.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
MSBuild.exe [Switches] [ProjectFile]  
```  
  
## <a name="arguments"></a>Аргументы  
  
|Аргумент|Описание|  
|--------------|-----------------|  
|`ProjectFile`|Создает целевые объекты в указанном файле проекта. Если не указать файл проекта, MSBuild выполнит поиск расширения имени файла, который заканчивается на "proj", и использует этот файл, в текущем рабочем каталоге. Можно также указать файл решения Visual Studio для этого аргумента.|  
  
## <a name="switches"></a>Переключатели  
  
|Параметр|Краткая форма|Описание|  
|------------|----------------|-----------------|  
|/help|/? или /h|Отобразить сведения об использовании. Ниже представлен пример команды.<br /><br /> `msbuild.exe /?`|  
|/detailedsummary|/ds|Показывать подробные сведения о созданных конфигурациях и их запланированное использование в узлах в конце журнала сборки.|  
|/ignoreprojectextensions: `extensions`|/ignore: `extensions`|Игнорировать указанные расширения при определении создаваемого файла проекта. Используйте точку с запятой или запятую для разделения нескольких расширений, как показано в следующем примере:<br /><br /> `/ignoreprojectextensions:.vcproj,.sln`|  
|/maxcpucount[:`number`]|/m[:`number`]|Указывает максимальное количество параллельных процессов для использования при создании. Если переключатель не указан, значение по умолчанию равно 1. При включении этого переключателя без указания значения MSBuild будет использовать указанное количество процессоров в компьютере. Дополнительные сведения см. [в разделе параллельное создание нескольких проектов](../msbuild/building-multiple-projects-in-parallel-with-msbuild.md).<br /><br /> В следующем примере MSBuild использует для создания три процесса MSBuild, что позволяет создать три проекта одновременно:<br /><br /> `msbuild myproject.proj /maxcpucount:3`|  
|/noautoresponse|/noautorsp|Не включать какие-либо файлы MSBuild.rsp автоматически.|  
|/nodeReuse:`value`|/nr:`value`|Включить или отключить повторное использование узлов MSBuild. Можно указать следующие значения:<br /><br /> -   **True**. Узлы сохраняются после создания, чтобы последующие сборки могли использовать их (по умолчанию).<br />-   **False**. Узлы не сохраняются после создания.<br /><br /> Узел соответствует выполняющемуся проекту. При включении параметра **/maxcpucount** несколько узлов могут выполняться одновременно.|  
|/nologo||Не отображать загрузочный баннер или сообщение об авторских правах.|  
|/preprocess[:`filepath`]|/pp[:`filepath`]|Создать один сводный файл проекта, встроив все файлы, которые будут импортированы во время создания, с отмеченными границами. Этот переключатель можно использовать для более простого определения импортируемых файлов, расположения, из которого выполняется импорт, и файлов, участвующих в сборке. При использовании этого переключателя проект не создается.<br /><br /> Если вы укажете `filepath`, сводный файл проекта выведет данные в файл. В противном случае выходные данные появятся в окне консоли.<br /><br /> Сведения об использовании `Import` элемента для вставки файла проекта в другой файл проекта см. в разделе [элемент Import (MSBuild)](../msbuild/import-element-msbuild.md) и [Пошаговое руководство. Использование одного и того же целевого объекта в нескольких файлах проекта](../msbuild/how-to-use-the-same-target-in-multiple-project-files.md).|  
|/property:`name`=`value`|/p:`name`=`value`|Задать или переопределить указанные свойства уровня проекта, где `name` является именем свойства, а `value` — значением свойства. Укажите каждое свойство отдельно или используйте точку с запятой или запятую для разделения нескольких свойств, как показано в следующем примере:<br /><br /> `/property:WarningLevel=2;OutDir=bin\Debug`|  
|/target:`targets`|/t:`targets`|Создать указанные целевые объекты в проекте. Укажите каждый целевой объект отдельно или используйте точку с запятой или запятую для разделения нескольких целевых объектов, как показано в следующем примере.<br /><br /> `/target:Resources;Compile`<br /><br /> Если с помощью этого переключателя указать какие-либо целевые объекты, они запустятся вместо целевых объектов в атрибуте `DefaultTargets` в файле проекта. Дополнительные сведения см. в статьях [целевой порядок сборки](../msbuild/target-build-order.md) и [инструкции: Указание целевого объекта, который должен быть построен первыми](../msbuild/how-to-specify-which-target-to-build-first.md).<br /><br /> Целевой объект — это группа задач. Дополнительные сведения см. в разделе [Целевые объекты](../msbuild/msbuild-targets.md).|  
|/toolsversion:`version`|/tv:`version`|Указывает версию набора инструментов, который используется для создания проекта, как показано в следующем примере:`/toolsversion:3.5`.<br /><br /> С помощью этого параметра можно создать проект и указать версию, отличную от версии, указанной в [элементе Project (MSBuild)](../msbuild/project-element-msbuild.md). Дополнительные сведения см. в разделе [Переопределение параметров ToolsVersion](../msbuild/overriding-toolsversion-settings.md).<br /><br /> Для MSBuild 4.5 можно указать следующие значения `version`: 2.0, 3.5 и 4.0. При выборе версии 4.0 свойство сборки `VisualStudioVersion` указывает, какой вспомогательный набор инструментов следует использовать. Дополнительные сведения см. в разделе о вспомогательных наборах инструментов статьи [Toolset (ToolsVersion)](../msbuild/msbuild-toolset-toolsversion.md) (Набор инструментов ToolsVersion).<br /><br /> Набор инструментов состоит из задач, целей и средств, используемых для создания приложения. Средства включают компиляторы csc.exe и vbc.exe. Дополнительные сведения о наборах инструментов см. в разделе Наборы [инструментов (ToolsVersion)](../msbuild/msbuild-toolset-toolsversion.md), [Стандартные и настраиваемые конфигурации набора инструментов](../msbuild/standard-and-custom-toolset-configurations.md)и настройка для [различных версий](../msbuild/msbuild-multitargeting-overview.md). **Примечание.**  Версия набора инструментов не совпадает с версией целевой платформы, которая является версией .NET Framework, на которой построен проект для выполнения. Дополнительные сведения см. в разделе [Целевая платформа и Целевая платформа](../msbuild/msbuild-target-framework-and-target-platform.md).|  
|/validate:[`schema`]|/val[`schema`]|Проверить файл проекта и, если проверка прошла успешно, создать проект.<br /><br /> Если не указать `schema`, проект проверяется по схеме, заданной по умолчанию.<br /><br /> При указании `schema` проект проверяется по указанной вами схеме.<br /><br /> Примером является следующий параметр: `/validate:MyExtendedBuildSchema.xsd`.|  
|/verbosity:`level`|/v:`level`|Указывает объем сведений, отображаемый в журнале сборки. Каждое средство ведения журнала отображает события, в соответствии с уровнем детализации, заданным для этого средства ведения журнала.<br /><br /> Можно указать следующие уровни детализации: `q[uiet]`, `m[inimal]`, `n[ormal]`, `d[etailed]` и `diag[nostic]`.<br /><br /> Примером является следующий параметр: `/verbosity:quiet`.|  
|/version|/ver|Отобразить только сведения о версии. Проект не создается.|  
|@`file`||Вставить параметры командной строки из текстового файла. Если имеется несколько файлов, можно указать их отдельно. Дополнительные сведения см. в разделе [файлы ответов](../msbuild/msbuild-response-files.md).|  
  
### <a name="switches-for-loggers"></a>Ключи для средств ведения журнала  
  
|Параметр|Краткая форма|Описание|  
|------------|----------------|-----------------|  
|/consoleloggerparameters:<br /><br /> `parameters`|/clp:`parameters`|Передать указанные параметры в средство ведения журнала консоли, в окне консоли которого отображаются сведения о сборке. Можно задать следующие параметры:<br /><br /> -   **PerformanceSummary**. Отобразить время, затраченное на выполнение задач, целей и проектов.<br />-   **Summary**. Показать сводку ошибок и предупреждений в конце.<br />-   **NoSummary**. Не показывать сводку ошибок и предупреждений в конце.<br />-   **ErrorsOnly**. Показать только ошибки.<br />-   **WarningsOnly**. Показать только предупреждения.<br />-   **NoItemAndPropertyList**. Не показывать список элементов и свойств, появляющийся в начале каждой сборки проекта, если значение уровня детализации — `diagnostic`.<br />-   **ShowCommandLine**. Показать сообщения `TaskCommandLineEvent`.<br />-   **ShowTimestamp**. Показывать метку времени в качестве префикса для любого сообщения.<br />-   **ShowEventId**. Показать идентификатор события для каждого запущенного события, завершенного события и сообщения.<br />-   **ForceNoAlign**. Не выравнивать текст по размеру буфера консоли.<br />-   **DisableConsoleColor**. Использовать цвета консоли по умолчанию для всех сообщений журнала.<br />-   **DisableMPLogging**. Отключить многопроцессорное ведение журнала выходных данных в режиме, отличном от многопроцессорного.<br />-   **EnableMPLogging**. Включить многопроцессорное ведение журнала даже при работе в режиме, отличном от многопроцессорного. Такое ведение журнала включено по умолчанию.<br />-   **Verbosity**. Переопределите параметр **/verbosity** для этого средства ведения журнала.<br /><br /> Используйте точку с запятой или запятую для разделения нескольких параметров, как показано в следующем примере.<br /><br /> `/consoleloggerparameters:PerformanceSummary;NoSummary /verbosity:minimal`|  
|/distributedFileLogger|/dfl|Записывать выходные данные сборки каждого узла MSBuild в собственный файл. Первоначальным расположением этих файлов является текущий каталог. По умолчанию файлы имеют имя "MSBuild*NodeId*. log". С помощью параметра **/fileLoggerParameters** можно указать расположение файлов и другие параметры для FileLogger.<br /><br /> Если вы назначите имя файла журнала с помощью параметра **/fileLoggerParameters** , то распределенное средство ведения журнала будет использовать это имя как шаблон и добавит идентификатор узла к этому имени при создании файла журнала для каждого узла.|  
|/distributedlogger:<br /><br /> `central logger`*<br /><br /> `forwarding logger`|/dl:`central logger`*`forwarding logger`|Вести журнал событий из MSBuild, присоединяя разные экземпляры журнала к каждому узлу. Чтобы указать несколько средств ведения журнала, укажите отдельно каждое из них.<br /><br /> Синтаксис средства ведения журнала позволяет указать средство ведения журнала. Сведения о синтаксисе средства ведения журнала см. в описании параметра **/Logger** ниже.<br /><br /> В следующих примерах демонстрируется использование этого переключателя.<br /><br /> `/dl:XMLLogger,MyLogger,Version=1.0.2,Culture=neutral`<br /><br /> `/dl:MyLogger,C:\My.dll*ForwardingLogger,C:\Logger.dll`|  
|/fileLogger<br /><br /> *[число]*|/fl[`number`]|Записать выходные данные сборки в один файл в текущем каталоге. Если не указать `number`, выходной файл будет назван msbuild.log. Если указать `number`, именем выходного файла будет msbuild`n`.log, где n — `number`. Значение `Number` может быть цифрой от 1 до 9.<br /><br /> С помощью параметра **/fileLoggerParameters** можно указать расположение файла и другие параметры для FileLogger.|  
|/fileloggerparameters:[number]<br /><br /> `parameters`|/flp:[ `number`] `parameters`|Указывает любые дополнительные параметры для средства ведения журнала файла и распределенного средства ведения журнала файла. Наличие этого параметра означает, что присутствует соответствующий параметр/**filelogger [** `number` **]** . Значение `Number` может быть цифрой от 1 до 9.<br /><br /> Можно использовать все параметры, перечисленные для **/консолелогжерпараметерс**. Также можно использовать один или несколько следующих параметров:<br /><br /> -   **LogFile**. Путь к файлу журнала, в который записывается журнал сборки. Распределенное средство ведение журнала файла добавляет этот путь к именам файлов журнала.<br />-   **Append**. Определяет, добавляется ли журнал сборки в файл журнала или перезаписывает его. Если задать переключатель, журнал сборки добавляется в файл журнала. Если переключатель отсутствует, содержимое существующего файла журнала перезаписывается.<br />     Если включить переключатель добавления независимо от того, установлено значение true или false, журнал будет добавлен. Если переключатель добавления не указан, журнал будет перезаписан.<br />     В этом случае файл перезаписывается: `msbuild myfile.proj /l:FileLogger,Microsoft.Build.Engine;logfile=MyLog.log`.<br />     В этом случае файл добавляется: `msbuild myfile.proj /l:FileLogger,Microsoft.Build.Engine;logfile=MyLog.log;append=true`.<br />     В этом случае файл добавляется: `msbuild myfile.proj /l:FileLogger,Microsoft.Build.Engine;logfile=MyLog.log;append=false`.<br />-   **Encoding**. Указывает кодировку для файла (например, UTF-8, Юникод или ASCII).<br /><br /> В следующем примере создаются отдельные файлы журнала для предупреждений и ошибок.<br /><br /> `/flp1:logfile=errors.txt;errorsonly /flp2:logfile=warnings.txt;warningsonly`<br /><br /> Ниже приведены примеры других возможностей.<br /><br /> `/fileLoggerParameters:LogFile=MyLog.log;Append; Verbosity=diagnostic;Encoding=UTF-8`<br /><br /> `/flp:Summary;Verbosity=minimal;LogFile=msbuild.sum`<br /><br /> `/flp1:warningsonly;logfile=msbuild.wrn`<br /><br /> `/flp2:errorsonly;logfile=msbuild.err`|  
|/logger:<br /><br /> `logger`|/l:`logger`|Задает средство ведения журнала для записи событий MSBuild. Чтобы указать несколько средств ведения журнала, укажите отдельно каждое из них.<br /><br /> Используйте следующий синтаксис для `logger`: `[``LoggerClass``,]``LoggerAssembly``[;``LoggerParameters``]`.<br /><br /> Используйте следующий синтаксис для `LoggerClass`: `[``PartialOrFullNamespace``.]``LoggerClassName`.<br /><br /> Если сборка содержит ровно одно средство ведения журнала, его класс указывать не нужно.<br /><br /> Используйте следующий синтаксис для `LoggerAssembly`: `{``AssemblyName``[,``StrongName``] &#124;` `AssemblyFile``}`.<br /><br /> Параметры средства ведения журнала являются необязательными и передаются в него точно по мере их ввода.<br /><br /> В следующих примерах используется параметр **/Logger** .<br /><br /> `/logger:XMLLogger,MyLogger,Version=1.0.2,Culture=neutral`<br /><br /> `/logger:XMLLogger,C:\Loggers\MyLogger.dll;OutputAsHTML`|  
|/noconsolelogger|/noconlog|Отключить средство ведения журнала консоли по умолчанию и не записывать события на консоль.|  
  
## <a name="example"></a>Пример  
 В следующем примере создается целевой объект `rebuild` проекта `MyProject.proj`.  
  
```  
MSBuild.exe MyProject.proj /t:rebuild  
```  
  
## <a name="example"></a>Пример  
 Файл MSBuild.exe можно использовать для выполнения более сложных сборок. Например, можно использовать его для создания конкретных целевых объектов определенных проектов в решении. В следующем примере повторно создается проект `NotInSolutionFolder` и удаляется проект `InSolutionFolder`, который находится в папке решения `NewFolder`.  
  
```  
msbuild SlnFolders.sln /t:NotInSolutionfolder:Rebuild;NewFolder\InSolutionFolder:Clean  
```  
  
## <a name="see-also"></a>См. также:  
 [Справочник по MSBuild](../msbuild/msbuild-reference.md)   
 [Общие свойства проекта MSBuild](../msbuild/common-msbuild-project-properties.md)
