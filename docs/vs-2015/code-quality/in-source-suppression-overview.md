---
title: Общие сведения о подавлении исходного кода | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: conceptual
helpviewer_keywords:
- source suppression, code analysis
- code analysis, source suppression
ms.assetid: f1a2dc6a-a9eb-408c-9078-2571e57d207d
caps.latest.revision: 42
author: jillre
ms.author: jillfra
manager: wpickett
ms.openlocfilehash: 63d405b0e62735c0c1e3d7bb716ea2db29bc19fe
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2019
ms.locfileid: "72651574"
---
# <a name="in-source-suppression-overview"></a>Общие сведения о подавлении в исходном коде
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Подавление в исходном коде — это возможность подавлять или пропускать нарушения анализа кода в управляемый код путем добавления атрибута **SuppressMessage** в сегменты кода, вызывающие нарушения. Атрибут **SuppressMessage** является условным атрибутом, который включен в метаданные Il сборки управляемого кода только в том случае, если символ компиляции CODE_ANALYSIS определен во время компиляции.

 В управляемом коде C++/CLI для добавления этого атрибута используйте макрос CA_SUPPRESS_MESSAGE или CA_GLOBAL_SUPPRESS_MESSAGE в файле заголовка.

 Не следует использовать подавления в исходном виде в сборках выпуска, чтобы предотвратить случайное пересылку метаданных подавления в исходном источнике. Из-за затрат на обработку подавления в исходном коде производительность приложения также может снизиться, включая метаданные подавления в исходном коде.

> [!NOTE]
> Вам не нужно вручную кодировать эти атрибуты. Дополнительные сведения см. в разделе [Пошаговое руководство. Отключение предупреждений с помощью пункта меню](../code-quality/how-to-suppress-warnings-by-using-the-menu-item.md). Пункт меню недоступен для C++ кода.

## <a name="suppressmessage-attribute"></a>SuppressMessage, атрибут
 Если щелкнуть правой кнопкой мыши предупреждение анализа кода в **Список ошибок** а затем выбрать пункт **подавлять сообщения**, атрибут **SuppressMessage** добавляется либо в код, либо в глобальный файл подавления проекта.

 Атрибут **SuppressMessage** имеет следующий формат:

```vb
<Scope:SuppressMessage("Rule Category", "Rule Id", Justification = "Justification", MessageId = "MessageId", Scope = "Scope", Target = "Target")>
```

```csharp
[Scope:SuppressMessage("Rule Category", "Rule Id", Justification = "Justification", MessageId = "MessageId", Scope = "Scope", Target = "Target")]

```

 [C++]

```
CA_SUPPRESS_MESSAGE("Rule Category", "Rule Id", Justification = "Justification", MessageId = "MessageId", Scope = "Scope", Target = "Target")

```

 Где:

- **Категория правила** — Категория, в которой определено правило. Дополнительные сведения о категориях правил анализа кода см. в разделе [анализ кода для предупреждений управляемого кода](../code-quality/code-analysis-for-managed-code-warnings.md).

- **Идентификатор правила** — идентификатор правила. Поддержка включает короткое и длинное имя для идентификатора правила. Короткое имя — КАКСКСКСКС; длинное имя — КАКСКСКСКС: Фриендлитипенаме.

- **Обоснование** — текст, который используется для документирования причины подавления сообщения.

- **Идентификатор сообщения** — уникальный идентификатор проблемы для каждого сообщения.

- **Scope** — целевой объект, в котором предупреждение подавляется. Если целевой объект не указан, ему присваивается значение целевого объекта атрибута. В число поддерживаемых областей входят следующие.

  - Модуль

  - Пространство имен

  - Ресурс

  - Type

  - Член

- **Target** — идентификатор, который используется для указания целевого объекта, в котором предупреждение подавляется. Он должен содержать полное имя элемента.

## <a name="suppressmessage-usage"></a>Использование SuppressMessage
 Предупреждения анализа кода подавляются на уровне, к которому применяется экземпляр атрибута **SuppressMessage** . Целью этого является тесное связывание информации о подавлении с кодом, в котором происходит нарушение.

 Общая форма подавления включает категорию правила и идентификатор правила, который содержит необязательное удобное для восприятия представление имени правила. Например, примененная к объекту директива

 `[SuppressMessage("Microsoft.Design", "CA1039:ListsAreStrongTyped")]`

 При наличии достаточной производительности для минимизации метаданных подавления в исходном виде само имя правила можно оставить неизменным. Категория правила и идентификатор его правила вместе составляют достаточно уникальный идентификатор правила. Например, примененная к объекту директива

 `[SuppressMessage("Microsoft.Design", "CA1039")]`

 Этот формат не рекомендуется из-за проблем с обслуживанием.

## <a name="suppressing-multiple-violations-within-a-method-body"></a>Запрет множественных нарушений в теле метода
 Атрибуты могут применяться только к методу и не могут быть внедрены в тело метода. Однако можно указать идентификатор в качестве идентификатора сообщения, чтобы отличать несколько вхождений нарушения в методе.

 [!code-cpp[InSourceSuppression#1](../snippets/cpp/VS_Snippets_CodeAnalysis/InSourceSuppression/cpp/insourcesuppression.cpp#1)]
 [!code-csharp[InSourceSuppression#1](../snippets/csharp/VS_Snippets_CodeAnalysis/InSourceSuppression/cs/InSourceSuppression.cs#1)]
 [!code-vb[InSourceSuppression#1](../snippets/visualbasic/VS_Snippets_CodeAnalysis/InSourceSuppression/vb/InSourceSuppression.vb#1)]

## <a name="generated-code"></a>Созданный код
 Компиляторы управляемого кода и некоторые сторонние средства создают код для упрощения разработки кода. Созданный компилятором код, который отображается в исходных файлах, обычно отмечается атрибутом **GeneratedCodeAttribute** .

 Можно выбрать, следует ли подавлять предупреждения и ошибки анализа кода для созданного кода. Сведения о подавлении таких предупреждений и ошибок см. [в разделе как отключить предупреждения для созданного кода](../code-quality/how-to-suppress-code-analysis-warnings-for-generated-code.md).

 Обратите внимание, что анализ кода игнорирует **GeneratedCodeAttribute** , когда он применяется к целой сборке или одному параметру. Эти ситуации происходят редко.

## <a name="global-level-suppressions"></a>Подавления на глобальном уровне
 Средство анализа управляемого кода проверяет атрибуты **SuppressMessage** , которые применяются на уровне сборки, модуля, типа, члена или параметра. Он также вызывает нарушения для ресурсов и пространств имен. Эти нарушения должны применяться на глобальном уровне, а их область и Целевая. Например, следующее сообщение подавляет нарушение пространства имен:

 `[module: SuppressMessage("Microsoft.Design", "CA1020:AvoidNamespacesWithFewTypes", Scope = "namespace", Target = "MyNamespace")]`

> [!NOTE]
> При подавлении предупреждения с областью действия пространства имен оно подавляет предупреждение относительно пространства имен. Предупреждение не подавляется по типам в пространстве имен.

 Все подавления можно выразить, указав явную область. Эти подавления должны находиться на глобальном уровне. Подавление на уровне члена нельзя указать путем оформления типа.

 Запреты глобального уровня — это единственный способ отключить сообщения, ссылающиеся на созданный компилятором код, который не сопоставлен с явно предоставленным источником пользователя. Например, следующий код подавляет нарушение в конструкторе, созданном компилятором:

 `[module: SuppressMessage("Microsoft.Design", "CA1055:AbstractTypesDoNotHavePublicConstructors", Scope="member", Target="Microsoft.Tools.FxCop.Type..ctor()")]`

> [!NOTE]
> Целевой объект всегда содержит полное имя элемента.

## <a name="global-suppression-file"></a>Файл глобального подавления
 В глобальном файле подавления хранятся подавленные подавления или подавления на глобальном уровне, не указывающие цель. Например, подавление для нарушений уровня сборки хранится в этом файле. Кроме того, некоторые подавления ASP.NET хранятся в этом файле, так как параметры уровня проекта недоступны для кода под формой. Глобальное подавление создается и добавляется в проект при первом выборе параметра **в файле подавления проекта** в команде **подавлять сообщения** в окне Список ошибок. Дополнительные сведения см. в разделе [Пошаговое руководство. Отключение предупреждений с помощью пункта меню](../code-quality/how-to-suppress-warnings-by-using-the-menu-item.md).

## <a name="see-also"></a>См. также раздел
 <xref:System.Diagnostics.CodeAnalysis>
