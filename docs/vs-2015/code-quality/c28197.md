---
title: C28197 | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: reference
f1_keywords:
- C28197
helpviewer_keywords:
- C28197
ms.assetid: b685f4c1-9bd1-4ca3-a2b6-6eb87877b5db
caps.latest.revision: 5
author: mikeblome
ms.author: mblome
manager: jillfra
ms.openlocfilehash: 1a5cb9b9f28f5c80b3be0324d40ab8a0c2842bab
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "68156543"
---
# <a name="c28197"></a>C28197
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Предупреждение C28197: Возможна утечка памяти  
  
 Это предупреждение передается утечек памяти и ресурсов, если ресурс является потенциально псевдонимом в другое расположение.  
  
 *Указатель* точек на выделенную память или на другой выделенный ресурс, который не был явно освобожден. Это предупреждение обычно является из-за недостатка заметок в вызываемой функции, несмотря на то, что недостаточно заметок на вызывающей функции можно также сделать этот процесс более вероятно.  
  
 Это предупреждение можно создавать отчеты о выходе из функции, если входной аргумент `__drv_freesMem` или `__drv_aliasesMem` заметки. Это предупреждение обычно указывает допустимое утечки или что функция, вызываемая текущей функцией должен добавить заметки.  
  
 В частности, отсутствие базовый `_In_` и `_Out_` заметок сделать это предупреждение довольно вероятно, несмотря на то что `__drv_aliasesMem` и `__drv_freesMem` также может потребоваться заметок. Ложный положительный результат — это вероятный результат такого отсутствует `_In_` заметки.  
  
 Функции, которые принимают указатель и псевдоним его (что позволяет избежать утечка) должен сопровождаться атрибутом `__drv_aliasesMem`. Если необходимо создать функцию, которая вставляет объект в глобальной структуры или передает его функции системы, который делает это, следует добавить `__drv_aliasesMem` заметки.  
  
 Функции, объем свободной памяти должно быть помечено атрибутом `__drv_freesMem`. Основные функции, которые освобождают память уже имеют эту заметку.  
  
## <a name="example"></a>Пример  
 Следующий пример кода вызывает появление этого предупреждения.  
  
```  
char *p = (char *)malloc(10);  
test(p);   // does not save a copy of p  
```  
  
 Следующий пример кода позволяет избежать появления этого предупреждения.  
  
```  
char *p = (char *)malloc(10);  
test(p);   // does not save a copy of p  
free(p);  
```
