---
title: Указание времени и места применения заметки | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: conceptual
f1_keywords:
- _Group_
- _At_
- _When_
- _At_buffer_
ms.assetid: 8e4f4f9c-5dfa-4835-87df-ecd1698fc650
caps.latest.revision: 9
author: corob-msft
ms.author: corob
manager: jillfra
ms.openlocfilehash: 1eb32aa7d87da75ebf37b27aa1d425adb85f8c9b
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "77278453"
---
# <a name="specifying-when-and-where-an-annotation-applies"></a>Указание времени и места применения примечания
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Если примечание условно, оно может требовать, чтобы другие примечания указали на это анализатору.  Например, если в функции есть переменная, которая может быть либо синхронной, либо асинхронной, то функция ведет себя следующим образом: в случае, если переменная синхронная, она всегда завершается успешно, а в случае, если переменная асинхронная, появляется сообщение об ошибке, если функция не может завершиться сразу. Когда функция вызывается синхронно, проверка значения результата не представляет никакого значения для анализатора кода, поскольку оно не было возвращено.  Однако если функция вызывается асинхронно и результат функции не проверяется, может возникнуть серьезная ошибка. Этот пример иллюстрирует ситуацию, в которой можно использовать примечание `_When_` для включения проверки, как описано далее в этой статье.  
  
## <a name="structural-annotations"></a>Структурные заметки  
 Для того, чтобы контролировать, когда и в каких местах применяются примечания, используйте следующие структурные примечания.  
  
|Заметка|Описание|  
|----------------|-----------------|  
|`_At_(expr, anno-list)`|`expr` выражение, возвращающее lvalue. Заметки в `anno-list` применяются к объекту с именем `expr`. Для каждого примечания в `anno-list`, `expr` интерпретируется в предусловии, если примечание интерпретируется в предусловии, и в постусловии, если примечание интерпретируется в постусловии.|  
|`_At_buffer_(expr, iter, elem-count, anno-list)`|`expr` выражение, возвращающее lvalue. Заметки в `anno-list` применяются к объекту с именем `expr`. Для каждого примечания в `anno-list`, `expr` интерпретируется в предусловии, если примечание интерпретируется в предусловии, и в постусловии, если примечание интерпретируется в постусловии.<br /><br /> `iter` имя переменной, область которой ограничивается заметкой (включительно `anno-list` ). `iter` имеет неявный тип `long` . Переменные с одинаковыми именами в любой включающей области скрыты от оценки.<br /><br /> `elem-count` выражение, результатом вычисления которого является целое число.|  
|`_Group_(anno-list)`|Примечания в `anno-list` рассматриваются как имеющие любой квалификатор, который применяется к групповому примечанию, применяемому к каждому примечанию.|  
|`_When_(expr, anno-list)`|`expr` выражение, которое можно преобразовать в `bool` . Если он не равен нулю (`true`), то примечания, определенные в `anno-list`, считаются применимыми.<br /><br /> По умолчанию для каждого примечания в `anno-list`, `expr` интерпретируется с использованием входных значений, если это примечание с предусловием, и выходных значений, если это примечание с постусловием. Чтобы переопределить настройки по умолчанию, вы можете использовать встроенный `_Old_` для проверки постусловия, чтобы указать, что должны использоваться входные значения. **Примечание.**  Различные аннотации могут быть включены в результате использования, `_When_` Если используется изменяемое значение (например, `*pLength` ), так как вычисленный результат `expr` в предварительном условии может отличаться от результата, полученного после выполнения условия.|  
  
## <a name="see-also"></a>См. также:  
 [Использование аннотаций SAL для сокращения числа дефектов кода C/C++](../code-quality/using-sal-annotations-to-reduce-c-cpp-code-defects.md)   
 [Основные сведения о SAL](../code-quality/understanding-sal.md)   
 [Добавление заметок к параметрам и возвращаемым значениям функций](../code-quality/annotating-function-parameters-and-return-values.md)   
 [Аннотирование поведения функции](../code-quality/annotating-function-behavior.md)   
 [Аннотирование структур и классов](../code-quality/annotating-structs-and-classes.md)   
 [Аннотирование режима блокировки](../code-quality/annotating-locking-behavior.md)   
 [Встроенные функции](../code-quality/intrinsic-functions.md)   
 [Рекомендации и примеры](../code-quality/best-practices-and-examples-sal.md)
