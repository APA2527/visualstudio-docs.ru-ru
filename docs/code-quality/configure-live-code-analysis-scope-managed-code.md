---
title: Настройка области анализа активного кода для управляемого кода
ms.date: 03/23/2018
ms.topic: conceptual
helpviewer_keywords:
- live code analysis
- background analysis
- analysis scope
- full solution analysis
author: Mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- dotnet
ms.openlocfilehash: 6df882d50d0c1d052191246605af856743ffdf3d
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "88249191"
---
# <a name="how-to-configure-live-code-analysis-scope-for-managed-code"></a>Как настроить область анализа активного кода для управляемого кода

## <a name="what-is-live-code-analysis-for-managed-code"></a>Что такое "динамический анализ кода" для управляемого кода?
Visual Studio выполняет целый ряд интерактивных анализов кода, которые также называют *фоновым анализом*при редактировании исходных файлов в редакторе. Некоторые из них требуют минимального анализа для приемлемого интерфейса редактирования в интегрированной среде разработки Visual Studio. Некоторые из них для повышения скорости реагирования на функции интегрированной среды разработки. Хотя некоторые из них предназначены для включения дополнительных функций IDE, таких как диагностика и исправления кода в анализаторах Roslyn. В зависимости от функциональных возможностей эти анализ можно группировать следующим образом:

- **Фоновое вычисление диагностики**: анализ ошибок, предупреждений и предложений в исходных файлах для вычислений. Эти диагностические данные отображаются в виде записей в списке ошибок и в виде волнистых линий в редакторе. Их можно классифицировать по двум категориям:
  - Диагностика компилятора C# и Visual Basic
  - Диагностика анализатора Roslyn, которая включает в себя:

    - Встроенные анализаторы IDE для предложений по стилю кода и
    - Пакеты анализатора сторонних производителей, [установленные](./install-roslyn-analyzers.md) для проектов в текущем решении.

- **Другие параметры фонового**анализа: анализ для улучшения скорости реагирования и взаимодействия Visual Studio для функций интегрированной среды разработки. Ниже приведены некоторые примеры такого анализа.
  - Фоновый анализ открытых файлов.
  - Фоновая компиляция проектов с открытыми файлами для реализации символов для повышения скорости реагирования некоторых функций интегрированной среды разработки.
  - Создание синтаксиса и кэшей символов.
  - Обнаружение ассоциации конструктора для исходных файлов, таких как формы, элементы управления и т. д.

## <a name="default-analysis-scope"></a>Область анализа по умолчанию

По умолчанию динамический анализ кода для фонового вычисления диагностики выполняется для всех файлов, _открытых_ в Visual Studio. Некоторые из других описанных выше _фоновых анализов_ выполняются для всех проектов, имеющих по крайней мере один открытый файл. Хотя для всего решения выполняется несколько фоновых анализов.

## <a name="custom-analysis-scope"></a>Пользовательская область анализа

Область по умолчанию для каждого фонового анализа была настроена на оптимальное взаимодействие с пользователем, функциональность и производительность для большинства сценариев и решений клиентов. Однако бывают ситуации, когда клиентам может потребоваться настроить эту область, чтобы уменьшить или увеличить фоновый анализ. Например:

- Режим энергосбережения. Если пользователи работают на аккумуляторе ноутбука, они могут захотеть снизить энергопотребление для длительного времени работы от аккумулятора. В этом сценарии они хотят максимально оптимизировать фоновый анализ.
- Анализ кода по требованию. Если пользователь предпочитает отключить интерактивный анализатор и вручную выполнить анализ кода по требованию, необходимо будет максимально сокращать фоновый анализ. См. статью [как выполнить анализ кода вручную по требованию](./how-to-run-code-analysis-manually-for-managed-code.md).
- Полный анализ решения: Если пользователи хотят всегда видеть все средства диагностики во всех файлах решения, независимо от того, открыты они в редакторе или нет. В этом сценарии они хотят максимально увеличить область анализа в фоновом режиме до полного решения.

Начиная с Visual Studio 2019 версии 16,5, пользователи могут явно настраивать область всех операций динамического анализа кода, включая вычисления диагностики, для проектов C# и Visual Basic. Доступные области анализа:

- **Текущий документ**: свертывает область анализа активного кода, чтобы она выполнялась только для текущего или видимого файла в редакторе.
- **Открыть документы**: по умолчанию область анализа активного кода, как описано в приведенном выше разделе.
- **Все решение**. разворачивает область анализа динамического кода для выполнения всех файлов и проектов во всем решении.

Вы можете выбрать одну из приведенных выше пользовательских областей анализа в диалоговом окне "Сервис Параметры", выполнив следующие действия.

1. Чтобы открыть диалоговое окно " **Параметры** ", в строке меню в Visual Studio выберите **Сервис**  >  **Параметры**.

2. В диалоговом окне **Параметры** выберите **текстовый редактор**  >  **C#** или **базовый**  >  **Расширенный**.

3. Выберите нужную **область фонового анализа** для настройки области анализа. Когда все будет готово, нажмите кнопку **ОК** .

![Область анализа.](./media/background-analysis-scope.png)

> [!NOTE]
> До Visual Studio 2019 версии 16,5 пользователи могут настроить область анализа для вычислений диагностики для всего решения с помощью флажка **включить полный анализ решения** в **меню Сервис**  >  **Параметры**  >  **текстовый редактор**  >  **C#** или **Базовая**  >  вкладка**Дополнительно** . В предыдущих версиях Visual Studio нет поддержки для сворачивания области фонового анализа.

## <a name="automatically-minimize-live-code-analysis-scope"></a>Автоматически сокращать область прямого анализа кода

Если Visual Studio обнаруживает, что для нее доступно 200 МБ или меньше памяти, она автоматически уменьшает область анализа динамического кода до "текущий документ". В этом случае появится предупреждение, информирующее о том, что в Visual Studio отключены некоторые функции. При необходимости кнопка позволяет переключиться обратно на более раннюю область анализа.

![Предупреждение о минимизации области анализа текста предупреждений](./media/fsa_alert.png)

## <a name="see-also"></a>См. также раздел

- [Автоматическая приостановка функции](./automatic-feature-suspension.md)
- [Запрос функции режима энергосбережения](https://github.com/dotnet/roslyn/issues/38429)
