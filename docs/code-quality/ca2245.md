---
title: 'CA2245: не присваивайте свойство самому себе'
ms.date: 04/29/2020
ms.topic: reference
f1_keywords:
- CA2245
helpviewer_keywords:
- CA2245
author: mavasani
ms.author: mavasani
manager: jillfra
ms.openlocfilehash: 93d0d9f445f42d2918dfb20aa7bdfe6888b55298
ms.sourcegitcommit: d20ce855461c240ac5eee0fcfe373f166b4a04a9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2020
ms.locfileid: "84185001"
---
# <a name="ca2245-do-not-assign-a-property-to-itself"></a>CA2245: не присваивайте свойство самому себе

|||
|-|-|
|CheckId|CA2245|
|Категория|Microsoft. Usage|
|Критическое изменение|Не критическое|

## <a name="cause"></a>Причина:

Свойство было случайно назначено самому себе.

## <a name="rule-description"></a>Описание правила

Компилятор C# создает предупреждение [CS1717: присвоение значения той же переменной; имелось в виду, что вы](/dotnet/csharp/misc/cs1717) присвоее другое значение? при назначении поля, локального или символа параметра. Такая ошибка часто встречается в том случае, когда имя локального, параметра или поля имеет название, аналогичное другому символу в области. Вместо использования различных символов в левой и правой части назначения один и тот же символ использовался на обеих сторонах. Это приводит к избыточному назначению значения самому себе и, как правило, указывает на функциональную ошибку.

Присвоение свойству самого себя также является аналогичной функциональной ошибкой практически во всех реальных случаях. Однако в некоторых крайних угловых случаях получение значения свойства может иметь побочные эффекты, а новое значение свойства отличается от исходного значения. Если да, то самостоятельное назначение свойств не является избыточным и не может быть удалено. Это предотвращает создание компилятором `CS1717` предупреждения для самостоятельного назначения свойств без внесения критических изменений в эти случаи.

Правило `CA2245` нацелено на заполнение этого промежутка. Он сообщает о нарушении самостоятельного назначения свойств, чтобы помочь исправить эти функциональные ошибки. В небольшом наборе угловых случаев, когда желательно самостоятельное назначение свойств, `CA2245` нарушения могут подавляться в источнике с помощью соответствующего комментария обоснования.

> [!NOTE]
> Правило CA2245 недоступно в устаревшем анализе. Он впервые появился в [анализаторах FxCop](https://www.nuget.org/packages/Microsoft.CodeAnalysis.FxCopAnalyzers) версии 2.9.8.

## <a name="how-to-fix-violations"></a>Устранение нарушений

Чтобы устранить нарушения, используйте другие символы в левой части и правую часть назначения. Например, в следующем фрагменте кода показано нарушение правила и способы его устранения:

```csharp
public class C
{
    private int p = 0;
    public int P { get; private set; }

    public void M(int p)
    {
        // CS1717: Accidentally assigned the parameter 'p' to itself.
        p = p;

        // CA2245: Accidentally assigned the property 'P' to itself.
        P = P;
    }
}
```

```csharp
public class C
{
    private int p = 0;
    public int P { get; private set; }

    public void M(int p)
    {
        // No violation, now the parameter is assigned to the field.
        this.p = p;

        // No violation, now the parameter is assigned to the property.
        P = p;
    }
}
```

## <a name="when-to-suppress-warnings"></a>Когда следует подавлять предупреждения

Можно отключить нарушения этого правила, если получение значения свойства может иметь побочные эффекты, а новое значение свойства отличается от исходного значения. Если да, то самостоятельное назначение свойств не является избыточным. Чтобы задокументировать это как ожидаемое поведение, в подавление следует добавить комментарий обоснования.

## <a name="related-rules"></a>Связанные правила

- [CS1717: присваивание выполнено для той же переменной; Вы хотели бы назначить что-то другое?](/dotnet/csharp/misc/cs1717)
- [CA2011: не присваивайте свойство в методе задания](ca2011.md)
- [CA2246: не присваивайте символ и его член в одной инструкции](ca2246.md)

## <a name="see-also"></a>См. также статью

- [Предупреждения, связанные с использованием](usage-warnings.md)
