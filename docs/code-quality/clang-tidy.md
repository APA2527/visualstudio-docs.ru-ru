---
title: Использование Clang в Visual Studio
ms.date: 10/04/2019
ms.topic: conceptual
f1_keywords:
- vs.codeanalysis.clangtidy
author: frozenpandaman
ms.author: efessler
ms.workload:
- cplusplus
ms.openlocfilehash: 430d0e271f83332f7163c9c0c947f96756ca7a7d
ms.sourcegitcommit: e95dd8cedcd180e0bce6a75c86cf861757918290
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2019
ms.locfileid: "72165143"
---
# <a name="using-clang-tidy-in-visual-studio"></a>Использование Clang в Visual Studio

Анализ кода изначально поддерживает Clang для проектов MSBuild и CMak независимо [от](https://clang.llvm.org/extra/clang-tidy/) того, используются ли наборы инструментов CLANG или компилятором MSVC. Clangные проверки могут выполняться как часть анализа фонового кода, отображаться в виде предупреждений в редакторе (волнистых линий) и отображаться в Список ошибок.

Чтобы использовать Clang, компонент "C++ средства Clang для Windows" должен быть установлен с помощью Visual Studio Installer.

Clang — это средство анализа по умолчанию при использовании набора инструментов LLVM/Clang-CL, доступных как в MSBuild, так и в CMak. Его можно настроить для запуска параллельно или вместо стандартного анализа кода при использовании набора инструментов КОМПИЛЯТОРОМ MSVC. При использовании набора инструментов Clang-CL анализ кода Майкрософт будет недоступен.

Clang выполняется после успешной компиляции; чтобы получить результаты Clang, может потребоваться устранить ошибки исходного кода.


## <a name="msbuild"></a>MSBuild

Вы можете настроить Clang для запуска как часть анализа кода и выполнять сборку на странице " **анализ кода** > **общие** " в окно свойств проекта. Параметры для настройки средства можно найти в подменю Clang.

Дополнительные сведения см. в разделе [Практическое руководство. Задайте свойства анализа кода для C/C++ Projects @ no__t-1.

## <a name="cmake"></a>CMake

В проектах CMak можно настроить Clang проверки в пределах `CMakeSettings.json`. После открытия щелкните "изменить JSON" в правом верхнем углу редактора параметров проекта CMak. Распознаются следующие ключи:

- `enableMicrosoftCodeAnalysis`. Включает анализ кода Майкрософт
- `enableClangTidyCodeAnalysis`. Включает Clang анализ
- `clangTidyChecks`. Clang конфигурация, указанная в виде списка с разделителями-запятыми, т. е. проверки на включение или отключение

Если не указано ни одного из параметров "включить", Visual Studio выберет средство анализа, соответствующее используемому набору инструментов платформы.

## <a name="warning-display"></a>Отображение предупреждений

Clangные запуски приводят к отображению предупреждений в Список ошибок и в виде волнистых линий в соответствующих разделах кода. Используйте столбец Category (категория) в Список ошибок для сортировки и упорядочения предупреждений Clang. Можно настроить предупреждения в редакторе, установив параметр "отключить неподчеркнутые коды анализа кода" в разделе " **средства**@no__t **-1"** .

## <a name="clang-tidy-configuration"></a>Конфигурация с Clang

Можно настроить проверки, выполняемые Clang в Visual Studio с помощью параметра **Clang-configure checks** . Эти входные данные предоставляются в аргументе **--checks** средства. Любую дальнейшую настройку можно добавить в пользовательские файлы **. Clang** . Дополнительные сведения см. в [документации по Clang на LLVM.org](https://clang.llvm.org/extra/clang-tidy/) .

## <a name="see-also"></a>См. также

- [Поддержка Clang/LLVM для проектов MSBuild](https://aka.ms/cpp/clangmsbuild)
- [Поддержка Clang/LLVM для проектов CMak](https://aka.ms/cpp/clangcmake)
