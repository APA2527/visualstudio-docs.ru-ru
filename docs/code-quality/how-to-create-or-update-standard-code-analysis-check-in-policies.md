---
title: Создание или обновление стандартных политик возврата с анализом кода
ms.date: 11/04/2016
ms.topic: how-to
f1_keywords:
- vs.codeanalysis.policyeditor
helpviewer_keywords:
- code analysis, migrating check-in policy
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 7167368128cb5946118a7692c50c15109feb79a0
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "85371902"
---
# <a name="how-to-create-or-update-standard-code-analysis-check-in-policies"></a>Практическое руководство. Создание или обновление стандартных политик возврата с анализом кода

Можно потребовать, чтобы анализ кода выполнялся для всех проектов кода в проекте Azure DevOps с помощью политики возврата с анализом кода. Необходимость анализа кода может повысить качество кода, возвращаемого в базу кода.

> [!NOTE]
> Эта функция доступна только при использовании Team Foundation Server.

Политики возврата с анализом кода задаются в параметрах проекта и применяются к каждому проекту кода. Запуски анализа кода настраиваются для проектов кода в файле проекта (. кскспрож) для проекта кода. Выполнение анализа кода выполняется на локальном компьютере. При включении политики возврата с анализом кода файлы в проекте кода, которые должны быть возвращены, должны быть скомпилированы после их последнего изменения и выполнения анализа кода, которые содержат, как минимум, правила в параметрах проекта должны быть выполнены на компьютере, на котором были внесены изменения.

- Для управляемого кода политика возврата устанавливается путем указания *набора правил* , содержащего подмножество правил анализа кода.

- Для кода C/C++ в Visual Studio 2017 версии 15,6 и более ранних версиях политика возврата требует выполнения всех правил анализа кода. Можно добавить директивы, предшествующие процессору, чтобы отключить определенные правила для отдельных проектов кода в проекте Azure DevOps. В 15,7 и более поздних версиях можно использовать **/Analyze: RuleSet** для указания правил, которые следует выполнить. Дополнительные сведения см. в разделе [Использование наборов правил для указания выполняемых правил C++](/cpp/code-quality/using-rule-sets-to-specify-the-cpp-rules-to-run).

После указания политики возврата для управляемого кода члены группы могут синхронизировать параметры анализа кода для проектов кода с параметрами политики проекта Azure DevOps.

## <a name="to-open-the-check-in-policy-editor"></a>Открытие редактора политик возврата

1. В Team Explorer щелкните правой кнопкой мыши имя проекта, наведите указатель на пункт **Параметры проекта**и выберите пункт **система управления версиями**.

1. В диалоговом окне **система управления версиями** перейдите на вкладку **Политика возврата** .

1. Выполните одно из следующих действий.

    - Нажмите кнопку **Добавить** , чтобы создать новую политику возврата.

    - Дважды щелкните существующий элемент **анализа кода** в списке **тип политики** , чтобы изменить политику.

## <a name="to-set-policy-options"></a>Задание параметров политики

Установите или снимите следующие флажки:

|Параметр|Описание|
|------------|-----------------|
|**Принудительная запись после записи должна содержать только файлы, являющиеся частью текущего решения.**|Анализ кода может выполняться только для файлов, указанных в файлах конфигурации решения и проекта. Эта политика гарантирует анализ всего кода, который является частью решения.|
|**Принудительный анализ кода C/C++ (/Analyze)**|Требует, чтобы все проекты C или C++ были построены с параметром компилятора/Analyze для выполнения анализа кода, прежде чем их можно будет вернуть.|
|**Принудительное выполнение анализа кода для управляемого кода**|Требует, чтобы все управляемые проекты выполняли анализ кода и сборку, прежде чем их можно будет вернуть.|

## <a name="to-specify-a-managed-rule-set"></a>Указание набора управляемых правил

В списке **выполнить этот набор правил** используйте один из следующих методов.

- Выберите набор правил Microsoft Standard.

- Выберите настраиваемый набор правил, нажав кнопку **\<Select Rule Set from Source Control...>** . Затем введите путь управления версиями набора правил в обозревателе системы управления версиями. Синтаксис пути к системе управления версиями:

   **$/** `TeamProjectName` **/** `VersionControlPath`

Дополнительные сведения о создании и реализации пользовательского набора правил политики возврата см. в разделе [Реализация пользовательских политик возврата для управляемого кода](../code-quality/implementing-custom-code-analysis-check-in-policies-for-managed-code.md).

## <a name="see-also"></a>См. также раздел

- [Реализация настраиваемых политик возврата с анализом кода для управляемого кода](../code-quality/implementing-custom-code-analysis-check-in-policies-for-managed-code.md)
