---
title: 'CA1508: Избегайте неработающего условного кода'
ms.date: 04/23/2020
ms.topic: reference
f1_keywords:
- CA1508
- AvoidDeadConditionalCode
helpviewer_keywords:
- CA1508
- AvoidDeadConditionalCode
author: mavasani
ms.author: mavasani
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 538e7d7961c3bcf4344ee27b9761058ed871d6c9
ms.sourcegitcommit: dab57cebd484228e6f0cf7ab1b9685c575410c06
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/25/2020
ms.locfileid: "82154175"
---
# <a name="ca1508-avoid-dead-conditional-code"></a>CA1508: Избегайте неработающего условного кода

|||
|-|-|
|TypeName|авоиддеадкондитионалкоде|
|CheckId|CA1508|
|Категория|Поддержка Microsoft.|
|Критическое изменение|Не критическое|

## <a name="cause"></a>Причина:

Метод имеет условный код, который всегда вычисляется `true` как `false` или во время выполнения. Это приводит к неработающему коду `false` в ветви условия.

## <a name="rule-description"></a>Описание правила

Методы могут иметь условный код, например операторы If, двоичные выражения`==`( `!=`, `<`, `>`,), проверки значений NULL и т. д. Например, рассмотрим следующий код:

```csharp
public void M(int i, int j)
{
    if (i != 0)
    {
        return;
    }

    if (j != 0)
    {
        return;
    }

    // Below condition will always evaluate to 'false' as 'i' and 'j' are both '0' here.
    if (i != j)
    {
        // Code in this 'if' branch is dead code.
        // It can either be removed or refactored.
        ...
    }
}
```

Компиляторы C# и VB выполняют анализ условных проверок с использованием _значений констант_ времени компиляции, которые всегда имеют значение `true` или `false`. Этот анализатор выполняет анализ потока данных переменных, не являющихся константами, чтобы определить избыточные условные проверки, включающие _неконстантные значения_. В приведенном выше коде анализатор определяет, что `i` и `j` оба `0` являются для всех ветвей кода, доступных `i != j` для проверки. Таким образом, эта проверка всегда будет оцениваться `false` во время выполнения. Код в операторе If является неиспользуемым кодом и может быть удален или подвергнут рефакторингу. Аналогичным образом анализатор отслеживает значения NULL переменных и сообщает о избыточных проверках значений NULL.

> [!NOTE]
> Правило CA1508 недоступно в устаревшем анализе. Он впервые появился в [анализаторах FxCop](https://www.nuget.org/packages/Microsoft.CodeAnalysis.FxCopAnalyzers).
> Обратите внимание, что этот анализатор выполняет ресурсоемкий анализ потоков данных, не являющихся константными значениями. Это может увеличить общее время компиляции для определенных баз кода. Таким образом, это правило по умолчанию отключено в пакете анализатора. Пользователи могут включить это правило в editorconfig и выполнить однократный анализ и очистку кода. Дополнительные сведения о включении правила в editorconfig см. [здесь](https://docs.microsoft.com/visualstudio/code-quality/use-roslyn-analyzers#rule-severity).

## <a name="when-to-suppress-warnings"></a>Когда следует подавлять предупреждения

Нарушение этого правила можно отключить, если вы не беспокоитесь об обслуживании кода. Также можно подавить нарушения, идентифицированные как ложные срабатывания. Это возможно при наличии параллельного кода, который может выполняться из нескольких потоков.

## <a name="see-also"></a>См. также

- [Предупреждения о поддержке](../code-quality/maintainability-warnings.md)
