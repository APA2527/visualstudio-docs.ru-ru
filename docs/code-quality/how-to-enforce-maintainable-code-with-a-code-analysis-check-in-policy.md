---
title: Использование политики возврата с анализом кода
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- code analysis, check-in policies
ms.assetid: d1b3b04f-4dd9-40e6-b2d4-b414d33fb647
author: jillre
ms.author: jillfra
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 1b5a165d2f0f3c17a91775d2d37eadf32307d248
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2019
ms.locfileid: "72649426"
---
# <a name="how-to-enforce-maintainable-code-with-a-code-analysis-check-in-policy"></a>Пошаговое руководство. обеспечение поддержки кода с помощью политики возврата с анализом кода

Разработчики могут использовать средство метрики кода для измерения сложности и удобства сопровождения кода, но нельзя вызывать метрики кода в рамках политики возврата. Однако можно включить правила анализа кода, которые проверяют соответствие кода стандартам метрик кода и применяют правила с помощью политик возврата. Дополнительные сведения о метриках кода см. в разделе [значения метрик кода](../code-quality/code-metrics-values.md).

Вы можете включить глубину наследования, связанность классов, индекс удобства обслуживания и правила сложности, чтобы обеспечить поддержку кода с помощью политики возврата с анализом кода. Все четыре правила находятся в категории "правила поддержки" в редакторе политик анализа кода.

Администраторы системы управления версиями для Team Foundation могут добавить правила поддержки анализа кода в требования политики возврата. Эти политики возврата должны выполнять анализ кода на основе этих изменений правил перед началом записи после изменения.

## <a name="to-open-the-code-analysis-policy-editor"></a>Открытие редактора политики анализа кода

1. В **Team Explorer**щелкните правой кнопкой мыши проект, выберите пункт **Параметры проекта**, а затем выберите пункт **система управления версиями**.

     Откроется диалоговое окно **система управления версиями** .

2. На вкладке **Политика возврата** нажмите кнопку **Добавить**.

     Откроется диалоговое окно **Добавление политики возврата после проверки** .

3. В списке **Политика возврата** установите флажок **анализ кода** и нажмите кнопку **ОК**.

     Откроется диалоговое окно **редактор политики анализа кода** .

## <a name="to-enable-code-analysis-maintainability-rules"></a>Включение правил поддержки анализа кода

1. В диалоговом окне **редактор политики анализа кода** в разделе " **Параметры правила**" разверните узел **правила поддержки** .

2. Установите флажки для следующих правил:

   - Глубина наследования: **CA1501 авоидексцессивеинхеританце** -threshold: Warning на более чем 5 уровнях глубиной

   - Сложность: **CA1502 авоидексцессивекомплексити** -threshold: Warning более 25

   - Индекс удобства обслуживания: **CA1505 авоидунмаинтаинаблекоде** — threshold: warning не менее 20.

   - Связанность классов: **CA1506 авоидексцессивекласскауплинг** -threshold: Warning более 80 для класса и более 30 для метода

     Кроме того, если требуется нарушение правил, чтобы предотвратить успешную сборку, установите флажок **обрабатывать предупреждение как ошибку** рядом с описанием правила.

3. Нажмите кнопку **ОК**. Новая политика возврата теперь применяется к будущим возвратам.

## <a name="see-also"></a>См. также

- [Значения метрик кода](../code-quality/code-metrics-values.md)
- [Создание и использование политик возврата с анализом кода](../code-quality/how-to-create-or-update-standard-code-analysis-check-in-policies.md)
