---
title: Использование политики возврата с анализом кода
ms.date: 11/04/2016
description: Узнайте, как использовать политику возврата с анализом кода, чтобы убедиться, что код соответствует стандартам наследования, связанности классов, обслуживаемости и сложности.
ms.custom: SEO-VS-2020
ms.topic: how-to
helpviewer_keywords:
- code analysis, check-in policies
ms.assetid: d1b3b04f-4dd9-40e6-b2d4-b414d33fb647
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 6fa97f52f67e08b2ccf0843e5b5400680ed1c020
ms.sourcegitcommit: ed26b6e313b766c4d92764c303954e2385c6693e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2020
ms.locfileid: "94434822"
---
# <a name="how-to-enforce-maintainable-code-with-a-code-analysis-check-in-policy"></a>Пошаговое руководство. обеспечение поддержки кода с помощью политики возврата с анализом кода

Разработчики могут использовать средство метрики кода для измерения сложности и удобства сопровождения кода, но нельзя вызывать метрики кода в рамках политики возврата. Однако можно включить правила анализа кода, которые проверяют соответствие кода стандартам метрик кода и применяют правила с помощью политик возврата. Дополнительные сведения о метриках кода см. в разделе [значения метрик кода](../code-quality/code-metrics-values.md).

Вы можете включить глубину наследования, связанность классов, индекс удобства обслуживания и правила сложности, чтобы обеспечить поддержку кода с помощью политики возврата с анализом кода. Все четыре правила находятся в категории "правила поддержки" в редакторе политик анализа кода.

Администраторы системы управления версиями для Team Foundation могут добавить правила поддержки анализа кода в требования политики возврата. Эти политики возврата должны выполнять анализ кода на основе этих изменений правил перед началом записи после изменения.

## <a name="to-open-the-code-analysis-policy-editor"></a>Открытие редактора политики анализа кода

1. В **Team Explorer** щелкните правой кнопкой мыши проект, выберите пункт **Параметры проекта** , а затем выберите пункт **система управления версиями**.

     Откроется диалоговое окно **система управления версиями** .

2. На вкладке **Политика возврата** нажмите кнопку **Добавить**.

     Откроется диалоговое окно **Добавление политики возврата после проверки** .

3. В списке **Политика возврата** установите флажок **анализ кода** и нажмите кнопку **ОК**.

     Откроется диалоговое окно **редактор политики анализа кода** .

## <a name="to-enable-code-analysis-maintainability-rules"></a>Включение правил поддержки анализа кода

1. В диалоговом окне **редактор политики анализа кода** в разделе " **Параметры правила** " разверните узел **правила поддержки** .

2. Установите флажки для следующих правил:

   - Глубина наследования: **CA1501 авоидексцессивеинхеританце** -threshold: Warning на более чем 5 уровнях глубиной

   - Сложность: **CA1502 авоидексцессивекомплексити** -threshold: Warning более 25

   - Индекс удобства обслуживания: **CA1505 авоидунмаинтаинаблекоде** — threshold: warning не менее 20.

   - Связанность классов: **CA1506 авоидексцессивекласскауплинг** -threshold: Warning более 80 для класса и более 30 для метода

     Кроме того, если требуется нарушение правил, чтобы предотвратить успешную сборку, установите флажок **обрабатывать предупреждение как ошибку** рядом с описанием правила.

3. Нажмите кнопку **ОК**. Новая политика возврата теперь применяется к будущим возвратам.

## <a name="see-also"></a>См. также раздел

- [Значения метрик кода](../code-quality/code-metrics-values.md)
- [Создание и использование политик возврата с анализом кода](../code-quality/how-to-create-or-update-standard-code-analysis-check-in-policies.md)
