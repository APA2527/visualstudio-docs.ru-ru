---
title: Использование наборов правил для задания выполняемых правил C++
ms.date: 04/28/2018
ms.topic: conceptual
author: mikeblome
ms.author: mblome
manager: wpickett
ms.workload:
- cplusplus
ms.openlocfilehash: d4d7dfc1f010b860653edbe14fa7af9050bddba4
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62820377"
---
# <a name="use-rule-sets-to-specify-the-c-rules-to-run"></a>Использование наборов правил для задания выполняемых правил C++

В Visual Studio можно создавать и изменять пользовательский *набор правил* в соответствии с потребностями конкретного проекта, связанные с анализом кода. Наборы правил по умолчанию хранятся в `%VSINSTALLDIR%\Team Tools\Static Analysis Tools\Rule Sets`.

**Visual Studio 2017 версии 15.7 и более поздние версии** можно применить их в сборках командной строки, независимо от того, что система, при использовании сборки и создание настраиваемых наборов правил с помощью любого текстового редактора. Дополнительные сведения см. в разделе [/ analyze: ruleset](/cpp/build/reference/analyze-code-analysis).

Чтобы создать настраиваемое правило C++ в Visual Studio, проект C/C++ должен быть открыт в Интегрированной среде разработки Visual Studio. В редакторе набора правил откройте набор стандартных правил и затем добавить или удалить определенные правила и при необходимости изменить действие, которое происходит, когда анализа кода определяет, нарушено правило.

Чтобы создать новое настраиваемое правило набор, сохраните его с помощью имени файла. Настраиваемый набор правил, автоматически назначается в проект.

## <a name="to-create-a-custom-rule-from-a-single-existing-rule-set"></a>Чтобы создать настраиваемое правило из одного существующего набора правил

1. В обозревателе решений откройте контекстное меню для проекта и выберите **свойства**.

2. На **свойства** вкладке, выберите **анализа кода**.

3. В **набора правил** стрелку раскрывающегося списка, выполните одно из следующих:

   - Выберите набор правил, который требуется настроить.

     \- или -

   - Выберите  **\<Обзор... >** чтобы указать существующий настраиваемый набор правил, если его нет в списке.

4. Выберите **откройте** для отображения правила в редакторе набора правил.

## <a name="to-modify-a-rule-set-in-the-rule-set-editor"></a>Чтобы изменить правило, задать в редакторе набора правил

- Чтобы изменить отображаемое имя набора правил в **представление** меню, выберите **окно "Свойства"**. Введите отображаемое имя в **имя** поле. Обратите внимание на то, что отображаемое имя может отличаться от имени файла.

- Чтобы добавить все правила группы настраиваемый набор правил, установите флажок группы. Чтобы удалить все правила группы, снимите флажок.

- Чтобы добавить определенное правило настраиваемый набор правил, установите флажок правила. Чтобы удалить правило из набора правил, снимите флажок.

- Чтобы изменить действие, выполняемое при нарушении правила анализа кода, выберите **действие** поле для правила, а затем выберите один из следующих значений:

     **Предупреждать** -приводит к возникновению предупреждения.

     **Ошибка** -приводит к ошибке.

     **Нет** -отключает правило. Это действие выполняется так же, как удалить правило из набора правил.

## <a name="to-group-filter-or-change-the-fields-in-the-rule-set-editor-by-using-the-rule-set-editor-toolbar"></a>Для группировки, фильтрации, или изменить поля в редакторе набора правил с помощью панели инструментов редактора набора правил

- Чтобы развернуть правила во всех группах, выберите **развернуть все**.

- Чтобы свернуть правила во всех группах, выберите **Свернуть все**.

- Чтобы изменить поля, правила группируются по, выберите поле из **Group By** списка. Чтобы отобразить несгруппированные правила, выберите  **\<None >**.

- Чтобы добавить или удалить поля столбцов, правила, выберите **параметры столбцов**.

- Чтобы скрыть правила, которые не применяются к текущему решению, выберите **скрыть правила, которые не применяются к текущему решению**.

- Переключение между отображением и скрытием правил, которым назначено действие при возникновении ошибки, выберите **отображаются правила, которые могут вызвать ошибки анализа кода**.

- Переключение между отображением и скрытием правил, которым назначено действие предупреждение, выберите **отображаются правила, которые могут вызвать предупреждения анализа кода**.

- Переключение между отображением и скрытием правил, которым назначено **None** действие, выберите **отображаются правила, не включены**.

- Чтобы добавить или удалить наборы правил по умолчанию для текущего набора правил Майкрософт, выберите **добавить или удалить дочерние наборы правил**.

## <a name="to-create-a-rule-set-in-a-text-editor"></a>Чтобы создать набор правил в текстовом редакторе

Можно создать настраиваемый набор правил в текстовый редактор, сохраните его в любом месте с `.ruleset` расширения и применить с помощью [/ analyze: ruleset](/cpp/build/reference/analyze-code-analysis) параметр компилятора.

В следующем примере показано, что базовое правило задайте файл, который можно использовать в качестве отправной точки:

::: moniker range="vs-2017"

```xml
<?xml version="1.0" encoding="utf-8"?>
<RuleSet Name="New Rule Set" Description=" " ToolsVersion="15.0">
  <Rules AnalyzerId="Microsoft.Analyzers.NativeCodeAnalysis" RuleNamespace="Microsoft.Rules.Native">
    <Rule Id="C6001" Action="Warning" />
    <Rule Id="C26494" Action="Warning" />
  </Rules>
</RuleSet>
```

::: moniker-end

::: moniker range=">=vs-2019"

```xml
<?xml version="1.0" encoding="utf-8"?>
<RuleSet Name="New Rule Set" Description=" " ToolsVersion="16.0">
  <Rules AnalyzerId="Microsoft.Analyzers.NativeCodeAnalysis" RuleNamespace="Microsoft.Rules.Native">
    <Rule Id="C6001" Action="Warning" />
    <Rule Id="C26494" Action="Warning" />
  </Rules>
</RuleSet>
```

::: moniker-end
