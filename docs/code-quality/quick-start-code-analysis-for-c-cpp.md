---
title: Краткое руководство. Анализ кода для C/C++
description: Выполнение статического анализа C++ кода в Visual Studio для обнаружения распространенных проблем кода и дефектов.
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- C/C++ code analysis
- code analysis,C/C++
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- cplusplus
ms.openlocfilehash: b14737c09cf7ff2b14eda1f61408b531b9c22c14
ms.sourcegitcommit: 535ef05b1e553f0fc66082cd2e0998817eb2a56a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/07/2019
ms.locfileid: "72018368"
---
# <a name="quickstart-code-analysis-for-cc"></a>Краткое руководство. Анализ кода для C/C++

Качество приложения можно улучшить путем регулярного выполнения анализа кода C или C++. Это может помочь найти распространенные проблемы, нарушения рекомендаций по программированию или ошибки, которые трудно обнаружить в процессе тестирования. Предупреждения, возникающие в ходе анализа кода, отличаются от ошибок и предупреждений компилятора, потому что при анализе кода выполняется поиск конкретных шаблонов кода, которые являются допустимыми, но, тем не менее, могут вызвать проблемы при использовании кода вами или другими специалистами.

## <a name="configure-rule-sets-for-a-project"></a>Настройка наборов правил для проекта

1. В **Обозреватель решений**откройте контекстное меню для имени проекта и выберите пункт **свойства**.

2. Следующие действия необязательны.

    1. В списках **Конфигурация** и **платформа** выберите конфигурацию сборки и целевую платформу.

    2. По умолчанию функция анализа кода выдает предупреждения, связанные с кодом, автоматически созданным внешними средствами. Чтобы просмотреть предупреждения из созданного кода, снимите **подавлять результаты из созданного кода** "флажок".

        > [!NOTE]
        > Этот параметр не отключает ошибки и предупреждения из созданного кода, если ошибки и предупреждения появляются в формах и шаблонах. Вы можете просматривать и обслуживать исходный код для формы или шаблона.

3. Для выполнения анализа кода при каждом построении проекта с использованием выбранной конфигурации установите флажок **Включить анализ кода для C/C++ при сборке** . Вы также можете запустить анализ кода вручную, открыв меню **анализ** и выбрав **выполнить анализ кода в** *имя_проекта*.

4. В **выполнить этот набор правил** выполните одно из следующих:

    - Выберите набор правил, который хотите использовать.

    - Выберите **\<Browse >** , чтобы указать существующий настраиваемый набор правил, отсутствующий в списке.

    - Определение [набора настраиваемых правил](../code-quality/how-to-create-a-custom-rule-set.md).

### <a name="standard-cc-rule-sets"></a>Стандартные наборы правил C/C++

Visual Studio включает два стандартных набора правил для машинного кода.

|Набор правил|Описание|
|--------------|-----------------|
|Минимально рекомендуемые корпорацией Майкрософт правила для машинного кода|Этот набор правил ориентирован на наиболее важные проблемы в машинном коде, включая возможные уязвимости безопасности и случаи аварийного завершения работы приложений. Этот набор правил можно включить в любой настраиваемый набор правил, созданный для собственных проектов машинного кода.|
|Рекомендуемые Майкрософт правила для машинного кода|Этот набор правил охватывает широкий спектр проблем. Он включает все правила из набора "Минимально рекомендуемые корпорацией Майкрософт правила для машинного кода".|

## <a name="run-code-analysis"></a>Запуск анализа кода

На странице "Анализ кода" свойств проекта можно настроить выполнение анализа кода при каждой сборке проекта. Кроме того, можно запустить анализ кода вручную.

Чтобы запустить анализ кода для решения, выполните следующие действия.

- В меню **Сборка** выберите **Выполнить анализ кода в решении**.

Чтобы запустить анализ кода для проекта, выполните следующие действия.

1. В обозревателе решений выберите имя проекта.

2. В меню **Сборка** выберите пункт **выполнить анализ кода для** *имени проекта*.

   Будет выполнена компиляция проекта или решения и запуск анализа кода. Результаты отображаются в Список ошибок.

## <a name="analyze-and-resolve-code-analysis-warnings"></a>Анализ и устранение предупреждений функции анализа кода

Чтобы проанализировать конкретное предупреждение, выберите заголовок предупреждения в Список ошибок. Предупреждение будет развернуто для отображения дополнительных сведений о проблеме. По возможности функция анализа кода выводит на экран номера строк и логику анализа, вызвавшие предупреждение. Для получения подробных сведений о предупреждении, включая возможные решения проблемы, выберите идентификатор предупреждения, чтобы отобразить соответствующий раздел справки в Интернете.

При выборе предупреждения строка кода, вызвавшая предупреждение, выделяется в редакторе кода Visual Studio.

Поняв, в чем заключается проблема, можно разрешить ее в коде. Затем повторно запустите анализ кода, чтобы убедиться, что предупреждение больше не отображается в Список ошибок и что ваше исправление не породило новых предупреждений.

## <a name="suppress-code-analysis-warnings"></a>Подавлять предупреждения анализа кода

В некоторых случаях разработчик может принять решение не разрешать предупреждение анализа кода. Возможно, разрешение предупреждения требует слишком значительного переписывания кода в сравнении с вероятностью того, что проблема проявит себя в какой-либо реальной его реализации. Или, например, разработчик может посчитать, что используемая в предупреждении логика анализа не соответствует данному контексту. Можно отключить отдельные предупреждения, чтобы они больше не отображались в Список ошибок.

Чтобы подавить предупреждение, выполните следующие действия.

1. Если подробные сведения не отображаются, выберите заголовок предупреждения, чтобы развернуть его.

2. Выберите ссылку **Действия** внизу предупреждения.

3. Выберите **подавить сообщение** , а затем выберите **в списке Источник**.

   Подавление вставки сообщения `#pragma warning (disable:[warning ID])`, что подавляет вывод предупреждения для строки кода.

## <a name="create-work-items-for-code-analysis-warnings"></a>Создание рабочих элементов для предупреждений анализа кода

Для регистрации ошибок в журнале из среды Visual Studio можно использовать функцию отслеживания рабочих элементов. Чтобы использовать эту возможность, необходимо подключиться к экземпляру Team Foundation Server.

**Создание рабочего элемента для одного или нескольких предупреждений C/C++ Code**

1. В Список ошибок разверните и выберите предупреждения.

2. В контекстном меню предупреждений выберите команду **создать рабочий элемент**, а затем выберите тип рабочего элемента.

3. Visual Studio создает один рабочий элемент для выбранных предупреждений и отображает рабочий элемент в окне документа интегрированной среды разработки.

4. Добавьте дополнительные сведения, а затем выберите **сохранить рабочий элемент**.

## <a name="search-and-filter-code-analysis-results"></a>Поиск и фильтрация результатов анализа кода

Можно выполнять поиск в длинных списках предупреждений, а также фильтровать предупреждения в решениях, состоящих из нескольких проектов.

- **Фильтрация предупреждений по названию или идентификатору предупреждения**: Введите ключевое слово в поле поиска.

- **Фильтрация предупреждений по серьезности**: По умолчанию сообщениям анализа кода присваивается серьезность **предупреждения**. Можно назначить серьезность одного или нескольких сообщений как **ошибку** в настраиваемом наборе правил. В столбце **серьезность** **Список ошибок**выберите стрелку раскрывающегося списка и щелкните значок фильтра. Выберите **предупреждение** или **Ошибка** , чтобы отобразить только те сообщения, которым назначен соответствующий уровень серьезности. Щелкните **выбрать все** , чтобы отобразить все сообщения.

## <a name="see-also"></a>См. также

[Анализ кода для C/C++](../code-quality/code-analysis-for-c-cpp-overview.md)