---
title: Журнал пикселей графики | Документация Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
f1_keywords:
- vs.graphics.pixelhistory
ms.assetid: 0a2cbde5-1ad9-487e-857c-a3664158c268
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 8cb1b7a869915eebc561e1baf47082dd5dbc00df
ms.sourcegitcommit: 5f6ad1cefbcd3d531ce587ad30e684684f4c4d44
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/22/2019
ms.locfileid: "72735488"
---
# <a name="graphics-pixel-history"></a>Журнал пикселей графики
Окно журнала пикселей графики в анализаторе графики Visual Studio помогает понять влияние на конкретный пиксель событий Direct3D, которые происходят в кадре вашей игры или приложения.

 Это окно журнала пикселей:

 ![Пиксель с тремя событиями Direct3D в журнале.](media/gfx_diag_demo_pixel_history_orientation.png "gfx_diag_demo_pixel_history_orientation")

## <a name="understanding-the-pixel-history-window"></a>Основные сведения об окне журнала пикселей
 С помощью журнала пикселей можно проанализировать, как определенный пиксель целевого объекта отрисовки затрагивается событиями Direct3D во время кадра. Можно выявить проблемы отрисовки на уровне конкретного события Direct3D, даже если последующие события — или последующие примитивы в этом же событии — продолжают изменять значение окончательного цвета пикселя. Например, пиксель может быть отрисован неправильно и затем скрыт другим полупрозрачным пикселем, при этом их цвета смешиваются в буфере кадров. Подобные проблемы было бы трудно диагностировать, если бы вы имели для анализа только окончательное содержимое целевого объекта отрисовки.

 В окне журнала пикселей отображается полный журнал пикселя в течение выбранного кадра. В разделе **Буфер последнего кадра** в верхней части окна показан цвет, который записывается в буфер кадров в конце кадра, вместе с дополнительной информацией о пикселе, такой как фрейм, из которого он поступает, и его экранные координаты. В этой области также имеется флажок **Отрисовка альфа-канала**. Когда этот флажок установлен, значения цвета **Буфер последнего кадра** и промежуточного цвета отображаются с прозрачностью поверх шаблона в виде шахматной доски. Если флажок снят, альфа-канал цветовых значений игнорируется.

 В нижней части окна отображаются события, которые имели возможность повлиять на цвет пикселя, вместе с псевдособытиями **Начальный** и **Окончательный**, которые представляют собой начальные и конечные значения цвета пикселя в буфере кадров. Начальное значение цвета определяется первым событием, которое изменило цвет пикселя (обычно событием `Clear`). Пиксель всегда имеет эти два псевдособытия в своем журнале даже при отсутствии других событий, повлиявших на него. Если другие события имели возможность повлиять на пиксель, они отображаются между событиями **Начальный** и **Конечный**. События можно разворачивать для просмотра подробных сведений о них. Для простых событий, например, удаляющих целевой объект отрисовки, результатом события будет лишь значение цвета. Более сложные события, такие как вызовы рисования, создают один или несколько примитивов, которые могут вносить свой вклад в цвет пикселя.

 Примитивы, нарисованные событием, идентифицируются по типу примитива и индексу вместе с общим количеством примитивов для объекта. Например, такой идентификатор, как **Треугольник (1456) из (6214)** , означает, что примитив соответствует 1456-му треугольнику в объекте, состоящем из 6214 треугольников. Слева от каждого идентификатора примитива есть значок, указывающий на то, какое влияние примитив оказал на пиксель. Примитивы, которые влияют на цвет пикселя, представлены скругленным прямоугольником, который заливается результирующим цветом. Примитивы, которые исключаются из оказания влияния на цвет пикселя, представлены значками, указывающими на причину исключения пикселя. Эти значки будут рассмотрены далее в этой статье в разделе [Исключение примитива](#exclusion).

 Можно развернуть каждый примитив, чтобы проверить, как вывод построителя текстуры объединяется с существующим цветом пикселя для создания результирующего цвета. Здесь также можно проверить или отладить код построителя текстуры, связанного с примитивом, а также можно далее развернуть узел вершинного построителя текстуры для проверки его входных данных.

### <a name="primitive-exclusion"></a><a name="exclusion"></a> Исключение примитива
 Примитив может исключаться из оказания влияния на цвет пикселя в силу различных причин. Каждая причина представлена значком, который описан в таблице ниже.

|Значок|Причина исключения|
|----------|--------------------------|
|![Значок непройденного теста глубины.](media/vsg_hist_icon_failed_depth.png "vsg_hist_icon_failed_depth")|Пиксель был исключен, поскольку он не прошел тест глубины.|
|![Значок непройденного теста на отсечение.](media/vsg_hist_icon_failed_scissor.png "vsg_hist_icon_failed_scissor")|Пиксель был исключен, поскольку он не прошел тест на отсечение.|
|![Значок непройденного теста трафарета.](media/vsg_hist_icon_failed_stencil.png "vsg_hist_icon_failed_stencil")|Пиксель был исключен, поскольку он не прошел тест трафарета.|

### <a name="draw-call-exclusion"></a>Исключение вызова рисования
 Если все примитивы в вызове рисования исключаются, т. е. не влияют на целевой объект отрисовки, потому что не проходят тест, то вызов рисования нельзя развернуть, и рядом с ним отображается значок, соответствующий причине исключения. Причины исключений вызовов рисования аналогичны причинам исключения примитивов, и их значки также аналогичны.

### <a name="viewing-and-debugging-shader-code"></a>Просмотр и отладка кода шейдера
 Можно проверить и отладить код для шейдеров вершин, поверхностей, доменов, геометрии и пикселей с помощью элементов управления под примитивом, связанным с шейдером.

##### <a name="to-view-a-shaders-source-code"></a>Просмотр исходного кода шейдера

1. В окне **журнала пикселей графики** найдите вызов рисования, соответствующий шейдеру, который требуется исследовать, и разверните его.

2. Под вызовом рисования, который вы только что развернули, выберите примитив, который демонстрирует интересующую вас проблему, и разверните его.

3. Под интересующим вас примитивом перейдите по ссылке заголовка шейдера — например, перейдите по ссылке **Vertex Shader obj:30**, чтобы просмотреть исходный код шейдера вершин.

    > [!TIP]
    > Номер объекта, например **obj:30**, идентифицирует этот шейдер во всем интерфейсе анализатора графики, таком как таблица объектов или окно этапов конвейера.

##### <a name="to-debug-a-shader"></a>Отладка шейдера

1. В окне **журнала пикселей графики** найдите вызов рисования, соответствующий шейдеру, который требуется исследовать, и разверните его.

2. Затем под вызовом рисования, который вы только что развернули, выберите примитив, который демонстрирует интересующую вас проблему, и разверните его.

3. Под интересующим вас примитивом выберите **Начать отладку**. Эта точка входа в отладчик HLSL по умолчанию устанавливается как первый вызов шейдера для соответствующего примитива, то есть первый пиксель или вершина, обрабатываемая шейдером. Существует только один пиксель, связанный с примитивом, но может быть несколько вызовов шейдера вершин для линий и треугольников.

     Чтобы отладить вызов шейдера вершин для конкретной вершины, разверните ссылку заголовка VertexShader и найдите интересующую вас вершину, а затем выберите команду **Начать отладку** рядом с этой вершиной.

### <a name="links-to-graphics-objects"></a>Ссылки на графические объекты
 Чтобы понять события графики в истории пикселя, могут потребоваться сведения о состоянии устройства во время события или об объектах Direct3D, на которые ссылается событие. Для каждого события в журнале пикселей в окне **Журнал пикселей графики** есть ссылки на состояние устройства на тот момент и на связанные объекты.

## <a name="see-also"></a>См. также
- [Пошаговое руководство: Отсутствие объектов вследствие состояния устройства](walkthrough-missing-objects-due-to-device-state.md)
- [Пошаговое руководство: Отладка ошибок отрисовки, возникающих из-за заливки](walkthrough-debugging-rendering-errors-due-to-shading.md)