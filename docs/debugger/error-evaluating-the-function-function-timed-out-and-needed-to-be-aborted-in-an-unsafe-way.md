---
title: 'Ошибка: Вычисление функции &#39;функция&#39; истекло и требуется завершить небезопасным образом | Документация Майкрософт'
ms.date: 11/04/2016
ms.topic: troubleshooting
f1_keywords:
- vs.debug.error.unsafe_func_eval_abort
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 5baf69e697e7ceb9c6b0c5f83573dc106303cca2
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62850980"
---
# <a name="error-evaluating-the-function-39function39-timed-out-and-needed-to-be-aborted-in-an-unsafe-way"></a>Ошибка: Вычисление функции &#39;функция&#39; истекло и требуется завершить небезопасным образом

Полный текст сообщения: Вычисление функции «function» истекло время ожидания и требуется завершить небезопасным образом. Это возможно повреждение в целевом процессе.

Чтобы облегчить задачу для проверки состояния объектов .NET, отладчик автоматически приведет к отлаживаемого процесса для выполнения дополнительного кода (обычно методах считывания свойств и ToString функции). В большинстве случаев все эти функции быстро и значительно упростить отладку. Тем не менее отладчик не запустите приложение в изолированной среде. Таким образом метод получения свойства или метода ToString, который вызывает функцию машинного кода, который перестает отвечать на запросы, может привести к длинное время ожидания, который не может быть восстановлен. Обнаружив это сообщение об ошибке, это имеет место.

Одна из основных причин этой проблемы является наличие при отладчик вычисляет свойство, только поток, проверяемое для выполнения. Поэтому свойство ожидает завершения других потоков, выполняемых внутри отлаженного приложения, если он находится в состоянии ожидания способом, который среда выполнения .NET не может прерывать работу, произойдет проблема.

## <a name="to-correct-this-error"></a>Исправление ошибки

Существует несколько возможных решений этой проблемы.

### <a name="solution-1-prevent-the-debugger-from-calling-the-getter-property-or-tostring-method"></a>Решение #1. Запретить вызов метода получения свойства или метода ToString отладчика

Сообщение об ошибке сообщает имя функции, которые отладчик попытался вызвать. Если вы можете редактировать эту функцию, можно предотвратить отладчик вызовом метода считывания свойства или метода ToString. Попробуйте выполните одно из следующих:

* Изменить метод к другому типу кода, помимо задания свойства или метода ToString и проблема исчезнет.
    -или-
* (Для ToString) Определение атрибута DebuggerDisplay на типе и вы можете оценить, отличные от ToString отладчика.
    -или-
* (Для метода считывания свойства) Поместите `[System.Diagnostics.DebuggerBrowsable(DebuggerBrowsableState.Never)]` атрибут в свойстве. Это может быть полезно в том случае, если у вас есть метод, который должен проходить свойство по причинам совместимости API, но он должен быть метод.

### <a name="solution-2-have-the-target-code-ask-the-debugger-to-abort-the-evaluation"></a>Решение #2. У целевой код попросите отладчика для прерывания оценки

Сообщение об ошибке сообщает имя функции, которые отладчик попытался вызвать. Если метод получения свойства или метода ToString иногда запустится с ошибкой, особенно в ситуациях, когда проблема, код должен другой поток для выполнения кода, а затем можно вызвать функцию реализации `System.Diagnostics.Debugger.NotifyOfCrossThreadDependency` попросить отладчика для прерывания, функция Оценка. Это решение по-прежнему можно явным образом оценить эти функции, но по умолчанию выполняется, выполнение останавливается при возникновении NotifyOfCrossThreadDependency вызов.

### <a name="solution-3-disable-all-implicit-evaluation"></a>Решение #3: Отключить все неявное вычисление

Если предыдущие решения не удалось устранить проблему, перейдите к **средства** > **параметры**и снимите флажок **Отладка**  >   **Общие** > **включить вычисление свойств и другие неявные вызовы функций**. Это приведет к отключению большинство неявная функция оценок и поможет решить данную проблему.

### <a name="solution-4-enable-managed-compatibility-mode"></a>Решение #4: Включить режим совместимости управляемого кода

При переключении ядру отладки, можно устранить ошибку. Перейдите к **средства** > **параметры**и выберите параметр **Отладка** > **Общие**  >  **Использовать режим совместимости управляемого кода**. Дополнительные сведения см. в разделе [Общие параметры отладки](../debugger/general-debugging-options-dialog-box.md).
