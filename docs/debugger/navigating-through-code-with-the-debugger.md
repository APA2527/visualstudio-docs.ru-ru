---
title: Навигация по коду с помощью отладчика | Документация Майкрософт
ms.custom: seodec18
ms.date: 11/12/2018
ms.topic: conceptual
f1_keywords:
- vs.debug.execution
helpviewer_keywords:
- stepping
- debugging [Visual Studio], execution control
- execution, controlling in debugger
ms.assetid: 759072ba-4aaa-447e-8e51-0dd1456fe896
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 6dfffdf0c12ea2a8f14769f26bb40a3943579248
ms.sourcegitcommit: 40bd5b27f247a07c2e2514acb293b23d6ce03c29
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2019
ms.locfileid: "73187593"
---
# <a name="navigate-through-code-with-the-visual-studio-debugger"></a>Навигация по коду с помощью отладчика Visual Studio

Отладчик Visual Studio может помочь при переходе по коду для проверки состояния приложения и отображения его последовательности выполнения. Для быстрого перехода к коду, который необходимо изучить, можно использовать сочетания клавиш, команды отладки, точки останова и другие функции. Знакомство с командами навигации отладчика и сочетаниями клавиш ускоряет и упрощает поиск и устранение проблем приложений.  Если вы впервые пытались выполнить отладку кода, вам может потребоваться ознакомиться с [отладкой для начинающих](../debugger/debugging-absolute-beginners.md) , а также [методов и средств отладки](../debugger/write-better-code-with-visual-studio.md) , прежде чем переходить к этой статье.

## <a name="get-into-break-mode"></a>Перейти в режим приостановки выполнения

В *режиме приостановки*выполнение приложения приостанавливается, пока функции, переменные и объекты остаются в памяти. Когда отладчик находится в режиме приостановки выполнения, можно перемещаться по коду. Наиболее распространенные способы быстрого перехода в режим приостановки выполнения:

- Начните пошаговое выполнение кода, нажав клавишу **F10** или **F11**. Это позволяет быстро найти точку входа приложения, после чего можно продолжить нажатие команд Step для навигации по коду.

- [Выполните команду в определенное расположение или функцию](#BKMK_Break_into_code_by_using_breakpoints_or_Break_All), например [установив точку останова](using-breakpoints.md) и запустив приложение.

   Например, в редакторе кода в Visual Studio можно использовать команду **выполнить до курсора** , чтобы запустить приложение, отладчик подключен и перейти в режим приостановки, а затем нажать клавишу **F11** , чтобы перейти к коду.

   ![Выполнение до курсора и шаг с заходом в код](../debugger/media/navigate-code-code-stepping.gif "Выполнение до курсора и шаг с заходом в код")

В режиме приостановки выполнения можно использовать различные команды для навигации по коду. В режиме приостановки можно проверить значения переменных, чтобы найти нарушения или ошибки. Для некоторых типов проектов можно также внести изменения в приложение в режиме приостановки выполнения.

Большинство окон отладчика, таких как **модули** и окна **контрольных значений** , доступны только при присоединении отладчика к приложению. Некоторые функции отладчика, такие как просмотр значений переменных в окне " **локальные** " или вычисление выражений в окне " **Контрольные** значения", доступны только при приостановке отладчика (т. е. в режиме приостановки выполнения).

> [!NOTE]
> Если вы разбиваете код, который не содержит файлов исходного кода или файла символов (*pdb*), отладчик отображает страницу **исходные файлы не найден** или **символы не найдены** , которые могут помочь найти и загрузить файлы. См. статью [Указание файлов символов (.pdb) и файлов с исходным кодом в отладчике Visual Studio](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md). Если вы не можете загрузить символы или исходные файлы, вы по-прежнему можете отлаживать инструкции сборки в окне **дизассемблирования** .

## <a name="step-through-code"></a>Пошаговое прохождение кода

С помощью команд шага отладчика можно проверить состояние приложения или узнать больше о его потоке выполнения.

### <a name="BKMK_Step_into__over__or_out_of_the_code"></a>Шаг с заходом в код по строке

Для завершения каждой инструкции во время отладки используйте **отладку** > **Шаг с заходом**или нажмите клавишу **F11**.

Отладчик проходит через операторы кода, а не физические линии. Например, предложение `if` может быть записано в одной строке:

  ```csharp
  int x = 42;
  string s = "Not answered";
  if( int x == 42) s = "Answered!";
  ```

  ```vb
  Dim x As Integer = 42
  Dim s As String = "Not answered"
  If x = 42 Then s = "Answered!"
  ```

Однако при выполнении шага в этой строке отладчик обрабатывает условие как один шаг, а результат — как другой. В предыдущем примере условие имеет значение true.

При вызове вложенных функций команда **Шаг с заходом** позволяет попасть в самую глубокую вложенную функцию. Например, если вы используете **Шаг с заходом** в вызове, например `Func1(Func2())`, отладчик заходит в функцию `Func2`.

>[!TIP]
>При выполнении каждой строки кода можно навести указатель мыши на переменную, чтобы просмотреть их значения, или использовать окна [локальные](autos-and-locals-windows.md) и [Контрольные](watch-and-quickwatch-windows.md) значения для просмотра измененных значений. Можно также визуально отслеживать [Стек вызовов](how-to-use-the-call-stack-window.md) при пошаговом выполнении функций. (Только для Visual Studio Enterprise см. раздел [методы Map в стеке вызовов во время отладки](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md)).

### <a name="BKMK_Step_over_Step_out"></a>Пошаговое прокрутка кода и пропуск некоторых функций

Вы можете не заботиться о функции во время отладки или узнать, как она работает, как хорошо протестированный код библиотеки. Чтобы пропустить код во время пошагового выполнения кода, можно использовать следующие команды. Функции по-прежнему выполняются, но отладчик пропускает их.

|Команда клавиатуры|Команда меню "Отладка"|Описание|
|----------------------|------------------|-----------------|
|**F10**|**Шаг с обходом**|Если текущая строка содержит вызов функции, шаг с **обходом** запускает код, а затем приостанавливает выполнение на первой строке кода после того, как вызванная функция возвращает значение.|
|**SHIFT**+**F11**|**Шаг с выходом**|**Шаг исходящий** запуск продолжит выполнение кода и приостанавливает выполнение, когда текущая функция возвращает значение. Отладчик пропускает текущую функцию.|

## <a name="BKMK_Break_into_code_by_using_breakpoints_or_Break_All"></a>Выполнение в определенном расположении или функции

Вы можете захотеть запуститься непосредственно в определенном расположении или функции, если точно известно, какой код нужно проверить, или вы будете знать, где вы хотите начать отладку.

### <a name="run-to-a-breakpoint-in-code"></a>Выполнение до точки останова в коде

Чтобы задать простую точку останова в коде, щелкните крайнее левое поле рядом с строкой кода, в которой нужно приостановить выполнение. Можно также выбрать линию и нажать клавишу **F9**, выбрать **Отладка**  > **Переключить точку останова**или щелкнуть правой кнопкой мыши и выбрать **точку останова**  > **Вставить точку останова**. Точка останова отображается в виде красной точки в левом поле рядом с строкой кода. Отладчик приостанавливает выполнение непосредственно перед выполнением строки.

![Установка точки останова](../debugger/media/dbg_basics_setbreakpoint.png "Установка точки останова")

Точки останова в Visual Studio предоставляют широкий набор дополнительных функций, таких как условные точки останова и точки трассировки. Дополнительные сведения см. [в разделе Использование точек останова](../debugger/using-breakpoints.md).

### <a name="run-to-a-function-breakpoint"></a>Выполнение до точки останова функции

Можно указать, что отладчик будет выполняться, пока не достигнет указанной функции. Можно задать функцию по имени или выбрать ее из стека вызовов.

**Указание точки останова функции по имени**

1. Выберите **отладка**  > **Новая точка останова**  > **точка останова функции**

1. В диалоговом окне **Новая точка останова функции** введите имя функции и выберите ее язык.

   ![Диалоговое окно «Создание точки останова функции»](../debugger/media/dbg_execution_newbreakpoint.png "Новая точка останова функции")

1. Нажмите кнопку **ОК**.

Если функция перегружена или находится в нескольких пространствах имен, в окне **точки останова** можно выбрать нужную функцию.

![Перегруженные точки останова функции](../debugger/media/dbg_execution_overloadedbreakpoints.png "Перегруженные точки останова функции")

**Выбор точки останова функции из стека вызовов**

1. Во время отладки откройте окно **Стек вызовов** , выбрав **Отладка**  > **Windows**  > **Стек вызовов**.

1. В окне **Стек вызовов** щелкните функцию правой кнопкой мыши и выберите команду **выполнить до текущей позиции**или нажмите клавиши **CTRL** +**F10**.

Сведения о визуальной трассировке стека вызовов см. в разделе [методы Map в стеке вызовов во время отладки](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md).

### <a name="run-to-a-cursor-location"></a>Выполнение до позиции курсора

Чтобы выполнить до положения курсора, в исходном коде или окне **стека вызовов** выберите строку, которую нужно прервать, щелкните правой кнопкой мыши и выберите команду **выполнить до текущей позиции**или нажмите клавиши **CTRL** +**F10**. Выбор команды **выполнить до курсора** аналогичен установке временной точки останова.

### <a name="run-to-click"></a>Выполнение до щелкнутого

При приостановке в отладчике можно навести указатель мыши на инструкцию в исходном коде или окне **дизассемблирования** и выбрать значок **выполнить выполнение до этой** зеленой стрелки. Использование команды **Run для щелчка** исключает необходимость установки временной точки останова.

![Выполнение до щелкнутого](../debugger/media/dbg-run-to-click.png "Выполнение до щелкнутого")

> [!NOTE]
> **Запуск до щелчка** доступен, начиная с [!include[vs_dev15](../misc/includes/vs_dev15_md.md)].

### <a name="manually-break-into-code"></a>Приостановка выполнения кода вручную

Чтобы прервать работу в следующей доступной строке кода в работающем приложении, выберите **отладка**  > **прервать все**или нажмите клавиши **CTRL** +**ALT** +**break**.

## <a name="BKMK_Set_the_next_statement_to_execute"></a>Перемещение указателя для изменения потока выполнения

При приостановке отладчика желтая стрелка на поле исходного кода или окна **дизассемблирования** отмечает расположение следующего оператора для выполнения. Можно изменить следующий оператор для выполнения, переместив этот наконечник. Можно пропустить часть кода или вернуться к предыдущей строке. Перемещение указателя полезно в таких ситуациях, как пропуск раздела кода, содержащего известную ошибку.

 ![Перемещение указателя](../debugger/media/dbg_basics_example3.gif "Перемещение указателя")

Чтобы изменить следующий оператор для выполнения, отладчик должен находиться в режиме приостановки. В окне исходного кода или **дизассемблирования** перетащите желтую стрелку на другую строку или щелкните правой кнопкой мыши строку, которую нужно выполнить, и выберите команду **задать следующий оператор**.

Счетчик программы переходит непосредственно к новому расположению, и инструкции между старой и новой точками выполнения не выполняются. Однако если переместить точку выполнения назад, промежуточные инструкции не будут отменены.

>[!CAUTION]
>- Перемещение следующего оператора на другую функцию или область обычно приводит к повреждению стека вызова, вызывая ошибку времени выполнения или исключение. При попытке перемещения следующего оператора в другую область, отладчик открывает диалоговое окно с предупреждением и предоставляет возможность отменить операцию.
>- В Visual Basic нельзя переместить следующий оператор на другую область или функцию.
>- Если при использовании машинного кода C++ включены проверки времени выполнения, установка следующего оператора может вызвать исключение, когда выполнение достигнет конца метода.
>- При включенной операции "Изменить и продолжить" команда **Задать следующий оператор** завершится неудачей, если вы внесете изменения, которые операция "Изменить и продолжить" не сможет немедленно применить. Например, это может произойти, если были внесены изменения внутри блока catch. В этом случае появляется сообщение об ошибке, сообщающее, что операция не поддерживается.
>- В управляемом коде нельзя перемещать следующий оператор, если:
>   - Следующий оператор находится в методе, отличном от метода текущего оператора.
>   - Отладка была запущена JIT-отладкой.
>   - Выполняется очистка стека вызовов.
>   - Вызвано исключение System.StackOverflowException или System.Threading.ThreadAbortException.

## <a name="BKMK_Restrict_stepping_to_Just_My_Code"></a>Отладка кода, не относящегося к пользователю

По умолчанию отладчик пытается выполнить отладку только кода приложения, включив параметр с именем *только мой код*. Дополнительные сведения о работе этой функции для различных типов проектов и языков, а также о способах их настройки см. в разделе [только мой код](../debugger/just-my-code.md).

Для просмотра кода платформы, стороннего кода библиотеки или системных вызовов во время отладки можно отключить Только мой код. В **меню средства** (или **отладка**) > **Параметры**  > **отладки**снимите флажок **включить только мой код** . Если Только мой код отключена, в окнах отладчика отображается код, не являющийся пользовательским, и отладчик может выполнить шаг с заходом в код, не являющийся пользовательским.

> [!NOTE]
> Режим "Только мой код" не поддерживается для проектов устройств.

### <a name="debug-system-code"></a>Отладка системного кода

Если вы загрузили отладочные символы для системного кода Майкрософт и отключили Только мой код, можно выполнить шаг с заходом в системный вызов так же, как любой другой вызов.

Сведения о загрузке символов Майкрософт см. в разделе [Настройка расположений символов и параметров загрузки](specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md#configure-symbol-locations-and-loading-options).

**Чтобы загрузить символы для определенного системного компонента, выполните следующие действия.**

1. Во время отладки откройте окно **модули** , выбрав **Отладка**  > **модули** **Windows**  >  или нажав клавиши **CTRL** +**ALT** +**U**.

1. В окне **модули** можно указать, какие модули содержат символы, загруженные в столбец **Состояние символов** . Щелкните правой кнопкой мыши модуль, для которого требуется загрузить символы, и выберите пункт **загрузить символы**.

## <a name="BKMK_Step_into_properties_and_operators_in_managed_code"></a> Шаг с заходом в свойства и операторы в управляемом коде
 По умолчанию отладчик обходит свойства и операторы при пошаговом выполнении в управляемом коде. В большинстве случаев это делает отладку более удобной и эффективной. Чтобы включить пошаговое выполнение свойств или операторов, выберите **отладка**  > **Параметры**. На странице **Отладка** > **Общие** снимите флажок **Обход свойств и операторов (только управляемый код)** .

## <a name="see-also"></a>См. также
- [Что такое отладка?](../debugger/what-is-debugging.md)
- [Методы и инструменты отладки](../debugger/write-better-code-with-visual-studio.md)
- [Первый взгляд на отладку](../debugger/debugger-feature-tour.md)
