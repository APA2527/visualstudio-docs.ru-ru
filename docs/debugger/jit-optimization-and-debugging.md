---
title: JIT-оптимизация и отладка | Документация Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- debugging [Visual Studio], optimized code
- optimized code, debugging
ms.assetid: 19bfabf3-1a2e-49dc-8819-a813982e86fd
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 12752acf75da70fa30666f9b1780256c94bde859
ms.sourcegitcommit: 5f6ad1cefbcd3d531ce587ad30e684684f4c4d44
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/22/2019
ms.locfileid: "72731621"
---
# <a name="jit-optimization-and-debugging"></a>JIT-отладка и оптимизация
**Как работает оптимизация в .NET:** Если вы пытаетесь выполнить отладку кода, проще, если этот код **не** оптимизирован. Это обусловлено тем, что при оптимизации кода компилятор и среда выполнения вносит изменения в выпущенный код ЦП, чтобы он выполнялся быстрее, но имеет менее прямое сопоставление с исходным исходным кодом. Это означает, что отладчикам часто не удается сообщить значения локальных переменных, а выполнение кода и точки останова могут работать не так, как нужно.

Как правило, Конфигурация сборки выпуска создает оптимизированный код, а отладочная конфигурация сборки — нет. @No__t_0 свойство MSBuild определяет, нужно ли компилятору оптимизировать код.

В экосистеме .NET код помещается из источника в инструкции ЦП в два этапа: сначала C# компилятор преобразует введенный текст в промежуточную двоичную форму с именем MSIL и записывает ее в DLL-файлы. Позже среда выполнения .NET преобразует этот код MSIL в инструкции ЦП. Оба действия можно оптимизировать до некоторой степени, но второй шаг, выполняемый средой выполнения .NET, выполняет более значительные оптимизации.

**Параметр "ПОДАВЛЯТЬ JIT-оптимизацию при загрузке модуля (только управляемый)":** Отладчик предоставляет параметр, который управляет тем, что происходит, когда библиотека DLL, скомпилированная с включенной оптимизацией, загружается внутри целевого процесса. Если этот флажок не установлен (состояние по умолчанию), то когда среда выполнения .NET компилирует код MSIL в код ЦП, она оставляет оптимизацию включенной. Если флажок установлен, отладчик запрашивает отключение оптимизации.

Чтобы найти параметр **Отключить JIT-оптимизацию при загрузке модуля (только управляемый)** , выберите **Сервис**  > **Параметры**, а затем выберите страницу **Общие** в узле **Отладка** .

**Когда необходимо установить этот флажок:** Установите этот флажок, если вы загрузили библиотеки DLL из другого источника, например пакета NuGet, и хотите отладить код в этой библиотеке DLL. Чтобы это работало, необходимо также найти файл символов (. pdb) для этой библиотеки DLL.

Если вас интересует только отладка кода, который вы создаете локально, лучше оставить этот флажок снятым, как в некоторых случаях включение этого параметра значительно замедляет отладку. Это замедляется по двум причинам.

* Оптимизированный код выполняется быстрее. Если вы отключаете оптимизацию для большого объема кода, это может повлиять на производительность.
* Если Только мой код включен, отладчик даже не будет пытаться загрузить символы для оптимизированных DLL-библиотек. Поиск символов может занять много времени.

**Ограничения этого варианта:** Существует две ситуации, когда этот параметр **не** будет работать:

1. В ситуациях, когда отладчик присоединяется к уже выполняющемуся процессу, этот параметр не влияет на модули, которые уже были загружены во время подключения отладчика.
2. Этот параметр не влияет на библиотеки DLL, которые были предварительно скомпилированы (a. k. нжен'ед) в машинный код. Однако вы можете отключить использование предварительно скомпилированного кода, запустив процесс с переменной среды "COMPlus_ZapDisable", установленной в значение "1".

## <a name="see-also"></a>См. также
- [Отладка управляемого кода](../debugger/debugging-managed-code.md)
- [Навигация по коду с помощью отладчика](../debugger/navigating-through-code-with-the-debugger.md)
- [Подключение к выполняющимся процессам](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)
- [Процесс управляемого выполнения](/dotnet/standard/managed-execution-process)
