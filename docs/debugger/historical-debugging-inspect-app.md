---
title: Проверка приложения с помощью исторической отладки | Документация Майкрософт
description: Проведите анализ с использованием исторической отладки IntelliTrace для отслеживания ошибок в консольном приложении C#.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: how-to
ms.assetid: 629b5d93-39b2-430a-b8ba-d2a47fdf2584
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: d51327f67429071d08f6dfd02c0ec0a1fc55822f
ms.sourcegitcommit: 40d758f779d42c66cb02ae7face8a62763a8662b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/14/2020
ms.locfileid: "97398705"
---
# <a name="inspect-your-app-with-intellitrace-historical-debugging-in-visual-studio-c-visual-basic-c"></a>Проверка приложения с помощью исторической отладки IntelliTrace в Visual Studio (C#, Visual Basic, C++)

[Историческая отладка](../debugger/historical-debugging.md) позволяет переходить назад и вперед по выполнению приложения и проверять его состояние.

IntelliTrace можно использовать в выпуске Visual Studio Enterprise, но не в выпусках Professional или Community.

## <a name="navigate-your-code-with-historical-debugging"></a>Перемещение по коду при выполнении исторической отладки

Начнем с простой программы, содержащей ошибку. В консольном приложении C# добавьте следующий код:

```csharp
static void Main(string[] args)
{
    int testInt = 0;
    int resultInt = AddAll(testInt);
    Console.WriteLine(resultInt);
}
private static int AddAll(int j)
{
    for (int i = 0; i < 20; i++)
    {
        j = AddInt(j);
    }
    return j;
}

private static int AddInt(int add)
{
    if (add == 10)
    {
        return add += 25;
    }
    return ++add;
}
```

Предположим, что ожидаемое значение `resultInt` после вызова `AddAll()` — 20 (результат увеличения `testInt` в 20 раз). (Также предположим, что ошибка не отображается в `AddInt()`.) Но фактическим результатом будет 44. Как можно найти ошибку без обращения к `AddAll()` 10 раз? Отладка с ведением журнала позволяет находить ошибки быстро и просто. Это делается так.

1. Последовательно выбрав **Сервис > Параметры > IntelliTrace > Общие**, убедитесь, что инструмент IntelliTrace включен, выберите **события IntelliTrace и вызовите параметр информирования**. Если этот параметр не выбран, область навигации отображаться не будет (как описано ниже).

2. Установите точку останова на строке `Console.WriteLine(resultInt);` .

3. Приступите к отладке. Код выполняется до точки останова. В окне **Локальные** можно увидеть, что значение `resultInt` равно 44.

4. Откройте окно **Средства диагностики** (**Отладка > Показать средства диагностики**). Окно кода должно выглядеть следующим образом.

    ![Окно кода в точке останова](../debugger/media/historicaldebuggingbreakpoint.png "HistoricalDebuggingBreakpoint")

5. Рядом с левым полем непосредственно над точкой останова отображается двойная стрелка. Эта область называется областью навигации и используется для отладки с ведением журнала. Щелкните стрелку.

    В окне кода предыдущая строка кода (`int resultInt = AddIterative(testInt);`) выделена розовым цветом. Над окном отображается сообщение, информирующее о включенном режиме отладки с ведением журнала.

    Теперь окно кода выглядит следующим образом.

    ![окно кода в режиме отладки с ведением журнала](../debugger/media/historicaldebuggingback.png "HistoricalDebuggingBack")

6. Теперь можно выполнить шаг с заходом в метод `AddAll()` (**F11** или нажмите кнопку **Шаг с заходом** в области навигации). Выполните шаг вперед (**F10** или нажмите кнопку **Перейти к следующему вызову** в области навигации). Теперь розовая строка находится на строке `j = AddInt(j);`. Нажатие клавиши **F10** в этом случае выполняет переход к следующей строке кода. Вместо этого осуществляется вызов следующей функции. Отладка с ведением журнала переходит от вызова к вызову и пропускает строки кода, которые не включают вызов функции.

7. Выполните шаг с заходом в метод `AddInt()`. Вы сразу же увидите ошибку в этом коде.

## <a name="next-steps"></a>Следующие шаги

В этой процедуре приведен лишь краткий обзор всех действий, выполняемых в рамках отладки с ведением журнала.

- Дополнительные сведения о просмотре моментальных снимков см. в разделе [Проверка предыдущих состояний приложения с помощью IntelliTrace](../debugger/view-historical-application-state.md).
- Дополнительные сведения о различных параметрах и действиях кнопок в области навигации см. в разделе [Возможности IntelliTrace](../debugger/intellitrace-features.md).
