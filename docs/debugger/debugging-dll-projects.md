---
title: Отладка проектов библиотеки DLL | Документация Майкрософт
ms.date: 11/06/2018
ms.topic: conceptual
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- debugging DLLs
- templates, debugging DLLs
- DLLs, debugging
- debugging [Visual Studio], DLLs
ms.assetid: 433cab30-d191-460b-96f7-90d2530ca243
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: c22da2a31be1389ca0b60df6cc64ac6c9155ad69
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62852491"
---
# <a name="debug-dlls-in-visual-studio-c-c-visual-basic-f"></a>Отладка библиотек DLL в Visual Studio (C#, C++, Visual Basic, F#)

Библиотеки DLL (библиотека динамической компоновки) — это библиотека, которая содержит код и данные, которые могут использоваться более одного приложения. Можно использовать Visual Studio для создания, сборки, настройки и отладка библиотек DLL.

## <a name="create-a-dll"></a>Создать библиотеку DLL

Указанные ниже шаблоны проектов Visual Studio можно создать библиотеки DLL:

- C#, Visual Basic или F# библиотека классов
- C#или Visual Basic Windows Forms библиотеки элементов управления (WCF)
- C++ динамически подключаемой библиотеки (DLL)

Дополнительные сведения см. в разделе [Методы отладки MFC](../debugger/mfc-debugging-techniques.md).

Отладка библиотеки WCF аналогична отладке библиотеку классов. Дополнительные сведения см. в разделе [элементов управления Windows Forms](/dotnet/framework/winforms/controls/index).

Обычно библиотека DLL вызывается из другого проекта. При отладке вызывающего проекта, в зависимости от конфигурации DLL, можно шаг с заходом и отлаживать код библиотеки DLL.

## <a name="vxtskdebuggingdllprojectschangingdefaultconfigurations"></a> Конфигурации отладки библиотеки DLL

При использовании шаблона проекта Visual Studio для создания приложения на основе [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] автоматически создает необходимые параметры для отладочной и окончательной конфигурации построения. При необходимости можно изменить эти параметры. Дополнительные сведения см. в следующих статьях:

- [Параметры проекта для конфигурации отладки C++](../debugger/project-settings-for-a-cpp-debug-configuration.md)
- [Параметры проекта для конфигураций отладки C#](../debugger/project-settings-for-csharp-debug-configurations.md)
- [Параметры проекта для конфигурации отладки Visual Basic](../debugger/project-settings-for-a-visual-basic-debug-configuration.md)
- [Практическое руководство. Конфигурации отладки и выпуска](../debugger/how-to-set-debug-and-release-configurations.md)

### <a name="set-c-debuggableattribute"></a>Задайте C++ DebuggableAttribute

Для присоединения отладчика к библиотеки DLL на C++, C++ код должен иметь `DebuggableAttribute`.

**Чтобы задать `DebuggableAttribute`:**

1. Выберите проект библиотеки DLL на C++ в **обозревателе решений** и выберите **свойства** значок, или щелкните правой кнопкой мыши проект и выберите **свойства**.

1. В **свойства** панели в разделе **компоновщика** > **Отладка**выберите **Да (/ ASSEMBLYDEBUG)** для  **Отлаживаемая сборка**.

Дополнительные сведения см. в разделе [/ASSEMBLYDEBUG](/cpp/build/reference/assemblydebug-add-debuggableattribute).

### <a name="vxtskdebuggingdllprojectsexternal"></a> Задать расположение библиотеки DLL на C/C++

Для отладки внешних в библиотеке DLL, должен иметь возможность найти библиотеку DLL, вызывающему проекту его [PDB-файл](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)и все остальные файлы, необходимой библиотеке DLL. Можно создать настраиваемой задачи сборки для копирования этих файлов для вашего  *\<папки проекта > \Debug* выходную папку, или вы можете скопировать файлы существует вручную.

Для проектов C/C++ можно задать заголовка и LIB расположение на страницах свойств проекта, не копируя их в выходную папку.

**Чтобы задать C/C++ расположение файлов заголовка и LIB:**

1. Выберите проект библиотеки DLL на C/C++ в **обозревателе решений** и выберите **свойства** значок, или щелкните правой кнопкой мыши проект и выберите **свойства**.

1. В верхней части **свойства** панели в разделе **конфигурации**выберите **все конфигурации**.

1. В разделе **C/C++** > **Общие** > **Дополнительные каталоги включаемых файлов**, укажите папку, которая содержит файлы заголовков.

1. В разделе **компоновщика** > **Общие** > **Дополнительные каталоги библиотек**, укажите папку, которая имеет LIB-файлы.

1. В разделе **компоновщика** > **ввода** > **Дополнительные зависимости**, укажите полный путь и имя файла LIB-файлы.

1. Нажмите кнопку **ОК**.

Дополнительные сведения о параметрах проекта C++ см. в разделе [страницы свойств (Visual C++)](/cpp/ide/property-pages-visual-cpp).

## <a name="vxtskdebuggingdllprojectsbuildingadebugversion"></a> Построение отладочной версии

Убедитесь в том, что для сборки отладочной версии библиотеки DLL, перед запуском отладки. Для отладки DLL, чтобы вызывающее приложение должно сможет найти его [PDB-файл](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md) и любыми другими файлами, необходимой библиотеке DLL.

Можно создать настраиваемой задачи сборки для копирования DLL-файлов в вашей  *\<вызова папки проекта > \Debug* выходную папку, или вы можете скопировать файлы существует вручную.

Убедитесь в том, что вызов библиотеки DLL в правильное расположение. Это может казаться очевидным, но если вызывающее приложение находит и загружает другую копию библиотеки DLL, отладчик не достигнет точки останова, заданные.

## <a name="vxtskdebuggingdllprojectswaystodebugthedll"></a> Отладку библиотеки DLL

Не удается запустить библиотеку DLL напрямую. Его необходимо вызывать с помощью приложения обычно *.exe* файл. Дополнительные сведения см. в разделе [Создание и управление проектами Visual C++](/cpp/ide/creating-and-managing-visual-cpp-projects).

Для отладки DLL, вы можете [запуск отладки из вызывающего приложения](#vxtskdebuggingdllprojectsthecallingapplication), или [отладку из проекта DLL](how-to-debug-from-a-dll-project.md) , указав его вызывающего приложения. Можно также использовать отладчик [окно "Интерпретация"](#vxtskdebuggingdllprojectstheimmediatewindow) для оценки функций DLL или методов во время разработки, без использования вызывающего приложения.

Дополнительные сведения см. в разделе [сначала посмотрим, отладчик](../debugger/debugger-feature-tour.md).

### <a name="vxtskdebuggingdllprojectsthecallingapplication"></a> Запуск отладки из вызывающего приложения

Приложение, которое вызывает библиотеку DLL может быть:

- Приложения из [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] проекта в том же или другом решении из библиотеки DLL.
- Существующее приложение, которое уже развернуто и не запущен на тестовом или рабочем компьютере.
- Программа расположена в Интернете и доступна по URL–адресу.
- Веб-приложения с веб-страницей, которая внедрена библиотека DLL.

Для отладки DLL из вызывающего приложения, вы можете:

- Откройте проект для вызывающего приложения и запустите отладку посредством выбора **Отладка** > **начать отладку** или нажав клавиши **F5**.

  или

- Подключить отладчик к приложению, уже установлена и запущена на тестовом или рабочем компьютере. Используйте этот метод для библиотек DLL, на веб-сайтах или в веб-приложениях. Дополнительные сведения см. в разделе [Как Присоединение к выполняемому процессу](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md).

Прежде чем начать отладку вызывающего приложения, установите точку останова в библиотеке DLL. См. в разделе [использование точек останова](../debugger/using-breakpoints.md). При попадании библиотеки DLL, следует выполнить код, наблюдая действия в каждой строке. Дополнительные сведения см. в разделе [Навигация по коду в отладчике](../debugger/navigating-through-code-with-the-debugger.md).

Во время отладки, можно использовать **модули** окно, чтобы проверить, DLL и *.exe* файлы загрузкой приложения. Чтобы открыть **модули** окне во время отладки, выберите **Отладка** > **Windows** > **модули**. Дополнительные сведения см. в разделе [Как использовать окно модулей](../debugger/how-to-use-the-modules-window.md).

### <a name="vxtskdebuggingdllprojectstheimmediatewindow"></a> Используйте окно "Интерпретация"

Можно использовать **Интерпретация** окно для оценки функций DLL или методов во время разработки. **Интерпретация** окно играет роль вызывающего приложения.

>[!NOTE]
>Можно использовать **Интерпретация** окна во время разработки с большинством типов проектов. Не поддерживается для SQL, веб-проектов или сценария.

Например, чтобы проверить метод с именем `Test` в классе `Class1`:

1. Откройте проект библиотеки DLL, а затем откройте **Интерпретация** окно, выбрав **Отладка** > **Windows** > **Интерпретация**или нажав клавиши **Ctrl**+**Alt**+**я**.

1. Создать экземпляр объекта типа `Class1` , введя следующую C# код в **Интерпретация** окно и нажмите клавишу **ввод**. Этот управляемый код работает для C# и Visual Basic, с соответствующими изменениями синтаксиса:

   ```csharp
   Class1 obj = new Class1();
   ```

   В C# все имена должны быть указаны полностью. Любые методы или переменные должен быть в текущей области и контекста при попытке вычислить выражение языковой службы.

1. Предположим, что `Test` принимает один параметр `int` , вычислим `Test` с помощью окна **Интерпретация** :

   ```csharp
   ?obj.Test(10);
   ```

   Выводит результат в **Интерпретация** окна.

1. Можно продолжить отладку `Test`, установив в нем точку останова, а затем снова вычислив эту функцию.

   Точка останова будет достигнута, и можно пошагово выполнить `Test`. После выполнения `Test`, отладчик вернется в режим разработки.

## <a name="vxtskdebuggingdllprojectsmixedmodedebugging"></a> Отладка в смешанном режиме

Чтобы вызывающее приложение можно написать для библиотеки DLL в управляемый или машинный код. Если ваше собственное приложение вызывает управляемую библиотеку DLL, и требуется для отладки, вы можете включить управляемый и машинный отладчики в свойствах проекта. Конкретная процедура зависит от того, хотите ли вы запустить отладку из проекта DLL или вызывающего проекта приложения. Дополнительные сведения см. в разделе [Как Отладка в смешанном режиме](../debugger/how-to-debug-in-mixed-mode.md).

Также можно отлаживать собственная библиотека DLL из управляемого вызывающего проекта. Дополнительные сведения см. в разделе [отладка управляемого и машинного кода](how-to-debug-managed-and-native-code.md).

## <a name="see-also"></a>См. также
- [Отладка управляемого кода](../debugger/debugging-managed-code.md)
- [Типы проектов Visual C++](../debugger/debugging-preparation-visual-cpp-project-types.md)
- [Типы проектов C#, F# и Visual Basic](../debugger/debugging-preparation-csharp-f-hash-and-visual-basic-project-types.md)
- [Параметры проекта для конфигурации отладки C++](../debugger/project-settings-for-a-cpp-debug-configuration.md)
- [Параметры проекта для конфигураций отладки C#](../debugger/project-settings-for-csharp-debug-configurations.md)
- [Параметры проекта для конфигурации отладки Visual Basic](../debugger/project-settings-for-a-visual-basic-debug-configuration.md)
- [Безопасность отладчика](../debugger/debugger-security.md)
