---
title: Проверка переменных — окна "видимые" и "Локальные" | Документация Майкрософт
ms.custom: seodec18
ms.date: 10/18/2018
ms.topic: conceptual
f1_keywords:
- vs.debug.autos
- vs.debug.locals
helpviewer_keywords:
- debugger, variable windows
- debugging [Visual Studio], variable windows
ms.assetid: bb6291e1-596d-4af0-9f22-5fd713d6b84b
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: b159f631534135ac568fb03dbffa46ae0360fc47
ms.sourcegitcommit: 0b90e1197173749c4efee15c2a75a3b206c85538
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/07/2019
ms.locfileid: "74904110"
---
# <a name="inspect-variables-in-the-autos-and-locals-windows"></a>Проверка переменных в окнах "видимые" и "Локальные"

В окнах " **видимые** " и " **локальные** " отображаются значения переменных во время отладки. Окна доступны только во время сеанса отладки. В окне **видимые** отображаются переменные, используемые вокруг текущей точки останова. В окне **локальные** отображаются переменные, определенные в локальной области, которая обычно является текущей функцией или методом. Если вы впервые пытались выполнить отладку кода, вам может потребоваться ознакомиться с [отладкой для начинающих](../debugger/debugging-absolute-beginners.md) , а также [методов и средств отладки](../debugger/write-better-code-with-visual-studio.md) , прежде чем переходить к этой статье.

 Окно **видимые** доступно для C#, Visual Basic, C++и кода Python, но не для JavaScript или. F#

Чтобы открыть окно **видимые** во время отладки, выберите **Отладка** > **Windows** > **авто**или нажмите клавиши **CTRL**+**ALT**+**V** > **A**.

Чтобы открыть окно **локальные** , во время отладки выберите **Отладка** > **Windows** > **локальные переменные**или нажмите клавиши **ALT**+**4**.

> [!NOTE]
> Этот раздел относится к Visual Studio в Windows. Visual Studio для Mac см. [в разделе Визуализация данных в Visual Studio для Mac](/visualstudio/mac/data-visualizations).

## <a name="use-the-autos-and-locals-windows"></a>Использование окон "видимые" и "Локальные"

Массивы и объекты отображаются в окнах " **видимые** " и " **локальные** " как элементы управления "дерево". Щелкните стрелку слева от имени переменной, чтобы развернуть представление для отображения полей и свойств. Ниже приведен пример объекта <xref:System.IO.FileStream?displayProperty=fullName> в окне **локальные** :

![Локальные объекты — FileStream](../debugger/media/locals-filestream.png "Locals-FileStream")

Значение красного цвета в окне **локальные** или **видимые** означает, что значение изменилось с момента последней оценки. Изменение может быть из предыдущего сеанса отладки или из-за изменения значения в окне.

Числовой формат по умолчанию в окнах отладчика — Decimal. Чтобы изменить его на шестнадцатеричный, щелкните правой кнопкой мыши в окне **локальные** или **видимые** и выберите **шестнадцатеричное отображение**. Это изменение затрагивает все окна отладчика.

## <a name="edit-variable-values-in-the-autos-or-locals-window"></a>Изменение значений переменных в окне "видимые" или "Локальные"

Чтобы изменить значения большинства переменных в окнах " **видимые** " или " **локальные** ", дважды щелкните значение и введите новое значение.

В качестве значения можно ввести выражение, например `a + b`. Отладчик принимает большинство допустимых выражений языка.

При работе с машинным кодом C++ может потребоваться определить контекст имени переменной. Дополнительные сведения см. в разделе [Оператор контекста (C++)](../debugger/context-operator-cpp.md).

>[!CAUTION]
>Прежде чем изменять значения и выражения, убедитесь, что вы понимаете последствия этих последствий. Возможны следующие проблемы.
>
>- Вычисление некоторых выражений может привести к изменению значения некоторой переменной или иным образом повлиять на состояние программы. Например, оценка `var1 = ++var2` изменяет значение как `var1`, так и `var2`. Говорят, что эти выражения имеют [побочные эффекты](https://en.wikipedia.org/wiki/Side_effect_\(computer_science\)). Побочные эффекты могут привести к непредвиденным результатам, если вы не знаете их.
>
>- Изменение значений с плавающей запятой может привести к незначительной погрешности, связанной с преобразованием дробных компонентов из десятичной формы в двоичную. Даже в результате небезопасная Правка может привести к изменениям некоторых битов в переменной с плавающей запятой.

::: moniker range=">= vs-2019" 
## <a name="search-in-the-autos-or-locals-window"></a>Поиск в окне "видимые" или "Локальные"

Вы можете искать ключевые слова в столбцах Имя, значение и тип окна **видимые** или **локальные переменные** , используя панель поиска над каждым окном. Нажмите клавишу ВВОД или выберите одну из стрелок, чтобы выполнить поиск. Чтобы отменить текущий поиск, щелкните значок "x" на панели поиска.

Используйте стрелки влево и вправо (Shift + F3 и F3 соответственно) для перехода между найденными совпадениями.

![Поиск в окне "Локальные"](../debugger/media/ee-search-locals.png "Поиск в окне "Локальные"")

Чтобы сделать поиск более или менее подробным, используйте раскрывающееся меню **Поиск** в верхней части окна " **видимые** " или " **локальные** ", чтобы выбрать степень детализации уровней, на которые нужно выполнить поиск во вложенных объектах. 

## <a name="pin-properties-in-the-autos-or-locals-window"></a>Закрепление свойств в окне "видимые" или "Локальные"

> [!NOTE]
> Эта функция поддерживается для .NET Core 3,0 или более поздней версии.

Можно быстро проверить объекты по их свойствам в окнах "видимые" и "Локальные" с помощью инструмента " **свойства также прикрепляемые** ".  Чтобы использовать это средство, наведите указатель мыши на свойство и выберите значок закрепления или щелкните правой кнопкой мыши и в появившемся контекстном меню выберите пункт **закрепить элемент как избранный** .  Это помещает это свойство в верхнюю часть списка свойств объекта, а имя и значение свойства отображается в столбце **значение** .  Чтобы открепить свойство, щелкните значок закрепления еще раз или выберите пункт **закрепить член как избранный** в контекстном меню.

![Закрепление свойств в окне "Локальные"](../debugger/media/basic-pin.gif "Закрепление свойств в окне "Локальные"")

Можно также переключать имена свойств и отфильтровывать незакрепленные свойства при просмотре списка свойств объекта в окнах "видимые" или "Локальные".  Доступ к каждому параметру можно получить, нажав кнопки на панели инструментов над окнами «видимые» или «локальные».

![Фильтрация избранных свойств](../debugger/media/filter-pinned-properties-locals.png "Фильтрация избранных свойств")
![Переключить имена свойств](../debugger/media/toggle-property-names.gif "Переключить имена свойств")

::: moniker-end

## <a name="change-the-context-for-the-autos-or-locals-window"></a>Изменение контекста для окна "видимые" или "Локальные"

С помощью панели инструментов **место отладки** можно выбрать нужную функцию, поток или процесс, который изменяет контекст для окон « **видимые** » и « **локальные** ».

Чтобы включить панель инструментов " **место отладки** ", щелкните пустую часть области панели инструментов и выберите пункт **Расположение отладки** из раскрывающегося списка или выберите **вид** > **панели инструментов** > **Расположение отладки**.

Задайте точку останова и начните отладку. При попадании в точку останова выполнение приостанавливается, и вы видите расположение на панели инструментов **место отладки** .

![Панель инструментов расположения отладки](../debugger/media/debuglocationtoolbar.png "Панель инструментов Место отладки")

## <a name="bkmk_whatvariables"></a>Переменные в окне "видимые"C#( C++,, Visual Basic, Python)

Разные языки кода отображают разные переменные в окне **видимые** .

- При использовании C# или Visual Basic в окне **Видимые** отображаются все переменные, используемые в текущей или предыдущей строках. Например, в C# или Visual Basic коде объявите следующие четыре переменные:

   ```csharp
       public static void Main()
       {
          int a, b, c, d;
          a = 1;
          b = 2;
          c = 3;
          d = 4;
       }
   ```

   Установите точку останова в строке `c = 3;`и запустите отладчик. Когда выполнение приостанавливается, в окне **видимые** отображается следующее:

   ![Autos — CSharp](../debugger/media/autos-csharp.png "Autos-CSharp")

   Значение `c` равно 0, так как строка `c = 3` еще не была выполнена.

- В C++окно **видимые** отображает переменные, используемые по крайней мере в трех строках перед текущей строкой, где выполнение приостанавливается. Например, в C++ коде объявите шесть переменных:

   ```C++
       void main() {
           int a, b, c, d, e, f;
           a = 1;
           b = 2;
           c = 3;
           d = 4;
           e = 5;
           f = 6;
       }
   ```

    Установите точку останова в строке `e = 5;` и запустите отладчик. Когда выполнение останавливается, в окне **видимые** отображается следующее:

    ![ВидимыеC++](../debugger/media/autos-cplus.png "ВидимыеC++")

    Переменная `e` не инициализирована, так как строка `e = 5` еще не была выполнена.

## <a name="bkmk_returnValue"></a> View return values of method calls
 В .NET и C++ Code можно проверять возвращаемые значения в окне **видимые** при пошаговом выполнении шага или выхода из вызова метода. Просмотр возвращаемых значений вызова метода может быть полезен, если они не хранятся в локальных переменных. Метод можно использовать в качестве параметра или как возвращаемое значение другого метода.

 Например, следующий C# код добавляет возвращаемые значения двух функций:

```csharp
static void Main(string[] args)
{
    int a, b, c, d;
    a = 1;
    b = 2;
    c = 3;
    d = 4;
    int x = sumVars(a, b) + subtractVars(c, d);
}

private static int sumVars(int i, int j)
{
    return i + j;
}

private static int subtractVars(int i, int j)
{
    return j - i;
}
```

Чтобы просмотреть возвращаемые значения `sumVars()` и `subtractVars()` вызовы методов в окне "видимые":

1. Установите точку останова на строке `int x = sumVars(a, b) + subtractVars(c, d);` .

1. Начните отладку и, когда выполнение приостанавливается в точке останова, выберите **Шаг с обходом** или нажмите клавишу **F10**. В окне **видимые** должны отобразиться следующие возвращаемые значения:

  ![Возвращаемое значение автозаменыC#](../debugger/media/autosreturnvaluecsharp2.png "Возвращаемое значение автозаменыC#")

## <a name="see-also"></a>См. также:

- [Что такое отладка?](../debugger/what-is-debugging.md)
- [Методы и инструменты отладки](../debugger/write-better-code-with-visual-studio.md)
- [Первый взгляд на отладку](../debugger/debugger-feature-tour.md)
- [Окна отладчика](../debugger/debugger-windows.md)
