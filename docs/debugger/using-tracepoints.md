---
title: Использование точек трассировки в отладчике | Документация Майкрософт
ms.date: 9/17/2019
ms.topic: conceptual
helpviewer_keywords:
- tracepoints, about tracepoints
author: Sagar-S-S
ms.author: sashe
manager: AndSter
ms.workload:
- multiple
ms.openlocfilehash: 263657213f1720eaca7a0462bb31585adaacf9bb
ms.sourcegitcommit: 8a96a65676fd7a2a03b0803d7eceae65f3fa142b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/18/2019
ms.locfileid: "72516392"
---
# <a name="use-tracepoints-in-the-visual-studio-debugger"></a>Использование точек трассировки в отладчике Visual Studio

Точки трассировки позволяют записывать данные в окно вывода в области настраиваемые условия без изменения или остановки кода. Эта функция поддерживается как для управляемого, так и для машинного кода, а также для нескольких C#языков, таких как JavaScript и.

## <a name="let39s-take-an-example"></a>&#39;Возьмем пример

Следующий пример программы — это простой цикл `for` с переменной счетчика, которая увеличивается на единицу каждый раз, когда цикл выполняет другую итерацию.

![Пример счетчика](../debugger/media/counterexample.png "Пример счетчика")

## <a name="set-tracepoints-in-source-code"></a>Установка точек трассировки в исходном коде

Точки трассировки можно задать, указав выходную строку под флажком **действие** в окне **Параметры точки останова** .

1. Чтобы инициализировать точку трассировки, сначала щелкните переплет слева от номера строки, в которой необходимо задать точку трассировки.

   ![Инициализация точки останова](../debugger/media/breakpointinitialization.png "Инициализация точки останова")

2. Наведите указатель мыши на красный круг и щелкните значок шестеренки.
3. Откроется окно **Параметры точки останова** .

   ![Окно точки останова](../debugger/media/breakpointwindow.png "Окно точки останова")

4. Установите флажок **действие** .

   ![Поле "проверяемые действия"](../debugger/media/checkedactionsbox.png "Поле "проверяемые действия"")

   Обратите внимание, что красный кружок изменяется на ромб, что означает переключение с точки останова на точку трассировки.

5. Введите сообщение, в которое нужно войти, в текстовом поле **окно вывода** (Дополнительные сведения см. в последующих разделах этой статьи).

   Теперь точка трассировки установлена. Нажмите кнопку &quot;Close &quot;, если все, что нужно сделать, зарегистрирует некоторые сведения в окно вывода.

6. Если вы хотите добавить условия, определяющие, отображается ли ваше сообщение, установите флажок **условия** .

   ![Флажок "проверяемые условия"](../debugger/media/checkedconditionsbox.png "Флажок "проверяемые условия"")

   Существует три варианта условий: **условное выражение**, **Фильтр**и **число попаданий**.

## <a name="actions-menu"></a>Меню "действия"

Это меню позволяет записывать сообщения в окно вывода. Введите строки, которые необходимо вывести в окно сообщения (кавычки не требуются). Если нужно отобразить значения переменных, обязательно заключите его в фигурные скобки.

Например, если необходимо отобразить значение переменной `counter` в консоли вывода, введите {Counter} в текстовом поле сообщение.

![Выходное сообщение счетчика](../debugger/media/counteroutputmessage.png "Выходное сообщение счетчика")

Если нажать кнопку **Закрыть** , а затем отладить программу (**F5**), в окне Вывод выводится следующий результат.

![Сообщение действий в окно вывода](../debugger/media/actionsmessageinoutputwindow.png "Сообщение действий в окно вывода")

Для просмотра более конкретных сведений можно также использовать специальные ключевые слова. Введите ключевое слово точно так, как показано ниже (используйте "$" перед каждым ключевым словом и все прописные для самого ключевого слова).

| Ключевое слово | Что отображается |
| --- | --- |
| $ADDRESS | Текущая инструкция |
| $CALLER | Имя вызывающей функции |
| $CALLSTACK | Стек вызовов |
| $FUNCTION | Имя текущей функции |
| $PID | Идентификатор процесса |
| $PNAME | Имя процесса |
| $TID | Идентификатор потока |
| $TNAME   | Имя потока |
| $TICK | Счетчик тактов (из Windows Жеттикккаунт) |

## <a name="conditions-menu"></a>Меню условий

Условия позволяют фильтровать исходящие сообщения, поэтому они отображаются только в определенных сценариях. Вам доступны три основных типа условий.

### <a name="conditional-expression"></a>Условное выражение
Для условного выражения выводится выходное сообщение только при соблюдении определенных условий.

Для условных выражений можно либо задать для точки трассировки вывод сообщения, если определенное условие имеет значение true или когда оно изменилось. Например, если требуется отобразить значение счетчика только во время итераций цикла `for`, можно выбрать параметр **имеет значение true** , а затем ввести `i%2 == 0` в текстовое поле сообщение.

![Условное выражение имеет значение true](../debugger/media/conditionalexpressionistrue.png "Условное выражение имеет значение true")

Если требуется напечатать значение счетчика при изменении итерации `for`ного цикла, выберите параметр **при изменении** и введите `i` в текстовое поле сообщение.

![Условное выражение при изменении](../debugger/media/conditionalexpressionwhenchanged.png "Условное выражение при изменении")

Поведение параметра **при изменении** отличается для разных языков программирования.

- Для машинного кода отладчик не учитывает первое вычисление условия как изменение, поэтому не достигает точки трассировки при первом вычислении.
- Для управляемого кода отладчик обращается к точке отслеживания при первом вычислении после выбора **изменения** .

Более полный обзор допустимых выражений, которые можно использовать при задании условий, см. [в разделе выражения в отладчике](expressions-in-the-debugger.md).

### <a name="hit-count"></a>Число попаданий
Условие числа попаданий позволяет отсылать выходные данные только после того, как строка кода, в которой задана точка трассировки, выполнялась указанное число раз.

Для счетчика обращений можно выбрать вывод сообщения, когда строка кода, в которой задана точка трассировки, выполнена несколько раз, равном, является кратным или больше или равно указанному значению числа попаданий. Выберите наиболее подходящий вариант и введите целочисленное значение в поле (например, 5), представляющее требуемую итерацию.

![Число попаданий условных выражений](../debugger/media/conditionalexpressionhitcount.png "Число попаданий условных выражений")

### <a name="filter"></a>Фильтр
Для условия фильтра укажите устройства, процессы или потоки, для которых отображается выходные данные.

![Фильтр условных выражений](../debugger/media/conditionalexpressionfilter.png "Фильтр условных выражений")

Список критериев фильтра:

- MachineName = "имя"
- ProcessId = значение
- ProcessName = "имя"
- ThreadId = значение
- ThreadName = "имя"

Заключите строки (например, имена) в двойные кавычки. Значения можно указывать без кавычек. Предложения можно объединять с помощью `&` (`AND`), `||` (`OR`), `!` (`NOT`) и круглых скобок.

## <a name="considerations"></a>Особенности

Хотя точки трассировки предназначены для отладки более четкого и более плавного интерфейса, существуют некоторые соображения, которые следует учитывать при их использовании.

Иногда при проверке свойства или атрибута объекта его значение может измениться. Это не ошибка, вызванная самой функцией трассировки, но стоит упомянуть, что использование точек отслеживания для проверки объектов не позволяет избежать этих случайных изменений.

Способ вычисления выражений в окне сообщения **действия** может отличаться от языка, который в настоящее время используется для разработки. Например, чтобы вывести строку, не нужно заключать сообщение в кавычки, даже если обычно используется `Debug.WriteLine()` или `console.log()`. Кроме того, синтаксис фигурных скобок (`{ }`) для выражений вывода также может отличаться от соглашения о выводе значений на языке разработки. (Однако содержимое в фигурных скобках (`{ }`) по-прежнему должно быть написано с использованием синтаксиса языка разработки).

Если вы пытаетесь отладить активное приложение и ищете аналогичную функцию, ознакомьтесь с нашим компонентом точка ведения журнала в Snapshot Debugger. Отладчик моментальных снимков — это средство, используемое для исследования проблем в рабочих приложениях. Точек ведения журнала также позволяет отправить сообщения в окно вывода без изменения исходного кода и не влияет на работу приложения. Дополнительные сведения см. в разделе [Отладка активного приложения Azure](../debugger/debug-live-azure-applications.md).

## <a name="see-also"></a>См. также

- [Что такое отладка?](../debugger/what-is-debugging.md)
- [Написание C# лучшего кода с помощью Visual Studio](../debugger/write-better-code-with-visual-studio.md)
- [Первый взгляд на отладку](../debugger/debugger-feature-tour.md)
- [Выражения в отладчике](expressions-in-the-debugger.md)
- [Использование точек останова](../debugger/using-breakpoints.md)
- [Отладка динамических приложений Azure](../debugger/debug-live-azure-applications.md)
