---
title: Удаленная отладка .NET Core в Linux | Документация Майкрософт
ms.date: 02/26/2020
ms.topic: conceptual
helpviewer_keywords:
- remote debugging, linux
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 23bc0fa990a79b1855ec382f42248a0f847c3c9c
ms.sourcegitcommit: 3d64bfb9bf85395357effe054db9a9afaa0be5ea
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/29/2020
ms.locfileid: "78200869"
---
# <a name="remote-debug-net-core-on-linux-using-ssh"></a>Удаленная отладка .NET Core в Linux с помощью SSH

Начиная с Visual Studio 2017 можно присоединяться к процессам .NET Core, работающим в Linux, по протоколу SSH. В этой статье описывается настройка и выполнение процесса отладки.

## <a name="prerequisites"></a>Предварительные требования

На компьютере Visual Studio необходимо установить рабочую нагрузку **ASP.NET и разработка веб-приложений** или **Кроссплатформенная разработка .NET Core**.

На сервере Linux необходимо установить SSH-сервер (распакуйте и установите его с помощью curl или wget). Например, в Ubuntu это можно сделать, запустив:

``` cmd
sudo apt-get install openssh-server unzip curl
```

## <a name="build-and-deploy-the-application"></a>Создание и развертывание приложения.

Подготовка приложения для отладки

- При сборке приложения рассмотрите возможность использования конфигурации "Отладка". Отладка кода, скомпилированного для розничного выпуска (конфигурация "Выпуск"), намного сложнее, чем отладка кода, скомпилированного для отладочного выпуска. Если необходимо использовать конфигурацию "Выпуск", сначала отключите режим "Только мой код". Чтобы отключить этот параметр, последовательно выберите **Сервис** > **Параметры** > **Отладка**, а затем снимите флажок **Включить только мой код**.

- Убедитесь, что проект настроен на создание [переносимых PDB-файлов](https://github.com/OmniSharp/omnisharp-vscode/wiki/Portable-PDBs) (параметр по умолчанию), что PDB-файлы находятся в том же расположении, что и библиотека DLL. Чтобы выполнить эту настройку в Visual Studio, щелкните проект правой кнопкой мыши, затем выберите **Свойства** > **Сборка** > **Дополнительно** > **Отладочная информация**.

Для развертывания приложения перед отладкой можно использовать несколько методов. Например, с их помощью можно выполнять следующее.

- Скопируйте источники на целевой компьютер и выполните сборку с помощью ```dotnet build``` на компьютере Linux.

- Выполните сборку приложения в Windows, а затем перенесите артефакты сборки на компьютер Linux. (Артефакты сборки состоят из самого приложения, любых библиотек среды выполнения, от которых он может зависеть, и файла *.deps.json*.)

## <a name="attach-the-debugger"></a>Подключение отладчика

После настройки компьютеров запустите приложение на компьютере Linux — теперь все готово к подключению отладчика.

1. В Visual Studio последовательно выберите пункты **Отладка** > **Присоединиться к процессу...** .

1. В списке **Тип подключения** выберите **SSH**.

1. В поле **Цель подключения** укажите IP-адрес или имя узла целевого компьютера.

1. Найдите процесс, который нужно отладить.

   Код выполняется в процессе с уникальным именем или в процессе с именем dotnet. Чтобы найти требуемый процесс, просмотрите столбец **Заголовок**, в котором отображаются аргументы командной строки для процесса.

   В следующем примере показан список процессов на удаленном компьютере Linux, подключенных по протоколу SSH, отображаемых в диалоговом окне **Присоединение к процессу**.

   ![Присоединение к процессу Linux](media/remote-debug-linux-over-ssh-attach.png)

1. Выберите **Присоединиться**.

1. В появившемся диалоговом окне выберите тип кода для отладки. Выберите **Управляемый (.NET Core для Unix)** .

1. Используйте функции отладки Visual Studio для отладки приложения.

   В следующем примере отладчик Visual Studio остановлен в точке останова в коде, выполняющемся на удаленном компьютере Linux.

   ![Попадание в точку останова](media/remote-debug-linux-over-ssh-hit-breakpoint.png)