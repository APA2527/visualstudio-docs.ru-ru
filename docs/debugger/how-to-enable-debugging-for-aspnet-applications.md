---
title: Включить отладку для приложений ASP.NET | Документация Майкрософт
ms.custom: ''
ms.date: 09/21/2018
ms.topic: conceptual
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- debugging ASP.NET Web applications
- Web.config configuration file, debug mode
- debugging [Visual Studio], ASP.NET
ms.assetid: 3beed819-cece-4864-8184-bd410000973a
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- aspnet
ms.openlocfilehash: a6f20a2272214a525b00ebf07ebc6e5e803b138c
ms.sourcegitcommit: 257fc60eb01fefafa9185fca28727ded81b8bca9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2019
ms.locfileid: "72911354"
---
# <a name="debug-aspnet-or-aspnet-core-apps-in-visual-studio"></a>Отладка ASP.NET или ASP.NET Core приложений в Visual Studio

Вы можете выполнять отладку ASP.NET и ASP.NET Core приложений в Visual Studio. Этот процесс отличается от ASP.NET и ASP.NET Core и от того, выполняется ли он на IIS Express или на локальном сервере IIS.

>[!NOTE]
>Следующие шаги и параметры применяются только к отладке приложений на локальном сервере. Отладка приложений на удаленном сервере IIS использует **Присоединение к процессу**и игнорирует эти параметры. Дополнительные сведения и инструкции по удаленной отладке приложений ASP.NET в службах IIS см. в разделе [Удаленная отладка ASP.NET на компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md) или [удаленная отладка ASP.NET Core на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-computer.md).

Встроенный IIS Express Server входит в состав Visual Studio. IIS Express является сервером отладки по умолчанию для проектов ASP.NET и ASP.NET Core и предварительно настроен. Это самый простой способ отладки и идеально подходит для первоначальной отладки и тестирования.

Можно также выполнить отладку ASP.NET или ASP.NET Core приложения на локальном сервере IIS (версии 8,0 или более поздней), настроенном для запуска приложения. Для отладки на локальных службах IIS необходимо соблюдать следующие требования.

<a name="iis"></a>
- Выберите **время разработки поддержка IIS** при установке Visual Studio. (При необходимости перезапустите Visual Studio Installer, выберите **изменить**и добавьте этот компонент.)
- Запустите Visual Studio от имени администратора.
- Установите и правильно настройте службы IIS с соответствующими версиями ASP.NET и (или) ASP.NET Core. Дополнительные сведения и инструкции см. в статьях [iis 8,0 с использованием ASP.NET 3,5 и ASP.NET 4,5](/iis/get-started/whats-new-in-iis-8/iis-80-using-aspnet-35-and-aspnet-45) или [ASP.NET Core узла в Windows со службами IIS](/aspnet/core/host-and-deploy/iis/index).
- Убедитесь, что приложение работает в службах IIS без ошибок.

## <a name="debug-aspnet-apps"></a>Отладка ASP.NET приложений

IIS Express по умолчанию и предварительно настроены. При отладке в локальных службах IIS убедитесь в соблюдении [требований для локальной отладки IIS](#iis).

1. Выберите проект ASP.NET в Visual Studio **Обозреватель решений** и щелкните значок **Свойства** , нажмите клавиши **ALT**+**Ввод**или щелкните правой кнопкой мыши и выберите пункт **Свойства**.

1. Перейдите на вкладку **веб** .

1. В области **Свойства** в разделе **серверы**,
   - В поле IIS Express выберите **IIS Express** из раскрывающегося списка.
   - Для локальных служб IIS
     1. В раскрывающемся списке выберите **локальные службы IIS** .
     1. Рядом с полем **URL-адрес проекта** выберите **создать виртуальный каталог**, если вы еще не настроили приложение в службах IIS.

1. В разделе **Отладчики**выберите **ASP.NET**.

   ![Параметры отладчика ASP.NET](media/dbg-aspnet-enable-debugging2.png "Параметры отладчика ASP.NET")

1. Чтобы сохранить изменения, используйте **файл** > **Сохранить выбранные элементы** или **CTRL**+**S** .

1. Чтобы выполнить отладку приложения, в проекте установите точки останова в коде. На панели инструментов Visual Studio убедитесь, что для параметра Конфигурация задано значение **Отладка**, а нужный браузер отображается в **IIS Express (имя\<браузера >)** или **Local IIS (\<имя обозревателя >)** в поле эмулятор.

1. Чтобы начать отладку, выберите **IIS Express (имя\<браузера >)** или **Local IIS (\<имя браузера >)** на панели инструментов, выберите **начать отладку** в меню **Отладка** или нажмите клавишу **F5**. Отладчик приостанавливается на точках останова. Если отладчик не может попасть в точки останова, см. раздел [Устранение неполадок отладки](#troubleshoot-debugging).

## <a name="debug-aspnet-core-apps"></a>Отладка ASP.NET Core приложений

IIS Express по умолчанию и предварительно настроены. При отладке в локальных службах IIS убедитесь в соблюдении [требований для локальной отладки IIS](#iis).

1. Выберите проект ASP.NET Core в Visual Studio **Обозреватель решений** и щелкните значок **Свойства** , нажмите клавиши **ALT**+**Enter**или щелкните правой кнопкой мыши и выберите пункт **Свойства**.

1. Выберите вкладку **Отладка**.

1. В области **Свойства** рядом с пунктом **профиль**,
   - В поле IIS Express выберите **IIS Express** из раскрывающегося списка.
   - Для локальных служб IIS выберите имя приложения из раскрывающегося списка или выберите **создать, создайте**новое имя профиля и нажмите кнопку **ОК**.

1. Рядом с пунктом **Запуск**выберите либо **IIS Express** , либо **IIS** из раскрывающегося списка.

1. Убедитесь, что установлен флажок **запустить браузер** .

1. В разделе **переменные среды**убедитесь, что для **ASPNETCORE_ENVIRONMENT** задано значение **Разработка**. В противном случае выберите **Добавить** и добавьте.

   ![Параметры отладчика ASP.NET Core](../debugger/media/dbg-aspnet-enable-debugging3.png "Параметры отладчика ASP.NET Core")

1. Чтобы сохранить изменения, используйте **файл** > **Сохранить выбранные элементы** или **CTRL**+**S** .

1. Чтобы выполнить отладку приложения, в проекте установите точки останова в коде. На панели инструментов Visual Studio убедитесь, что для параметра Конфигурация задано значение **Отладка**, и в поле эмулятора отобразится **IIS Express**или новое имя профиля IIS.

1. Чтобы начать отладку, выберите **IIS Express** или **\<имя профиля IIS >** на панели инструментов, выберите **начать отладку** в меню **Отладка** или нажмите клавишу **F5**. Отладчик приостанавливается на точках останова. Если отладчик не может попасть в точки останова, см. раздел [Устранение неполадок отладки](#troubleshoot-debugging).

## <a name="troubleshoot-debugging"></a>Устранение неполадок отладки

Если локальная отладка IIS не может быть запущена в точке останова, выполните следующие действия для устранения неполадок.

1. Запустите веб-приложение из IIS и убедитесь, что оно выполняется правильно. Оставьте веб-приложение работающим.

2. В Visual Studio выберите **отладка > присоединить к процессу** или нажмите клавиши **Ctrl**+**ALT**+**P**и подключитесь к процессу ASP.NET или ASP.NET Core (обычно **w3wp. exe** или **DotNet. exe**). Дополнительные сведения см. в разделе [Присоединение к процессу](attach-to-running-processes-with-the-visual-studio-debugger.md) и [поиск имени процесса ASP.NET](how-to-find-the-name-of-the-aspnet-process.md).

Если вы можете подключиться к точке останова и попасть на нее с помощью команды **присоединить к процессу**, но не с помощью **Debug** > **начать отладку** или **клавишу F5**, возможно, в свойствах проекта указано неверное значение параметра. Если используется файл HOSTs, убедитесь, что он также настроен правильно.

## <a name="configure-debugging-in-the-webconfig-file"></a>Настройка отладки в файле Web. config

Проекты ASP.NET по умолчанию имеют файлы *Web. config* , которые содержат сведения о конфигурации и запуске приложения, включая параметры отладки. Файлы *Web. config* должны быть правильно настроены для отладки. Параметры **свойств** в предыдущих разделах обновляют файлы *Web. config* , но их также можно настроить вручную.

> [!NOTE]
> Проекты ASP.NET Core изначально не имеют файлов *Web. config* , но используют файлы *appSettings. JSON* и *launchSettings. JSON* для настройки приложения и сведений о запуске. При развертывании приложения в проекте создаются файл *Web. config* или файлы, но они обычно не содержат отладочную информацию.

> [!TIP]
> Процесс развертывания может обновить параметры *Web. config* , поэтому перед попыткой отладки убедитесь, что *файл Web. config* настроен для отладки.

**Чтобы вручную настроить файл *Web. config* для отладки, выполните следующие действия.**

1. В Visual Studio откройте файл *Web. config* проекта ASP.NET.

2. *Web. config* — это XML-файл, поэтому содержит вложенные разделы, помеченные тегами. Найдите раздел `configuration/system.web/compilation`. (Если элемент `compilation` не существует, создайте его.)

3. Убедитесь, что атрибуту `debug` в элементе `compilation` присвоено значение `true`. (Если элемент `compilation` не содержит атрибут `debug`, добавьте его и задайте для него значение `true`.)

   Если вместо сервера IIS Express по умолчанию используется Local IIS, убедитесь, что значение атрибута `targetFramework` в элементе `compilation` соответствует платформе на сервере IIS.

   Элемент `compilation` файла *Web. config* должен выглядеть, как в следующем примере:

   > [!NOTE]
   > Этот пример является частичным файлом *Web. config* . В `configuration` и `system.web` обычно есть дополнительные разделы XML, а элемент `compilation` также может содержать другие атрибуты и элементы.

   ```xml
   <configuration>
      ...
      <system.web>
          <compilation  debug="true"  targetFramework="4.6.1" ... >
             ...
          </compilation>
      </system.web>
   </configuration>
   ```

[!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] автоматически обнаруживает изменения в файлах *web.config* и применяет новые параметры конфигурации. Для вступления изменений в силу нет необходимости перезагружать компьютер или сервер IIS.

Веб-сайт может содержать несколько виртуальных каталогов и подкаталогов с файлами *Web. config* в каждом из них. [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] приложения наследуют параметры конфигурации от файлов *Web. config* на более высоких уровнях URL-пути. Параметры иерархического файла *Web. config* применяются ко всем [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)]ным приложениям, расположенным ниже в иерархии. Задание другой конфигурации в файле *Web. config* , расположенном ниже в иерархии, переопределяет параметры в более высоком файле.

Например, если указать `debug="true"` в <em>www.Microsoft.com/AAA/Web.config</em>, любое приложение в папке *AAA* или в любой вложенной папке *AAA* наследует этот параметр, кроме случаев, когда одно из этих приложений переопределяет параметр своим собственным *Web. config.* File.

## <a name="publish-in-debug-mode-using-the-file-system"></a>Публикация в режиме отладки с помощью файловой системы

Существует несколько способов публикации приложений в службах IIS. В этих шагах показано, как создать и развернуть профиль публикации отладки с помощью файловой системы. Для этого необходимо запустить Visual Studio от имени администратора.

> [!IMPORTANT]
> При изменении кода или перестроении необходимо повторить эти шаги для повторной публикации.

1. В Visual Studio щелкните правой кнопкой мыши проект и выберите **опубликовать**.

3. Выберите **IIS, FTP и т. д.** и нажмите кнопку **опубликовать**.

    ![Публикация в службах IIS](media/dbg-aspnet-local-iis.png "Публикация в службах IIS")

4. В диалоговом окне **кустомпрофиле** для **метода опубликовать**выберите **Файловая система**.

5. В качестве **целевого расположения**нажмите кнопку **Обзор** ( **...** ).

   - Для ASP.NET выберите **локальные службы IIS**, выберите веб-сайт, созданный для приложения, и нажмите кнопку **Открыть**.

     ![Публикация в ASP.NET в IIS](media/dbg-aspnet-local-iis1.png "Публикация ASP.NET в службах IIS")

   - Для ASP.NET Core выберите **Файловая система**, выберите папку, настроенную для приложения, и нажмите кнопку **Открыть**.

1. Выберите **Далее**.

1. В разделе **Конфигурация**выберите **Отладка** из раскрывающегося списка.

1. Нажмите кнопку **Сохранить**.

1. В диалоговом окне **Публикация** убедитесь, что **кустомпрофиле** (или имя только что созданного профиля) отображается, а для **ластуседбуилдконфигуратион** задано значение **Отладка**.

1. Нажмите **Публиковать**.

    ![Публикация в службах IIS](media/dbg-aspnet-local-iis-select-site.png "Публикация в службах IIS")

> [!IMPORTANT]
> Режим отладки значительно сокращает производительность приложения. Для лучшей производительности задайте `debug="false"` в *файле Web. config* и укажите сборку выпуска при развертывании рабочего приложения или при выполнении измерений производительности.

## <a name="see-also"></a>См. также
- [Отладка ASP.NET: системные требования](aspnet-debugging-system-requirements.md)
- [Практическое руководство. Выполнение рабочего процесса с учетной записью пользователя](how-to-run-the-worker-process-under-a-user-account.md)
- [Практическое руководство. Поиск имени процесса ASP.NET](how-to-find-the-name-of-the-aspnet-process.md)
- [Отладка развернутых веб-приложений](debugging-deployed-web-applications.md)
- [Пошаговое руководство: отладка веб-формы](walkthrough-debugging-a-web-form.md)
- [Практическое руководство. Отладка исключений ASP.NET](how-to-debug-aspnet-exceptions.md)
- [Отладка веб-приложений: ошибки и устранение неполадок](debugging-web-applications-errors-and-troubleshooting.md)
