---
title: Просмотреть обсуждения в отладчике | Документация Майкрософт
ms.date: 10/29/2018
ms.topic: conceptual
f1_keywords:
- vs.debug.threads
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- threading [Visual Studio], debugging
- Thread.Name property
- debugger, Threads window
- SetThreadName function
- Threads window
- '@TIB'
- debugging [Visual Studio], threads
ms.assetid: 590ffd57-0556-43d8-8962-ee27e5b2b7d7
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: fddd8efd11d2a3d61f0cff33cb832ebd8a0c5d2a
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63406938"
---
# <a name="view-threads-in-the-visual-studio-debugger-by-using-the-threads-window-c-visual-basic-c"></a>Просмотреть обсуждения в отладчике Visual Studio с помощью окна потоков (C#, Visual Basic, C++)
В **потоков** окна, можно проверить и работа с потоками в отлаживаемое приложение. Пошаговое руководство по использованию **потоков** окно, см. в разделе [Пошаговое руководство: Отладка с помощью окна потоков](../debugger/how-to-use-the-threads-window.md).

## <a name="use-the-threads-window"></a>Использование окна потоков
 **Потоков** окно содержит таблицу, где каждая строка описывает отдельный поток в приложении. По умолчанию в таблице перечисляются все потоки приложения, но можно фильтровать этот список, чтобы в нем показывались только нужные потоки. Каждый столбец описывает свой тип сведений. Можно также скрывать некоторые столбцы. Если отображаются все столбцы, отображаются следующие столбцы слева направо:

- **Флаг**: В этом столбце без метки можно пометить поток, к которому требуется уделить особое внимание. Сведения о способе пометки потока см. в разделе [как: Снять отметку с потока и отметки](../debugger/how-to-flag-and-unflag-threads.md).

- **Текущий поток**: В этом столбце без метки желтая стрелка указывает текущий поток. Контур стрелки указывает текущий контекст отладчика для потока не является текущей.

- **ИДЕНТИФИКАТОР**: Идентификационный номер для каждого потока.

- **Управляемый идентификатор**: Отображает управляемые идентификационные номера управляемых потоков.

- **Категория**: Отображает категорию потоков потоки пользовательского интерфейса, обработчики вызова удаленной процедуры и рабочие потоки. Особая категория идентифицирует главный поток приложения.

- **Имя**: Определяет каждый поток по имени, если он имеется, или как \<No Name >.

- **расположение**: Показывает, где поток выполняется. Можно развернуть это расположение, чтобы отобразить полный стек вызова для потока.

- **Приоритет**: Дополнительным столбцом и (скрытый по умолчанию), отображающий приоритет или приоритет, назначенный системой каждому потоку.

- **Affinity Mask**: Дополнительным столбцом и (скрытый по умолчанию) показывает маску соответствия для каждого потока. В многопроцессорной системе маска сходства определяет, какой процессор в каком потоке может работать.

- **Счетчик приостановок**: Дополнительным столбцом и (скрытый по умолчанию) Отображает счетчик приостановок. Этот счетчик определяет, может ли поток выполняться. Дополнительные сведения о приостановленной счетчиках см. в разделе [заморозить и Разморозить потоки](#freeze-and-thaw-threads).

- **Имя процесса**: Дополнительным столбцом и (скрытый по умолчанию), отображающий процесс, к которому принадлежит каждый поток. Данные в этом столбце можно использовать при отладке много процессов.

- **Идентификатор процесса**: Дополнительным столбцом и (скрытый по умолчанию), который отображает идентификатор процесса, к которому принадлежит каждый поток.

- **Квалификатор транспортного протокола**: Дополнительным столбцом и (скрытый по умолчанию), уникальным образом идентифицирует компьютер, к которому подключен отладчик.

### <a name="to-display-the-threads-window-in-break-mode-or-run-mode"></a>Открытие окна потоков в режиме приостановки или в режиме выполнения

- Когда Visual Studio находится в режиме отладки, выберите **Отладка** последовательно выберите пункты **Windows**, а затем выберите **потоков**.

### <a name="to-display-or-hide-a-column"></a>Отображение или скрытие столбца

- На панели инструментов в верхней части **потоков** выберите **столбцы**. Затем выберите или очистите имя столбца, который требуется отобразить или скрыть.

## <a name="display-flagged-threads"></a>Отображение помеченных потоков
 Поток, которому планируется уделить особое внимание, можно пометить, поставив рядом с ним значок в окне **Потоки**. Дополнительные сведения см. в разделе [Как устанавливать и снимать отметки для потока](../debugger/how-to-flag-and-unflag-threads.md). В окне **Потоки** можно выбрать отображение всех потоков или только помеченных потоков.

### <a name="to-display-only-flagged-threads"></a>Отображение только помеченных потоков

- Выберите **Показать потоков только помеченные** на панели инструментов в верхней части **потоков** окна. (Если он недоступен, необходимо сначала пометить некоторые потоки).

## <a name="freeze-and-thaw-threads"></a>Замораживание и размораживание потоков
 Если поток заморожен, система не запускается выполнение потока, даже если они есть.

 В машинном коде, можно приостановить или возобновить потоков путем вызова функций Windows `SuspendThread` и `ResumeThread`. Или вызывать функции MFC [CWinThread::SuspendThread](/cpp/mfc/reference/CWinThread-class#suspendthread) и [CWinThread::ResumeThread](/cpp/mfc/reference/CWinThread-class#resumethread). При вызове метода `SuspendThread` или `ResumeThread`, *счетчик приостановок* показано **потоков** окно будет изменен. Приостановленный счетчик не изменяется, замораживание или размораживание собственного потока. Поток не может выполняться в машинном коде, если он является размороженным и имеет счетчик приостановок со значением 0.

 В управляемом коде счетчик приостановок изменяется, если вы замораживание или размораживание потока. Если поток заморожен в управляемом коде, ее счетчик приостановок со значением-1. Если поток заморожен в машинном коде, его счетчик приостановок со значением равно 0, если вы не использовали `SuspendThread` вызова.

> [!NOTE]
> При отладке вызова управляемого кода из машинного кода управляемый код выполняется в том же физическом потоке, что и вызывающий его машинный код. Приостановка выполнения или замораживание присущего данному объекту кода приводит также к замораживанию управляемого кода.

### <a name="to-freeze-or-thaw-execution-of-a-thread"></a>Заморозка и разморозка выполнения потока

- На панели инструментов в верхней части **потоков** выберите **Заморозить потоки** или **Разморозить потоки**.

     Это действие влияет только на потоки, выбранные в окне **Потоки**.

### <a name="switch-to-another-thread"></a>Переключение на другой поток

Желтая стрелка указывает текущий поток (и расположение указатель выполнения). Зеленая стрелка с фигурным концом указывает, что не являющиеся текущими поток имеет контекст текущего отладчика.

#### <a name="to-switch-to-another-thread"></a>Для переключения на другой поток

- Выполните одно из следующих действий.

    - Дважды щелкните любой поток.

    - Щелкните правой кнопкой мыши поток и выберите **коммутатора для потока**.

## <a name="group-and-sort-threads"></a>Группировка и Сортировка потоков
 При группировании потоков в таблице появляется заголовок для каждой группы. В заголовке содержится описание группы, например **Рабочие потоки** или **Непомеченные потоки**, и элемент управления "Дерево". Потоки-элементы каждой группы отображаются под заголовком группы. Если вы хотите скрыть потоки-элементы для группы, используйте элемент управления дерева, чтобы свернуть группу.

 Поскольку группирование имеет приоритет перед сортировкой, можно, например, группировать потоки по категориям, а затем по идентификаторам внутри каждой категории.

### <a name="to-sort-threads"></a>Сортировка потоков

1. На панели инструментов в верхней части **потоков** окно, нажмите кнопку в верхней части любого столбца.

     Теперь потоки отсортированы по значениям в этом столбце.

2. Если вы хотите изменить порядок сортировки, выберите ту же кнопку еще раз.

     Потоки, которые отображались вверху списка, теперь отображаются внизу.

### <a name="to-group-threads"></a>Группирование потоков

- В **потоков** панели инструментов в окне выберите **группировать по** , а затем выберите условия, которые требуется группировать потоки.

### <a name="to-sort-threads-within-groups"></a>Сортировка потоков в группах

1. На панели инструментов в верхней части **потоков** выберите **группировать по** , а затем выберите условия, которые требуется группировать потоки.

2. В **потоков** окно, нажмите кнопку в верхней части любого столбца.

     Теперь потоки отсортированы по значениям в этом столбце.

### <a name="to-expand-or-collapse-all-groups"></a>Сворачивание и разворачивание всех групп

- На панели инструментов в верхней части **потоков** выберите **развернуть группы** или **свернуть группы**.

## <a name="search-for-specific-threads"></a>Поиск конкретных потоков
 Можно искать потоки, соответствующие указанной строке в **потоков** окна. При поиске потоков в окне отображаются все обсуждения, соответствующие строке поиска в любом столбце. Эти сведения включают расположение потока, которое отображается вверху стека вызова в столбце **Расположение**. По умолчанию не поиск полный стек вызова.

### <a name="to-search-for-specific-threads"></a>Поиск конкретных потоков

1. В панели инструментов, находящейся в верхней части окна **Потоки**, перейдите в поле **Поиск** и выполните одно из следующих действий:

     - Введите строку поиска, а затем нажмите клавишу **ввод**.

     \- или -

     - Выберите стрелку раскрывающегося списка рядом с полем **поиска** поле и выберите строку поиска из предыдущего поиска.

2. Чтобы включить в поиск полный стек вызова, выберите **Поиск в стеке вызова** (необязательно).

## <a name="display-thread-call-stacks-and-switch-between-frames"></a>Отображение стека вызовов потоков и переключение между кадрами
В многопотоковых программах каждый поток имеет свой собственный стек вызовов. Окно **Потоки** обеспечивает удобный способ просмотра этих стеков.

> [!TIP]
> Визуальное представление стека вызовов для каждого потока, используйте [Параллельные стеки](../debugger/get-started-debugging-multithreaded-apps.md) окна.

### <a name="to-view-the-call-stack-of-a-thread"></a>Просмотр стека вызовов потока

- В **расположение** столбец, выберите перевернутый треугольник рядом с расположением потока.

     Расположение будет развернуто, и будет отображен стек вызова для потока.

### <a name="to-view-or-collapse-the-call-stacks-of-all-threads"></a>Просмотр и сворачивание стеков вызовов всех потоков

- На панели инструментов в верхней части **потоков** выберите **развернуть стеки вызовов** или **свернуть стеки вызовов**.

## <a name="see-also"></a>См. также
- [Отладка многопоточных приложений](../debugger/debug-multithreaded-applications-in-visual-studio.md)
- [Начало отладки многопоточных приложений](../debugger/get-started-debugging-multithreaded-apps.md)