---
title: Советы и рекомендации в отладчике
description: Сведения о некоторых менее известных функциях, поддерживаемых отладчиком Visual Studio
ms.custom: seodec18
ms.date: 06/15/2018
ms.topic: conceptual
helpviewer_keywords:
- stepping
- debugging [Visual Studio], execution control
- execution, controlling in debugger
ms.assetid: 5262d8b1-2648-429e-85d5-90fcaadfb362
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 92d1c327c168bfd2881ad014b7f9ab87f771b95d
ms.sourcegitcommit: 08c144d290da373df841f04fc799e3133540a541
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2019
ms.locfileid: "72536075"
---
# <a name="learn-productivity-tips-and-tricks-for-the-debugger-in-visual-studio"></a>Ознакомьтесь с советами и приемами работы с отладчиком в Visual Studio

Ознакомьтесь с этим разделом, чтобы узнать о нескольких советах и рекомендациях по повышению производительности отладчика Visual Studio. Основные возможности отладчика см. в разделе [Знакомство с отладчиком](../debugger/debugger-feature-tour.md). В этом разделе рассматриваются некоторые области, не включенные в обзор возможностей.

## <a name="pin-data-tips"></a>Советы по закреплению данных

Если вы часто наводите указатель мыши на советы по работе с данными во время отладки, вам может потребоваться закрепить подсказку данных для переменной, чтобы обеспечить быстрый доступ. Переменная остается закрепленной даже после перезапуска. Чтобы закрепить подсказку данных, щелкните значок закрепления при наведении на него курсора. Можно закрепить несколько переменных.

![Закрепление Совета по данным](../debugger/media/dbg-tips-data-tips-pinned.png "пиннингдататип")

## <a name="edit-your-code-and-continue-debugging-c-vb-c"></a>Изменение кода и продолжение отладки (C#, VB,) C++

В большинстве языков, поддерживаемых Visual Studio, можно изменять код во время сеанса отладки, а затем продолжать отладку. Для использования этой функции щелкните код, чтобы установить в нем курсор, когда отладчик приостановлен, внесите изменения и нажмите клавишу **F5**, **F10** или **F11**, чтобы продолжить отладку.

![Изменить и продолжить отладку](../debugger/media/dbg-tips-edit-and-continue.gif "едитандконтинуе")

Дополнительные сведения об этой функции и ее ограничениях см. в статье [Изменить и продолжить](../debugger/edit-and-continue.md).

## <a name="edit-xaml-code-and-continue-debugging"></a>Изменить код XAML и продолжить отладку

Сведения об изменении кода XAML во время сеанса отладки см. в статье [Создание и отладка выполняющегося кода XAML с помощью горячей перезагрузки XAML](xaml-hot-reload.md).

## <a name="debug-issues-that-are-hard-to-reproduce"></a>Проблемы отладки, которые трудно воспроизвести

Если в приложении сложно или требует много времени для повторного создания определенного состояния, определите, может ли помочь использование условной точки останова. Можно использовать [условные точки останова](../debugger/using-breakpoints.md#BKMK_Specify_a_breakpoint_condition_using_a_code_expression) и фильтровать точки останова, чтобы избежать разбиения кода приложения, пока приложение не введет нужное состояние (например, состояние, в котором переменная хранит неправильные данные). Условия можно задавать с помощью выражений, фильтров, счетчиков попаданий и т. д.

#### <a name="to-create-a-conditional-breakpoint"></a>Создание условной точки останова

1. Щелкните правой кнопкой мыши значок точки останова (красный шарик) и выберите пункт **условия**.

2. В окне **Параметры точки останова** введите выражение.

    ![Условная точка останова](../debugger/media/dbg-multithreaded-conditional-breakpoint.png "кондитионалбреакпоинт")

3. Если вы заинтересованы в другом типе условия, выберите **Фильтр** вместо **Условное выражение** в диалоговом окне **Параметры точки останова**, а затем следуйте советам для фильтра.

## <a name="configure-the-data-to-show-in-the-debugger"></a>Настройка отображения данных в отладчике

Для C#, Visual Basic и C++ (C++только для кода/CLI) можно указать отладчику, какую информацию следует отображать с помощью атрибута [DebuggerDisplay](../debugger/using-the-debuggerdisplay-attribute.md) . Для C++ кода можно выполнять те же действия с помощью [визуализаций Natvis](create-custom-views-of-native-objects.md).

## <a name="change-the-execution-flow"></a>Изменение потока выполнения

Когда отладчик приостанавливается на строке кода, используйте мышь для захвата желтого указателя со стрелкой слева. Переместите указатель желтой стрелки на другую точку в пути выполнения кода. Затем используйте клавишу F5 или команду Step, чтобы продолжить выполнение приложения.

![Перемещение указателя выполнения](../debugger/media/dbg-tour-move-the-execution-pointer.gif "Перемещение указателя выполнения")

Изменяя поток выполнения, можно решать множество задач, например тестировать различные пути выполнения кода или повторно выполнять код без перезапуска отладчика.

> [!WARNING]
> Как правило, при работе с этой функцией необходимо соблюдать осторожность — вы увидите соответствующее предупреждение во всплывающей подсказке. Могут отображаться и другие предупреждения. Перемещение указателя не может вернуть приложение в предыдущее состояние.

## <a name="track-an-out-of-scope-object-c-visual-basic"></a>Отслеживание объекта вне области действия (C#Visual Basic)

Можно легко просматривать переменные с помощью окон отладчика, таких как окно **контрольных значений** . Однако если переменная выходит за пределы области в окне **Контрольные значения** , вы можете заметить, что она неактивна. В некоторых сценариях приложений значение переменной может измениться даже в том случае, если переменная выходит за пределы области действия, и ее можно внимательно отслеживать (например, если переменная может быть получена в мусор). Вы можете отслеживать переменную, создавая для нее идентификатор объекта в окне **Контрольные значения** .

#### <a name="to-create-an-object-id"></a>Создание идентификатора объекта

1. Установите точку останова рядом с переменной, которую необходимо отслеживанию.

2. Запустите отладчик (**F5**) и завершите работу в точке останова.

3. Найдите переменную в окне **локальные** (**Отладка > Windows > Локальные переменные**), щелкните правой кнопкой мыши переменную и выберите пункт **создать идентификатор объекта**.

    ![Создание идентификатора объекта](../debugger/media/dbg-tips-watch-create-object-id.png "креатеобжектид")

4. В окне **$** вы должны увидеть символ **Локальные** . Эта переменная является ИДЕНТИФИКАТОРом объекта.

5. Щелкните правой кнопкой мыши переменную идентификатор объекта и выберите **Добавить контрольное значение**.

Дополнительные сведения см. в разделе [Создание идентификатора объекта](../debugger/watch-and-quickwatch-windows.md#bkmk_objectIds).

## <a name="view-return-values-for-functions"></a>Просмотр возвращаемых значений для функций

Чтобы просмотреть возвращаемые значения функций, просмотрите функции, которые отображаются в окне **видимые** при пошаговом выполнении кода. Чтобы просмотреть возвращаемое значение функции, убедитесь, что нужная функция уже выполнена (нажмите клавишу **F10** один раз, если в данный момент останавливается вызов функции). Если окно закрыто, используйте **отладку > Windows > Auto** , чтобы открыть окно **видимые** .

![Окно видимых переменных](../debugger/media/dbg-tips-autos-window.png "аутосвиндов")

Кроме того, можно вводить функции в окне **Интерпретация** для просмотра возвращаемых значений. (Откройте его, используя **отладку > Windows > immediate**.)

![Окно интерпретации](../debugger/media/dbg-tips-immediate-window.png "иммедиатевиндов")

[Псеудовариаблес](../debugger/pseudovariables.md) также можно использовать в окне **Контрольные значения** и **Интерпретация** , например `$ReturnValue`.

## <a name="string_visualizer"></a>Проверка строк в визуализаторе

При работе со строками может быть полезно просмотреть всю отформатированную строку. Чтобы просмотреть обычный текст, XML, HTML или строку JSON, щелкните значок лупы ![висуализерикон](../debugger/media/dbg-tips-visualizer-icon.png "Значок визуализатора") при наведении указателя мыши на переменную, содержащую строковое значение.

![Открытие визуализатора строки](../debugger/media/dbg-tips-string-visualizers.png "опенстрингвисуализер")

Визуализатор строки может помочь определить, является ли строка неверной, в зависимости от типа строки. Например, поле пустое **значение** указывает, что строка не распознается типом визуализатора. Дополнительные сведения см. в разделе [диалоговое окно визуализатора строк](../debugger/string-visualizer-dialog-box.md).

![Визуализатор строки JSON](../debugger/media/dbg-tips-string-visualizer-json.png "жсонстрингвисуализер")

Для некоторых других типов, таких как объекты DataSet и DataTable, отображаемые в окнах отладчика, можно также открыть встроенный визуализатор.

## <a name="break-into-code-on-handled-exceptions"></a>Разбиение кода на обработанные исключения

Отладчик разбивает код на необработанные исключения. Однако обработанные исключения (например, исключения, возникающие в блоке `try/catch`) также могут быть источником ошибок и, возможно, потребуется исследовать их время. Можно настроить отладчик на разбиение кода на обработку исключений, а также настройку параметров в диалоговом окне **параметры исключений** . Откройте это диалоговое окно, выбрав **отладка > параметры исключения Windows >** .

Диалоговое окно **параметры исключений** позволяет сообщить отладчику о необходимости разбиения кода на определенные исключения. На приведенном ниже рисунке отладчик разбивается на код при возникновении `System.NullReferenceException`. Дополнительные сведения см. в разделе [Управление исключениями](../debugger/managing-exceptions-with-the-debugger.md).

![Диалоговое окно «Параметры исключений»](../debugger/media/dbg-tips-exception-settings.png "ексцептионсеттингсдиалогбокс")

## <a name="debug-deadlocks-and-race-conditions"></a>Отладка взаимоблокировок и конкуренции

Если необходимо отладить типы проблем, которые являются общими для многопоточных приложений, часто бывает полезно просматривать расположение потоков во время отладки. Это можно легко сделать с помощью кнопки **отобразить потоки в исходном** виде.

#### <a name="to-show-threads-in-your-source-code"></a>Отображение потоков в исходном коде

1. Во время отладки нажмите кнопку **Показывать потоки в исходном код** ![отобразить потоки в исходном](../debugger/media/dbg-multithreaded-show-threads.png "среадмаркер") расположении на панели инструментов **Отладка** .

2. Посмотрите на переплет в левой части окна. В этой строке отображается ![маркер потока](../debugger/media/dbg-thread-marker.png "среадмаркер") значок *маркера* , который напоминает два потока ткани. маркер потока указывает, что некий поток остановлен в этом месте.

    Обратите внимание, что маркер потока может быть частично скрыт точкой останова.

3. Наведите указатель мыши на маркер потока. Появится подсказка. Подсказка сообщает имя и идентификационный номер каждого остановившегося тут потока.

    Можно также просмотреть расположение потоков в [окне Параллельные стеки](../debugger/get-started-debugging-multithreaded-apps.md).

## <a name="examine-payloads-for-web-services-and-network-resources-uwp"></a>Изучение полезных данных для веб-служб и сетевых ресурсов (UWP)

В приложениях UWP можно анализировать сетевые операции, выполняемые с помощью `Windows.Web.Http` API. Это средство можно использовать для отладки веб-служб и сетевых ресурсов. Чтобы использовать средство, выберите **отладка > профилировщик производительности**. Выберите **сеть**, а затем нажмите кнопку **запустить**. В приложении выполните нужные действия, где используется `Windows.Web.Http`, а затем щелкните **Остановка сбора**, чтобы создать отчет.

![Средство профилирования использования сети](../profiling/media/prof-tour-network-usage.png "нетворкусажепрофтул")

Выберите операцию в представлении "Сводка", чтобы просмотреть более подробные сведения.

![Подробные сведения о средстве использования сети](../profiling/media/prof-tour-network-usage-details.png "детаиледвиевнетворкусаже")

Дополнительные сведения см. в разделе [Использование сети](../profiling/network-usage.md).

## <a name="modules_window"></a>Узнайте больше о том, как отладчик прикрепляется к приложению (C#, C++, Visual Basic, F#).

Чтобы присоединиться к выполняющемуся приложению, отладчик загружает файлы символов (. pdb), созданные для той же сборки приложения, которое вы пытаетесь отладить. В некоторых сценариях может быть полезна небольшая информация о файлах символов. Вы можете проверить, как Visual Studio загружает файлы символов с помощью окна " **модули** ".

Откройте окно **модули** во время отладки, выбрав **Отладка > модули > Windows**. Окно **modules (модули** ) позволяет узнать, какие модули будут рассматриваться отладчиком как пользовательский код или [*мой код*](../debugger/just-my-code.md), а также состояние загрузки символов для модуля. В большинстве сценариев отладчик автоматически находит файлы символов для пользовательского кода, но если требуется выполнить шаг с заходом (или отладку) кода .NET, системного кода или стороннего кода библиотеки, необходимо выполнить дополнительные действия для получения правильных файлов символов.

![Просмотр сведений о символах в окне "модули"](../debugger/media/dbg-tips-modules-window.png "виевсимболинформатион")

Сведения о символах можно загрузить непосредственно из окна **модули** , щелкнув правой кнопкой мыши и выбрав пункт **загрузить символы**.

Иногда разработчики приложений поставляют приложения без соответствующих файлов символов (для уменьшения объема памяти), но сохраняют копию соответствующих файлов символов для сборки, чтобы они могли отлаживать выпущенную версию позже.

Сведения о том, как отладчик классифицирует код как пользовательский код, см. в разделе [только мой код](../debugger/just-my-code.md). Дополнительные сведения о файлах символов см. в разделе [Указание символов (. pdb) и исходных файлов в отладчике Visual Studio](specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).

## <a name="learn-more"></a>Дополнительные сведения

Дополнительные советы и рекомендации, а более подробные сведения см. в следующих записях блога:

- [7 уязвимостей, которые менее известны при отладке в Visual Studio](https://devblogs.microsoft.com/visualstudio/7-lesser-known-hacks-for-debugging-in-visual-studio/)
- [7 скрытых драгоценных камней в Visual Studio](https://devblogs.microsoft.com/visualstudio/7-hidden-gems-in-visual-studio-2017/)

## <a name="see-also"></a>См. также

[Сочетания клавиш](../ide/productivity-shortcuts.md)
