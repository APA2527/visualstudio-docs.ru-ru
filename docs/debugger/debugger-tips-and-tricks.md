---
title: Советы и приемы в отладчике
description: Узнайте о некоторых менее известных функциях, поддерживаемых отладчиком Visual Studio
ms.custom: seodec18
ms.date: 06/15/2018
ms.topic: conceptual
helpviewer_keywords:
- stepping
- debugging [Visual Studio], execution control
- execution, controlling in debugger
ms.assetid: 5262d8b1-2648-429e-85d5-90fcaadfb362
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: bf8d6df020694bb10fe4f3f051551056549d5673
ms.sourcegitcommit: 95f26af1da51d4c83ae78adcb7372b32364d8a2b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "79301179"
---
# <a name="learn-productivity-tips-and-tricks-for-the-debugger-in-visual-studio"></a>Узнайте советы по производительности и рекомендации для Debugger в визуальной студии

Прочитайте эту тему, чтобы узнать несколько советов и рекомендаций по производительности для отладчика Visual Studio. Чтобы ознакомиться с основными особенностями отладчика, [см.](../debugger/debugger-feature-tour.md) В этой теме мы рассмотрим некоторые области, которые не включены в функцию тура.

## <a name="pin-data-tips"></a>Советы по пин-кодам

Если вы часто нависаете над советами данных во время отладки, вы можете прикрепить наконечник данных для переменной, чтобы дать себе быстрый доступ. Переменная остается закрепленной даже после перезагрузки. Чтобы прикрепить наконечник данных, щелкните значок штифта, паря над ним. Можно закрепить несколько переменных.

![Закрепление наконечника данных](../debugger/media/dbg-tips-data-tips-pinned.png "PinningData Tip")

## <a name="edit-your-code-and-continue-debugging-c-vb-c"></a>Отсеяйте свой код и продолжайте отладку (C , VB, C

В большинстве языков, поддерживаемых Visual Studio, можно изменять код во время сеанса отладки, а затем продолжать отладку. Для использования этой функции щелкните код, чтобы установить в нем курсор, когда отладчик приостановлен, внесите изменения и нажмите клавишу **F5**, **F10** или **F11**, чтобы продолжить отладку.

![Изменение и продолжение отладки](../debugger/media/dbg-tips-edit-and-continue.gif "EditAndContinue")

Дополнительные сведения об этой функции и ее ограничениях см. в статье [Изменить и продолжить](../debugger/edit-and-continue.md).

## <a name="edit-xaml-code-and-continue-debugging"></a>Изналить код XAML и продолжить отладку

Сведения об изменении кода XAML во время сеанса отладки см. в статье [Создание и отладка выполняющегося кода XAML с помощью горячей перезагрузки XAML](../xaml-tools/xaml-hot-reload.md).

## <a name="debug-issues-that-are-hard-to-reproduce"></a>Проблемы для дебага, которые трудно воспроизвести

Если воссоздать определенное состояние в приложении сложно или отнимает много времени, подумайте о том, может ли помочь использование условной точки разрыва. Можно использовать [условные точки разрыва](../debugger/using-breakpoints.md#BKMK_Specify_a_breakpoint_condition_using_a_code_expression) и фильтровать точки разрыва, чтобы избежать взлома кода приложения до тех пор, пока приложение не войдет в желаемое состояние (например, состояние, в котором переменная хранит плохие данные). Можно установить условия, используя выражения, фильтры, количество попаданий и так далее.

#### <a name="to-create-a-conditional-breakpoint"></a>Создание условной точки разрыва

1. Нажмите справа на значок точки разрыва (красный шар) и выберите **условия.**

2. В окне **настройки параметра** введите выражение.

    ![Условная точка разрыва](../debugger/media/dbg-multithreaded-conditional-breakpoint.png "УсловныйПункт Разрыва")

3. Если вы заинтересованы в другом типе условия, выберите **Фильтр** вместо **Условное выражение** в диалоговом окне **Параметры точки останова**, а затем следуйте советам для фильтра.

## <a name="configure-the-data-to-show-in-the-debugger"></a>Настройка данных для отображения в отладчике

Для C, Visual Basic и C -» (только код СЗ/CLI) вы можете сообщить отладчику, какую информацию показать с помощью атрибута [DebuggerDisplay.](../debugger/using-the-debuggerdisplay-attribute.md) Для кода СЗ вы можете сделать то же самое, используя [визуализации Natvis.](create-custom-views-of-native-objects.md)

## <a name="change-the-execution-flow"></a>Изменение потока выполнения

С отладчиком, приостановленным на строке кода, используйте мышь, чтобы захватить желтую стрелку указателя слева. Переместите указатель желтой стрелки в другую точку пути выполнения кода. Затем вы используете F5 или команду шага, чтобы продолжить работу приложения.

![Перемещение указателя выполнения](../debugger/media/dbg-tour-move-the-execution-pointer.gif "Перемещение указателя выполнения")

Изменяя поток выполнения, можно решать множество задач, например тестировать различные пути выполнения кода или повторно выполнять код без перезапуска отладчика.

> [!WARNING]
> Как правило, при работе с этой функцией необходимо соблюдать осторожность — вы увидите соответствующее предупреждение во всплывающей подсказке. Могут отображаться и другие предупреждения. Перемещение указателя не может вернуть приложение к более раннему состоянию приложения.

## <a name="track-an-out-of-scope-object-c-visual-basic"></a>Отслеживайте объект вне сферы (C q, Visual Basic)

Легко просматривать переменные, используя окна отладки, такие как окно **Watch.** Однако, когда переменная выходит за рамки в окне **Watch,** вы можете заметить, что она седой. В некоторых сценариях приложений значение переменной может изменяться даже тогда, когда переменная находится вне сферы действия, и может потребоваться внимательно следить за ней (например, переменная может собирать мусор). Вы можете отслеживать переменную, создавая идентификатор объекта для нее в окне **Watch.**

#### <a name="to-create-an-object-id"></a>Создание идентификатора объекта

1. Установите точку разрыва рядом с переменной, которую вы хотите отследить.

2. Запустите отладчик **(F5)** и остановитесь в точке разрыва.

3. Найдите переменную в окне **Locals** **(Debug > Windows > Locals),** нажмите кнопку «Правой кнопкой мыши» и выберите **Make Object ID.**

    ![Создание идентификатора объекта](../debugger/media/dbg-tips-watch-create-object-id.png "CreateObjectID")

4. Вы должны **$** увидеть плюс номер в окне **Местные жители.** Эта переменная является идентификатором объекта.

5. Нажмите правой кнопкой переменной идентификатора объекта и выберите **Добавить часы**.

Для получения дополнительной информации [см.](../debugger/watch-and-quickwatch-windows.md#bkmk_objectIds)

## <a name="view-return-values-for-functions"></a>Просмотр значений возврата для функций

Чтобы просмотреть значения возврата для функций, посмотрите на функции, которые появляются в окне **Autos** во время прохождения кода. Чтобы увидеть значение возврата для функции, убедитесь, что интересуемые вами функции уже выполнены (нажмите **F10** один раз, если вы в настоящее время остановлены на вызове функции). Если окно закрыто, используйте **Debug > Windows > Autos,** чтобы открыть окно **Autos.**

![Окно авто](../debugger/media/dbg-tips-autos-window.png "AutosWindow")

Кроме того, можно ввести функции в окне **Немедленного** просмотра значений возврата. (Откройте его с помощью **> Windows > немедленно**.)

![Немедленное окно](../debugger/media/dbg-tips-immediate-window.png "Немедленноеокно")

Вы также можете использовать [псевдопеременные](../debugger/pseudovariables.md) в **watch** `$ReturnValue`и **Immediate** window, такие как .

## <a name="inspect-strings-in-a-visualizer"></a><a name="string_visualizer"></a>Проверка струн в визуализаторе

При работе со строками может быть полезно просмотреть всю отформатированную строку. Чтобы просмотреть простой текст, строку XML, HTML или JSON, щелкните значок увеличительного стекла ![VisualizerIcon,](../debugger/media/dbg-tips-visualizer-icon.png "Значок визуализатора") паря над переменной, содержащей значение строки.

![Откройте струнный визуализатор](../debugger/media/dbg-tips-string-visualizers.png "OpenStringVisualizer")

Визуализатор строки может помочь вам узнать, является ли строка порока, в зависимости от типа строки. Например, пустое поле **значения** указывает на то, что строка не распознается типом визуализатора. Для получения дополнительной информации, см [Строка Визуализатор Диалог Box](../debugger/string-visualizer-dialog-box.md).

![JSON Струнный визуализатор](../debugger/media/dbg-tips-string-visualizer-json.png "JSONStringVisualizer")

Для нескольких других типов, таких как DataSet и DataTable объекты, которые появляются в окнах отладчика, вы также можете открыть встроенный визуализатор.

## <a name="break-into-code-on-handled-exceptions"></a>Взлом кода на обрабатываемых исключениях

Отладчик врывается в ваш код при необработанных исключениях. Однако обрабатываемые исключения (например, `try/catch` исключения, возникающие в блоке) также могут быть источником ошибок, и вы можете исследовать, когда они происходят. Можно настроить отладчик для взлома кода для обрабатываемых исключений, а также настроить параметры в диалоговом окне **настройки параметров исключений.** Откройте это поле диалога, выбрав **настройки > Windows > исключения.**

Диалоговое поле **«Настройки исключений»** позволяет сообщить отладчику ворваться в код по определенным исключениям. На рисунке ниже отладчик врывается `System.NullReferenceException` в код всякий раз, когда это происходит. Для получения дополнительной [информации см.](../debugger/managing-exceptions-with-the-debugger.md)

![Параметры исключения Диалог Box](../debugger/media/dbg-tips-exception-settings.png "ИсключениеНастройкиДиалогИК")

## <a name="debug-deadlocks-and-race-conditions"></a>Отладка тупиков и условий гонки

Если вам нужно отладить типы проблем, которые являются общими для многопоточных приложений, это часто помогает просматривать местоположение потоков во время отладки. Вы можете сделать это легко с помощью **кнопки Показать темы в источнике.**

#### <a name="to-show-threads-in-your-source-code"></a>Отобрадие потоков в исходном коде

1. Во время отладки щелкните **кнопку Показать потоки в кнопке** «Отображение ![потоков в источнике»](../debugger/media/dbg-multithreaded-show-threads.png "ThreadMarker") в панели **инструментов Debug.**

2. Посмотрите на переплет в левой части окна. На этой строке вы видите ![значок](../debugger/media/dbg-thread-marker.png "ThreadMarker") *маркера потока потоков,* напоминающий две нити ткани. маркер потока указывает, что некий поток остановлен в этом месте.

    Обратите внимание, что маркер потока может быть частично скрыт точкой разрыва.

3. Наведите указатель мыши на маркер потока. Появится подсказка. Подсказка сообщает имя и идентификационный номер каждого остановившегося тут потока.

    Вы также можете просмотреть расположение потоков в [окне параллельных стеков.](../debugger/get-started-debugging-multithreaded-apps.md)

::: moniker range="vs-2017"
## <a name="examine-payloads-for-web-services-and-network-resources-uwp"></a>Изучение полезной нагрузки для веб-служб и сетевых ресурсов (UWP)

В приложениях UWP можно анализировать `Windows.Web.Http` сетевые операции, выполняемые с помощью API. Этот инструмент можно использовать для отладки веб-сервисов и сетевых ресурсов. Чтобы использовать инструмент, выберите **Debug > Производительность Производительность Профиль**. Выберите **сеть,** а затем выберите **Начало**. В приложении выполните нужные действия, где используется `Windows.Web.Http`, а затем щелкните **Остановка сбора**, чтобы создать отчет.

![Средство профилирования — использование сети](../profiling/media/prof-tour-network-usage.png "NetworkUsageProfTool")

Выберите операцию в представлении "Сводка", чтобы просмотреть более подробные сведения.

![Подробные сведения в средстве использования сети](../profiling/media/prof-tour-network-usage-details.png "DetailedViewNetworkUsage")

Дополнительные сведения см. в разделе [Использование сети](../profiling/network-usage.md).
::: moniker-end

## <a name="get-more-familiar-with-how-the-debugger-attaches-to-your-app-c-c-visual-basic-f"></a><a name="modules_window"></a>Узнайте больше о том, как отладчик прикрепляется к приложению (C q, C, Visual Basic, F)

Чтобы прикрепить к запущенному приложению, отладчик загружает символ (.pdb) файлы, генерируемые для точно такой же сборки приложения, который вы пытаетесь отладить. В некоторых сценариях, немного знаний о файлах символов может быть полезным. Вы можете изучить, как Visual Studio загружает файлы символов с помощью окна **модулей.**

Откройте окно **модулей** во время отладки, выбрав **модули debug > Windows >.** Окно **модулей** может сказать вам, какие модули отладчик рассматривает как код пользователя, или [*Мой код,*](../debugger/just-my-code.md)и статус загрузки символа для модуля. В большинстве сценариев отладчик автоматически находит файлы символов для кода пользователя, но если вы хотите войти в (или отладить) код .NET, код системы или сторонний библиотечный код, требуются дополнительные шаги для получения правильных файлов символов.

![Просмотр информации о символах в окне модулей](../debugger/media/dbg-tips-modules-window.png "ViewSymbolInformation")

Вы можете загрузить информацию о символе непосредственно из окна **модулей,** нажав правой кнопкой мыши и выбрав **символы нагрузки.**

Иногда разработчики приложений покладывают приложения без соответствующих файлов символов (чтобы уменьшить след), но сохраняют копию соответствующих файлов символов для сборки, чтобы они могли отладить выпущенную версию позже.

Чтобы узнать, как отладчик классифицирует [Just My Code](../debugger/just-my-code.md)код как код пользователя, см. Чтобы узнать больше о файлах символов, [см.](specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)

## <a name="learn-more"></a>Дополнительные сведения

Дополнительные советы и рекомендации и более подробную информацию, смотрите эти сообщения в блоге:

- [7 менее известных хаки для отладки в Visual Studio](https://devblogs.microsoft.com/visualstudio/7-lesser-known-hacks-for-debugging-in-visual-studio/)
- [7 скрытых драгоценных камней в Visual Studio](https://devblogs.microsoft.com/visualstudio/7-hidden-gems-in-visual-studio-2017/)

## <a name="see-also"></a>См. также раздел

[Клавишные ярлыки](../ide/productivity-shortcuts.md)
