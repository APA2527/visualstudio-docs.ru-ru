---
title: Средства для отладки потоков и процессов | Документация Майкрософт
ms.date: 04/21/2018
ms.topic: conceptual
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- multiprocess debugging
- threading [Visual Studio], debugging
- processes, debugging
- debugging threads
- debugging [Visual Studio], threads
ms.assetid: 9f0c8505-b6b2-452b-adfd-076db14d8115
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: d4769224cfb26c4b1d55362fea006f55ba8845da
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62852887"
---
# <a name="tools-to-debug-threads-and-processes-in-visual-studio"></a>Средства для отладки потоков и процессов в Visual Studio
*Потоки* и *процессы* — это связанные понятия в вычислительной технике. Оба представляют из себя последовательность инструкций, которые должны выполняться в определенном порядке. Инструкции в отдельных потоках или процессах, однако, могут выполняться параллельно.

 Процессы существуют в операционной системе и соответствуют тому, что пользователи видят как программы или приложения. Поток, с другой стороны, существует внутри процесса. По этой причине потоки иногда называются *облегченными процессами*. Каждый процесс состоит из одного или более потоков.

 Существование нескольких процессов позволяет компьютеру "одновременно" выполнять несколько задач. Существование нескольких потоков позволяет процессу разделять работу для параллельного выполнения. На многопроцессорном компьютере процессы или потоки могут работать на разных процессорах. Это позволяет выполнять реально параллельную работу.

 Абсолютно параллельная обработка не всегда возможна. Потоки иногда должны синхронизироваться. Один поток может ожидать результата другого потока, или одному потоку может понадобиться монопольный доступ к ресурсу, который используется другим потоком. Проблемы синхронизации являются распространенной причиной ошибок в многопоточных приложениях. Иногда поток может закончиться, ожидая ресурс, который никогда не будет доступен. Это кончается состоянием, которое называется *взаимоблокировкой*.

 Отладчик [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] предоставляет мощные, но простые в использовании средства отладки потоков и процессов.

## <a name="tools-and-features"></a>Инструменты и возможности
Средства, необходимые для использования в [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] зависят от того, какой тип кода вы пытаетесь отладить:

- Для процессов, основные средства — **присоединение к процессу** диалоговом окне **процессы** окно и **место отладки** панели инструментов.

- Для потоков, основные средства для отладки потоков — **потоков** окна, маркеры потоков в окнах исходного кода, **Параллельные стеки** окне **контроль параллельных данных** окно, и **место отладки** панели инструментов.

- Для кода, использующего <xref:System.Threading.Tasks.Task> в [библиотеки параллельных задач (TPL)](/dotnet/standard/parallel-programming/task-parallel-library-tpl), [среда выполнения с параллелизмом](/cpp/parallel/concrt/concurrency-runtime/) (машинный код), основные средства для отладки многопоточных приложений — **Параллельные стеки** окне **контроль параллельных данных** окно и **задачи** окна ( **задачи** окно также поддерживает Объект обещания JavaScript).

- По отладке потоков в GPU, — основное средство **потоки GPU** windows.

  В следующей таблице показаны доступные данные и действия, которые можно выполнять в каждом из этих мест:

|Пользовательский интерфейс|Доступные сведения|Действия, которые можно выполнять|
|--------------------|---------------------------|-----------------------------|
|Диалоговое окно **Присоединение к процессу**|Доступные процессы для присоединения:<br /><br /> — Имя процесса (EXE)<br />— Идентификатор процесса<br />— Название строки меню<br />— Тип (управляемый код (версия 4); управляемый код (версии 2.0, 1.1, 1.0); x86; x64; IA64)<br />— Имя пользователя (имя учетной записи)<br />— Номер сеанса|Выберите процесс для присоединения<br /><br /> Выберите удаленный компьютер<br /><br /> Измените тип транспортного протокола для подключения к удаленным компьютерам|
|Окно **процессов**|Присоединенные процессы:<br /><br /> — Имя процесса<br />— Идентификатор процесса<br />— Путь к процессу EXE<br />— Название строки меню<br />— Состояние (прерывание. Работа)<br />— Отладка (машинный код, управляемый код и т. д.)<br />— Тип транспортного протокола (по умолчанию используется машинный без проверки подлинности)<br />— Квалификатор транспортного протокола (удаленный компьютер)|Средства:<br /><br /> — Присоединить<br />— Отсоединить<br />— Завершить<br /><br /> Контекстное меню:<br /><br /> — Присоединить<br />— Отсоединить<br />— Отсоединить, когда отладка остановлена<br />— Завершить|
|Окно **Потоки**|Потоки текущего процесса:<br /><br /> — Идентификатор потока<br />— Управляемый ИД<br />— Категория (основной поток, поток интерфейса, обработчик вызова удаленной процедуры или рабочий поток)<br />— Имя потока<br />— Место, где создан поток<br />— Приоритет<br />— Маска сходства<br />— Приостановленный счетчик<br />— Имя процесса<br />— Индикатор флага<br />— Приостановленный индикатор|Средства:<br /><br /> — Поиск<br />— Поиск в стеке вызовов<br />— Отметить только мой код<br />— Пометить выбранные пользовательские модули<br />— Группировать по<br />— Столбцы<br />— Развернуть/свернуть стеки вызовов<br />— Развернуть или свернуть группы<br />— Заморозить/разморозить потоки<br /><br /> Контекстное меню:<br /><br /> — Показать потоки в исходном коде<br />— Переключиться в поток<br />— Заморозить выполняющийся поток<br />— Разморозить замороженный поток<br />— Пометить поток для дополнительного изучения<br />— Снять отметку потока<br />— Переименовать поток<br />— Отобразить и скрыть потоки<br /><br /> Другие действия:<br /><br /> — Просмотреть стек вызовов потока в совете|
|Окна исходного кода.|Индикаторы потока в левом поле указывают один или несколько потоков (по умолчанию отключено, включается с помощью контекстного меню в окне **Потоки**)|Контекстное меню:<br /><br /> — Переключиться в поток<br />— Пометить поток для дополнительного изучения<br />— Снять отметку потока|
|Панель инструментов **Место отладки**|— Текущий процесс<br />— Приостановить приложение<br />— Возобновить приложение<br />— Приостановить и завершить работу приложения<br />— Текущий поток<br />— Переключить состояние флага текущего потока<br />— Показывать только отмеченные потоки<br />— Показать только текущий процесс<br />— Текущий кадр стека|— Переключиться в другой процесс<br />— Приостановить, возобновить или завершить работу приложения<br />— Переключиться в другой поток в текущем процессе<br />— Переключиться в другой кадр стека в текущем потоке<br />— Пометить текущие потоки или снять с них отметку<br />— Показывать только отмеченные потоки<br />— Показать только текущий процесс|
|Окно **Параллельные стеки**|— Стеки вызовов для нескольких потоков в одном окне.<br />— Активный кадр стека для каждого потока.<br />— Вызывающие и вызываемые функции и процедуры для любого метода.|Отфильтровать указанные потоки<br />-Переключитесь в представление "задачи"<br />— Пометить поток или снять с него отметку<br />— Изменение масштаба|
|Окно **Контроль параллельных данных**|— Столбец пометок, где можно пометить поток, которому требуется уделить особое внимание.<br />— Столбец кадров, в котором символ стрелки указывает на текущий выбранный кадр.<br />— Настраиваемый столбец, который может отображать компьютер, процесс, блок потоков, задачу и поток.|— Пометить поток или снять с него отметку<br />— Отобразить только отмеченные потоки<br />— Переключить кадры<br />— Сортировать столбец<br />— Группировать потоки<br />— Заморозить или разморозить потоки<br />— Экспортировать данные в окно "Контроль параллельных данных"|
|**Задачи** окно|— Просмотр сведений об объектах <xref:System.Threading.Tasks.Task>, включая идентификатор задачи, состояние задачи (запланирована, запущена, находится в ожидании, заблокирована), а также сведений о потоке, назначенном задаче<br />— Текущее расположение в стеке вызовов<br />— Делегат, переданный задаче во время создания|— Переключиться на текущую задачу<br />— Пометить задачу или снять с нее отметку<br />— Заморозить или разморозить задачу|
|Окно **Потоки GPU**|— Столбец пометок, где можно пометить поток, которому требуется уделить особое внимание.<br />-Текущий поток столбец, в котором желтая стрелка указывает текущий поток.<br />— Столбец **Число потоков**, в котором отображается количество потоков в одном месте.<br />— Столбец **Строка**, в котором отображается строка кода, где расположена каждая группа потоков.<br />— Столбец **Адрес**, в котором отображается адрес инструкции, где расположена каждая группа потоков.<br />— Столбец **Расположение**, который представляет расположение адреса в коде.<br />— Столбец **Состояние**, который показывает, является ли поток активным или блокированным.<br />— Столбец **Блок потоков**, в котором отображается индекс блока потоков (tile) для потоков в строке.|— Изменения на другой поток<br />— Отобразить определенный блок потоков (tile) и поток<br />— Отобразить или скрыть столбец<br />— Сортировать по столбцу<br />— Группировать потоки<br />— Заморозить или разморозить потоки<br />— Пометить поток или снять с него отметку<br />— Отобразить только отмеченные потоки|

## <a name="see-also"></a>См. также

- [Подключение к выполняющимся процессам](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)
- [Отладка многопоточных приложений](../debugger/debug-multithreaded-applications-in-visual-studio.md)
- [Отладка кода GPU](../debugger/debugging-gpu-code.md)