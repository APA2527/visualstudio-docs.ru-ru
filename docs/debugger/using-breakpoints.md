---
title: Используйте точки разрыва в отладчике Документы Майкрософт
ms.custom: ''
ms.date: 10/28/2019
ms.topic: conceptual
f1_keywords:
- vs.debug.breakpointswin
- vs.debug.disassembly.insert
- vs.debug.sourcewin.edit
- vs.debug.file
- vs.debug.breakpt.new
- vs.debug.whenbreakpointishit
- vs.debug.breakpt.location.address
- vs.debug.breakpt.constraints
- vs.debug.breakpoints.delete
- vs.debug.breakpt.location.data
- vc.breakpoints
- vs.debug.breakpt.condition
- vs.debug.breakpt.location.function
- vs.debug.breakpoints
- vs.debug.menu.insert
- vs.debug.filenames
- vs.debug.breakpt.action
- vs.debug.sourcewin.insert
- vs.debug.address
- vs.debug.data
- vs.debug.func
- vs.debug.breakpt.location.file
helpviewer_keywords:
- breakpoints, about breakpoints
ms.assetid: 020b2e97-3b3e-4b2c-872d-b5c6025e120e
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: a6a8ee96834fc20186ba6719a7c4f377fea45d6b
ms.sourcegitcommit: 95f26af1da51d4c83ae78adcb7372b32364d8a2b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "79301029"
---
# <a name="use-breakpoints-in-the-visual-studio-debugger"></a>Используйте точки разрыва в отладке Visual Studio

Breakpoints является одним из наиболее важных методов отладки в наборе инструментов разработчика. Вы устанавливаете точки разрыва везде, где хотите приостановить выполнение отладчика. Например, можно увидеть состояние переменных кода или посмотреть на стек вызовов в определенной точке разрыва.  Если вы пытаетесь решить предупреждение или проблему при использовании моментов разрыва, см. [точки разрыва Troubleshoot в отладчике Visual Studio.](../debugger/troubleshooting-breakpoints.md)

> [!NOTE]
> Если вы знаете задачу или проблему, которую вы пытаетесь решить, но вам нужно знать, какую точку разрыва использовать, [см.](../debugger/find-your-debugging-task.md#pause-running-code)

## <a name="set-breakpoints-in-source-code"></a><a name="BKMK_Overview"></a>Установка точек разрыва в исходном коде

Можно установить точку останова в любой строке исполняемого кода. Например, в следующем коде СЗ можно установить точку `for` разрыва на переменной `for` декларации, цикле или любом коде внутри цикла. Нельзя установить точку разрыва в пространстве имен или декларациях классов или на подписи метода.

Чтобы установить точку разрыва в исходном коде, щелкните в крайнем левом крае рядом с строкой кода. Вы также можете выбрать линию и нажмите **F9,** выберите **Debug** > **Toggle Breakpoint,** или нажмите правой кнопкой мыши и выберите**точку разрыва** **Breakpoint.** >  Точка разрыва отображается как красная точка в левом крае.

Для большинства языков, включая C,, автоматически высвечиваются точки разрыва и текущие строки выполнения. Для кода СЗ можно включить выделение точки разрыва и текущих строк, выбрав **Инструменты** (или **Отек)**> **параметры** > **отладки Выделение** >  **всей исходной строки для точек разрыва и текущей выписки (только**для C ) .

![Установка точки разрыва](../debugger/media/basicbreakpoint.png "Базовая точка разрыва")

При отладке выполнение приостанавливается в точке разрыва, прежде чем код этой строки будет выполнен. Символ точки разрыва показывает желтую стрелку.

На точке разрыва в следующем примере значение по-прежнему `testInt` 1. Таким образом, значение не изменилось с момента инициализации переменной (установленной на значение 1), поскольку значение в желтом еще не выполнено.

![Выполнение точки останова остановлено](../debugger/media/breakpointexecution.png "Выполнение точки разрыва")

Когда отладчик останавливается в точке разрыва, можно посмотреть текущее состояние приложения, включая [переменные значения](../debugger/debugger-feature-tour.md#inspect-variables-with-data-tips) и [стек вызовов.](../debugger/how-to-use-the-call-stack-window.md)

Вот несколько общих инструкций для работы с точками разрыва.

- Точка разрыва — это переключение. Вы можете нажать на него, нажать **F9**, или использовать **Debug** > **Toggle Breakpoint,** чтобы удалить или восстановить его.

- Чтобы отключить точку разрыва, не удаляя ее, нависните над ней или нажмите на право, и выберите **точку разрыва."** Точки разрыва отключений отображаются как пустые точки в левом крае или в окне **Breakpoints.** Чтобы повторно включить точку разрыва, нависните над ним или нажмите на право, и выберите **точку разрыва Enable.**

- Установите условия и действия, добавляйте и редактируем метки или экспортируйте точку разрыва, нажав на нее право йенатом и выбрав соответствующую команду или зависая над ней и выбрав значок **«Настройки».**

## <a name="breakpoint-actions-and-tracepoints"></a><a name="BKMK_Print_to_the_Output_window_with_tracepoints"></a>Действия и точки отслеживания

Точка *отслежения* — это точка разрыва, которая печатает сообщение в окне **вывода.** Точка трассировки может действовать как временное заявление о отслеживании на языке программирования и не приостанавливает выполнение кода. Вы создаете точку трассировки, установив специальное действие в окне **настройки параметра.** Для получения подробных инструкций [см.](../debugger/using-tracepoints.md)

## <a name="breakpoint-conditions"></a>Условия точки останова

Можно управлять тем, где и когда выполняется точка останова, задавая условия. Условие может быть любым допустимое выражение, которое распознает отладчик. Дополнительные сведения о допустимых выражениях см. в разделе [Выражения в отладчике](../debugger/expressions-in-the-debugger.md).

**Чтобы установить условие точки разрыва:**

1. Нажмите правой кнопкой кнопку символ точки разрыва и выберите **Условия.** Или нависните над символом точки разрыва, выберите значок **настроек,** а затем выберите **Условия** в окне **настроек Параметра.**

   Вы также можете установить условия в окне **Breakpoints,** нажав правой кнопкой кнопку "точка разрыва" и выбрав **настройки,** а затем выбрав **условия.**

   ![Параметры точки останова](../debugger/media/breakpointsettings.png "Настройки брейк-пойнтов")

2. В выпадении выберите **условное выражение,** **Хит Граф**, или **фильтр**, и установить значение соответственно.

3. Выберите **Закрыть** или нажмите **Ctrl**+**Enter,** чтобы закрыть окно **настройки параметра.** Или из окна **Breakpoints** выберите **OK,** чтобы закрыть диалог.

Точки разрыва с установленными **+** условиями отображаются с символом в исходном коде и **окнами Breakpoints.**

<a name="BKMK_Specify_a_breakpoint_condition_using_a_code_expression"></a>
### <a name="create-a-conditional-expression"></a>Создание условного выражения

При **выборе условного выражения**можно выбрать между двумя условиями: **правда** или **когда изменено.** Выберите **Верно** сломать, когда выражение удовлетворено, или **Когда изменилось,** чтобы сломать, когда значение выражения изменилось.

В следующем примере точка разрыва попадает только `testInt` тогда, когда значение **4:**

![Условие для точки останова выполнено](../debugger/media/breakpointconditionistrue.png "Точка разрыва истинна")

В следующем примере точка разрыва попадает только `testInt` при изменении значения:

![Точка разрыва При изменении](../debugger/media/breakpointwhenchanged.png "Точка разрыва При изменении")

Если условие точки останова имеет недопустимый синтаксис, появится предупреждающее сообщение. Если указать условие для точки останова с недопустимой семантикой, но допустимым синтаксисом, предупреждающее сообщение появится при достижении точки останова в первый раз. В любом случае отладчик ломается при попадании в недействительную точку разрыва. Точка останова пропускается, только если условие допустимо и принимает значение `false`.

>[!NOTE]
>Поведение поля **When changed** отличается для разных языков программирования.
>- Для родного кода отладчик не считает первую оценку состояния изменением, поэтому не попадает в точку разрыва при первой оценке.
>- Для управляемого кода отладчик попадает в точку разрыва при первой оценке после выбора **изменения.**

<a name="using-object-ids-in-breakpoint-conditions-c-and-f"></a>
### <a name="use-object-ids-in-conditional-expressions-c-and-f-only"></a>Идентификаторы объектов в условных выражениях (только c и F)

 Иногда требуется наблюдать за поведением конкретного объекта. Например, можно узнать, почему объект был вставлен в коллекцию более одного раза. В C# и F# можно создавать идентификаторы объектов для определенных экземпляров [ссылочных типов](/dotnet/csharp/language-reference/keywords/reference-types) и использовать их в условиях точек останова. Идентификатор объекта создается службами отладки среды CLR и связан с объектом.

**Для создания идентификатора объекта:**

1. Установите точку разрыва в коде в каком-то месте после создания объекта.

2. Начните отладку, и при приостановке выполнения в точке разрыва выберите **Debug** > **Windows** > **Locals** или **Alt**+**4,** чтобы открыть окно **Locals.**

   Найдите экземпляр конкретного объекта в окне **Locals,** нажмите на него вправо и выберите **Идентификатор Make Object.**

   Вы должны **$** увидеть плюс номер в окне **Местные жители.** Это и есть идентификатор объекта.

3. Добавьте новую точку разрыва в точке, которая требуется для исследования; например, когда объект должен быть добавлен в коллекцию. Щелкните правой кнопкой мыши точку останова и выберите пункт **Условие**.

4. Используйте идентификатор объекта в поле **условного выражения.** Например, если `item` переменная является объектом, который будет добавлен в коллекцию, выберите \< **Это правда,** и введите элемент no **n\<>**, где n> является идентификационным номером объекта.

   Выполнение прервется в точке добавления объекта в коллекцию.

   Чтобы удалить идентификатор объекта, нажмите вправо на переменную в окне **Locals** и выберите **Идентификатор объекта Delete.**

> [!NOTE]
> Идентификаторы объектов создают слабые ссылки и не предотвращают сборку мусора для объекта. Они действительны только в рамках текущего сеанса отладки.

### <a name="set-a-hit-count-condition"></a>Установите условие подсчета хитов

Если вы подозреваете, что цикл в коде начинает плохо себя вести после определенного количества итераций, вы можете установить точку разрыва, чтобы остановить выполнение после этого количества хитов, вместо того, чтобы неоднократно нажимать **F5,** чтобы достичь этой итерации.

В **условиях** в окне **настройки параметра** выберите **Hit Count,** а затем укажите количество итераций. В следующем примере точка разрыва будет поражаться любой другой итерации:

![Количество пораженных точках](../debugger/media/breakpointhitcount.png "BreakpointHitCount")

### <a name="set-a-filter-condition"></a>Установите условие фильтра

Вы можете ограничить точку останова, сделав ее срабатывание возможным лишь на определенных устройствах или в определенных процессах или потоках.

В **условиях** в окне **настройки параметра** выберите **фильтр,** а затем введите одно или несколько следующих выражений:

- MachineName = "имя"
- ProcessId = значение
- ProcessName = "имя"
- ThreadId = значение
- ThreadName = "имя"

Значения строк следует заключить в двойные кавычки. Для комбинации условий можно использовать знаки `&` (И), `||` (ИЛИ), `!` (НЕ) и скобки.

## <a name="set-function-breakpoints"></a><a name="BKMK_Set_a_breakpoint_in_a_source_file"></a>Установка моментов разрыва функции

Вы можете сломать выполнение при вызове функции. Это полезно, например, когда вы знаете имя функции, но не ее местоположение. Это также полезно, если у вас есть функции с тем же именем, и вы хотите, чтобы разорвать на них все (например, перегруженных функций или функций в различных проектах).

**Для установки точки разрыва функции:**

1. Выберите **Debug** > **Новый Breakpoint** > **функция Breakpoint**, или нажмите **Alt**+**F9** > **Ctrl**+**B**.

   Вы также можете выбрать **новую** > **точку разрыва функций** в окне **«Точки разрыва».**

1. В диалоге **New Function Breakpoint** введите имя функции в поле **«Имя функции».**

   Чтобы сузить спецификацию функции:

   - Используйте полностью квалифицированное имя функции.

     Пример: `Namespace1.ClassX.MethodA()`

   - Добавьте параметры параметров перегруженной функции.

     Пример: `MethodA(int, string)`

   - Используйте символ '! ', чтобы указать модуль.

     Например, `App1.dll!MethodA`.

   - Используйте оператора контекста в родном СЗ.

     `{function, , [module]} [+<line offset from start of method>]`

     Например, `{MethodA, , App1.dll}+2`.

1. При выпадении **языка** выберите язык функции.

1. Нажмите кнопку **ОК**.

### <a name="set-a-function-breakpoint-using-a-memory-address-native-c-only"></a>Установите точку разрыва функции, используя адрес памяти (только родной C
 Адрес объекта можно использовать для установки точки разрыва функции на методе, вызванном определенным экземпляром класса.  Например, с учетом адресного `my_class`объекта типа можно установить `my_method` точку разрыва функции на методе, который вызывает экземпляр.

1. Установите точку разрыва где-нибудь после мгновенного экземпляра класса.

2. Найти адрес экземпляра (например, `0xcccccccc`).

3. Выберите **Debug** > **Новый Breakpoint** > **функция Breakpoint**, или нажмите **Alt**+**F9** > **Ctrl**+**B**.

4. Добавьте следующее в поле **«Имя функции»** и выберите язык **C.»**

   ```cpp
   ((my_class *) 0xcccccccc)->my_method
   ```

::: moniker range=">= vs-2019"

## <a name="set-data-breakpoints-net-core-30-or-higher"></a><a name="BKMK_set_a_data_breakpoint_managed"></a>Установите точки разрыва данных (.NET Core 3.0 или выше)

Точки разрыва данных нарушаются при изменении свойства определенного объекта.

**Установить точку разрыва данных**

1. В проекте .NET Core начните отладку и подождите, пока точка разрыва будет достигнута.

2. В **Autos,** **Смотреть**, или **Местные жители** окна, право нажмите на свойство и выберите **Перерыв, когда значение изменения** в контексте меню.

    ![Управляемая точка разрыва данных](../debugger/media/managed-data-breakpoint.png "Управляемая точка разрыва данных")

Точки разрыва данных в ядро .NET не будут работать для:

- Свойства, которые не расширяются в наборе инструментов, Местные жители, Автомобили, или Смотреть окно
- Статические переменные
- Занятия с атрибутом DebuggerTypeProxy
- Поля внутри структур

::: moniker-end

## <a name="set-data-breakpoints-native-c-only"></a><a name="BKMK_set_a_data_breakpoint_native_cplusplus"></a>Установка точек разрыва данных (только родная СЗ)

 Точки разрыва данных нарушают сярприг при изменении значения, хранящегося в указанном адресе памяти. Если значение только считывается, но не изменяется, выполнение программы не прерывается.

**Для установки точки разрыва данных:**

1. В проекте СЗ начать отладку и ждать, пока точка разрыва будет достигнута. В меню **Debug** выберите **новую** > **точку разрыва данных**

    Вы также можете выбрать **новую** > **точку разрыва данных** в окне **Breakpoints** или нажать правой кнопкой кнопку элемент авт., **Смотреть**, или **Местные жители** окна и выбрать **Перерыв, когда значение изменения** в контексте меню. **Autos**

2. В поле **"Адрес"** введите адрес памяти или выражение, оцениваемые к адресу памяти. Например, для прерывания при изменении содержимого переменной `&avar` введите `avar` .

3. В раскрывающемся списке **Счетчик байтов** введите количество байтов, за которыми должен наблюдать отладчик. Например, если выбрать **4**, отладчик будет наблюдать за четырьмя байтами начиная с `&avar` и выполнит прерывание, если какой-либо из этих байтов изменит значение.

Точки разрыва данных не работают при следующих условиях:
- Процесс, для которого не выполняется отладка, производит запись в область памяти.
- Область памяти совместно используется двумя или более процессами.
- Область памяти обновляется в ядре. Например, если память передается 32-битной функции Windows, `ReadFile` память будет обновлена из режима ядра, так что отладчик не будет нарушать обновление.
- Где выражение часов больше, чем 4 байта на 32-битном оборудовании и 8 байтов на 64-битном оборудовании. Это ограничение архитектуры x86.

> [!NOTE]
> - Точки разрыва данных зависят от конкретных адресов памяти. Адрес переменной изменяется от одного сеанса отладки к другому, поэтому точки разрыва данных автоматически отключаются в конце каждого сеанса отладки.
>
> - Если установить точку останова по данным на локальную переменную, точка останова остается включенной при завершении выполнения функции, но адрес памяти больше не применяется, поэтому поведение точки останова будет непредсказуемым. Если вы установите точку разрыва данных на локальной переменной, следует удалить или отключить точку разрыва до окончания функции.

## <a name="manage-breakpoints-in-the-breakpoints-window"></a><a name="BKMK_Specify_advanced_properties_of_a_breakpoint_"></a> Управление точками останова в окне "Точки останова"

 Окно **Breakpoints** можно использовать для просмотра и управления всеми точками разрыва в решении. Это централизованное местоположение особенно полезно в большом решении или в сложных сценариях отладки, где точки разрыва имеют решающее значение.

В окне **«Точки разрыва»** можно искать, сортировать, фильтровать, включать/отключать или удалять точки разрыва. Можно также установить условия и действия или добавить новую функцию или точку разрыва данных.

Чтобы открыть окно **Breakpoints,** выберите **Отошибочные** > **Windows** > **точки для Windows Или**нажмите **Alt**+**F9** или **Ctrl**+**Alt**+**B.**

![Окно «Точки разрыва»](../debugger/media/breakpointswindow.png "Точки останова - окно")

Для выбора столбцов для отображения в окне **«Точки разрыва»** выберите **колонки Show.** Выберите заголовок столбца для сортировки списка моментов разрыва по этому столбце.

### <a name="breakpoint-labels"></a><a name="BKMK_Set_a_breakpoint_at_a_function_return_in_the_Call_Stack_window"></a> Метки точки останова
Для сортировки и фильтрации списка моментов разрыва в окне **Breakpoints** можно использовать метки.

1. Чтобы добавить метку в точку разрыва, нажмите правой кнопкой мыши точки разрыва в исходном коде или окне **Breakpoints,** а затем выберите **метки Edit.** Добавить новую метку или выбрать существующую, а затем выберите **OK.**
2. Сортируйте список точка разрыва в окне **Breakpoints,** выбрав **метки,** **условия**или другие заголовки столбцов. Вы можете выбрать столбцы для отображения, выбрав **столбцы Show** в панели инструментов.

### <a name="export-and-import-breakpoints"></a>Экспорт и импорт точек останова
 Чтобы сохранить или поделиться состоянием и местоположением ваших моментов, вы можете экспортировать или импортировать их.

- Чтобы экспортировать одну точку разрыва в файл XML, нажмите правой кнопкой мыши точки разрыва в исходном коде или окне **Breakpoints** и выберите выбранный **экспорт** или **экспорт.** Выберите место экспорта, а затем выберите **Сохранить**. Местоположение по умолчанию — это папка решения.
- Для экспорта нескольких точек разрыва в окне **Breakpoints** выберите коробки рядом с точками разрыва или введите критерии поиска в поле **поиска.** Выберите **экспорт все точки разрыва, соответствующие текущему** значку критериев поиска, и сохраните файл.
- Для экспорта всех точек разрыва, отменить все коробки и оставить поле **поиска** пустым. Выберите **экспорт все точки разрыва, соответствующие текущему** значку критериев поиска, и сохраните файл.
- Чтобы импортировать точки разрыва, в окне **«Точки разрыва»** выберите точки разрыва импорта из значка **файла,** перейдите к местоположению файла XML и выберите **Open.**

## <a name="set-breakpoints-from-debugger-windows"></a><a name="BKMK_Set_a_breakpoint_from_debugger_windows"></a>Установка точек разрыва из окон отладчика

Вы также можете установить точки разрыва из окон отладки **Call Stack** и **Disassembly.**

### <a name="set-a-breakpoint-in-the-call-stack-window"></a>Установите точку разрыва в окне стека вызовов

 Чтобы разбить инструкцию или строку, на которую возвращается функция вызова, можно установить точку разрыва в **окне стека вызова.**

**Чтобы установить точку разрыва в окне стека вызовов:**

1. Чтобы открыть окно **Call Stack,** необходимо сделать паузу во время отладки. Выберите **Debug** > **Windows** > **Call Stack**, или нажмите **Ctrl**+**Alt**+**C**.

2. В окне **Call Stack** щелкните функцию вызова и выберите **Breakpoint Breakpoint** > **Insert Breakpoint**или нажмите **F9.**

   Символ точки разрыва отображается рядом с именем вызова функции в левом крае стека вызовов.

Точка разрыва стека вызовов отображается в окне **«Точки разрыва»** в виде адреса с расположением памяти, которое соответствует следующей исполняемой инструкции в функции.

Отладчик ломается при инструкции.

Для получения дополнительной информации о стеке вызова [см.](../debugger/how-to-use-the-call-stack-window.md)

Чтобы визуально отследить точки разрыва во время выполнения кода, см. [методы карты в стеке вызова во время отладки.](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md)

### <a name="set-a-breakpoint-in-the-disassembly-window"></a>Установите точку разрыва в окне разборки

1. Чтобы открыть окно **разборки,** необходимо приложить паузу во время отладки. Выберите **Debug** > **Windows** > **Disassembly**, или нажмите **Alt**+**8**.

2. В окне **разборки** щелкните в левом крае инструкции, на которое вы хотите взломать. Вы также можете выбрать его и нажмите **F9**, или правой кнопкой мыши и выберите **Breakpoint** > **Вставить Breakpoint.**

## <a name="see-also"></a>См. также раздел

- [Что такое отладка?](../debugger/what-is-debugging.md)
- [Напишите лучший код СИ с помощью Visual Studio](../debugger/write-better-code-with-visual-studio.md)
- [Первый взгляд на отладку](../debugger/debugger-feature-tour.md)
- [Точки устранения неполадок в Visual Studio отладчик](../debugger/troubleshooting-breakpoints.md)
