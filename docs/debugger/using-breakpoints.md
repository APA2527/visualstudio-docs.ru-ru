---
title: Использование точек останова в отладчике | Документация Майкрософт
ms.custom: ''
ms.date: 10/28/2019
ms.topic: conceptual
f1_keywords:
- vs.debug.breakpointswin
- vs.debug.disassembly.insert
- vs.debug.sourcewin.edit
- vs.debug.file
- vs.debug.breakpt.new
- vs.debug.whenbreakpointishit
- vs.debug.breakpt.location.address
- vs.debug.breakpt.constraints
- vs.debug.breakpoints.delete
- vs.debug.breakpt.location.data
- vc.breakpoints
- vs.debug.breakpt.condition
- vs.debug.breakpt.location.function
- vs.debug.breakpoints
- vs.debug.menu.insert
- vs.debug.filenames
- vs.debug.breakpt.action
- vs.debug.sourcewin.insert
- vs.debug.address
- vs.debug.data
- vs.debug.func
- vs.debug.breakpt.location.file
helpviewer_keywords:
- breakpoints, about breakpoints
ms.assetid: 020b2e97-3b3e-4b2c-872d-b5c6025e120e
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: a6a8ee96834fc20186ba6719a7c4f377fea45d6b
ms.sourcegitcommit: 40bd5b27f247a07c2e2514acb293b23d6ce03c29
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2019
ms.locfileid: "73187317"
---
# <a name="use-breakpoints-in-the-visual-studio-debugger"></a>Использование точек останова в отладчике Visual Studio

Точки останова — один из наиболее важных методов отладки на панели элементов разработчика. Точки останова устанавливаются везде, где нужно приостановить выполнение отладчика. Например, может потребоваться просмотреть состояние переменных кода или просмотреть стек вызовов в определенной точке останова.  Если вы пытаетесь разрешить предупреждение или проблему при использовании точек останова, см. раздел [Устранение неполадок точек останова в отладчике Visual Studio](../debugger/troubleshooting-breakpoints.md).

> [!NOTE]
> Если вы знаете задачу или проблему, которую вы пытаетесь решить, но вам нужно знать, какой тип точки останова следует использовать, см. раздел [Поиск задачи отладки](../debugger/find-your-debugging-task.md#pause-running-code).

## <a name="BKMK_Overview"></a>Установка точек останова в исходном коде

Можно установить точку останова в любой строке исполняемого кода. Например, в следующем C# коде можно задать точку останова в объявлении переменной,`for`цикле или любом коде в цикле`for`. Нельзя задать точку останова в объявлении пространства имен или класса или в сигнатуре метода.

Чтобы задать точку останова в исходном коде, щелкните в крайнем левом поле рядом со строкой кода. Можно также выбрать линию и нажать клавишу **F9**, выбрать **Отладка** > **Переключить точку останова**или щелкнуть правой кнопкой мыши и выбрать **точку останова** > **Вставить точку останова**. Точка останова отображается в виде красной точки в левом поле.

Для большинства языков, C#включая, точка останова и текущие строки выполнения выделяются автоматически. Для C++ кода можно включить выделение точек останова и текущих строк, выбрав **инструменты** (или **отладка**) > **Параметры** > **отладки** >  **выделить всю исходную строку для точек останова и текущего оператор (C++ только)** .

![Установка точки останова](../debugger/media/basicbreakpoint.png "Базовая точка останова")

При отладке выполнение приостанавливается в точке останова до выполнения кода в этой строке. Символ точки останова отображается с желтой стрелкой.

В точке останова в следующем примере значение `testInt` по-прежнему равно 1. Таким образом, значение не изменилось с момента инициализации переменной (значение 1), так как инструкция в желтой части еще не была выполнена.

![Выполнение точки останова остановлено](../debugger/media/breakpointexecution.png "Выполнение точки останова")

При остановке отладчика в точке останова можно просмотреть текущее состояние приложения, включая [значения переменных](../debugger/debugger-feature-tour.md#inspect-variables-with-data-tips) и [Стек вызовов](../debugger/how-to-use-the-call-stack-window.md).

Ниже приведены некоторые общие инструкции по работе с точками останова.

- Точка останова — это переключатель. Можно щелкнуть его, нажать клавишу **F9**или использовать **Debug** > **переключения точки останова** для удаления или повторной вставки.

- Чтобы отключить точку останова, не удаляя ее, наведите указатель мыши на нее или щелкните ее правой кнопкой и выберите пункт **Отключить точку останова**. Отключенные точки останова отображаются как пустые точки в левом поле или окне **точки останова** . Чтобы повторно включить точку останова, наведите указатель мыши на нее или щелкните ее правой кнопкой и выберите **включить точку останова**.

- Задайте условия и действия, добавьте и измените метки или экспортируйте точку останова, щелкнув ее правой кнопкой мыши и выбрав соответствующую команду, или наведите на нее кнопку мыши и выберите значок **Параметры** .

## <a name="BKMK_Print_to_the_Output_window_with_tracepoints"></a> Действия точки останова и точки трассировки

*Точка трассировки* — это точка останова, которая выводит сообщение в окно **вывода**. Точка трассировки может действовать как временная инструкция трассировки на языке программирования и не приостанавливать выполнение кода. Вы создаете точку трассировки, задавая особое действие в окне **Параметры точки останова** . Подробные инструкции см. [в разделе Использование точек отслеживания в отладчике Visual Studio](../debugger/using-tracepoints.md).

## <a name="breakpoint-conditions"></a>Условия точки останова

Можно управлять тем, где и когда выполняется точка останова, задавая условия. Условие может быть любым допустимым выражением, распознаваемым отладчиком. Дополнительные сведения о допустимых выражениях см. в разделе [Выражения в отладчике](../debugger/expressions-in-the-debugger.md).

**Чтобы задать условие для точки останова, сделайте следующее:**

1. Щелкните правой кнопкой мыши символ точки останова и выберите пункт **условия**. Или наведите указатель мыши на символ точки останова, щелкните значок **Параметры** , а затем выберите **условия** в окне **Параметры точки останова** .

   Можно также задать условия в окне **точки останова** , щелкнув правой кнопкой мыши точку останова и выбрав пункт **Параметры**, а затем выбрав пункт **условия**.

   ![Параметры точки останова](../debugger/media/breakpointsettings.png "бреакпоинтсеттингс")

2. В раскрывающемся списке выберите **условное выражение**, **число попаданий**или **Фильтр**и задайте соответствующее значение.

3. Выберите **Закрыть** или нажмите клавиши **CTRL**+**Ввод** , чтобы закрыть окно **Параметры точки останова** . Или в окне **точки останова** нажмите кнопку **ОК** , чтобы закрыть диалоговое окно.

Точки останова с установленными условиями отображаются с **+** символ в окнах исходный код и **точки останова** .

<a name="BKMK_Specify_a_breakpoint_condition_using_a_code_expression"></a>
### <a name="create-a-conditional-expression"></a>Создание условного выражения

При выборе **условного выражения**можно выбрать одно из двух условий: **имеет значение true** или **при изменении**. Выберите **значение true** , чтобы прервать выполнение при удовлетворении выражения, или **при** изменении значения выражения на Break.

В следующем примере точка останова достигается только в том случае, если значение `testInt` равно **4**:

![Условие точки останова равно true](../debugger/media/breakpointconditionistrue.png "Точка останова имеет значение true")

В следующем примере точка останова достигается только при изменении значения `testInt`:

![Точка останова при изменении](../debugger/media/breakpointwhenchanged.png "Точка останова при изменении")

Если условие точки останова имеет недопустимый синтаксис, появится предупреждающее сообщение. Если указать условие для точки останова с недопустимой семантикой, но допустимым синтаксисом, предупреждающее сообщение появится при достижении точки останова в первый раз. В любом случае отладчик прерывает работу при попадании в недопустимую точку останова. Точка останова пропускается, только если условие допустимо и принимает значение `false`.

>[!NOTE]
>Поведение поля **При изменении** отличается для различных языков программирования.
>- Для машинного кода отладчик не учитывает первое вычисление условия как изменение, поэтому не достигает точки останова при первом вычислении.
>- Для управляемого кода отладчик достигает точки останова при первом вычислении после выбора **изменения** .

<a name="using-object-ids-in-breakpoint-conditions-c-and-f"></a>
### <a name="use-object-ids-in-conditional-expressions-c-and-f-only"></a>Использование идентификаторов объектов в условныхC# выражениях (и F# только)

 Иногда возникает необходимость наблюдать за поведением определенного объекта. Например, может потребоваться выяснить, почему объект был вставлен в коллекцию несколько раз. В C# и F# можно создавать идентификаторы объектов для определенных экземпляров [ссылочных типов](/dotnet/csharp/language-reference/keywords/reference-types) и использовать их в условиях точек останова. Идентификатор объекта создается службами отладки среды CLR и связан с объектом.

**Чтобы создать идентификатор объекта, выполните следующие действия.**

1. Установите точку останова в коде после создания объекта.

2. Запустите отладку и, когда выполнение приостанавливается на точке останова, выберите **отладка** > **Windows** > **локальные переменные** или **ALT**+**4** , чтобы открыть окно **локальные** .

   Найдите конкретный экземпляр объекта в окне **локальные** , щелкните его правой кнопкой мыши и выберите пункт **создать идентификатор объекта**.

   В окне **$** вы должны увидеть символ **Локальные** . Это и есть идентификатор объекта.

3. Добавьте новую точку останова в той точке, которую необходимо исследовать; Например, при добавлении объекта в коллекцию. Щелкните правой кнопкой мыши точку останова и выберите пункт **Условие**.

4. Используйте идентификатор объекта в поле **Условное выражение**. Например, если переменная `item` является объектом, добавляемым в коллекцию, выберите **значение true** и введите **Item = = $\<n >** , где \<n > — это идентификатор объекта.

   Выполнение прервется в точке добавления объекта в коллекцию.

   Чтобы удалить идентификатор объекта, щелкните правой кнопкой мыши переменную в окне **локальные** и выберите команду **Удалить идентификатор объекта**.

> [!NOTE]
> Идентификаторы объектов создают слабые ссылки и не предотвращают сборку мусора для объекта. Они действительны только в рамках текущего сеанса отладки.

### <a name="set-a-hit-count-condition"></a>Установка условия числа попаданий

Если вы подозреваете, что цикл в коде запускает неправильное поведение после определенного числа итераций, можно установить точку останова для остановки выполнения после такого числа попаданий, а не многократно нажимать клавишу **F5** для достижения этой итерации.

В разделе **условия** в окне **Параметры точки останова** выберите **число попаданий**и укажите число итераций. В следующем примере точка останова настроена для попадания в каждую другую итерацию:

![Число попаданий в точку останова](../debugger/media/breakpointhitcount.png "бреакпоинситкаунт")

### <a name="set-a-filter-condition"></a>Задание условия фильтра

Вы можете ограничить точку останова, сделав ее срабатывание возможным лишь на определенных устройствах или в определенных процессах или потоках.

В разделе **условия** в окне **Параметры точки останова** выберите **Фильтр**, а затем введите одно или несколько из следующих выражений:

- MachineName = "имя"
- ProcessId = значение
- ProcessName = "имя"
- ThreadId = значение
- ThreadName = "имя"

Значения строк следует заключить в двойные кавычки. Для комбинации условий можно использовать знаки `&` (И), `||` (ИЛИ), `!` (НЕ) и скобки.

## <a name="BKMK_Set_a_breakpoint_in_a_source_file"></a>Задание точек останова для функций

Выполнение можно прерывать при вызове функции. Это полезно, например, если известно имя функции, но не ее расположение. Он также полезен, если у вас есть функции с одним и тем же именем, и вы хотите приостановить их все (например, перегруженные функции или функции в разных проектах).

**Чтобы задать точку останова функции, сделайте следующее:**

1. Выберите **отладка** > **Новая точка останова** > **точка останова функции**или нажмите клавиши **ALT**+**F9** > **CTRL**+**B**.

   В окне **точки останова** можно также выбрать пункт **создать** > **точки останова функции** .

1. В диалоговом окне **Новая точка останова функции** введите имя функции в поле **имя функции** .

   Чтобы уменьшить спецификацию функции, сделайте следующее:

   - Используйте полное имя функции.

     Пример: `Namespace1.ClassX.MethodA()`

   - Добавьте типы параметров перегруженной функции.

     Пример: `MethodA(int, string)`

   - Используйте символ "!", чтобы указать модуль.

     Пример: `App1.dll!MethodA`

   - Используйте Оператор контекста в собственном C++виде.

     `{function, , [module]} [+<line offset from start of method>]`

     Пример: `{MethodA, , App1.dll}+2`

1. В раскрывающемся списке **язык** выберите язык функции.

1. Нажмите кнопку **ОК**.

### <a name="set-a-function-breakpoint-using-a-memory-address-native-c-only"></a>Задание точки останова функции с помощью адреса памяти ( C++ только машинный код)
 Адрес объекта можно использовать для задания точки останова функции в методе, вызываемом конкретным экземпляром класса.  Например, при наличии объектно-адресного типа `my_class`можно установить точку останова функции в методе `my_method`, который вызывает экземпляр.

1. Установка точки останова после создания экземпляра класса.

2. Найдите адрес экземпляра (например, `0xcccccccc`).

3. Выберите **отладка** > **Новая точка останова** > **точка останова функции**или нажмите клавиши **ALT**+**F9** > **CTRL**+**B**.

4. Добавьте следующий код в поле **имя функции** и выберите **C++** язык.

   ```cpp
   ((my_class *) 0xcccccccc)->my_method
   ```

::: moniker range=">= vs-2019"

## <a name="BKMK_set_a_data_breakpoint_managed"></a>Задание точек останова для данных (.NET Core 3,0 или более поздней версии)

Точки останова в данных прерывать выполнение при изменении свойства конкретного объекта.

**Задание точки останова в данных**

1. В проекте .NET Core начните отладку и дождитесь достижения точки останова.

2. В окне " **видимые**", " **Контрольные значения**" или " **локальные** " щелкните правой кнопкой мыши свойство и выберите команду **прервать при изменении значения** в контекстном меню.

    ![Точка останова управляемых данных](../debugger/media/managed-data-breakpoint.png "Точка останова управляемых данных")

Точки останова по данным в .NET Core не будут работать в следующих целях:

- Свойства, которые не могут быть расширены в подсказке, локальных переменных, Auto или окно контрольных значений
- Статические переменные
- Классы с атрибутом DebuggerTypeProxy
- Поля внутри структур

::: moniker-end

## <a name="BKMK_set_a_data_breakpoint_native_cplusplus"></a>Задание точек останова для данных C++ (только машинный код)

 Точки останова в данных прерывать выполнение при изменении значения, хранящегося в указанном адресе памяти. Если значение только считывается, но не изменяется, выполнение программы не прерывается.

**Установка точки останова в данных:**

1. В C++ проекте запустите отладку и дождитесь достижения точки останова. В меню **Отладка** выберите пункт **создать точку останова** > **точка останова в данных**

    Можно также выбрать пункт **создать** > **точки останова** в **окне точки останова** или щелкнуть правой кнопкой мыши элемент **в окне** **видимые**, **Контрольные значения**и выбрать команду **прервать при изменении значения** в контекстном меню.

2. В поле **Адрес** введите адрес памяти или выражение, результатом вычисления которого будет адрес памяти. Например, для прерывания при изменении содержимого переменной `&avar` введите `avar` .

3. В раскрывающемся списке **Счетчик байтов** введите количество байтов, за которыми должен наблюдать отладчик. Например, если выбрать **4**, отладчик будет наблюдать за четырьмя байтами начиная с `&avar` и выполнит прерывание, если какой-либо из этих байтов изменит значение.

Точки останова в данных не работают при следующих условиях:
- Процесс, для которого не выполняется отладка, производит запись в область памяти.
- Область памяти совместно используется двумя или более процессами.
- Область памяти обновляется в ядре. Например, если память передается в 32-разрядную функцию Windows `ReadFile`, то память будет обновлена из режима ядра, поэтому отладчик не будет прерываться при обновлении.
- Где значение выражения контрольных значений превышает 4 байта на 32-разрядном оборудовании и 8 байт на 64-разрядном оборудовании. Это ограничение архитектуры x86.

> [!NOTE]
> - Точки останова по данным зависят от конкретных адресов памяти. Адрес переменной меняется с одного сеанса отладки на следующий, поэтому точки останова по данным автоматически отключаются в конце каждого сеанса отладки.
>
> - Если установить точку останова по данным на локальную переменную, точка останова остается включенной при завершении выполнения функции, но адрес памяти больше не применяется, поэтому поведение точки останова будет непредсказуемым. Если задать точку останова для данных в локальной переменной, следует удалить или отключить точку останова перед завершением функции.

## <a name="BKMK_Specify_advanced_properties_of_a_breakpoint_"></a> Управление точками останова в окне "Точки останова"

 Окно **точки останова** можно использовать для просмотра всех точек останова в решении и управления ими. Это централизованное расположение особенно полезно в больших решениях или для сложных сценариев отладки, в которых точки останова являются критически важными.

В окне **точки останова** можно выполнять поиск, сортировку, фильтрацию, включение, отключение или удаление точек останова. Можно также задать условия и действия или добавить новую функцию или точку останова в данных.

Чтобы открыть окно **точки останова** , выберите **Отладка** > **Windows** > **точки останова**или нажмите клавиши **ALT**+**F9** или **CTRL**+**ALT**+**B**.

![Окно точек останова](../debugger/media/breakpointswindow.png "Точки останова - окно")

Чтобы выбрать столбцы для отображения в окне **точки останова** , выберите **Показать столбцы**. Выберите заголовок столбца, чтобы отсортировать список точек останова по этому столбцу.

### <a name="BKMK_Set_a_breakpoint_at_a_function_return_in_the_Call_Stack_window"></a> Метки точки останова
Метки можно использовать для сортировки и фильтрации списка точек останова в окне **точки останова** .

1. Чтобы добавить метку к точке останова, щелкните правой кнопкой мыши точку останова в исходном коде или окне **точки останова** , а затем выберите **изменить метки**. Добавьте новую метку или выберите существующую, а затем нажмите кнопку **ОК**.
2. Отсортируйте список точек останова в окне **точки останова** , выбрав **метки**, **условия**или другие заголовки столбцов. Можно выбрать отображаемые столбцы, выбрав **Показать столбцы** на панели инструментов.

### <a name="export-and-import-breakpoints"></a>Экспорт и импорт точек останова
 Чтобы сохранить или поделиться состоянием и расположением точек останова, их можно экспортировать или импортировать.

- Чтобы экспортировать одну точку останова в XML-файл, щелкните правой кнопкой мыши точку останова в окне исходный код или **точки останова** и выберите пункт **Экспорт** или **Экспорт выбран**. Выберите расположение экспорта и нажмите кнопку **сохранить**. Расположением по умолчанию является папка решения.
- Чтобы экспортировать несколько точек останова, в окне **точки останова** выберите поля рядом с точками останова или введите условие поиска в поле **поиска** . Выберите **экспортировать все точки останова, соответствующие текущему значку условия поиска** , и сохраните файл.
- Чтобы экспортировать все точки останова, снимите все флажки и оставьте поле **поиска** пустым. Выберите **экспортировать все точки останова, соответствующие текущему значку условия поиска** , и сохраните файл.
- Чтобы импортировать точки останова, в окне **точки останова** выберите значок **Импорт точек останова из файла** , перейдите к расположению XML-файла и выберите **Открыть**.

## <a name="BKMK_Set_a_breakpoint_from_debugger_windows"></a>Установка точек останова из окна отладчика

Можно также задать точки останова в окнах " **Стек вызовов** " и " **Дизассемблированный код** " отладчика.

### <a name="set-a-breakpoint-in-the-call-stack-window"></a>Установка точки останова в окне "стек вызовов"

 Чтобы прервать выполнение инструкции или строки, к которой вызывается вызывающая функция, можно задать точку останова в окне **стека вызовов** .

**Чтобы задать точку останова в окне стека вызовов, сделайте следующее:**

1. Чтобы открыть окно **стека вызовов** , необходимо приостановить во время отладки. Выберите **отладка** > **Windows** > **Стек вызовов**или нажмите клавиши **CTRL**+**ALT**+**C**.

2. В окне **Стек вызовов** щелкните правой кнопкой мыши вызывающую функцию и выберите пункт **точка останова** > **Вставить точку останова**или нажмите клавишу **F9**.

   Символ точки останова отображается рядом с именем вызова функции в левом поле стека вызовов.

Точка останова стека вызовов отображается в окне **точки останова** как адрес с расположением памяти, которое соответствует следующей исполняемой инструкции в функции.

Отладчик прерывает выполнение инструкции.

Дополнительные сведения о стеке вызовов см. в разделе [Практическое руководство. Использование окна стека вызова](../debugger/how-to-use-the-call-stack-window.md).

Сведения о визуальной трассировке точек останова во время выполнения кода см. в разделе [методы Map в стеке вызовов во время отладки](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md).

### <a name="set-a-breakpoint-in-the-disassembly-window"></a>Установка точки останова в окне дизассемблирования

1. Чтобы открыть окно **дизассемблирования** , необходимо приостановить во время отладки. Выберите **отладка** > **Windows** > **дизассемблированный код**или нажмите **ALT**+**8**.

2. В окне **дизассемблирования** щелкните в левом поле инструкции, которую нужно прервать. Можно также выбрать его и нажать клавишу **F9**или щелкнуть правой кнопкой мыши и выбрать пункт **точка останова** > **Вставить точку останова**.

## <a name="see-also"></a>См. также

- [Что такое отладка?](../debugger/what-is-debugging.md)
- [Написание C# лучшего кода с помощью Visual Studio](../debugger/write-better-code-with-visual-studio.md)
- [Первый взгляд на отладку](../debugger/debugger-feature-tour.md)
- [Устранение неполадок точек останова в отладчике Visual Studio](../debugger/troubleshooting-breakpoints.md)
