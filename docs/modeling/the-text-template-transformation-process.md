---
title: Процесс преобразования текстового шаблона
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- text templates, transformation process
author: gewarren
ms.author: gewarren
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 271d9625ba5c41599af6c92504b3f17a166a2ee7
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63001373"
---
# <a name="the-text-template-transformation-process"></a>Процесс преобразования текстового шаблона
Процесс преобразования текстового шаблона принимает в качестве входных данных файл текстового шаблона и создает новый текстовый файл на выходе. Например можно использовать текстовые шаблоны для создания кода Visual Basic или C#, или можно создать отчет в формате HTML.

 Три компонента принять участие в этом процессе: ядро, узел и процессоры директив. Эта подсистема управляет процесса; он взаимодействует с узлом и процессор директив для создания выходного файла. Узел предоставляет все взаимодействие с среду, например ищет файлы и сборки. Процессор директив добавляет функциональные возможности, например чтение данных из XML-файл или базу данных.

 Процесс преобразования текстового шаблона выполняется в два этапа. Во-первых обработчик создает временный класс, который известен как созданный класс преобразования. Этот класс содержит код, созданный на основе директив и управляющих блоков. После этого ядро компилирует и выполняет созданный класс преобразования для создания выходного файла.

## <a name="components"></a>Компоненты

|Компонент|Описание|Настраиваемый (Да/Нет)|
|-|-|-|
|ядра|Компонент ядра контролирует процесс преобразования текстового шаблона|Нет.|
|Узел|Узел — это интерфейс между модулем и пользовательской среды. Visual Studio представляет собой узел процесса преобразования текста.|Да. Вы можете написать пользовательское ведущее приложение.|
|Процессоры директив|Процессоры директив являются классы, которые обрабатывают директив текстовых шаблонов. Директивы можно использовать для предоставления данных в текстовый шаблон из источника входных данных.|Да. Можно написать пользовательские процессоры директив|

## <a name="the-engine"></a>Ядро
 Обработчик получает шаблон как строку из узла, который обрабатывает все файлы, которые используются в процессе преобразования. Затем обработчик запрашивает основное приложение найти пользовательские процессоры директив и другие аспекты среды. Ядро компилирует и выполняет созданный класс преобразования. Обработчик возвращается созданный текст узла, который обычно сохраняет этот текст в файл.

## <a name="the-host"></a>Узел
 Узел отвечает за все, что связано со средой, вне процесса преобразования, включая следующие:

- Поиск текста и двоичных файлов, по запросу ядро или процессор директив. Основное приложение может просматривать каталоги и глобальный кэш сборок для определения местоположения сборок. Основное приложение может найти пользовательского процессора директив кода для обработчика. Узел можно найти и чтение текстовых файлов и возвращать их содержимое в виде строки.

- Предоставление списка стандартных сборок и пространств имен, которые используются подсистемой для создания в созданный класс преобразования.

- Предоставление домена приложения, которое используется при компилирует и выполняет созданный класс преобразования. Чтобы защитить приложение от ошибок в коде шаблона используется отдельном домене приложения.

- Записывает созданный выходной файл.

- Установка расширения по умолчанию для генерируемого выходного файла.

- Обработка ошибок преобразования текстового шаблона. Например узел можно отображение ошибок в пользовательском интерфейсе или записать их в файл. (В Visual Studio, ошибки отображаются в окне сообщений об ошибках.)

- Предоставление значение обязательного параметра, если пользователь вызвал директиву, не задав значение. Процессор директив можно указать имя директивы и параметр и узла для предоставлять значение по умолчанию, если он имеется.

## <a name="directives-and-directive-processors"></a>Директивы и процессоры директив
 Директивы — это команда, в текстовый шаблон. Он предоставляет параметры для процесса создания. Обычно директивы определения источника и типа модели или другие входные данные и расширение выходного файла.

 Процессор директив может обрабатывать один или несколько директив. При преобразовании шаблона, необходимо установить процессор директив, который может обрабатывать директивы в шаблоне.

 Директивы работать, добавив код в созданный класс преобразования. Директивы вызываются из текстового шаблона и механизм преобразует все вызовы директив, при создании класса преобразования. После успешного вызова директивы, остальной код, записанный в текстовый шаблон можно использовать предоставленную директивой функциональность. Например, можно сделать следующий вызов к `import` директив в шаблоне:

 `<#@ import namespace="System.Text" #>`

 Стандартный процессор директив преобразует его `using` инструкции в созданный класс преобразования. Затем можно использовать `StringBuilder` класс в остальной части кода шаблона без указания его как `System.Text.StringBuilder`.