---
title: Просмотр и реорганизация карт кода
ms.date: 11/04/2016
ms.topic: conceptual
f1_keywords:
- vs.progression.dgmlgraph.layouthelp
- vs.progression.graphdocument
- vs.progression.dgmlgraph.message.notUlt.noexpandgroup
- vs.progression.colorsetpicker
- vs.progression.iconsetpicker
helpviewer_keywords:
- Visual Studio Ultimate, dependency graphs
- code visualization [Visual Studio ALM]
- graph documents, browsing
- Visual Studio ALM, dependency graphs
- code visualization
- Visual Studio ALM, graph documents
- Visual Studio Ultimate, graph documents
- dependency graphs, browsing
author: JoshuaPartlow
ms.author: joshuapa
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 8e38308c5bb94028fa17e78740da2b0df2779447
ms.sourcegitcommit: 95f26af1da51d4c83ae78adcb7372b32364d8a2b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "79301509"
---
# <a name="browse-and-rearrange-code-maps"></a>Просмотр и реорганизация карт кода

Вы можете изменять расположение элементов на картах кода, чтобы упростить их чтение и повысить производительность.

Карты кода можно настраивать, не затрагивая базовый код решения. Это полезно, когда нужно сосредоточить внимание на ключевых элементах кода или сообщить сведения о нем. Например, чтобы выделить требуемые области, можно выбрать элементы кода на карте и отфильтровать их, изменить стиль элементов кода и связей, скрыть или удалить элементы кода, а также упорядочить элементы кода по свойствам, категориям или группам.

 **Требования**

- Для создания карт кода требуется Visual Studio Enterprise.

- В Visual Studio Professional можно просматривать карты кода и вносить в них ограниченные изменения.

## <a name="get-started-working-with-code-maps"></a><a name="ManageLargeGraphs"></a>Начать работать с кодовыми картами

Создайте кодовую карту (см. [Зависимости карты через ваши решения](../modeling/map-dependencies-across-your-solutions.md) для более подробной информации). Если вы не хотите ждать, пока карта закончит генерацию, нажмите на ссылку **Cancel** в любое время, чтобы остановить процесс генерации. Однако в этом случае вы получите неполную информацию о зависимостях и связях.

После создания карты воспользуйтесь приведенными ниже советами по анализу кода.

- Обратите внимание на естественные кластеры зависимостей в коде. На панели инструментов карты выберите **Layout**, **Кнопка Быстрые кластеры Быстрые кластеры**![на панели](../modeling/media/quickclustersicon.gif)инструментов графика. Смотрите [Изменить макет карты](#Selecting).

     ![График зависимости &#45; макет быстрых кластеров](../modeling/media/dependencygraph_quickclusters.png)

- Разбейте карту на меньшие области путем группировки связанных узлов. Эти группы можно свернуть для просмотра только зависимостей между группами, которые появляются автоматически. Смотрите [групповые узлы](#OrganizeGroups).

- Используйте фильтры, чтобы упростить карту и сосредоточиться на интересующих вас типах узлов или связей. Смотрите [фильтр узлы и ссылки](#FilterNodes).

- Повысьте производительность крупных карт. Для получения дополнительной [информации просматривайте зависимости карты в решениях.](../modeling/map-dependencies-across-your-solutions.md) Например, включите панель инструментов **Skip Build** на панели инструментов карты, чтобы Visual Studio не перестраила решение при обновлении элементов на карте.

## <a name="change-the-map-layout"></a><a name="Selecting"></a>Изменить макет карты

|**Кому**|**Выполните следующие действия**|
|-|-|
|Расположение потока зависимостей на всей карте в определенном направлении. Это помогает увидеть архитектурные уровни в коде.|На панели инструментов карты выберите **Layout,** а затем:<br /><br /> -   **Сверху вниз** ![сверху вниз кнопка графика](../modeling/media/topbottomgraphbutton.gif)<br />-   **Снизу** ![вверху к верхнему графику](../modeling/media/bottomtopgraphbutton.gif)<br />-   **Слева направо** ![слева направо кнопка компоновки](../modeling/media/leftrightgraphbutton.gif)<br />-   **Кнопка** ![графика справа налево](../modeling/media/rightleftgraphbutton.gif)|
|Просмотр естественных кластеров зависимостей в коде: наиболее зависимые узлы находятся в центре кластеров, а наименее зависимые — возле внешней части кластеров.|На панели инструментов карты выберите **Layout,** а затем **кнопку Быстрые кластеры**![Быстрые кластеры на панели](../modeling/media/quickclustersicon.gif)инструментов графика.|
|Выделение одного или нескольких узлов на карте.|Чтобы выделить узел, щелкните его. Чтобы выбрать или отменить более одного узла, удерживайте **CTRL** при нажатии.<br /><br /> Клавиатура: нажмите **TAB** или используйте клавиши со стрелками, чтобы переместить пунктирный прямоугольник фокуса в узла и нажмите **SPACE,** чтобы выбрать его. Нажмите **CTRL** + **SPACE** на многовыборные или отбираемые узлы.|
|Перемещение определенных узлов по карте.|Чтобы переместить узлы, перетащите их. Для перемещения других узлов и ссылок в сторону, как вы перетащите узлов, нажмите и удерживайте ключ **SHIFT.**<br /><br /> Клавиатура: держите **CTRL** и нажмите клавиши со стрелками.|
|Изменение структуры внутри группы независимо от других узлов и групп на карте.|Выделите узел и откройте контекстное меню. Выберите **Layout** и выберите стиль макета.<br /><br /> — или —<br /><br /> Выделите узел и разверните его, чтобы отобразить дочерние узлы. Нажмите на заголовок узла, чтобы показать панель инструментов группы всплывающих и открыть стиль изменения](../modeling/media/dependencygraph_grouptoolbar.gif) макета диаграммы **зависимости**![группы &#45; панели инструментов группы &#45; списка макетов. Выберите один из макетов дерева, **Быстрые кластеры**или **Представление списка** (который укладывает содержимое группы в список).<br /><br /> Более подробную информацию можно узнать в [группах узлов.](#OrganizeGroups)|
|Отмена действия на карте.|Нажмите **CTRL** + **или** используйте команду Visual Studio **Undo.**|

## <a name="browse-the-map"></a><a name="Explore"></a>Просмотр карты

|**Кому**|**Выполните следующие действия**|
|-|-|
|Просмотр карты.|Перетащите карту мышью в любом направлении.<br /><br /> — или —<br /><br /> Держите **SHIFT** и поверните колесо мыши для прокрутки горизонтально. Держите **SHIFT** + **CTRL** и поверните колесо мыши для прокрутки горизонтально.|
|Увеличение или уменьшение карты.|Вращайте колесико мыши.<br /><br /> — или —<br /><br /> Используйте **Zoom** список выпадающих вниз масштабов на панели инструментов кода карты.<br /><br /> — или —<br /><br /> Используйте сочетания клавиш. Чтобы увеличить масштаб, нажмите **CTRL и SHIFT .** (точка). Чтобы увеличить масштаб, нажмите **CTRL и SHIFT ,** (запятая).|
|Увеличение определенной области с помощью мыши.|Удерживая нажатой правую кнопку мыши, обведите прямоугольником нужную область.|
|Изменение размера карты под размер ее окна.|Выберите **Увеличить, чтобы fit** из списка **Увеличить** на панели инструментов кода карты.<br /><br /> — или —<br /><br /> Нажмите на **Увеличить, чтобы поместить** ![значок](../modeling/media/almcodemapzoomicon.png) Увеличить значок на панели инструментов карты на панели инструментов кода карты. Клавиатура: нажмите **CTRL 0** (ноль).|
|Поиск узла на карте по его имени. **Совет:**  Это работает только для элементов на карте. Чтобы найти элементы в вашем решении, но не на карте, найти их в **Solution Explorer**, а затем перетащите их на карту. (Перетащите свой выбор, или на панели инструментов **Solution Explorer,** нажмите **Показать на Code Map).**|1. Выберите ![значок **«Найти** ](../modeling/media/almcodemapfindicon.png) значок на панели инструментов карты» на панели инструментов кода (Keyboard: **Нажмите CTRL и F),** чтобы показать поле поиска в правом верхнем углу карты.<br />2. Введите имя элемента и нажмите **Return** или нажмите значок "увеличить". Первый элемент, соответствующий поисковому запросу, будет выделен на карте.<br />3. Чтобы настроить поиск, откройте список выпадающих и выберите вариант поиска. Варианты **Найти следующий**, **Найти предыдущий**, и **выберите все**. Затем нажмите соответствующую кнопку рядом с текстовым полем поиска.<br />     ![Параметры поиска уходят&#45;список](../modeling/media/almcodemapssearchdropdown.png)<br />     Кроме того, используйте клавиатуру: нажмите **F3,** чтобы выбрать следующий подходящий узел или **SHIFT F3,** чтобы выбрать предыдущий соответствующий узел.<br />4. Выберите любой из вариантов, которые определяют, как обрабатываются условия поиска, нажав на значки ниже текстового ящика поиска.<br />     ![Параметры поиска соответствия](../modeling/media/almcodemapssearchmatchicons.png)<br />     Возможные варианты: слева направо, с учетом регистра, слова целиком, использовать синтаксис регулярных выражений .NET, автоматически разворачивать группы для поиска совпадений в содержащихся в них элементах. **Важно:**  Вы можете использовать поле поиска для поиска совпадений в рухнувших группах только в том случае, если эти группы были расширены ранее. Чтобы найти эти совпадения и развернуть их родительские группы автоматически, выберите этот параметр под полем поиска.|
|Выбор всех невыбранных узлов.|Откройте контекстное меню выбранных узлов. Выберите **выберите,** **Инвертировать выбор**.|
|Выбор дополнительных узлов, связанных с уже выбранными.|Откройте контекстное меню выбранных узлов. Выберите **выберите** и один из них:<br /><br /> - Чтобы выбрать дополнительные узлы, которые соединяются непосредственно с выбранным узлом, выберите **входящие зависимости.**<br />- Чтобы выбрать дополнительные узлы, которые соединяются непосредственно из выбранного узла, выберите **исходящие зависимости.**<br />- Для выбора дополнительных узлов, которые связывают непосредственно с выбранным узлами и из нее, выберите **оба.**<br />- Чтобы выбрать все узлы, которые ссылаются на выбранный узла и из выбранного, выберите **Connected Subgraph.**<br />- Чтобы выбрать всех детей выбранного узла, выберите **Детей.**|

## <a name="filter-nodes-and-links"></a><a name="FilterNodes"></a>Фильтровые узлы и ссылки

|**Кому**|**Выполните следующие действия**|
|-|-|
|Отображение или скрытие области "Фильтры".|Выберите кнопку **Фильтры** на панели инструментов кода карты. **Панель фильтров** отображается в виде страницы с вкладками в **Solution Explorer**по умолчанию.|
|Фильтрация типов узлов, отображаемых на карте.|Установите или очистите флажки в списке **элементов кода** в панели фильтров.|
|Фильтрация типов связей, отображаемых на карте.|Установите или очистите флажки в списке **отношений** в панели фильтров.|
|Отображение или скрытие узлов тестового проекта на карте.|Установите или очистите флажок **тестовых активов** в **списке Разных** в панели фильтров.|

Значки на панели "Легенда" карты зависят от выбранных в списке пунктов. Чтобы показать или скрыть панель Legend, нажмите кнопку **Legend** на панели инструментов кода карты.

## <a name="examine-nodes-and-links"></a><a name="Inspect"></a>Изучение узлов и ссылок

На картах кода приводятся следующие типы связей:

- отдельная связь представляет единичное отношение между двумя узлами;

- связь между группами представляет отношение между двумя узлами в разных группах;

- совокупная связь представляет все отношения в одном направлении между двумя группами.

> [!TIP]
> По умолчанию на карте показаны связи между группами только для выбранных узлов. Чтобы изменить это поведение, чтобы показать или скрыть агрегированные ссылки между группами, нажмите **Layout** на панели инструментов кода карты и выберите **Расширенный**, а затем **показать все кросс-группы ссылки** или **скрыть все кросс-группы ссылки**. Для более подробной информации смотрите [прятки или ссылки.](#HidingShowing)

|**Кому**|**Выполните следующие действия**|
|-|-|
|Просмотр дополнительной информации об узле или связи.|Наведите указатель мыши на узел или связь, пока не появится подсказка.<br /><br /> В подсказке для совокупной связи перечисляются отдельные зависимости, которые она представляет.<br /><br /> — или —<br /><br /> Откройте контекстное меню узла или связи. Выберите **Edit**, **Свойства**.|
|Отображение или скрытие содержимого группы.|- Чтобы расширить группу, откройте меню ярлыка для узла и выберите **группу,** **расширьте**.<br />     — или —<br />     Наведите указатель мыши на узел, пока не появится кнопка шеврона (стрелка вниз). Нажмите эту кнопку, чтобы развернуть группу. Клавиатура: расширить или разрушить выбранную группу,**+** нажмите клавишу **PLUS** () или ключ **MINUS** ().**-**<br />- Чтобы свернуть группу, откройте меню ярлыка для узла и выберите **группу,** **свернуть.**<br />     — или —<br />     Наведите указатель мыши на группу, пока не появится кнопка шеврона (стрелка вверх). Нажмите эту кнопку, чтобы свернуть группу.<br />- Чтобы расширить все группы, нажмите **CTRL** + **A,** чтобы выбрать все узлы. Откройте меню ярлыка для карты и выберите **группу,** **расширьте**. **Примечание:**      Эта команда недоступна, если расширение всех групп генерирует непригодные проблемы с картой или памятью. Рекомендуется разворачивать карту только до необходимого уровня детализации.<br />- Чтобы разрушить все группы, откройте меню ярлыка для узла или для карты. Выберите **группу**, **Свернуть все**.|
|Просмотр определения кода для пространства имен, типа или члена.|Откройте меню ярлыка для узла и выберите **Перейти к определению.**<br /><br /> -или-<br /><br /> Дважды щелкните узел. Если группа развернута, дважды щелкните ее заголовок.<br /><br /> -или-<br /><br /> Выберите узла и нажмите **F12.**<br /><br /> Пример:<br /><br /> - Для пространства имен, содержащего один класс, открывается кодовый файл для класса, чтобы показать определение этого класса. В других случаях в окне **результатов поиска** отображается список файлов кода. **Примечание:**      При выполнении этой задачи в пространстве имен Visual Basic файл кода, лежащий в пространстве имен, не открывается. Эта проблема также возникает при выполнении этой задачи в группе выбранных узлов, включающие пространство имен Visual Basic. Чтобы обойти эту проблему, вручную перейдите к файлу кода для пространства имен или исключите узел для пространства имен из числа выбранных.<br />- Для класса или частичного класса, файл кода для этого класса открывается, чтобы показать определение класса.<br />- Для метода, кодовый файл для родительского класса открывается, чтобы показать определение метода.|
|Просмотр зависимостей и элементов, участвующих в совокупной связи.|Выберите интересующие вас ссылки и откройте меню ярлыков для выбора. Выберите **Показать Вклад Ссылки** или **Показать Вклад ссылки на новый код Карты**.<br /><br /> Visual Studio разворачивает группы на обоих концах связи и отображает только те элементы и зависимости, которые участвуют в связи. **Примечание:**  При изучении зависимостей между элементами в частичных группах можно увидеть это поведение: <ul><li>Ссылки на элементы, которые не участвуют в экзамене, исчезают с карты, даже если эти ссылки все еще существуют.</li><li>Предположим, что вы просматриваете связь с элементом разделяемой группы, а затем просматриваете другую связь с этим же элементом. При втором просмотре в целевой разделяемой группе отображаются только элементы из первого просмотра. Ссылки и целевые элементы, которые не участвовали в первом экзамене, но участвуют во втором экзамене, не отображаются.</li></ul> Чтобы увидеть недостающие элементы из группы,](../modeling/media/dependencygraph_deletednodesicon.png) выберите **значок Refetch Children**![Refetch Children (который указывает, что не все члены группы отображаются на карте). Вы также можете попробовать отменить свои действия (Keyboard: Нажмите **CTRL)** и изучить зависимости на новой карте.|
|Изучение зависимостей между несколькими узлами из разных групп.|Разверните группы, чтобы можно было просмотреть все их дочерние элементы. Выделите все нужные узлы, включая их дочерние элементы. На карте показаны ссылки между группами для выбранных узлов.<br /><br /> Чтобы выбрать все узлы в группе, нажмите и удерживайте **SHIFT** и кнопку левой мыши, пока вы рисуете прямоугольник вокруг этой группы. Чтобы выбрать все узлы на карте, нажмите **CTRL**+**A**. **Совет:**  Чтобы показать кросс-групповые ссылки в любое время, выберите **Layout** на панели инструментов карты, **Advanced,** **Show All Cross-Group Links.**|
|Просмотр элементов, на которые ссылается узел или связь.|Откройте меню ярлыка для узла и выберите **Найти все ссылки.** **Примечание:**  Это относится только `Reference` тогда, когда атрибут установлен для узла или ссылки в файле .dgml карты. Чтобы добавить ссылки на элементы из узлов или ссылок, [см.](../modeling/customize-code-maps-by-editing-the-dgml-files.md)|

## <a name="hide-or-show-nodes-and-links"></a><a name="HidingShowing"></a>Скрыть или показать узлы и ссылки

Если скрыть узлы, они не будут участвовать в алгоритмах создания макета. По умолчанию связи между группами скрыты. Связи между группами представляют собой отдельные связи, которые соединяют узлы между группами. Если свернуть группы, все связи между группами на карте объединяются в единичные связи между группами. Если развернуть группу и выбрать в ней узлы, отобразятся связи между группами и зависимости в этой группе.

> [!CAUTION]
> Перед тем как предоставить общий доступ к карте, созданной в Visual Studio Enterprise, пользователям Visual Studio Professional, отобразите все скрытые узлы или связи между группами, которые требуется показать другим пользователям. В противном случае пользователи не увидят эти элементы.

### <a name="to-hide-or-show-nodes"></a>Скрытие и отображение узлов

|**Кому**|**Выполните следующие действия**|
|-|-|
|Скрытие выделенных узлов.|1. Выберите узлы, которые вы хотите скрыть.<br />2. Откройте меню ярлыка для выбранных узлов или для карты. Выберите **выберите,** **скрыть выбранный**.|
|Скрытие невыделенных узлов.|1. Выберите узлы, которые вы хотите оставаться видимыми.<br />2. Откройте меню ярлыка для выбранных узлов или для карты. Выберите **выберите,** **скрыть невыбранные**.|
|Отображение скрытых узлов.|- Чтобы показать все скрытые узлы внутри группы, сначала убедитесь, что группа расширена. Откройте меню ярлыка и выберите **Выберите,** **Unhide детей**.<br />     — или —<br />     Нажмите](../modeling/media/dependencygraph_filtericon_hiddennodes.gif) значок **Unhide Children**![Unhide Children в верхнем левом углу группы (это видно только при наличии скрытых детских узлов).<br />- Чтобы показать все скрытые узлы, откройте меню ярлыка для карты или узла и выберите **Select,** **Unhide All**.|

### <a name="to-hide-or-show-links"></a>Скрытие и отображение связей

|**Кому**|**На панели инструментов карты выберите элемент Макет, щелкните Дополнительно и выберите один из указанных ниже пунктов.**|
|-|-|
|Постоянное отображение связей между группами.|**Показать все кросс-группы ссылки**. В результате будут скрыты все совокупные связи между группами.|
|Постоянное скрытие связей между группами.|**Скрыть все межгрупповые ссылки**|
|Отображение связей между группами только для выбранных узлов.|**Показать ссылки между группами в выбранных узлах**|
|Скрытие всех связей.|**Скрыть все ссылки**. Чтобы снова показать связи, выберите один из перечисленных выше пунктов.|

## <a name="group-nodes"></a><a name="OrganizeGroups"></a>Групповые узлы

|**Кому**|**Выполните следующие действия**|
|-|-|
|Показ узлов контейнеров в виде узлов групп или листовых узлов.|Чтобы показать контейнерные узлы в виде узлов листа: выберите узлы, откройте меню ярлыка для выбора и выберите **Group**, **Преобразование в leaf.**<br /><br /> Чтобы показать контейнерные узлы в виде групповых узлов: выберите узлы, откройте меню ярлыка для выбора и выберите **Group**, **Преобразование в группу.**|
|Изменение макета внутри группы.|Выберите группу, откройте меню ярлыка, выберите **Layout**и выберите нужный стиль макета.<br /><br /> — или —<br /><br /> 1. Выберите группу и убедитесь, что она расширена.<br />2. Нажмите на заголовок группы еще раз и панель инструментов группы появляется.<br />     ![График зависимости &#45; панель инструментов группы](../modeling/media/dependencygraph_group.png)<br />3. Откройте **для изменения стиль макета** диаграммы ![группы зависимости](../modeling/media/dependencygraph_grouptoolbar.gif) &#45; панель инструментов группы &#45; макет и выберите нужный стиль макета.<br /><br /> **Просмотр списка** перестраивает членов группы в список. **График по умолчанию** сбрасывает макет группы в макет карты по умолчанию. Для других вариантов [см.](#Selecting)|
|Добавление узла в группу|Перетащите узел в группу.<br /><br /> При перетаскивании узла в Visual Studio отображается соответствующий индикатор.<br /><br /> Можно также перетаскивать узлы из группы.|
|Добавление узла в узел, не состоящий в группе.|Перетащите узел в целевой узел. Любой узел можно преобразовать в группу, добавив в него узлы.|
|Группирование выбранных узлов.|1. Выберите узлы, которые вы хотите сгруппировать. Над последним выбранным узлом появится всплывающая панель инструментов.<br />     ![Панель инструментов графа зависимостей](../modeling/media/depedencygraph_toolbar.png)<br />2. На панели инструментов выберите четвертую группу значка **выбранных узлов** (если узла расширить, то вместо четырех иконок узла будет пять). Введите название новой группы и нажмите **Return**.<br />     — или —<br />     Выделите узлы, которые нужно сгруппировать, и откройте контекстное меню. Выберите **группу,** **Добавить родительскую группу,** введите название для новой группы и нажмите **Return.**<br /><br /> Группу можно переименовать. Откройте меню ярлыка для группы и выберите **Edit,** **Свойства,** чтобы открыть окно Visual Studio Properties. В свойстве **Label** переименуем группу по мере необходимости.|
|Удаление групп.|Выберите группу или группы, которые требуется удалить. Откройте меню ярлыка для вашего выбора и выберите **группу,** **Удалить группу**.|
|Удаление узлов из родительской группы.|Выберите узлы, которые требуется переместить. Откройте меню ярлыка для вашего выбора и выберите **группу,** **Удалить из родителей**. При этом узлы перемещаются в прародительскую группу или за пределы группы, если прародительской группы нет.<br /><br /> — или —<br /><br /> Выделите узлы и перетащите их за пределы группы.|

## <a name="add-remove-or-rename-nodes-links-and-comments"></a><a name="AddRemoveNodesLinks"></a>Добавление, удаление или переименование узлов, ссылок и комментариев

Чтобы детализировать данные на карте или упростить ее, можно отображать на карте больше или меньше элементов. Вы также можете переименовывать элементы и добавлять к ним комментарии.

> [!CAUTION]
> Перед тем как предоставить общий доступ к карте, созданной в Visual Studio Enterprise, пользователям Visual Studio Professional, отобразите все скрытые элементы кода, которые требуется показать другим пользователям. В противном случае эти пользователи не смогут извлечь удаленные элементы кода.

### <a name="add-a-node-for-a-code-element"></a>Добавление узла для элемента кода

|**Кому**|**Выполните следующие действия**|
|-|-|
|Добавление нового универсального узла в текущем положении указателя мыши.|1. Переместите указатель мыши на место на карте, где вы хотите поместить новый элемент кода и нажать **вставить.**<br />     — или —<br />     Откройте меню ярлыка для карты и выберите **Edit,** **Добавить,** **Общий узлы**.<br />2. Введите имя для нового узла и нажмите **Return**.|
|Добавление узла элемента кода определенного типа в текущем положении указателя мыши.|1. Переместите указатель мыши на место на карте, где вы хотите поместить новый элемент кода и открыть меню ярлыка для карты.<br />2. Выберите **edit,** **Добавить**и выбрать тип узла вы хотите.<br />3. Введите имя для нового узла и нажмите **Return**.|
|Добавление узла элемента кода универсального или определенного типа в группу.|1. Выберите групповой узла и откройте меню ярлыка.<br />2. Выберите **edit,** **Добавить**и выбрать тип узла вы хотите.<br />3. Введите имя для нового узла и нажмите **Return**.|
|Добавление нового узла, связанного с существующим узлом и имеющего тот же тип.|1. Выберите элемент кода. Над ним появится всплывающая панель инструментов.<br />     ![Панель инструментов графа зависимостей](../modeling/media/depedencygraph_toolbar.png)<br />2. На панели инструментов выберите второй значок **Создайте узла с той же категорией, что и этот узла, и добавьте к нему новую ссылку.**<br />3. Выберите место на карте, чтобы поместить новый элемент кода и нажмите кнопку левой мыши.<br />4. Введите имя для нового узла и нажмите **Return**.|
|Добавление нового универсального узла, на который указывает ссылка из существующего элемента кода, имеющего фокус.|1. Используя клавиатуру, нажмите **Tab** до тех пор, пока элемент кода, чтобы связать с имеет фокус (пунктирный прямоугольник).<br />2. Пресс **Alt**+**Вставка**.<br />3. Введите имя для нового узла и нажмите **Return**.|
|Добавление нового универсального узла со ссылкой на существующий элемент кода, имеющий фокус.|1. Используя клавиатуру, нажмите **Tab** до тех пор, пока элемент кода, чтобы ссылка на имеет фокус (пунктирный прямоугольник).<br />2. Нажмите **Alt**+**Shift**+**Insert**.<br />3. Введите имя для нового узла и нажмите **Return**.|

|**Объекты, для которых нужно добавить элементы кода**|**Выполните следующие действия**|
|-|-|
|Элементы кода в решении|1. Найдите элемент кода в **Solution Explorer.** Используйте окно поиска **Solution Explorer** или просмотрите решение. **Совет:**      Чтобы найти элементы кода, которые зависят от типа или члена, откройте меню ярлыка для типа или участника в **Solution Explorer.** Выберите требуемое отношение. **Solution Explorer** показывает только те элементы кода с указанными зависимостями.<br />2. Перетащите заинтересующие вас элементы кода на поверхность карты. Элементы кода можно также перетаскивать из представления классов и обозревателя объектов.<br />     — или —<br />     В **Solution Explorer**выберите элементы кода, которые необходимо сопоставить с ней. Затем, на панели инструментов **Solution Explorer,** нажмите **Показать на Code Map**.<br /><br /> По умолчанию на карте отображается иерархия родительского контейнера для новых элементов кода. Используйте кнопку **«Включить родителей»** на панели инструментов кода карты, чтобы изменить это поведение. Если этот режим выключен, на карту добавляется только сам элемент кода. Чтобы изменить это поведение для одного действия перетаскивания и падения, нажмите и удерживайте ключ **CTRL,** пока вы перетащите элементы кода на карту.<br /><br /> Visual Studio добавляет элементы кода для выделенных элементов кода верхнего уровня. Чтобы проверить, содержит ли элемент кода другие элементы, наведите на него указатель мыши, чтобы появился шеврон (стрелка вниз). Щелкните шеврон, чтобы развернуть элемент кода. Чтобы расширить все элементы кода, нажмите **CTRL**+**A,** чтобы выбрать все элементы, откройте меню ярлыка для карты и выберите **Group**, **Расширить**. Эта команда недоступна, если при развертывании всех групп карта станет непригодна к использованию или возникнут проблемы нехватки памяти.|
|Элементы кода, связанные с элементами кода на карте.|Нажмите кнопку **Show Related** на панели инструментов кода карты и выберите тип связанных элементов, которые вас интересуют.<br /><br /> — или —<br /><br /> Откройте контекстное меню элемента кода. Выберите один из **элементов Шоу в** меню в зависимости от того, какие отношения вас интересуют. Например, можно просмотреть элементы, на которые ссылается текущий элемент или которые сами ссылаются на него, базовые и производные типы для классов, вызывающие объекты методов, а также содержащие классы, пространства имен и сборки.<br /><br /> Для получения более подробной информации, смотрите [эту тему](../modeling/map-dependencies-across-your-solutions.md).|
|Скомпилированные сборки .NET (DLL или EXE) или двоичные файлы.|Вне Visual Studio перетащите сборки или двоичные файлы на карту.<br /><br /> Объекты можно перетаскивать из проводника, только если проводник и Visual Studio запущены на одном уровне разрешений управления доступом на уровне пользователей. Например, если управление доступом на уровне пользователей включено и среда Visual Studio запущена с правами администратора, проводник Windows заблокирует операцию перетаскивания.|

### <a name="AddNodes"></a>

#### <a name="add-a-link-between-existing-code-elements"></a>Добавление связи между существующими элементами кода

1. Выделите исходный элемент кода. Над ним появится панель инструментов.

    ![Панель инструментов графа зависимостей](../modeling/media/depedencygraph_toolbar.png)

2. На панели инструментов выберите первый значок, **Создайте новую ссылку из этого узла, к которому когда-либо узла, который вы нажмете на следующий.**

3. Выделите целевой элемент кода. Между двумя элементами кода появится связь.

**Или**

1. Выделите исходный элемент кода на карте.

2. При наличии мыши переместите ее указатель за границы карты.

3. Откройте меню ярлыка элемента кода и выберите **Edit** > **Add** > **Generic Link.**

4. Перейдите к целевому элементу кода для связи с помощью клавиши TAB и выделите его.

5. Нажмите клавишу **ВВОД**.

### <a name="AddComments"></a>

#### <a name="add-a-comment-to-an-existing-node-on-the-map"></a>Добавление комментария к существующему узлу на карте

1. Выделите элемент кода. Над ним появится панель инструментов.

     ![Панель инструментов графа зависимостей](../modeling/media/depedencygraph_toolbar.png)

2. На панели инструментов выберите третий значок, **Создайте новый узла комментариев с новой ссылкой на выбранный узла.**

     \- или -

     Откройте меню ярлыка для элемента кода и выберите **Edit** > **New Comment**.

3. Введите комментарии. Чтобы набрать на новой строке, нажмите **Shift** + **Enter**.

#### <a name="add-a-comment-to-the-map-itself"></a>Добавление комментария к самой карте

1. Откройте меню ярлыка для карты и выберите **Edit** > **New Comment**.

2. Введите комментарии. Чтобы набрать на новой строке, нажмите **Shift** + **Enter**.

### <a name="RenameNodes"></a>

#### <a name="rename-a-code-element-or-link"></a>Переименование элемента кода или связи

1. Выделите элемент кода или связь, которые нужно переименовать.

2. Нажмите **F2**, или откройте меню ярлыка и выберите**Переименовать** **edit** > .

3. Когда на карте появится поле редактирования, переименуйте элемент кода или связь.

**Или**

1. Откройте меню ярлыка и выберите **Edit** > **Properties.**

2. Отобразите свойство **Label** в окне Visual Studio Properties.

#### <a name="remove-a-code-element-or-link-from-the-map"></a>Удаление элемента кода или связи на карте

1. Выберите элемент кода или ссылку и нажмите клавишу **Delete.**

     \- или -

     Откройте меню ярлыка для элемента кода или ссылки и выберите **Удаление.** > **Remove**

2. Если элемент или ссылка являются частью группы, в](../modeling/media/dependencygraph_deletednodesicon.png) группе появляется кнопка ![ **Refetch Children** Refetch Children Icon. Нажмите ее, чтобы получить отсутствующие элементы и связи.

- Элементы кода и связи можно удалять с карты, не меняя базовый код. При удалении элементов кода и связей их определения удаляются из DGML-файла.

- Карты, созданные путем изменения DGML-файла, добавления неопределенных элементов кода или использования предыдущих версий Visual Studio, не поддерживают эту возможность.

#### <a name="flag-a-code-element-for-follow-up"></a>Добавление к элементу кода пометки к исполнению

1. Выделите элемент кода или связь, которые нужно пометить к исполнению.

2. Откройте меню ярлыка и выберите **флаг edit** > **для follow Up.**

- По умолчанию элемент кода получает красный фон. Рассмотрите возможность [добавления комментария](#AddComments) к нему с соответствующей последующей информацией.

- Измените цвет фона элемента или очистите последующий флаг, **выбрав** > **другие цвета флага.**

## <a name="change-the-style-of-a-code-element-or-link"></a><a name="ChangeStyleCodeOrLink"></a>Изменение стиля элемента кода или ссылки

Вы можете изменять значки на элементах кода, а также цвета элементов кода и связей, используя предопределенные значки и цвета. Например, можно выбрать цвет выделения элементов кода и связей в соответствии с категорией или свойством. Это позволит идентифицировать определенные области карты и сосредоточиться на них. Вы можете указать пользовательские значки и цвета, редактируя файл .dgml карты; просмотреть [настраиваемые кодовые карты, редактируя файлы DGML.](../modeling/customize-code-maps-by-editing-the-dgml-files.md)

### <a name="to-apply-a-predefined-color-or-icon-to-code-elements-or-links-with-a-certain-category-or-property"></a>Применение предопределенного цвета или значка к элементам кода или связям с определенной категорией или свойством

1. На панели инструментов карты выберите **Legend**.

2. В поле **Legend** узнайте, не фигурирует ли категория элементов кода или свойство в списке.

3. Если список не включает категорию **+** или свойство, выберите в поле **Legend,** а затем выберите **свойство узлов,** **категория узлов,** **свойство ссылки**, или **Ссылка Категория**. Затем выберите свойство или категорию. Категория или свойство теперь отображается в поле **Legend.**

    > [!NOTE]
    > Для создания и присвоения элементу кода категории или свойства можно отсеивать файл .dgml карты; просмотреть [настраиваемые кодовые карты, редактируя файлы DGML.](../modeling/customize-code-maps-by-editing-the-dgml-files.md)

4. В поле **Legend** щелкните значок рядом с категорией или свойством, который вы добавили или хотите изменить.

5. Воспользуйтесь следующей таблицей, чтобы выбрать стиль, который нужно изменить:

    |**Чтобы изменить**|**Выбрать**|
    |-|-|
    |Цвет фона|**Фон**|
    |Цвет контура|**Инсульта**|
    |Цвет текста (буква "f" отображается для отображения результата)|**Переднего плана**|
    |Значок|**Значки**|

     **Color Set Picker** или **Icon Set Picker** диалоговая коробка появляется для вас, чтобы выбрать цвет или значок.

6. В **Color Set Picker** или **Icon Set Picker** диалоговом поле сделайте одно из следующих:

    |**Чтобы применить**|**Выполните следующие действия**|
    |-|-|
    |Набор цветов или значков|Откройте **список набора** **«Выберите»** (или **значок).** Выберите набор цветов или значков.|
    |Определенный цвет или значок|Откройте список значений категорий или свойств. Выберите цвет или значок.|

    > [!NOTE]
    > Вы можете переставить, удалить или временно инактивировать стили в поле **Legend.** Смотрите [Отодвить поле Легенды](#ModifyLegend).

## <a name="edit-the-legend-box"></a><a name="ModifyLegend"></a>Отсечение коробки Легенд

Вы можете переставить, удалить или временно инактивировать стили в поле **Legend:**

1. Откройте меню ярлыка для стиля в поле **Legend.**

2. Выполните одну из следующих задач:

    |**Кому**|**Выбрать**|
    |-|-|
    |Отключение элемента кода|**Отключить**|
    |Удаление элемента кода|**Удалить**|
    |Перемещение стиля вверх|**вверх**|
    |Перемещение элемента кода вниз|**Вниз**|

## <a name="copy-styles-from-one-map-to-another"></a><a name="CopyLegend"></a>Копирование стилей с одной карты на другую

1. Убедитесь, что поле **Legend** отображается на исходной карте. Если он не виден, на панели инструментов карты, нажмите **Легенда**.

2. Откройте меню ярлыка для коробки **Legend.** Выберите **Копировать Легенда**.

3. Вставьте легенду на целевую карту.

## <a name="merge-code-maps"></a><a name="MergeMaps"></a>Кодкарты слияния

Чтобы объединить карты, скопируйте и вставьте элементы кода из одной карты в другую. Если идентификаторы элементов кода совпадают, при вставке элементы кода объединяются. Чтобы упростить эту задачу, поместите все сборки или двоичные файлы, которые нужно визуализировать, в одну папку, чтобы полный путь к каждой сборке или двоичному файлу был одинаков для каждой карты, которую необходимо объединить.

Кроме того, можно перетащить сборки или двоичные файлы из этой папки на одну и ту же карту.

## <a name="see-also"></a>См. также раздел

- [Сопоставление зависимостей в разных решениях](../modeling/map-dependencies-across-your-solutions.md)
- [Использование карт кода для отладки приложений](../modeling/use-code-maps-to-debug-your-applications.md)
- [Поиск потенциальных проблем с помощью анализаторов карт кода](../modeling/find-potential-problems-using-code-map-analyzers.md)
- [Настройка карт кода путем редактирования DGML-файлов](../modeling/customize-code-maps-by-editing-the-dgml-files.md)
- [Справочник по языку DGML](../modeling/directed-graph-markup-language-dgml-reference.md)
