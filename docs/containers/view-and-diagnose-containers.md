---
title: Журналы контейнеров Docker, переменные окружения и доступ к файловой системе
description: Узнайте, как расширить возможности отладки и диагностики контейнерных приложений в Visual Studio с помощью окна инструментов, которое позволяет видеть, что происходит в контейнерах с приложением.
author: ghogen
ms.author: ghogen
ms.topic: conceptual
ms.date: 10/16/2019
ms.technology: vs-azure
monikerRange: vs-2019
ms.openlocfilehash: 355a08b2ff322226d347d999f4ec8a9ebb7ba5fc
ms.sourcegitcommit: 40bd5b27f247a07c2e2514acb293b23d6ce03c29
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2019
ms.locfileid: "73188725"
---
# <a name="how-to-view-and-diagnose-containers-and-images-in-visual-studio"></a>Сведения о просмотре и диагностике контейнеров и изображений в Visual Studio

Вы можете видеть, что происходит в контейнерах, в которых размещается приложение, с помощью окна **Контейнеры**. Если вы привыкли использовать командную строку для просмотра и диагностики контейнеров с помощью команд Docker, имейте в виду, что это окно предоставляет более удобный способ мониторинга контейнеров, не выходя из интегрированной среды разработки Visual Studio.

## <a name="prerequisites"></a>Предварительные требования

- [Docker Desktop](https://hub.docker.com/editions/community/docker-ce-desktop-windows)
- [Visual Studio 2019 версии 16.4 (Предварительная версия 2)](https://visualstudio.microsoft.com/downloads) или выше. Если вы используете более раннюю версию Visual Studio 2019, установите [расширение "Окно контейнеров"](https://aka.ms/vscontainerspreview).

## <a name="view-information-about-your-containers"></a>Просмотр сведений о контейнерах

Окно **Контейнеры** открывается автоматически при запуске контейнерного проекта .NET. Чтобы в любой момент просмотреть контейнеры в Visual Studio, нажмите клавиши **CTRL**+**Q** для активации поля поиска Visual Studio, введите `Containers` и выберите первый элемент. Окно **Контейнеры** можно также открыть из главного меню. В меню выберите **Вид** > **Другие окна** > **Контейнеры**.  

![Снимок экрана: вкладка "Среда" в окне "Контейнеры"](media/view-and-diagnose-containers/container-window.png)

В левой части приводится список контейнеров на локальном компьютере. Контейнеры, связанные с решением, отображаются в разделе **Контейнеры решения**. Справа имеется область с вкладками **Среда**, **Порты**, **Журналы** и **Файлы**.

> [!TIP]
> Вы можете легко настроить место закрепления окна **Контейнеры** в Visual Studio. См. статью [Настройка макетов окон в Visual Studio](../ide/customizing-window-layouts-in-visual-studio.md). Когда работает отладчик, окно **Контейнеры** по умолчанию закреплено рядом с окном **контрольных значений**.

## <a name="view-environment-variables"></a>Просмотр переменных среды

На вкладке **Среда** приводятся переменные среды, имеющиеся в контейнере. Для контейнера приложения эти переменные можно задать различными способами, например в Dockerfile, в ENV-файле или с помощью параметра -e при запуске контейнера с помощью команды Docker.

![Снимок экрана: вкладка "Среда" в окне "Контейнеры"](media/view-and-diagnose-containers/containers-environment-vars.png)

> [!NOTE]
> Изменения, вносимые в переменные среды, не отражаются в режиме реального времени. Кроме того, на этой вкладке приводятся системные переменные среды для контейнера, но не локальные пользовательские переменные среды для приложения.

## <a name="view-port-mappings"></a>Просмотр сопоставлений портов

На вкладке **Порты** можно проверить сопоставления портов, действующие для контейнера.

![Снимок экрана: вкладка "Порты" в окне "Контейнеры"](media/view-and-diagnose-containers/containers-ports.png)

Хорошо известные порты доступны по ссылкам, поэтому если через порт доступно содержимое, то можно щелкнуть ссылку, чтобы открыть браузер.

## <a name="view-logs"></a>Просмотр журналов

На вкладке **Журналы** приводятся результаты выполнения команды `docker logs`. По умолчанию на ней показаны потоки stdout и stderr для контейнера, но выходные данные можно настроить. Подробные сведения о ведении журналов Docker см. в [этой статье](https://docs.docker.com/config/containers/logging/).  По умолчанию журналы на вкладке **Журналы** выводятся в потоковом режиме, но эту возможность можно отключить, нажав кнопку **Остановить**.

![Снимок экрана: вкладка "Журналы" в окне "Контейнеры"](media/view-and-diagnose-containers/containers-logs.png)

Чтобы очистить журналы, нажмите кнопку **Очистить** на вкладке **Журналы**.  Чтобы получить все журналы, нажмите кнопку **Обновить**.

> [!NOTE]
> Visual Studio автоматически перенаправляет потоки stdout и stderr в окно **Вывод** при запуске без отладки контейнеров Windows, поэтому контейнеры Windows, запущенные из Visual Studio с помощью **Ctrl**+**F5** не будут отображать журналы на этой вкладке; вместо этого используйте окно **Вывод**.

## <a name="view-the-filesystem"></a>Просмотр файловой системы

На вкладке **Файлы** можно просмотреть файловую систему контейнера, включая папку приложения, которая содержит проект.

![Снимок экрана: вкладка "Файлы" в окне "Контейнеры"](media/view-and-diagnose-containers/container-filesystem.png)

Чтобы открыть файл в Visual Studio, перейдите к нему и дважды щелкните его или щелкните файл правой кнопкой мыши и выберите команду **Открыть**. Файлы открываются в Visual Studio в режиме только для чтения.

![Снимок экрана: файл, открытый для просмотра в Visual Studio](media/view-and-diagnose-containers/container-file-open.png)

На вкладке **Файлы** можно просматривать журналы приложения, например журналы IIS, файлы конфигурации и другие файлы содержимого, имеющиеся в файловой системе контейнера.

## <a name="start-stop-and-remove-containers"></a>Запуск, остановка и удаление контейнеров

По умолчанию в окне **Контейнеры** отображаются все контейнеры на компьютере, которыми управляет Docker. С помощью кнопок на панели инструментов можно запускать контейнеры, останавливать их или удалять контейнеры, которые больше не нужны.  При создании или удалении контейнеров список обновляется динамически.

## <a name="open-a-terminal-window-in-a-running-container"></a>Открытие окна терминала в выполняющемся контейнере

В контейнере окно терминала можно открыть (командную строку или интерактивную оболочку), нажав кнопку **Открыть окно терминала** в окне **Контейнер**.

![Снимок экрана "Открыть окно терминала" в окне "Контейнеры"](media/view-and-diagnose-containers/containers-open-terminal-window.png)

Для контейнеров Windows откроется командная строка Windows. Для контейнеров Linux окно можно открыть с помощью оболочки bash.

![Снимок экрана окна bash](media/view-and-diagnose-containers/container-bash-window.png)

Обычно окно терминала открывается за пределами Visual Studio в виде отдельного окна. Если вы хотите интегрировать среду командной строки в среду Visual Studio в качестве плавающего окна средств, вы можете установить [Whack Whack Terminal](https://marketplace.visualstudio.com/items?itemName=DanielGriffen.WhackWhackTerminal).

## <a name="attach-the-debugger-to-a-process"></a>Подключение отладчика к процессу

Вы можете присоединить отладчик к процессу, выполняемому в контейнере, с помощью кнопки **Подключить к процессу** на панели инструментов окна "Контейнеры". При использовании этой кнопки появляется диалоговое окно **Присоединить к процессу**, в котором отображаются доступные процессы, выполняемые в контейнере.  

![Снимок экрана диалогового окна "Подключить к процессу"](media/view-and-diagnose-containers/containers-attach-to-process.jpg)

Вы можете выполнить подключение к управляемым процессам в контейнере. Чтобы найти процесс в другом контейнере, воспользуйтесь кнопкой **Найти** и выберите другой контейнер в диалоговом окне **Выбор контейнера Docker**.

## <a name="viewing-images"></a>Просмотр изображений

Вы также можете просматривать изображения на локальном компьютере, используя вкладку **Изображения** в окне **Контейнеры**. Изображения, извлеченные из внешних репозиториев, группируются в представление в виде дерева. Выберите изображение для просмотра сведений.

Чтобы удалить изображение, щелкните правой кнопкой мыши на изображении в представлении в виде дерева и выберите **Удалить**, или выберите изображение и нажмите кнопку **Удалить** на панели инструментов.

## <a name="next-steps"></a>Следующие шаги

Узнайте больше об инструментах для работы с контейнерами в Visual Studio в [этой обзорной статье](overview.md).

## <a name="see-also"></a>См. также

[Разработка с помощью контейнеров в Visual Studio](/visualstudio/containers)

[Расширения Marketplace для Visual Studio](https://marketplace.visualstudio.com/)
