---
title: Как пометить элементы управления как защищенные Документация Майкрософт
ms.date: 02/02/2017
ms.topic: conceptual
dev_langs:
- VB
- CSharp
helpviewer_keywords:
- SharePoint development in Visual Studio, safe controls
- SharePoint development in Visual Studio, advanced packaging tools
- safe controls [SharePoint development in Visual Studio]
author: John-Hart
ms.author: johnhart
manager: jillfra
ms.workload:
- office
ms.openlocfilehash: 232fef4908a6168d550d510a0d753fe8e39db02b
ms.sourcegitcommit: dcbb876a5dd598f2538e62e1eabd4dc98595b53a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/28/2019
ms.locfileid: "72982731"
---
# <a name="how-to-mark-controls-as-safe-controls"></a>Как пометить элементы управления как защищенные
  Для обеспечения безопасности SharePoint различает веб-элементы управления, защищенные от внедрения скриптов и веб-элементов управления, которые не являются. Защищенные элементы управления или бездоверенные *элементы управления*могут быть доступны ненадежным пользователям. Элементы управления можно пометить как защищенные в свойстве элементов безопасного управления элемента проекта SharePoint или в **конструкторе пакетов** при добавлении сборки в пакет. Дополнительные сведения см. в разделе

- [Параметры файла Web. config изменяют](/previous-versions/office/developer/sharepoint-2007/bb802890(v=office.12)) и [регистрируют сборку веб-части в качестве безопасного элемента управления](/previous-versions/office/developer/sharepoint2003/dd587360(v=office.11)).

> [!IMPORTANT]
> Эти процедуры предназначены для наглядных целей. Пометьте элементы управления безопасными только в том случае, если вы уверены, что они безопасны.

## <a name="marking-safe-controls-in-the-safe-control-entries-property"></a>Пометка безопасного элемента управления в свойстве записей безопасного управления

#### <a name="to-mark-controls-as-safe-or-unsafe-in-the-safe-control-entries-property"></a>Пометка элементов управления как безнадежных или ненадежных в свойстве записей безопасного управления

1. Создание решения SharePoint с помощью визуального проекта веб-части.

2. Добавьте в веб-часть два элемента управления: текстовое поле и кнопку. Оставьте имена в значения по умолчанию TextBox1 и Button1 соответственно.

3. Добавьте две записи в свойство **записей безопасного управления** веб-части. Для этого нажмите кнопку с многоточием (![ASP.net Mobile Designer](../sharepoint/media/mwellipsis.gif "Эллипс конструктора ASP.NET для мобильных устройств")) рядом со свойством **записи безопасного элемента управления** в окне **Свойства** .

     Откроется диалоговое окно **записи безопасного элемента управления** .

4. В диалоговом окне **записи Безэлементного управления** нажмите кнопку **Добавить** дважды, чтобы добавить две записи безэлементного управления в область **элементы** : один для кнопки, а другой для текстового поля.

5. Выберите первую запись безопасного элемента управления, а затем измените значение свойства " **Сейф** " на **false**, для свойства " **имя типа** " на " **Button1**", а для свойства " **безопасность для скрипта** " — **значение false**.

     Этот шаг определяет элемент управления "Кнопка" как ненадежный элемент управления.

6. Выберите вторую запись безопасного элемента управления в списке. Оставьте значение свойства « **Сейф** » равным **true** и задайте для свойства **имя типа** значение **textBox1** , а для свойства безопасного — для **скрипта** — **значение true**.

     Элемент управления "текстовое поле" теперь помечен как элемент управления, который является надежным для внедрения скрипта.

7. Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно.

## <a name="marking-safe-controls-in-the-package-designer"></a>Пометка безнадежных элементов управления в конструкторе пакетов

#### <a name="to-mark-controls-as-safe-or-unsafe-in-the-package-designer"></a>Пометка элементов управления как безнадежных или ненадежных в конструкторе пакетов

1. Создание решения SharePoint с помощью визуального проекта веб-части.

2. Добавьте в веб-часть два элемента управления: текстовое поле и кнопку. Оставьте имена в значения по умолчанию TextBox1 и Button1 соответственно.

     Запишите пространство имен элемента управления, так как оно используется позже.

3. В строке меню выберите **build** > **Build Solution** , чтобы построить проект.

4. Создайте другое решение SharePoint.

5. В **Обозреватель решений**откройте контекстное меню для файла *Package. Package* и выберите **Открыть** , чтобы открыть **конструктор пакетов**.

6. В **конструкторе пакетов**перейдите на вкладку **Дополнительно** .

7. В разделе **дополнительные сборки**нажмите кнопку **Добавить** , а затем выберите **Добавить существующую сборку** из списка.

8. В диалоговом окне **Добавление существующей сборки** нажмите кнопку с многоточием (![ASP.net Mobile Designer (эллипс](../sharepoint/media/mwellipsis.gif "Эллипс конструктора ASP.NET для мобильных устройств"))) рядом с пунктом **Исходный путь**.

9. Выберите сборку из решения SharePoint, созданного на шаге 1, а затем нажмите кнопку **Открыть** .

10. В этом примере оставьте параметру **цели развертывания** значение GlobalAssemblyCache.

     Этот шаг приводит к развертыванию сборки в глобальном системном кэше сборок (GAC). Если требуется, чтобы сборка была развернута в папке веб-приложения (bin), выберите этот параметр. Дополнительные сведения см. [в разделе deploying веб-части in SharePoint Foundation](/previous-versions/office/developer/sharepoint-2010/cc768621(v=office.14)).

11. В поле **надежные элементы управления** нажмите **кнопку Добавить новый элемент** .

12. Введите значения свойств из следующей таблицы.

    |Имя свойства|значения|
    |-------------------|-----------|
    |Пространство имен|Полное пространство имен для элемента управления, например **BdcModelProject1. VisualWebPart1**.|
    |Имя типа|Button1|
    |Assembly Name|Строгое имя сборки, например Microsoft. Office. SharePoint. Клиентекстенсионс, Version = 14.0.0.0, Culture = Neutral, PublicKeyToken = 71e9bce111e9429c.|
    |Потокобезопасной|Снимите флажок **Безопасность** .|
    |Безопасность в отношении сценария|Не устанавливайте флажок защитить **от скрипта** .|

    > [!NOTE]
    > Значение **имени сборки** для сборок, добавленных с помощью вкладки " **Дополнительно** " **конструктора пакетов** , не может быть маркером, оно должно быть сборкой со строгим именем. Дополнительные сведения см. в разделе [Создание и использование сборок со строгими именами](/previous-versions/dotnet/netframework-4.0/xwb8f617(v=vs.100)).

13. Нажмите клавишу **Tab** , чтобы создать еще одну запись безопасного элемента управления.

14. **Нажмите кнопку Щелкните здесь, чтобы снова добавить новый элемент** .

15. Введите значения свойств из следующей таблицы.

    |Имя свойства|значения|
    |-------------------|-----------|
    |Пространство имен|Полное пространство имен для элемента управления, например **BdcModelProject1. VisualWebPart1**.|
    |Имя типа|TextBox1|
    |Assembly Name|Строгое имя сборки, например Microsoft. Office. SharePoint. Клиентекстенсионс, Version = 14.0.0.0, Culture = Neutral, PublicKeyToken = 71e9bce111e9429c.|
    |Потокобезопасной|Установите флажок " **Безопасность** ".|
    |Безопасность в отношении сценария|Установите флажок защитить **от скрипта** .|

16. Нажмите клавишу **Tab** , а затем нажмите кнопку **ОК** , чтобы закрыть диалоговое окно.

## <a name="see-also"></a>См. также
- [Предоставление сведений об упаковке и развертывании в элементах проекта](../sharepoint/providing-packaging-and-deployment-information-in-project-items.md)
- [Упаковка и развертывание решений SharePoint](../sharepoint/packaging-and-deploying-sharepoint-solutions.md)
