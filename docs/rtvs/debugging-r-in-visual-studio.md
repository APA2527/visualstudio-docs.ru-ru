---
title: Отладка кода R
description: Visual Studio предоставляет полный набор функций отладки для R, в том числе точки останова, присоединение, стек вызовов и отслеживание состояния переменных.
ms.date: 01/24/2018
ms.topic: conceptual
author: kraigb
ms.author: kraigb
manager: jillfra
ms.workload:
- data-science
ms.openlocfilehash: 98dcbaaeb6f330cda3a14cf8c32afe403b50aa85
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62939287"
---
# <a name="debug-r-in-visual-studio"></a>Отладка R в Visual Studio

Инструменты R для Visual Studio (RTVS) интегрируются с полным набором функций отладки Visual Studio (см. раздел [Отладка в Visual Studio](/visualstudio/debugger/debugger-feature-tour)). Эта поддержка включает точки останова, присоединение к выполняемым процессам, проверку и контроль значений переменных и проверку стека вызовов. В этой статье рассматриваются эти аспекты отладки, уникальные для R и RTVS.

Запуск отладчика для запуска R в проекте R осуществляется так же, как и для проектов других типов: выберите **Отладка** > **Начать отладку**, нажмите клавишу **F5** или выберите **Source startup file** (Исходный файл запуска) на панели инструментов отладки:

![Кнопка запуска отладчика для R](media/debugger-start-button.png)

Чтобы изменить файл запуска, щелкните правой кнопкой мыши файл в обозревателе решений и выберите **Назначить запускаемым скриптом R**.

Во всех случаях при запуске отладчика в интерактивном окне файл используется в качестве источника, то есть загружается и запускается там, на что указывают выходные данные интерактивного окна:

```output
> rtvs::debug_source("c:/proj/rproject1/rproject1/script.R")
Sourcing: c:\proj\rproject1\rproject1\script.R
Sourcing: c:\proj\rproject1\rproject1\Settings.R
```

Обратите внимание, что для использования скрипта в качестве источника используется функция`rtvs::debug_source`. Это необходимо, так как RTVS требуется изменить код в процессе его подготовки к отладке. Когда используется любая команда RTVS для использования в качестве источника и подключен отладчик, Visual Studio автоматически использует `rtvs::debug_source`.

Можно также вручную подключить отладчик из интерактивного окна, выбрав команду **Инструменты R** > **Сеанс** > **Подключить отладчик**, команду **Отладка** > **Подключить к интерактивному окну R** или команду **Подключить отладчик** на панели инструментов в интерактивном окне. После этого нужно использовать файлы, подлежащие отладке, в качестве источника. Если вы хотите вручную применить файлы в качестве источника, воспользуйтесь `rtvs::debug_source`, а не стандартной командой `source` в R.

Такое подключение между отладчиком и интерактивным окном упрощает такие операции, как вызов (и отладка) функции с различными значениями параметров. Например, предположим, что в файле источника имеется следующая функция (что означает, что она загружается в сеанс):

```R
add <- function(x, y) {
    return(x + y)
}
```

Затем необходимо задать точку останова в операторе `return`. Теперь в интерактивном окне видно, что при вводе `add(4,5)` отладчик останавливается в точке останова.

## <a name="environment-browser-in-the-interactive-window"></a>Обозреватель среды в интерактивном окне

При остановке в отладчике также выполняется остановка на запросе обозревателя среды в [интерактивном окне](interactive-repl-for-r-in-visual-studio.md). Запрос отображается как `Browse[n]>`, где n является числом.

Обозреватель среды поддерживает ряд специальных команд.

| Команда | Описание |
| --- | --- |
| n | Далее: выполняется следующий оператор в файле кода (то же, что и шаг с обходом). |
| s | Шаг с заходом: выполняются следующий оператор в файле кода и заход в область функции, если следующий оператор является вызовом функции. |
| f | Готово: выполняется остальная часть текущей области функции, а управление возвращается вызывающему (то же, что и шаг с выходом). |
| c, cont | Продолжение: запуск программы до следующей точки останова. |
| Q | Выход: завершение сеанса отладки. |
| где | Отображение стека: отображение стека вызовов в интерактивном окне. |
| help | Отображение справки: отображение списка доступных команд в интерактивном окне. |
| &lt;expr&gt; | Вычисление выражения в *expr*. |

![Обозреватель среды в интерактивном окне](media/debugger-environment-browser.png)
