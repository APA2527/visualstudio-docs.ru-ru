---
title: Руководство по началу работы с R
description: Пошаговое руководство по использованию R в Visual Studio, в том числе сведения о создании проектов, работе с интерактивным окном, редактировании кода и отладке.
ms.date: 06/29/2017
ms.topic: tutorial
author: kraigb
ms.author: kraigb
manager: jillfra
ms.workload:
- data-science
ms.openlocfilehash: df46a2731f9923d85a16082f96c44947099db592
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63000461"
---
# <a name="get-started-with-r-tools-for-visual-studio"></a>Начало работы с Инструментами R для Visual Studio

После установки инструментов R для Visual Studio (RTVS) (см. раздел [Установка](installing-r-tools-for-visual-studio.md)) можно сразу же приступить к работе с этими инструментами.

## <a name="create-an-r-project"></a>Создание проекта R

1. Запустите Visual Studio.
1. Выберите **Файл** > **Создать** > **Проект** (**CTRL**+**SHIFT**+**N**)
1. В разделе **Шаблоны** > **R** выберите "Проект R", присвойте ему имя и расположение, а затем нажмите кнопку **ОК**.

   ![Диалоговое окно создания проекта R в Visual Studio (RTVS в VS2017)](media/getting-started-01-new-project.png)

1. После создания проекта вы увидите следующие окна:

    - Справа находится обозреватель решений Visual Studio, где ваш проект отображается внутри *решения*. (Решения могут содержать несколько проектов различных типов; подробнее см. в разделе [Проекты](r-projects-in-visual-studio.md).)
    - В левом верхнем углу находится новый R-файл (`script.R`), в котором можно редактировать исходный код, используя все доступные средства редактирования Visual Studio.
    - В левом нижнем углу находится **интерактивное окно R**, в котором можно в интерактивном режиме разрабатывать и тестировать код.

> [!Note]
> **Интерактивное окно R** можно использовать даже в том случае, если не открыт ни один проект, и даже тогда, когда загружен проект другого типа. Для этого достаточно в любое время выбрать **Инструменты R** > **Окна** > **Интерактивное окно R**.

## <a name="explore-the-interactive-window-and-intellisense"></a>Изучение интерактивного окна и IntelliSense

1. Проверьте, что интерактивное окно работает. Для этого введите `3 + 4` и нажмите клавишу **ВВОД**, чтобы просмотреть результат:

    ![Интерактивное окно R в Visual Studio 2017 (VS2017)](media/getting-started-02-interactive1.png)

1. Введите нечто более сложное, `ds <- c(1.5, 6.7, 8.9) * 1:12`, а затем введите `ds` для просмотра результата.

    ![Дополнительный интерактивный пример для R в Visual Studio](media/getting-started-03-interactive2.png)

1. Введите `mean(ds)`, однако обратите внимание, что по мере ввода `m` или `me` Visual Studio IntelliSense предложит варианты автозавершения. Выбрав в списке требуемый вариант завершения, нажмите клавишу **TAB** для вставки. Выбор можно изменить с помощью мыши или клавиш со стрелками.

    ![Отображение IntelliSense при вводе кода](media/getting-started-04-intellisense1.png)

1. Завершив ввод `mean`, введите открывающую скобку `(` и обратите внимание на то, как IntelliSense предлагает встроенную справку по функции.

    ![IntelliSense — отображение справки для функции](media/getting-started-05-intellisense2.png)

1. Завершите строку `mean(ds)` и нажмите клавишу ВВОД, чтобы просмотреть результат (`[1] 39.51667`).

1. Интерактивное окно интегрировано со справкой, поэтому при вводе, например, `?mean`, отображается справка по этой функции в окне **Справка R** в Visual Studio. Дополнительные сведения см. в разделе [Справка в инструментах R для Visual Studio](getting-started-help.md).

    ![Окно справки R в Visual Studio](media/getting-started-06-help.png)

1. Некоторые команды, такие как `plot(1:100)`, приводят к открытию нового окна в Visual Studio, если выходные данные невозможно отобразить непосредственно в интерактивном окне.

    ![Отображение графика в Visual Studio](media/getting-started-07-plot-window.png)

В интерактивном окне также можно просмотреть журнал, загрузить и сохранить рабочие области, подключить к отладчику, а также взаимодействовать с файлами исходного кода вместо выполнения операций копирования и вставки. Подробные сведения см. в разделе [Работа с интерактивным окном R](interactive-repl-for-r-in-visual-studio.md).

## <a name="experience-code-editing-features"></a>Изучение функций редактирования кода

Краткое знакомство с интерактивным окном позволяет определить основные возможности редактирования, такие как IntelliSense, которые также работают и в редакторе кода. Если ввести тот же код, что и раньше, появляются та же функция автозавершения и запросы IntelliSense, однако без выходных данных.

Написание кода в файле *R* позволяет посмотреть сразу весь код, а также упрощает внесение небольших изменений и ускоряет последующий просмотр результата путем запуска кода в интерактивном окне. В проекте может быть любое количество файлов. Если код находится в файле, его также можно по шагам запустить в отладчике (как показано ниже в этой статье). Эти возможности очень полезны при разработке вычислительных алгоритмов и написании кода для управления одним или несколькими наборами данных, особенно в том случае, когда нужно проверить все промежуточные результаты.

Например, ниже представлен порядок создания небольшого кода для изучения [теоремы центрального предела](https://en.wikipedia.org/wiki/Central_limit_theorem) (Wikipedia). (Этот пример взят из *руководства по R*, разработанного Полом Титором [Paul Teetor].)

1. В редакторе `script.R` введите следующий код.

    ```R
    mu <- 50
    stddev <- 1
    N <- 10000
    pop <- rnorm(N, mean = mu, sd = stddev)
    plot(density(pop), main = "Population Density", xlab = "X", ylab = "")
    ```

1. Чтобы быстро просмотреть результаты, выделите весь код (**CTRL**+**A**), а затем нажмите клавиши **CTRL**+**ВВОД** или щелкните правой кнопкой мыши и выберите команду **Выполнение в интерактивном режиме**. Весь выделенный код запускается в интерактивном окне, как если бы он был введен напрямую, и отображается результат в окне графиков.

    ![Отображение графика в Visual Studio](media/getting-started-08-plot1.png)

1. Чтобы выполнить строку к интерактивном окне, просто в любой момент нажмите клавиши **CTRL**+**ВВОД**.

> [!Tip]
> Изучите схему внесения изменений и нажатия клавиш **CTRL**+**ВВОД** (или выделения всего содержимого с помощью клавиш **CTRL**+**A** и нажатия клавиш **CTRL**+**ВВОД**) для быстрого выполнения кода. Это намного быстрее, чем использовать мышь для выполнения тех же операций.
>
> Кроме того, можно перетащить и окно построений за пределы Visual Studio и поместить его в любом месте на экране. После этого можно масштабировать окно графиков до желаемых размеров и сохранить его в качестве изображения или PDF-файла.

1. Добавьте несколько дополнительных строк кода, чтобы добавить второй график.

    ```R
    n <- 30
    samp.means <- rnorm(N, mean = mu, sd = stddev / sqrt(n))
    lines(density(samp.means))
    ```

1. Нажмите клавиши **CTRL**+**A** и **CTRL**+**ВВОД** еще раз для выполнения кода, дающего следующий результат:

    ![Обновленный двойной график в Visual Studio](media/getting-started-09-plot2.png)

1. Проблема в том, что первый график определяет вертикальное масштабирование, поэтому второй график (с `lines`) не помещается. Чтобы устранить эту проблему, нужно задать параметр `ylim` в вызове `plot`, но для того, чтобы выполнить это правильно, нам требуется добавить код для вычисления максимального вертикального значения. Выполнять это построчно в интерактивном окне довольно неудобно, так как требуется изменить порядок кода, чтобы использовать `samp.means` перед вызовом `plot`. Однако в файле кода мы можем с легкостью внести соответствующие изменения.

    ```R
    mu <- 50
    stddev <- 1
    N <- 10000
    pop <- rnorm(N, mean = mu, sd = stddev)

    n <- 30
    samp.means <- rnorm(N, mean = mu, sd = stddev / sqrt(n))
    max.samp.means <- max(density(samp.means)$y)

    plot(density(pop), main = "Population Density",
        ylim = c(0, max.samp.means),
        xlab = "X", ylab = "")
    lines(density(samp.means))
    ```

1. Нажмите клавиши **CTRL**+**A** и **CTRL**+**ВВОД** еще раз, чтобы просмотреть результат.

    ![Обновленный двойной график в Visual Studio в правильном масштабе](media/getting-started-10-plot3.png)

Возможности редактора, конечно, гораздо больше. Дополнительные сведения см. в разделах [Редактирование кода R](editing-r-code-in-visual-studio.md), [IntelliSense](r-intellisense.md) и [Фрагменты кода](code-snippets-for-r.md).

## <a name="debug-your-code"></a>Отладка кода

Одним из ключевых преимуществ Visual Studio является его пользовательский интерфейс отладки. В основе RTVS лежит как раз это ключевое преимущество. Кроме того, пользователям предлагается абсолютно новый интерфейс, например [обозреватель переменных](variable-explorer.md). Нас интересует отладка.

1. Для начала нужно сбросить текущую рабочую область, чтобы очистить все, что было сделано до настоящего момента. Для этого выберите команду **Инструменты R** > **Сеанс** > **Сбросить**. По умолчанию все, что делается в интерактивном окне, относится к текущему сеансу, который затем также используется в отладчике. Сброс сеанса позволяет гарантировать, что сеанс отладки запускается без существовавших ранее данных. Команда **Сбросить** не повлияет на исходный файл *script.R*, так как управление им и его сохранение выполняются за пределами рабочей области.

1. В файле *script.R*, созданном в предыдущем разделе, задайте точку останова в строке, которая начинается с `pop <-`, поместив курсор в эту строку и нажав клавишу **F9** или выбрав команду **Отладка** > **Точка останова**. Можно также просто щелкнуть в левом поле (или внутренней области) напротив этой строки, после чего появляется красная точка останова:

    ![Задание точки останова в редакторе](media/getting-started-11-debug1.png)

1. Запустите отладчик с кодом в *script.R* с помощью кнопки **Файл запуска исходного кода** на панели инструментов, команды **Отладка** > **Файл запуска исходного кода** или с помощью клавиши **F5**. Visual Studio переходит в режим отладки и запускает выполнение кода. Выполнение будет остановлено на строке, где задана точка останова.

    ![Остановка выполнения в точке останова в отладчике Visual Studio](media/getting-started-12-debug2.png)

1. Во время отладки Visual Studio позволяет выполнять код построчно в пошаговом режиме. Вы можете выполнять для функций шаг с заходом, шаг с обходом или шаг с выходом для контекста вызова. Все эти, а также другие команды находятся в меню **Отладка**, в контекстном меню в редакторе, а также на панели инструментов отладки.

    ![Панель инструментов отладки в Visual Studio](media/getting-started-13-debug3.png)

1. При остановке в точке останова можно проверить значения переменных. В Visual Studio найдите окно **Видимые** и выберите вкладку **Локальные** внизу окна. В окне **Локальные** показаны локальные переменные в текущей точке программы. При остановке в заданной ранее точке останова можно увидеть, что переменная `pop` еще не определена. Теперь воспользуйтесь командой **Отладка** > **Шаг с обходом** (**F10**), чтобы отобразить значение для `pop`:

    ![Окно "Локальные" в Visual Studio](media/getting-started-14-debug4.png)

1. Для проверки переменных в различных областях, включая глобальную область и области пакетов, используйте окно [Обозреватель переменных](variable-explorer.md). В обозревателе переменных можно также переключиться в табличное представление с возможностью сортировки столбцов и экспорта данных в CSV-файл.

    ![Расширенное представление обозревателя переменных](media/variable-explorer-expanded-results.png)

1. Можно продолжить пошаговое выполнение программы по одной строке или выбрать **Продолжить** (**F5**), чтобы выполнить ее до завершения (или до следующей точки останова).

Дополнительные сведения см. в разделах [Отладка](debugging-r-in-visual-studio.md) и [Обозреватель переменных](variable-explorer.md).

## <a name="next-steps"></a>Следующие шаги

В этом пошаговом руководстве вы ознакомились с основами работы с проектами R с помощью интерактивного окна, редактирования кода и отладки в Visual Studio. Чтобы продолжить изучение возможностей, ознакомьтесь со следующими статьями, а также со статьями, указанными в содержании:

- [Примеры проектов](getting-started-samples.md)
- [Редактирование кода](editing-r-code-in-visual-studio.md)
- [Отладка](debugging-r-in-visual-studio.md)
- [Рабочие области](r-workspaces-in-visual-studio.md)
- [Визуализация данных](visualizing-data-with-r-in-visual-studio.md)
