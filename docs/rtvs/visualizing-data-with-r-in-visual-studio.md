---
title: Визуализация данных с помощью R
description: Практическое руководство по построению графиков данных из программ R в Visual Studio с помощью окон графиков.
ms.date: 06/29/2017
ms.topic: conceptual
author: kraigb
ms.author: kraigb
manager: jillfra
ms.workload:
- data-science
ms.openlocfilehash: a48ad7800f8ea2b992e848cfbf6b4fdac99b2062
ms.sourcegitcommit: cc841df335d1d22d281871fe41e74238d2fc52a6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2020
ms.locfileid: "62811188"
---
# <a name="create-visual-data-plots-with-r"></a>Создание визуальных графиков данных с помощью R

Построение графиков является ключевой частью рабочего процесса обработки и анализа данных. В инструментах R для Visual Studio (RTVS) все действия по построению графиков сосредоточены в одном или нескольких окнах графиков, которые призваны повысить эффективность работы специалистов по анализу и обработке данных с помощью этого ключевого действия.

![Изображение с параметрами построения графиков](media/plotting-hero-image.png)

|   |   |
|---|---|
| ![Значок кинокамеры для видео](../install/media/video-icon.png "Просмотр видео") | [Посмотрите видео (youtube.com)](https://www.youtube.com/watch?v=ZTbKmz5RSgY) о создании графиков с помощью R (2 мин 2 с). |

## <a name="the-plot-window"></a>Окно графиков

В окне находится ряд графиков, каждый из которых генерируется командой `plot`. Например, команда `plot(1:100)` позволяет создать новое окно графиков, если его еще нет.

![Линейный график от 1 до 100](media/plotting-1-to-100.png)

Говоря техническим языком, команды `plot` в R преобразуют свои выходные данные и передают их на графическое устройство R; окна графиков выполняют отрисовку контента графического устройства , поэтому каждому окну графиков присваивается отдельный номер устройства.

Окна графиков не зависят от проектов Visual Studio и остаются открытыми по мере загрузки и закрытия проектов.

Для создания графика используется "активное" окно графиков, а предыдущий график сохраняется в журнале графиков (см. подраздел [Журнал графиков](#plot-history)). Например, введите `plot(100:1)`, и первый график заменяется направленной вниз прямой линией.

Как и во всех других окнах Visual Studio, в окне графиков поддерживаются настраиваемые макеты (см. раздел [Настройка макетов окон в Visual Studio](../ide/customizing-window-layouts-in-visual-studio.md)). Окно графиков можно закрепить в любом месте окна Visual Studio, изменить его размер в рамках этого окна, а также извлечь его из окна Visual Studio и изменить его размер.

При изменении размеров окна графиков график всегда перестраивается для достижения наилучшего качества изображения. Обычно изменить размер требуется перед экспортом графика в файл или в буфер обмена с помощью команд, описанных в следующем разделе.

## <a name="plot-window-commands"></a>Команды для работы с окном графиков

На панели инструментов окна графиков находятся соответствующие команды, большинство из которых также доступны в меню **Инструменты R** > **Графики**.

| Кнопка | Get-Help | Description |
| --- | --- | --- |
| ![Кнопка "Создать окно графиков"](media/plotting-toolbar-01-new-plot-window.png) | Создать окно графиков | Создание отдельного окна графиков со своим собственным журналом. См. подраздел [Несколько окон графиков](#multiple-plot-windows). |
| ![Кнопка "Активировать окно графиков"](media/plotting-toolbar-02-activate-plot-window.png) | Активировать окно графиков | Выбор текущего окна графиков в качестве активного окна, чтобы последующие команды `plot` отображались в нем. См. подраздел [Несколько окон графиков](#multiple-plot-windows). См. подраздел [Несколько окон графиков](#multiple-plot-windows). |
| ![Кнопка "Окно журнала графиков"](media/plotting-toolbar-03-plot-history.png) | Окно журнала графиков | Открытие окна, в котором все графики в журнале отображаются в виде эскизов. См. подраздел [Журнал графиков](#plot-history). |
| ![Кнопки перехода по журналу графиков](media/plotting-toolbar-04-plot-history-arrows.png) | Предыдущий/следующий график |  Переход к предыдущему или следующему графику в журнале. Для перехода можно также использовать клавиши CTRL + ALT + F11 (предыдущий график) и CTRL + ALT + F12 (следующий график). См. подраздел [Журнал графиков](#plot-history). |
| ![Кнопка "Сохранить как изображение"](media/plotting-toolbar-05-save-as-image.png)| Сохранить как изображение | Запрос на ввод имени файла и сохранение текущего графика (содержимого окна по его размеру) в качестве файла изображения. Доступные форматы: `.png`, `.jpg`, `.bmp` и `.tif`. |
| ![Кнопка "Сохранить как PDF"](media/plotting-toolbar-06-save-as-pdf.png)| Сохранить как PDF | Сохранение текущего графика в PDF-файл по размерам текущего окна. При изменении масштаба PDF-файла график перестраивается. |
| ![Кнопка "Сохранить как точечный рисунок"](media/plotting-toolbar-07-copy-as-bitmap.png)| Сохранить как точечный рисунок | Копирование графика в буфер обмена в виде растрового изображения по размерам текущего окна. |
| ![Кнопка "Сохранить как метафайл"](media/plotting-toolbar-08-copy-as-metafile.png)| Сохранить как метафайл | Копирование графика в буфер обмена в виде [метафайла Windows](https://en.wikipedia.org/wiki/Windows_Metafile) (Wikipedia). |
| ![Кнопка "Удалить график"](media/plotting-toolbar-09-remove-plot.png)| Удалить график | Удаление текущего графика из журнала. |
| ![Кнопка "Очистить все графики"](media/plotting-toolbar-10-clear-all-plots.png) | Очистить все графики | Удаление всех графиков из журнала (с запросом подтверждения). |

## <a name="multiple-plot-windows"></a>Несколько окон графиков

Так как во время обработки и анализа данных часто приходится работать с несколькими графиками, построенными на основе различных наборов данных, RTVS позволяет создать любое количество отдельных окон графиков. Затем их можно упорядочить любым требуемым образом как внутри окна Visual Studio, так и за его пределами. (Общие сведения о закреплении и изменении размеров окон см. в разделе [Настройка макетов окон в Visual Studio](../ide/customizing-window-layouts-in-visual-studio.md).)

Создать окно графика можно с помощью соответствующей кнопки на панели инструментов или воспользовавшись командой **Инструменты R** > **Графики** > **Создать окно графиков**. Новое окно графиков становится *активным* окном, где выполняется построение новых графиков. Чтобы изменить активное окно, переключитесь на нужное окно и нажмите на панели инструментов кнопку **Активировать окно графиков** или воспользуйтесь командой **Инструменты R** > **Графики** > **Активировать окно графиков**.

Графики представляют собой независимые объекты. Это означает, что их можно копировать или перемещать между окнами графиков с помощью функции перетаскивания мышью или с помощью команд **Копировать**, **Вырезать** и **Вставить** в контекстном меню и в меню **Правка**.

По умолчанию при перетаскивании мышью выполняется копирование графика; для перемещения при перетаскивании следует удерживать нажатой клавишу **SHIFT**.

## <a name="plot-history"></a>Журнал графиков

Команды построения сохраняются в журнале графиков для каждого окна, обеспечивая сохранность всех операций построения в течение сеанса работы с графиком. Чтобы просмотреть журнал, используйте кнопки со стрелками на панели инструментов окна графиков или клавиши **CTRL**+**ALT**+**F11** и **CTRL**+**ALT**+**F12**. Можно также удалить отдельные графики или очистить все графики в окне, воспользовавшись для этого кнопками на панели инструментов или командами меню **Инструменты R** > **Графики**.

Для просмотра всей коллекции графиков откройте окно журнала графиков с помощью соответствующей кнопки на панели инструментов или команды **Инструменты R** > **Графики** > **Окно журнала графиков**.
Будет представлен список эскизов графиков, которые были построены в этом окне, сгруппированных по разным окнам графиков (или по устройствам). С помощью кнопок масштабирования на панели инструментов можно изменить размеры эскизов.

![Окно журнала графиков](media/plotting-plot-history-window.png)

Чтобы открыть график в соответствующем окне, дважды щелкните нужный график, выберите его, а затем нажмите на панели инструментов кнопку **Показать график** или щелкните правой кнопкой мыши и выберите команду **Показать график**. Можно также выбрать отдельный график и скопировать, вырезать или удалить его, выбрав соответствующую команду в контекстном меню или в меню **Правка**.

Время существования журнала графиков во всех окнах привязано ко времени существования сеанса работы с интерактивным окном R. Если сбросить сеанс R или выйти и перезапустить Visual Studio, журнал графиков сбрасывается.

## <a name="programmatically-manipulate-plot-windows"></a>Программное управление окнами графиков

Управлять окнами графиков можно программным способом с помощью кода R, используя номера устройств для идентификации отдельных окон графиков.

- `dev.list()`: перечисление всех графических устройств в текущем сеансе R.
- `dev.new()`: создание нового графического устройства (нового окна графиков).
- `dev.set(<device number>)`: задание активного графического устройства.
- `dev.off()`: удаление активного устройства.
