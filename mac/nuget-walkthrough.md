---
title: Включение пакета NuGet в проект
description: Этот документ посвящен включению пакета NuGet в проект с помощью Visual Studio для Mac. Он описывает поиск и скачивание пакета, а также содержит общие сведения о функциях интеграции IDE.
author: jmatthiesen
ms.author: jomatthi
ms.date: 11/01/2019
ms.assetid: 5C800815-0B13-4B27-B017-95FCEF1A0EA2
ms.custom: conceptual
ms.openlocfilehash: 4200f466c079247d3efa036f4f7cca2fd2d6b5d2
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "74127239"
---
# <a name="install-and-manage-nuget-packages-in-visual-studio-for-mac"></a>Установка пакетов NuGet и управление ими в Visual Studio для Mac

С помощью пользовательского интерфейса диспетчера пакетов NuGet в Visual Studio для Mac вы можете легко устанавливать, удалять и обновлять пакеты NuGet в проектах и решениях. Вы можете искать и добавлять пакеты в проекты .NET Core, ASP.NET Core и Xamarin.

Эта статья описывает, как включить пакет NuGet в проект, и показывает цепочку инструментов, которая делает этот процесс простым и непрерывным.

Вводные сведения об использовании NuGet в Visual Studio для Mac см. в [кратком руководстве по установке и использованию пакета в Visual Studio для Mac](/nuget/quickstart/install-and-use-a-package-in-visual-studio-mac).

## <a name="find-and-install-a-package"></a>Поиск и установка пакета

1. Открыв проект в Visual Studio для Mac, щелкните правой кнопкой мыши папку **Зависимости** (папку **Пакеты** для проекта Xamarin) на **Панели решения** и выберите пункт **Управление пакетами NuGet...**.

    ![Действие для добавления пакета NuGet в контекстном меню](media/nuget-walkthrough-packages-menu.png)

2. Откроется окно **Управление пакетами NuGet**. Чтобы выполнять поиск в центральном репозитории пакетов NuGet, убедитесь, что в раскрывающемся списке "Источник" в левом верхнем углу диалогового окна указано `nuget.org`.

    ![Список пакетов NuGet](media/nuget-walkthrough-add-packages1.png)

3. Используйте поле поиска в правом верхнем углу для поиска определенного пакета, например `EntityFramework`. Если вы нашли пакет, который хотите использовать, выберите его и нажмите кнопку **Добавить пакет**, чтобы начать установку.

    ![Добавление пакета NuGet для EntityFramework](media/nuget-walkthrough-add-packages2.png)

4. После скачивания пакет добавляется в проект. Решение будет отличаться в зависимости от типа редактируемого проекта.

    **Проекты Xamarin**
    * Узел **Ссылки** содержит список всех сборок, входящих в пакет NuGet.
    * Узел **Пакеты** отображает все скачанные вами пакеты NuGet. Вы можете обновить или удалить пакет в этом списке.
    
    **Проекты .NET Core**

    * В узле **Зависимости > NuGet** приводятся все скачанные вами пакеты NuGet. Вы можете обновить или удалить пакет в этом списке.

## <a name="using-nuget-packages"></a>Использование пакетов NuGet

После добавления пакета NuGet и обновления ссылок проекта вы можете программировать использование API точно так же, как и любых других ссылок проекта.

Убедитесь, что добавили все необходимые директивы `using` в начало файла:

```csharp
using Newtonsoft.Json;
```

<a name="Package_Updates" class="injected"></a>

## <a name="updating-packages"></a>Обновление пакетов

Пакеты можно обновить одновременно, щелкнув правой кнопкой мыши узел **Зависимости** (узел **Пакеты** для проектов Xamarin), или по отдельности. При выходе новой версии пакета NuGet появляется значок обновления в виде ![стрелки вверх с кружком](media/nuget-walkthrough-update-icon.png).

Щелкните правой кнопкой мыши узел **Зависимости**, чтобы открыть контекстное меню, и выберите команду **Обновить**, чтобы обновить все пакеты.

![Меню "Пакеты"](media/nuget-walkthrough-packages-menu-update.png)

* **Управление пакетами NuGet** — открывает окно для добавления дополнительных пакетов в проект.
* **Обновить** — проверяет исходный сервер для каждого пакета и скачивает более новые версии.
* **Восстановить** — скачивает все отсутствующие пакеты (не обновляя существующие пакеты до более новых версий).

Параметры "Обновить" и "Восстановить" также доступны на уровне решения и затрагивают все проекты в решении.

### <a name="locating-outdated-packages"></a>Поиск устаревших пакетов
На панели решения можно просмотреть текущую установленную версию пакета и щелкнуть пакет правой кнопкой мыши, чтобы обновить его.

![Меню пакета с командами обновления и удаления](media/nuget-walkthrough-PackageMenu.png)

Если доступна новая версия пакета, рядом с его именем появляется уведомление и вы можете решить, нужно ли его обновить.

![Уведомление о наличии новой версии пакета](media/nuget-walkthrough-package-update-available.png)

В открывшемся меню есть две команды:

* **Обновить** — проверяет исходный сервер и скачивает более новую версию (при ее наличии).
* **Удалить** — удаляет пакет из этого проекта и соответствующие сборки из ссылок проекта.

## <a name="manage-packages-for-the-solution"></a>Управление пакетами для решения

Управление пакетами для решения — это удобный способ одновременно работать с несколькими проектами.

1. Щелкните решение правой кнопкой мыши и выберите пункт **Управление пакетами NuGet…**.

    ![Управление пакетами NuGet для решения](media/nuget-walkthrough-manage-packages-solution.png)

1. При управлении пакетами для решения пользовательский интерфейс позволяет выбрать проекты, затрагиваемые операциями.

    ![Выбор проекта при управлении пакетами для решения](media/nuget-walkthrough-add-to-projects.png)

### <a name="consolidate-tab"></a>Вкладка "Консолидация"

При работе в решении с несколькими проектами рекомендуется, чтобы в каждом проекте использовалась одна и та же версия соответствующего пакета NuGet. В целях упрощения управления пакетами в решении в пользовательском интерфейсе диспетчера пакетов Visual Studio для Mac доступна вкладка **Консолидация**. С ее помощью можно увидеть, в каких проектах в решении используются пакеты с разными номерами версий.

![Вкладка "Консолидация" пользовательского интерфейса диспетчера пакетов](media/nuget-walkthrough-consolidate-tab.png)

В этом примере в проекте NuGetDemo используется Microsoft.EntityFrameworkCore 2.20, тогда как в проекте NuGetDemo.Shared используется Microsoft.EntityFrameworkCore 2.2.6. Для консолидации версий пакета сделайте следующее:

- Выберите проекты для обновления в списке проектов.
- В списке **Новая версия** выберите версию, которая будет использоваться во всех этих проектах, например Microsoft.EntityFrameworkCore 3.0.0.
- Нажмите кнопку **Консолидировать пакет**.

Диспетчер пакетов устанавливает выбранную версию пакета во все выбранные проекты. После этого пакет больше не будет отображаться на вкладке **Консолидация**.

## <a name="adding-package-sources"></a>Добавление источников пакетов

Пакеты, доступные для установки, изначально получаются из nuget.org. Однако в Visual Studio для Mac можно добавить другие расположения пакетов. Это может быть удобно для тестирования собственных пакетов NuGet, находящихся на стадии разработки, или при использовании закрытого сервера NuGet внутри вашей компании или организации.

В Visual Studio для Mac перейдите в раздел **Visual Studio > Параметры > NuGet > Источники**, чтобы просмотреть и изменить список источников пакетов. Обратите внимание, что источником может быть удаленный сервер (обозначенный URL-адресом) или локальный каталог.

![Источники пакетов](media/nuget-walkthrough-PackageSource.png)

Нажмите кнопку **Добавить**, чтобы задать новый источник. Введите понятное имя и URL-адрес (или путь к файлу) для источника пакета. Если источником является защищенный веб-сервер, введите также имя пользователя и пароль, в противном случае оставьте эти поля пустыми:

![Добавление источников пакетов](media/nuget-walkthrough-PackageSource2.png)

После этого при поиске пакетов можно выбрать различные источники:

![Добавление источников пакетов](media/nuget-walkthrough-PackageSource3.png)

## <a name="version-control"></a>Управление версиями

В документации по NuGet рассматривается [использование NuGet без фиксации пакетов в системе управления версиями](/nuget/consume-packages/packages-and-source-control). Если вы предпочитаете не хранить двоичные файлы и неиспользуемые сведения в системе управления версиями, можно настроить Visual Studio для Mac для автоматического восстановления пакетов с сервера. Это означает, что, когда разработчик впервые получает проект из системы управления версиями, Visual Studio для Mac автоматически скачивает и устанавливает необходимые пакеты.

![Автоматическое восстановление пакетов](media/nuget-walkthrough-AutoRestore.png)

Сведения о том, как исключить каталог `packages` из отслеживания, см. в документации по используемой системе управления версиями.

## <a name="related-video"></a>Связанные видео

> [!Video https://channel9.msdn.com/Shows/Visual-Studio-Toolbox/Visual-Studio-for-Mac-Using-NuGet/player]

## <a name="see-also"></a>См. также

* [Установка и использование пакета в Visual Studio (в Windows)](/nuget/quickstart/install-and-use-a-package-in-visual-studio)
