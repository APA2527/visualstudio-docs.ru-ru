---
title: Приложений ASP.NET Core в Visual Studio для Mac
description: В этой статье описывается начало работы с ASP.NET в Visual Studio для Mac, включая установку и создание нового проекта.
author: asb3993
ms.author: amburns
ms.date: 05/30/2019
ms.assetid: 771C2F8E-46BC-4280-AFE8-ED9D5C7790CE
ms.openlocfilehash: fb70966dd24c4d22d473b552297a60ddebdce106
ms.sourcegitcommit: cc5fd59e5dc99181601b7db8b28d7f8a83a36bab
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/11/2019
ms.locfileid: "66836183"
---
# <a name="building-aspnet-core-applications-in-visual-studio-for-mac"></a>Приложений ASP.NET Core в Visual Studio для Mac 


ASP.NET Core — фреймворк с открытым исходным кодом и кросс платформенную для создания современных облачных подключения к Интернету приложений, таких как веб-приложений и служб, приложений IoT и серверные части мобильных приложений. Приложения ASP.NET Core можно запускать [.NET Core](https://www.microsoft.com/net/core/platform) или в средах выполнения .NET Framework. Она была разработана для предоставления платформу разработки, оптимизированную для приложений, развернутых в облаке или локальным. Он состоит из модульных компонентов с минимальными издержками, что позволяет сохранить гибкость при построении решений. Приложения ASP.NET Core можно разрабатывать и запускать на различных платформах, включая Windows, Mac и Linux. Код ASP.NET Core открыт для общего доступа в [GitHub](https://github.com/aspnet/home).

В этой лабораторной работе вы создадите и изучение приложения ASP.NET Core с помощью Visual Studio для Mac.

## <a name="objectives"></a>Цели


> [!div class="checklist"]
> * Создание веб-приложения ASP.NET Core
> * Изучите ASP.NET Core размещения, конфигурации и по промежуточного слоя модели
> * Отладка веб-приложение ASP.NET Core

## <a name="prerequisites"></a>Предварительные требования

- [Visual Studio для Mac](https://www.visualstudio.com/vs/visual-studio-mac)

## <a name="intended-audience"></a>Целевая аудитория

Это лабораторное занятие предназначено для разработчиков, знакомых с C#, несмотря на то, что не требуется обширный опыт.

## <a name="task-1-creating-a-new-aspnet-core-application"></a>Задача 1. Создание нового приложения ASP.NET Core

1. Запустите **Visual Studio для Mac**.

2. Выберите **Файл > Новое решение**.

3. Выберите **.NET Core > приложение** категории и **веб-приложения ASP.NET Core (C#)** шаблона. Нажмите кнопку **Далее**.

    ![](media/netcore-image1.png)

4. Введите имя **«CoreLab»** и нажмите кнопку **создать** для создания проекта. Может занять некоторое время заполнению.

    ![](media/netcore-image2.png)

## <a name="task-2-touring-the-solution"></a>Задача 2. Touring решения

1. Шаблон по умолчанию создаст решение с одним проектом ASP.NET Core с именем **CoreLab**. Разверните узел проекта, чтобы увидеть его содержимое.

    ![](media/netcore-image3.png)

2. Этот проект следует парадигма model-view-controller (MVC) для предоставления очистить деления обязанностей между данных (модели), представления (views) и функциональные возможности (контроллеров). Откройте файл **HomeController.cs** в папке **Controllers**.

    ![](media/netcore-image4.png)

3. **HomeController** класс по соглашению дескрипторы все входящие запросы, которые начинаются с **/Home**. **Индекс** метод обрабатывает запросы к корневому каталогу (как http://site.com/Home) и другие методы обрабатывают запросы на их именованного пути с учетом соглашение, такие как **About()** обработка запросов **http://site.com/Home/About** . Само собой это все настраиваемые. Один заметных является то, что **HomeController** контроллер по умолчанию в новом проекте, так что запросы к корню сайта ( **http://site.com** ) будет проходить через **Index()** из **HomeController** так же, как запросы к **http://site.com/Home** или **http://site.com/Home/Index** .

    ![](media/netcore-image5.png)

4. Проект также имеет **представления** папку, содержащую другие папки, соответствующие каждому контроллеру (а также один для **Shared** представления. Например, файл CSHTML (расширение HTML) представления для пути **/Home/About** будет находиться по пути **Views/Home/About.cshtml**. Откройте этот файл.

    ![](media/netcore-image6.png)

5. Этот файл CSHTML использует синтаксис Razor для отрисовки HTML на основе сочетания стандартных тегов и встроенного кода C#. Дополнительные сведения см. в [электронной документации](https://docs.microsoft.com/aspnet/web-pages/overview/getting-started/introducing-razor-syntax-c).

    ![](media/netcore-image7.png)

6. Решение также содержит **wwwroot** папку, которая будет корневым для веб-сайт. Вы можете поместить статическое содержимое сайта, такое как CSS, изображения и библиотеки JavaScript, непосредственно по путям, по которым оно должно находиться при развертывании сайта.

    ![](media/netcore-image8.png)

7. Имеются также различные файлы конфигурации, которые служат для управления проектом, его пакетами и приложением во время выполнения. Например, [конфигурация](https://docs.microsoft.com/aspnet/core/fundamentals/configuration) приложения по умолчанию хранится в файле **appsettings.json**. Однако можно переопределять некоторые или все эти параметры для той или иной среды, например, предоставив файл **appsettings.Development.json** для среды **разработки**.

    ![](media/netcore-image9.png)

## <a name="task-3-understanding-how-the-application-is-hosted"></a>Задача 3. Основные сведения о том, как приложение размещается

1. Из **обозревателе решений**откройте **Program.cs**. Это загрузчик, который будет выполняться приложение.

    ![](media/netcore-image10.png)

2. Хотя имеется только две строки кода, они существенно. Давайте разобьем их. Во-первых, новый **WebHostBuilder** создается. Приложения ASP.NET Core требуется узел для выполнения. Узел должен реализовывать **IWebHost** интерфейс, который предоставляет доступ к коллекции функций и служб, и **запустить** метод. Узел обычно создается с использованием экземпляра **WebHostBuilder**, который создает и возвращает **WebHost** экземпляра. **WebHost** ссылается на сервер, который будет обрабатывать запросы.

    ![](media/netcore-image11.png)

3. Хотя **WebHostBuilder** отвечает требуется для создания узла, который будет начальной загрузки сервера для приложения, укажите сервер, который реализует **IServer**. По умолчанию, это  **[Kestrel](https://docs.microsoft.com/aspnet/core/fundamentals/servers/kestrel)** , на основе кросс платформенных веб-сервер для ASP.NET Core **libuv**, который является кроссплатформенной библиотеки асинхронных операций ввода-вывода.

    ![](media/netcore-image12.png)

4. Затем устанавливается корень содержимого сервера. Определяет, где он ищет файлы содержимого, например файлы представлений MVC. Корневой каталог содержимого по умолчанию — папка, из которой выполняется приложение.

    ![](media/netcore-image13.png)

5. Если приложение должно работать с веб-сервер Internet Information Services (IIS), **UseIISIntegration** метод должен вызываться в процессе создания узла. Что это не настроить сервер, например **UseKestrel** does. Чтобы использовать IIS с ASP.NET Core, необходимо указать **UseKestrel** и **UseIISIntegration**. **Kestrel** предназначен для запуска прокси-сервер и не следует развертывать непосредственно с выходом в Интернет. **UseIISIntegration** задает IIS в качестве обратного прокси-сервера, но применимо только в том случае, при запуске на компьютерах с IIS. Если вы развернете приложение для Windows, оставьте его в. В противном случае не помешает.

    ![](media/netcore-image14.png)

6. Рекомендуется очистки для разделения Загрузка параметров из приложения начальной загрузки. Чтобы сделать это, легко **UseStartup** вызывается, чтобы указать, что **запуска** класс будет вызываться для загрузки параметров и других задач запуска, например Вставка по промежуточного слоя в конвейере HTTP. У вас может быть несколько **UseStartup** вызовы в предположении, что каждый из них перезаписывает предыдущие параметры, при необходимости.

    ![](media/netcore-image15.png)

7. Последний шаг в создании **IWebHost** заключается в вызове **построения**.

    ![](media/netcore-image16.png)

8. Хотя **IWebHost** необходимые классы для реализации без блокировки **запустить**, проекты ASP.NET Core имеет метод расширения вызывается **запуска** , который служит оболочкой  **Запуск** с периодами блокирования кода, поэтому не нужно вручную запретить немедленно выход из метода.

    ![](media/netcore-image17.png)

## <a name="task-4-running-and-debugging-the-application"></a>Задача 4. Выполнение и отладка приложения

1. В **обозревателе решений**, щелкните правой кнопкой мыши **CoreLab** узел проекта и выберите **параметры**.

    ![](media/netcore-image18.png)

2. **Параметры проекта** диалогового окна есть все, что необходимо настроить способ построения и выполняется приложение. Выберите **запуска > настройки > по умолчанию** узел на левой панели.

3. Проверьте **выполнить во внешней консоли** и снимите флажок **приостановить вывод на консоль**. Обычно не будет видимым консоли резидентного приложения, но вместо этого будет записывать ее результаты **вывода** панели. В целях этой лаборатории мы покажем его в отдельном окне, несмотря на то, что вам не нужно, во время обычной разработке.

4. Нажмите кнопку **ОК**.

    ![](media/netcore-image19.png)

5. Нажмите клавишу **F5**, чтобы выполнить сборку приложения и запустить его. Кроме того, можно выбрать **запуска > Начать отладку**.

6. Visual Studio для Mac запустит два окна. Первый — окно консоли, позволяющую получить представление о резидентной серверное приложение.

    ![](media/netcore-image20.png)

7. Второй — окно браузера, типичные для тестирования на сайте. Как обозреватель знает, это приложение можно разместить где угодно. Нажмите кнопку **о** для перехода на эту страницу.

    ![](media/netcore-image21.png)

8. Помимо прочего страница отображает некоторый текст, задайте в контроллере.

    ![](media/netcore-image22.png)

9. Сохранить как windows, вернитесь в Visual Studio для Mac. Откройте файл **Controllers/HomeController.cs**, если он еще не открыт.

    ![](media/netcore-image23.png)

10. Установите точку останова в первой строке метода **About**. Это можно сделать, щелкнув в поле или устанавливает курсор в строку и нажав клавишу **F9**. В этой строке задаются данные в коллекции **ViewData**, которые отображаются на CSHTML-странице по пути **Views/Home/About.cshtml**.

    ![](media/netcore-image24.png)

11. Вернитесь в браузер и обновите о странице. При этом начинается в точке останова в Visual Studio для Mac.

12. Наведите указатель мыши **ViewData** члена, чтобы просмотреть его данные. Вы также можете развернуть его дочерних элементов, чтобы увидеть вложенные данные.

    ![](media/netcore-image25.png)

13. Удалите точку останова в приложении, выполнив те же действия, что и для ее добавления.

14. Откройте файл **Views/Home/About.cshtml**.

15. Замените слово **additional** на **changed** и сохраните файл.

    ![](media/netcore-image26.png)

16. Нажмите клавишу **Продолжить** кнопку, чтобы продолжить выполнение.

    ![](media/netcore-image27.png)

17. Вернитесь в окно браузера, чтобы увидеть новый текст. Это изменение можно сделать в любое время и не требовала точку останова отладчика. Обновите браузер, если вы не видите эти изменения отражались немедленно.

    ![](media/netcore-image28.png)

18. Закройте консоль окон и приложений обозревателя тестов. Это остановит, а также отладки.

## <a name="task-5-application-startup-configuration"></a>Задача 5. Конфигурация запуска приложения

1. Из **обозревателе решений**откройте **Startup.cs**. Вы можете заметить некоторые красные волнистые линии изначально, так как пакеты NuGet восстанавливаются в фоновом режиме и создает полную картину зависимостей проекта компилятора Roslyn.

    ![](media/netcore-image29.png)

2. Найдите **запуска** метод. В этом разделе определяет начальную настройку для приложения и месте плотно упакованы. Давайте разберемся.

    ![](media/netcore-image30.png)

3. Метод начинается путем инициализации **ConfigurationBuilder** и задание его базовый путь.

    ![](media/netcore-image31.png)

4. Затем он загружает обязательный **appsettings.json** файла.

    ![](media/netcore-image32.png)

5. После этого он пытается загрузить конкретной среды **appsettings.json** файл, который нужно переопределить существующие параметры. Например, это заданного **appsettings. Development.JSON** файл, используемый для этой среды. Дополнительные сведения о конфигурации в ASP.NET Core, ознакомьтесь с [документы](https://docs.microsoft.com/aspnet/core/fundamentals/configuration).

    ![](media/netcore-image34.png)

6. Наконец построитель конфигурации добавляются переменные среды и конфигурации построен и задать для использования.

    ![](media/netcore-image35.png)

## <a name="task-6-inserting-application-middleware"></a>Задача 6. Вставка приложения по промежуточного слоя

1. Найдите **Настройка** метод в **запуска** класса. Это здесь настраивается по промежуточного слоя, чтобы его можно вставить в конвейере HTTP и используется для обработки каждого запроса к серверу. Хотя этот метод вызывается только один раз, содержимое методы (такие как **UseStaticFiles**) могут выполняться при каждом запросе.

    ![](media/netcore-image36.png)

2. Можно также добавить дополнительные по промежуточного слоя, который выполняется как часть конвейера. Добавьте приведенный ниже код после **приложения. UseStaticFiles** для автоматического добавления **X-Test** заголовок для каждого исходящего ответа. Технология IntelliSense поможет выполнить код при вводе.

    ```csharp
    app.Use(async (context, next) =>
    {
        context.Response.Headers.Add("X-Test", new[] { "Test value" });
        await next();
    });
    ```

3. Нажмите клавишу **F5** для сборки и запуска проекта.

4. Можно использовать браузер для посмотрите заголовки, чтобы убедиться, что они добавляются. Приведенные ниже инструкции предназначены для Safari, но то же самое можно сделать [Chrome](https://stackoverflow.com/questions/4423061/view-http-headers-in-google-chrome) или [Firefox](https://stackoverflow.com/questions/33974595/in-firefox-how-do-i-see-http-request-headers-where-in-web-console).

5. После загрузки сайта браузер **Safari > предпочтения**.

6. На **Дополнительно** вкладке **Показать меню разработки в строке меню** и закрыть диалоговое окно.

    ![](media/netcore-image37.png)

7. Выберите **разрабатывать > Показать ресурсы страницы**.

8. Обновите окно браузера для средств разработчика, открываемые могут отслеживать и анализировать трафик и содержимое.

9. Localhost HTML-страницы к просмотру на сервере будет элемента, выбранного по умолчанию.

    ![](media/netcore-image38.png)

10. Разверните **боковой панели сведений о**.

    ![](media/netcore-image39.png)

11. Прокрутите до нижней части боковой панели в заголовке ответа, ранее добавили в коде см. в разделе.

    ![](media/netcore-image40.png)

12. Закройте окно браузера и консоль при выполнении условия.

## <a name="summary"></a>Сводка

В этой лабораторной работе вы узнали, как приступить к разработке приложений ASP.NET Core с помощью Visual Studio для Mac. Если вы хотите изучить Разработка более полные приложения базы данных фильмов, см. в разделе [начало работы с ASP.NET Core MVC](https://docs.microsoft.com/aspnet/core/tutorials/first-mvc-app/start-mvc) руководства.
