---
title: Основы создания игр с Unity в Visual Studio для Mac
description: Начало работы с Unity в Visual Studio для Mac
author: asb3993
ms.author: amburns
ms.date: 05/20/2019
ms.topic: article
ms.technology: vs-ide-general
ms.assetid: D07FA43B-9D18-4DFA-8343-CD538FAD84DB
ms.openlocfilehash: 8f14d21468336dba220a76ad8978f136d50f96f1
ms.sourcegitcommit: cc5fd59e5dc99181601b7db8b28d7f8a83a36bab
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/11/2019
ms.locfileid: "66836163"
---
# <a name="getting-started-building-games-with-unity-in-visual-studio-for-mac"></a>Основы создания игр с Unity в Visual Studio для Mac 

Unity — это система для создания игр, которая позволяет разрабатывать игры на C#. В этом пошаговом руководстве показано, как приступить к разработке и отладке игр Unity с помощью Visual Studio для Mac и расширения "Инструменты Visual Studio для Mac для Unity" и среды Unity.

Инструменты Visual Studio для Mac для Unity — это бесплатное расширение, устанавливаемое вместе с Visual Studio для Mac. Оно позволяет разработчикам Unity использовать улучшенную продуктивность Visual Studio для Mac, включая отличную поддержку IntelliSense, функции отладки и другие возможности.

## <a name="objectives"></a>Цели

> [!div class="checklist"]
> * Дополнительные сведения о разработке Unity помощью Visual Studio для Mac

## <a name="prerequisites"></a>Предварительные требования

- Visual Studio для Mac ([https://www.visualstudio.com/vs/mac](https://www.visualstudio.com/vs/visual-studio-mac))
- Unity 5.6.1 Personal Edition или более поздней версии ([https://store.unity.com](https://store.unity.com/), требуется учетная запись unity.com)

## <a name="intended-audience"></a>Целевая аудитория

Это задание предназначено для разработчиков, знакомых с C#, но большой опыт не требуется.

## <a name="task-1-creating-a-basic-unity-project"></a>Задача 1. Создание базового проекта Unity

1. Запустите **Unity**. Выполните вход при необходимости.

2. Щелкните **Создать**.

    ![Кнопка "Создать" в Unity](media/unity-image1.png)

3. Задайте **Имя проекта** **UnityLab** и выберите **3D**. Нажмите **Создать проект**.

    ![экран создания проекта](media/unity-image2.png)

4. Вы видите интерфейс Unity по умолчанию. Здесь есть иерархия сцен с игровым объектом слева, трехмерное представление пустой сцены посередине, панель файлов проекта в нижней части и инспектор и службы справа. Конечно, компонентов гораздо больше, но это некоторые наиболее важные из них.

    ![пустой интерфейс unity](media/unity-image3.png)

5. Если вы незнакомы с Unity, вам нужно знать, что в приложении все существует в контексте **сцены**. Файл сцены — это один файл, содержащий все виды метаданных о ресурсах, используемых в проекте, для текущей сцены и ее свойств. При создании пакета приложения для платформы вы получаете коллекцию сцен, а также любой зависящий от платформы код, который вы добавляете. У вас может быть сколько угодно сцен.

6. У новой сцены есть просто камера и направленный свет. Сцене нужна **камера** для картинки и **прослушиватель аудио** для звука. Эти компоненты присоединяются к **GameObject**.

7. Выберите объект **Главная камера** в области **Иерархия**.

    ![объект главной камеры, выделенный на панели иерархии](media/unity-image4.png)

8. Выберите панель **Инспектор** в правой части окна, чтобы просмотреть его свойства. Свойства камеры включают информацию о преобразовании, фон, типа проекции, поле зрения и т. д. Компонент прослушивателя аудио также был добавлен по умолчанию. Фактически он передает звук сцены при помощи виртуального микрофона, подключенного к камере.

    ![панель инспектора](media/unity-image5.png)

9. Выберите объект **Направленный свет**. Он освещает сцену, чтобы компоненты, такие как шейдеры, знали, как отрисовывать объекты.

    ![объект "направленный свет" выделен](media/unity-image6.png)

10. Используйте **инспектор**, чтобы увидеть, что он включает общие свойства освещения, включая тип, цвет, насыщенность, тип тени и т. д.

    ![изучение свойств на панели инспектора](media/unity-image7.png)

11. Важно отметить, что проекты в Unity немного отличаются от проектов в Visual Studio для Mac. На вкладке **Проекты** в нижней части щелкните правой кнопкой мыши папку **Assets** и выберите **Отобразить в средстве поиска**.

    ![контекстное действие "отобразить в средстве поиска"](media/unity-image8.png)

12. Как видите, проекты содержат папки **Assets**, **Library**, **ProjectSettings** и **Temp**. Но в интерфейсе отображается только папка **Assets**. Папка **Library** используется как локальный кэш для импортированных ресурсов; она содержит все метаданные для ресурсов. В папке **ProjectSettings** хранятся параметры, которые можно настроить. Папка **Temp** используется для хранения временных файлов из Mono и Unity во время сборки. Кроме того, есть файл решения, который можно открыть в Visual Studio для Mac (здесь это **UnityLab.sln**).

    ![ресурсы в средстве поиска](media/unity-image9.png)

13. Закройте окно **средства поиска** и вернитесь в **Unity**.

14. Папка **Assets** содержит все ресурсы — изображения, код, звуки и т. д. Сейчас она пуста, но все добавленные в проект файлы сохраняются здесь. Это всегда папка верхнего уровня в **редакторе Unity**. Но вы должны всегда добавлять и удалять файлы через интерфейс Unity (или Visual Studio для Mac), а не через файловую систему напрямую.

    ![папка assets в unity](media/unity-image10.png)

15. **GameObject** является центральным элементом разработки в Unity, так как почти все остальное является производным от этого типа, включая модели, свет, системы частиц и т. д. Добавьте новый объект **Куб** в сцену через меню **GameObject > Трехмерный объект > Куб**.

    ![объект куба на сцене](media/unity-image11.png)

16. Посмотрите свойства нового **GameObject** и увидите, что у него есть имя, тег, слой и преобразование. Эти свойства являются общими для всех элементов **GameObjects**. Кроме того, некоторые компоненты были подключены к **кубу** для необходимых функций, например сетчатый фильтр, прямоугольный коллайдер и отрисовщик.

    ![свойства игрового объекта](media/unity-image12.png)

17. Переименуйте объект **Куб** с именем **Cube** по умолчанию в **Enemy**. Нажмите клавишу **ВВОД**, чтобы сохранить изменения. Это будет куб противника в нашей простой игре.

    ![свойство переименования объекта куба](media/unity-image13.png)

18. Добавьте еще один объект **Куб** на сцену, выполнив те же действия, и назовите его **Player**.

    ![переименование второго объекта куба](media/unity-image14.png)

19. Пометьте объект игрока тегом **Player** (см. раскрывающийся список **Тег** под именем поля). Мы будем использовать его в скрипте противника, чтобы находить игровой объект игрока.

    ![назначение тега объекту игрока](media/unity-image15.png)

20. В представлении **Сцена** переместите объект игрока дальше от объекта противника по оси Z с помощью мыши. Для перемещения по оси Z выберите и перетащите куб за **красную** сторону к **синей** линии. Так как куб существует в трехмерном пространстве, но перетаскивать его можно только по двумерной плоскости, очень важно учитывать ось.

    ![представление сцены с кубом](media/unity-image16.png)

21. Переместите куб вниз и вправо по оси. При этом обновляется свойство **Transform.Position** в **инспекторе**. Поместите куб в положение, как на иллюстрации, чтобы упростить следующие этапы задания.

    ![перемещение одного куба по оси](media/unity-image17.png)

22. Теперь можно добавить код для логики противника, чтобы он преследовал игрока. Щелкните правой кнопкой мыши папку **Assets** на панели **проекта** и выберите **Создать > Скрипт C#** .

    ![контекстное действие "скрипт C#"](media/unity-image18.png)

23. Назовите новый скрипт C# **EnemyAI**.

    ![Скрипт C#](media/unity-image19.png)

24. Чтобы присоединить скрипты к игровым объектам, перетащите только что созданный скрипт на объект **Enemy** в области **Иерархия**. Теперь этот объект будет использовать поведение из скрипта.

    ![добавление скрипта к игровому объекту](media/unity-image20.png)

25. Выберите **Файл > Сохранить сцены**, чтобы сохранить текущую сцену. Назовите ее **MyScene**.

## <a name="task-2-working-with-visual-studio-for-mac-tools-for-unity"></a>Задача 2. Работа с инструментами Visual Studio для Mac для Unity

1. Удобнее всего редактировать код C# в Visual Studio для Mac. Вы можете настроить Unity для использования Visual Studio для Mac в качестве обработчика по умолчанию. Выберите **Unity > Настройки**.

2. Откройте вкладку **Внешние инструменты**. В раскрывающемся меню **Внешний редактор скриптов** выберите **Обзор** и **Приложения/Visual Studio.app**. Если вариант **Visual Studio** уже существует, просто выберите его.

    ![вкладка "внешние инструменты" в меню настроек](media/unity-image21.png)

3. Unity теперь настроен для использования **Visual Studio для Mac** для изменения скриптов. Закройте диалоговое окно **Настройки Unity**.

    ![Visual Studio, выбранный в настройках](media/unity-image22.png)

4. Дважды щелкните **EnemyAI.cs**, чтобы открыть его в **Visual Studio для Mac**.

    ![ресурс Enemy, выбранный в unity](media/unity-image23.png)

5. Решение Visual Studio довольно просто использовать. Оно содержит папку **Assets** (как в **средстве поиска**) и созданный ранее скрипт **EnemyAI.cs**. В более сложных проектах иерархия будет выглядеть не так, как в Unity.

    ![Область решений в Visual Studio для Mac](media/unity-image24.png)

6. Файл **EnemyAI.cs** открыт в редакторе. Исходный скрипт просто содержит заглушки для методов **Start** и **Update**.

7. Замените исходный код противника приведенным ниже кодом.

    ```csharp
    public class EnemyAI : MonoBehaviour
    {
        public float Speed = 50;
        private Transform _playerTransform;
        private Transform _myTransform;
        
        void Start()
        {
            var player = GameObject.FindGameObjectWithTag("Player");
            if (!player)
            {
                Debug.LogError(
                    "Could not find the main player. Ensure it has the player tag set.");
            }
            else
            {
                _playerTransform = player.transform;
            }
            _myTransform = this.transform;
        }

        void Update()
        {
            var moveAmount = Speed * Time.deltaTime;
            _myTransform.position = Vector3.MoveTowards(_myTransform.position,
                _playerTransform.position, moveAmount);

            if (_myTransform.position == _playerTransform.position)
            {
                _myTransform.position = Vector3.back * 10;
            }
        }
    }
    ```

8. Посмотрите на простое поведение противника, которое определяется здесь. В методе **Start** мы получаем ссылку на объект игрока (по его тегу), а также на его **преобразование**. В методе **Update**, который вызывается в каждом кадре, противник приближается к объекту игрока. Ключевые слова и имена используют цветовое кодирование, чтобы было проще понять базу кода в Visual Studio для Mac.

9. Сохраните изменения в скрипте противника в **Visual Studio для Mac**.

## <a name="task-3-debugging-the-unity-project"></a>Задача 3. Отладка проекта Unity

1. Установите точку останова в первой строке кода в методе **Start**. Нажмите кнопку в поле редактора в целевой строке или поместите курсор в строку и нажмите клавишу **F9**.

    ![установка точки останова в visual studio для mac](media/unity-image25.png)

2. Нажмите кнопку **Начать отладку** или клавишу **F5**. Проект будет собран и присоединен к Unity для отладки.

    ![кнопка запуска в visual studio для mac](media/unity-image26.png)

3. Вернитесь к **Unity** и нажмите кнопку **Запуск**, чтобы начать игру.

    ![кнопка запуска в Unity](media/unity-image27.png)

4. Должна быть достигнута точка останова, и теперь можно использовать инструменты отладки Visual Studio для Mac.

    ![достижение точки останова в visual studio для mac](media/unity-image28.png)

5. На панели **Локальные** найдите **этот** указатель, который ссылается на объект **EnemyAI**. Разверните ссылку и убедитесь, что там есть такие связанные элементы, как **скорость**.

    ![панель отладки локальных элементов в visual studio для mac](media/unity-image29.png)

6. Удалите точку останова из метода **Start** так же, как вы его добавили: щелкните в поле или выберите строку и нажмите клавишу **F9**.

    ![достижение точки останова в visual studio для mac](media/unity-image30.png)

7. Нажмите клавишу **F10**, чтобы перейти к первой строке кода, которая находит игровой объект **Player**, используя тег в качестве параметра.

8. Наведите курсор мыши на переменную **player** в окне редактора кода для просмотра связанных элементов. Можно даже развернуть наложение, чтобы просмотреть свойства дочерних элементов.

    ![окно отладки в редакторе visual studio для mac](media/unity-image31.png)

9. Нажмите клавишу **F5** или кнопку **Запуск**, чтобы продолжить выполнение. Вернитесь к Unity и посмотрите, как куб противника постепенно приближается к кубу игрока. Отрегулируйте камеру, если этого не видно.

    ![проигрывание сцены в unity](media/unity-image32.png)

10. Вернитесь в **Visual Studio для Mac** и установите точку останова на первой строке метода **Update**. Она должна быть достигнута немедленно.

    ![установка точки останова в visual studio для mac](media/unity-image33.png)

11. Предположим, скорость слишком высока и мы хотим проверить влияние изменения без перезапуска приложения. Найдите переменную **Speed** в окне **Видимые** или **Локальные**, измените ее значение на **10** и нажмите клавишу **ВВОД**.

    ![настройка переменных в окне "локальные"](media/unity-image34.png)

12. Удалите точку останова и нажмите клавишу **F5**, чтобы продолжить выполнение.

13. Вернитесь к **Unity** для просмотра выполняющегося приложения. Теперь куб противника движется в пять раз медленнее.

    ![окно unity с выполняющимся приложением](media/unity-image35.png)

14. Остановите приложение Unity, нажав кнопку **воспроизведения** еще раз.

    ![остановка приложения unity](media/unity-image36.png)

15. Вернитесь в **Visual Studio для Mac**. Остановите сеанс отладки, нажав кнопку **Остановить**.

    ![остановка сеанса отладки в Visual Studio для Mac](media/unity-image37.png)

## <a name="task-4-exploring-unity-features-in-visual-studio-for-mac"></a>Задача 4. Изучение функций Unity в Visual Studio для Mac

1. Visual Studio для Mac предоставляет быстрый доступ к документации Unity в редакторе кода. Поместите курсор, например на символе **Vector3** в методе **Update**, и нажмите **⌘ Command + '** .

    ![выбор метода в редакторе visual studio для mac](media/unity-image38.png)

2. Откроется новое окно браузера с документацией по **Vector3**. Закройте окно браузера, когда закончите.

    ![окно браузера с документацией](media/unity-image39.png)

3. Visual Studio для Mac также предоставляет вспомогательные средства для быстрого создания классов поведений Unity. В **обозревателе решений** щелкните правой копкой мыши **Ресурсы** и выберите **Добавить > Новый MonoBehaviour**.

    ![контекстное действие "новый monobehaviour"](media/unity-image40.png)

4. Только что созданный класс предоставляет заглушки для методов **Start** и **Update**. После закрывающей скобки в методе **Update** начните вводить **onmouseup**. Обратите внимание, что при вводе IntelliSense в Visual Studio быстро определит метод, который вы планируете реализовать. Выберите его из списка автозаполнения. Он заполнит заглушку метода, включая все параметры.

    ![intellisense в visual studio для mac](media/unity-image41.png)

5. Внутри метода **OnMouseUp** введите **base**, чтобы просмотреть все доступные для вызова базовые методы. Вы также можете изучить различные перегрузки каждой функции, используя параметр разбиения на страницы в правом верхнем углу всплывающего элемента IntelliSense.

    ![изучение перегрузок visual studio для mac](media/unity-image42.png)

6. Visual Studio для Mac также позволяет легко определять новые шейдеры. В **обозревателе решений** щелкните правой копкой мыши **Ресурсы** и выберите **Добавить > Новый шейдер**.

    ![выбор нового шейдера в visual studio для mac](media/unity-image43.png)

7. Формат файла шейдера содержит полную обработку цвета и шрифта, чтобы его было проще читать и понимать.

    ![выделение синтаксиса](media/unity-image44.png)

8. Вернитесь к **Unity**. Вы увидите, что, поскольку Visual Studio для Mac работает с той же системой проекта, изменения, внесенные в одном месте, автоматически синхронизируются с другим. Теперь можно с легкостью использовать лучший инструмент для этой задачи.

    ![панель ресурсов unity](media/unity-image45.png)

## <a name="summary"></a>Сводка

В этом задании вы узнали, как приступить к созданию игры с Unity и Visual Studio для Mac. Дополнительные сведения о Unity см. в разделе [https://unity3d.com/learn](https://unity3d.com/learn).
